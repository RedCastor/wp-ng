{"version":3,"sources":["unitegallery.js"],"names":["debugLine","html","addRandom","addHtml","output","name","value","Math","random","objLine","jQuery","width","height","currentHtml","show","debugSide","obj","trace","str","console","log","UGFunctions","g_browserPrefix","t","this","g_temp","starTime","arrThemes","isTouchDevice","isRgbaSupported","timeCache","dataCache","lastEventType","lastEventTime","handle","debugVar","z__________FULL_SCREEN___________","toFullscreen","element","fullscreenID","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","exitFullscreen","isFullScreen","document","cancelFullScreen","mozCancelFullScreen","webkitExitFullscreen","msExitFullscreen","addEvent","evnt","elem","func","addEventListener","attachEvent","addFullScreenChangeEvent","destroyFullScreenChangeEvent","unbind","getFullScreenElement","fullscreenElement","mozFullScreenElement","webkitFullscreenElement","msFullscreenElement","fullscreen","mozFullScreen","webkitIsFullScreen","z__________GET_PROPS___________","getBrowserPrefix","arrayOfPrefixes","div","createElement","index","prefix","style","toLowerCase","getImageInsideParentDataByImage","objImage","scaleMode","objPadding","objParent","parent","objOrgSize","getImageOriginalSize","objData","getImageInsideParentData","originalWidth","originalHeight","maxWidth","maxHeight","objOutput","padding_left","padding_right","padding_top","padding_bottom","imageWidth","imageHeight","imageTop","imageLeft","ratio","round","floor","imageRight","imageBottom","getElementCenterPosition","objSize","getElementSize","objSizeParent","parentWidth","parentHeight","undefined","left","top","getElementCenterPoint","includeParent","x","y","getMousePosition","event","pageX","pageY","clientX","clientY","originalEvent","touches","length","elementPos","offset","mouseX","mouseY","getMouseElementPoint","point","newPoint","elementPoint","getElementLocalPoint","htmlImage","Error","naturalWidth","data","newImg","Image","src","complete","naturalHeight","getimageRatio","originalSize","size","isImageFitParent","sizeImage","sizeParent","position","outerHeight","outerWidth","right","bottom","isElementBiggerThenParent","objSizeElement","isPointInsideElement","isMouseXInside","isMouseYInside","getElementRelativePos","pos","elementSize","parentSize","z_________SET_ELEMENT_PROPS_______","zoomImageInsideParent","zoomIn","step","maxZoomRatio","zoomRatio","objOriginalSize","isMouseInside","newHeight","newWidth","panX","panY","newX","newY","panOrientX","panOrientY","pointImg","imgCenterPoint","objScaleData","scaleImageFitParent","expectedZoomRatio","setElementSize","posCenter","placeElement","offsetLeft","offsetTop","isNumeric","objCss","margin","css","placeElementInParentCenter","setElementSizeAndPosition","cloneElementSizeAndPos","objSource","objTarget","isOuter","offsetX","offsetY","placeImageInsideParent","urlImage","escapeDoubleSlash","children","scaleImageCoverParent","pHeight","fitHeight","fitWidth","posy","posx","updateCss","removeAttr","scaleImageByHeight","scaleImageByWidth","scaleImageExactSizeInParent","exactWidth","exactHeight","paddingLeft","paddingRight","paddingTop","paddingBottom","totalWidth","diff","totalHeight","objReturn","showElement","element2","element3","fadeTo","z_________GALLERY_RELATED_FUNCTIONS_______","disableButton","objButton","className","isButtonDisabled","addClass","convertCustomPrefixOptions","objOptions","base","modifiedOptions","each","key","option","indexOf","newKey","replace","enableButton","removeClass","hasClass","z_________MATH_FUNCTIONS_______","normalizeSetting","realMin","realMax","settingMin","settingMax","fixBounds","getNormalizedValue","realValue","getDistance","x1","y1","x2","y2","distance","sqrt","abs","getMiddlePoint","getNumItemsInSpace","spaceSize","itemsSize","gapSize","numItems","getNumItemsInSpaceRound","getSpaceByNumItems","itemSize","space","getItemSizeInSpace","getColX","col","colWidth","colGap","getColByIndex","numCols","getColRowByIndex","row","getIndexByRowCol","getPrevRowSameColIndex","prevIndex","getNextRowSameColIndex","nextIndex","z_________DATA_FUNCTIONS_______","setGlobalData","body","getGlobalData","z_________EVENT_DATA_FUNCTIONS_______","handleScrollTop","storedEventID","getStoredEventData","horPass","vertPass","scrollDir","diffMouseX","diffMouseY","scrollStartY","lastMouseClientY","scrollOrigin","scrollTop","currentScroll","scrollPos","wasVerticalScroll","storeEventData","id","addData","mousePos","time","now","startTime","lastTime","startMouseX","startMouseY","lastMouseX","lastMouseY","startMouseClientY","extend","updateStoredEventData","isVertical","diffMouseClientY","diffTime","startMousePos","lastMousePos","diffMousePos","isApproveStoredEventClick","passedDistanceAbs","clearStoredEventData","z_________CHECK_SUPPORT_FUNCTIONS_______","isCanvasExists","canvas","getContext","isScrollbarExists","hasScrollbar","window","innerWidth","documentElement","clientWidth","createEvent","e","scriptElement","getElementsByTagName","prevColor","color","result","z_________GENERAL_FUNCTIONS_______","checkMinJqueryVersion","version","arrCurrent","fn","jquery","split","arrMin","i","len","numCurrent","parseInt","numMin","getCssSizeParam","sizeParam","convertHexToRGB","hexInput","opacity","hex","r","substring","g","b","timestampToString","stamp","d","Date","getDate","getMonth","getHours","getMinutes","getSeconds","getMilliseconds","getArrTouches","arrTouches","getArrTouchPositions","arrOutput","push","startTimeDebug","showTimeDebug","endTime","Time Passed","initProgressIndicator","type","options","g_objProgress","UGProgressBar","putHidden","UGProgressPie","type_fill","setButtonMobileReady","on","stopPropagation","stopImmediatePropagation","registerTheme","themeName","getArrThemes","isThemeRegistered","theme","inArray","getFirstRegisteredTheme","isTimePassed","handlerName","timeLimit","currentTime","hasOwnProperty","whenContiniousEventOver","onEventOver","clearTimeout","setTimeout","validateClickTouchstartEvent","eventType","returnVal","addClassOnHover","hover","destroyButton","off","setButtonOnClick","onClickFunction","objThis","loadJs","url","addProtocol","location","protocol","tag","firstScriptTag","parentNode","insertBefore","loadCss","setAttribute","appendChild","checkImagesLoaded","objImages","onComplete","onProgress","arrImages","counter","numImages","checkComplete","image","isError","proxyImage","attr","waitForWidth","setInterval","clearInterval","arrayShuffle","arr","j","getObjectLength","object","num","item","normalizePercent","percent","stripTags","text","htmlentitles","z_________END_GENERAL_FUNCTIONS_______","g_ugFunctions","define","amd","exports","module","s","a","h","call","arguments","u","f","fix","detail","wheelDelta","wheelDeltaY","wheelDeltaX","axis","HORIZONTAL_AXIS","deltaY","deltaX","deltaMode","c","m","max","l","deltaFactor","unshift","o","n","dispatch","apply","settings","adjustOldDeltas","documentMode","Array","prototype","slice","fixHooks","mouseHooks","special","mousewheel","setup","onmousewheel","getLineHeight","getPageHeight","teardown","removeEventListener","bind","trigger","unmousewheel","factory","$","require","easing","pow","sin","cos","PI","c1","c2","c3","c4","c5","bounceOut","n1","d1","def","swing","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","easeOutSine","easeInOutSine","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","easeOutCirc","easeInOutCirc","easeInElastic","easeOutElastic","easeInOutElastic","easeInBack","easeOutBack","easeInOutBack","easeInBounce","easeOutBounce","easeInOutBounce","cssHooks","parseFloat","isNaN","mod","_rgba","re","exec","parse","cache","join","transparent","Color","rgba","props","red","idx","green","blue","hsla","hue","saturation","lightness","byte","degrees","p","support","cssText","backgroundColor","alpha","nodeType","_default","to","from","is","_space","pop","transition","blend","map","toRgbaString","toHslaString","toHexString","toString","min","_hsla","empty","hook","set","fx","colorInit","start","end","borderColor","expand","names","aqua","black","fuchsia","gray","lime","maroon","navy","olive","purple","silver","teal","white","yellow","contents","error","mousemove","mlp","find","ismouseover","eq","UGThumbsGeneral","g_objThis","g_gallery","UniteGalleryMain","g_objGallery","g_objects","g_objWrapper","g_arrItems","g_objStrip","g_objParent","g_functions","g_strip","outer_options","events","SETOVERSTYLE","SETNORMALSTYLE","SETSELECTEDSTYLE","PLACEIMAGE","AFTERPLACEIMAGE","IMAGELOADERROR","THUMB_IMAGE_LOADED","g_options","thumb_width","thumb_height","thumb_fixed_size","thumb_resize_by","thumb_border_effect","thumb_border_width","thumb_border_color","thumb_over_border_width","thumb_over_border_color","thumb_selected_border_width","thumb_selected_border_color","thumb_round_corners_radius","thumb_color_overlay_effect","thumb_overlay_color","thumb_overlay_opacity","thumb_overlay_reverse","thumb_image_overlay_effect","thumb_image_overlay_type","thumb_transition_duration","thumb_transition_easing","thumb_show_loader","thumb_loader_type","thumb_wrapper_as_link","thumb_link_newpage","touchEnabled","num_thumbs_checking","customThumbs","funcSetCustomThumbHtml","isEffectBorder","isEffectOverlay","isEffectImage","colorOverlayOpacity","thumbInnerReduce","allowOnResize","g_serviceParams","timeout_thumb_check","thumb_max_check_times","eventSizeChange","init","gallery","customOptions","getObjects","_____________EXTERNAL_SETTERS__________","setHtmlThumbs","getNumItems","imageEffectClass","getImageEffectsClass","objItem","classAddition","zIndex","thumbStyle","htmlThumb","urlLink","link","linkTarget","objThumbWrapper","objThumbImage","loaderClass","append","objImageOverlay","clone","appendTo","_______________SETTERS______________","setThumbSize","objThumb","innerOnly","objCssInner","selectorsString","setThumbBorderEffect","borderWidth","noAnimation","isFakeFullscreen","objBorderOverlay","hide","stop","fadeOut","fadeIn","animateThumb","setThumbColorOverlayEffect","isActive","objOverlay","animationDuration","setThumbImageOverlayEffect","setThumbNormalStyle","fromWhere","isSet","setThumbOverStyle","setThumbSelectedStyle","setItemThumbLoadedError","getItemByThumb","isLoaded","isThumbImageLoaded","setThumbsBorderRadius","border-radius","objThumbCss","animate","duration","queue","redrawThumbStyle","isThumbSelected","placeThumbImage","imageSize","copyPositionToThumbOverlayImage","objImageBW","siblings","_______________GETTERS______________","arrEffects","effect","_______________EVENTS______________","onThumbSizeChange","temp","onMouseOver","objThumbs","onMouseOut","onImageLoaded","isForce","parents","triggerImageLoadedEvent","onThumbImageLoaded","thumbWidth","thumbHeight","thumbRatioByWidth","thumbRatioByHeight","setHtmlProperties","colorRGB","setThumbSelected","setThumbUnselected","setOptions","setThumbInnerReduce","innerReduce","setCustomThumbs","funcSetHtml","arrAlowedEffects","allow_onresize","_____________EXTERNAL_GETTERS__________","getOptions","getNumThumbs","numThumbs","getThumbImage","getThumbByIndex","getThumbs","arrItem","isThumbLoaded","getGlobalThumbSize","_____________EXTERNAL_OTHERS__________","initEvents","destroy","loadThumbsImages","hideThumbs","UGThumbsStrip","g_objStripInner","g_aviaControl","g_touchThumbsControl","g_isVertical","g_thumbs","strip_vertical_type","strip_thumbs_align","strip_space_between_thumbs","strip_thumb_touch_sensetivity","strip_scroll_to_thumb_duration","strip_scroll_to_thumb_easing","strip_control_avia","strip_control_touch","strip_padding_top","strip_padding_bottom","strip_padding_left","strip_padding_right","isRunOnce","is_placed","isNotFixedThumbs","g_sizes","stripSize","stripActiveSize","stripInnerSize","thumbSize","thumbSecondSize","STRIP_MOVE","INNER_SIZE_CHANGE","g_defaultsVertical","setHtml","parent_container","___________GENERAL___________","initStrip","attachThumbsPanel","onAfterSetOptions","thumbsOptions","runStrip","initSizeParams","fixSize","positionThumbs","UGTouchThumbsControl","UGAviaControl","checkControlsEnableDisable","storeStripSize","arrThumbs","firstThumb","thumbsRealWidth","thumbsRealHeight","thumbs_options","setInnerStripSize","innerSize","innerStripSize","objCssStrip","scrollBy","scrollStep","innerPos","getInnerStripPos","finalPos","fixInnerStripLimits","positionInnerStrip","scrollToThumbMin","objThumbPos","getThumbPos","scrollToThumbMax","scrollToThumb","isStripMovingEnabled","objBounds","getThumbsInsideBounds","minPosThumbs","prevThumb","prev","maxPosThumbs","nextThumb","next","scrollToSelectedThumb","selectedItem","getSelectedItem","checkAndRepositionInnerStrip","posFixed","isMovingEndbled","enable","disable","alignInnerStrip","___________EVENTS___________","onThumbClick","isTouchMotionActive","isSignificantPassed","selectItem","onThumbPlaced","onItemChange","clickedThumb","ITEM_CHANGE","____________GETTERS___________","objPos","________EXTERNAL_GENERAL___________","run","isAnimate","objPosition","triggerStripMoveEvent","progress","always","isTouchActive","isItemThumbVisible","thumbPos","posMin","posMax","thumbPosMin","thumbPosMax","isVisible","getInnerStripLimits","maxPos","minPos","distPos","objLimits","scrollForeward","scrollBack","________EXTERNAL_SETTERS___________","setSizeVertical","setSizeHorizontal","innerLeft","setPosition","resize","newSize","________EXTERNAL_GETTERS___________","commonOpitions","getObjThumbs","getSelectedThumb","selectedIndex","getSelectedItemIndex","getSizeAndPosition","getHeight","stripHeight","getWidth","stripWidth","getSizes","isPlaced","isMoveEnabled","isEnabled","g_parent","touch_portion_time","thumb_touch_slowFactor","minDeltaTime","minPath","limitsBreakAddition","returnAnimateSpeed","animationEasing","returnAnimationEasing","touch_active","loop_active","startPos","buttonReleaseTime","lastPos","lastPortionPos","lastDeltaTime","lastDeltaPos","speed","isControlEnabled","objStrip","setServiceParams","getActionVars","passedTime","lastActiveTime","passedDistance","objVars","getMouseOrientPosition","handleStripDrag","path","storeInitTouchValues","pagePos","currentInnerPos","storeTouchPortionData","deltaTime","continueTouchMotion","slowFactor","deltaPos","dir","innerStripPos","newPos","correctPos","doQueue","returnPos","maxStopPos","correctPath","animateSpeed","animateProps","onAnimateProgress","returnAnimateProps","startStripTouchLoop","endStripTouchLoop","onTouchEnd","preventDefault","onTouchStart","onTouchMove","buttons","add","UGPanelsBase","g_panel","g_objPanel","g_objHandle","g_tempArg","g_panelArg","g_objThisArg","g_objPanelArg","panelType","enable_handle","strippanel_enable_handle","gridpanel_enable_handle","UGPanelHandle","isDisabledAtStart","disabledAtStartTimeout","placeElements","placeHandle","SLIDER_ACTION_START","hideHandle","SLIDER_ACTION_END","showHandle","placePanelAnimation","panelDest","functionOnComplete","orientation","placePanelNoAnimation","onPanelSlideFinish","FINISH_MOVE","openPanel","isClosed","OPEN_PANEL","originalPos","closePanel","getClosedPanelDest","CLOSE_PANEL","setClosedState","setOpenedState","objPanelSize","panelWidth","gallerySize","getSize","panelHeight","isPanelClosed","setDisabledAtStart","timeout","g_objHandleTip","g_panelOptions","panel_handle_align","panel_handle_offset","panel_handle_skin","panel","objPanel","panelOptions","gridpanel_handle_align","gridpanel_handle_offset","gridpanel_handle_skin","strippanel_handle_align","strippanel_handle_offset","strippanel_handle_skin","galleryOptions","globalSkin","gallery_skin","getOrientation","classTip","removeHoverState","removeClosedState","onHandleClick","checkAndFixAlign","handleSize","UGStripPanel","g_panelBase","g_objButtonNext","g_objButtonPrev","strippanel_vertical_type","strippanel_padding_top","strippanel_padding_bottom","strippanel_padding_left","strippanel_padding_right","strippanel_enable_buttons","strippanel_buttons_skin","strippanel_padding_buttons","strippanel_buttons_role","strippanel_background_color","g_defaults_vertical","g_defaults_no_buttons","isEventsInited","isFirstRun","initPanel","repeatCustomOptions","getElement","validatePanelBeforeRun","runPanel","setElementsSize","checkSideButtons","setPanelHtml","parentContainer","arrowPrevClass","arrowNextClass","setElementsSize_hor","prevTip","nextTip","buttonWidth","setElementsSize_vert","buttonHeight","placeElements_hor","stripX","placeElements_vert","stripY","__________EVENTS___________","onNextButtonClick","nextItem","onPrevButtonClick","prevItem","limits","onStripMove","isLastItem","isFirstItem","SIZE_CHANGE","gallery_carousel","setOrientation","setWidth","setHeight","__________Functions_From_Base_____","UGGridPanel","g_objGrid","UGThumbsGrid","g_objArrowNext","g_objArrowPrev","gridpanel_vertical_scroll","gridpanel_grid_align","gridpanel_padding_border_top","gridpanel_padding_border_bottom","gridpanel_padding_border_left","gridpanel_padding_border_right","gridpanel_arrows_skin","gridpanel_arrows_align_vert","gridpanel_arrows_padding_vert","gridpanel_arrows_align_hor","gridpanel_arrows_padding_hor","gridpanel_space_between_arrows","gridpanel_arrows_always_on","gridpanel_background_color","g_defaultsHorType","isHorType","arrowsVisible","originalPosX","initGridPanel","validateOrientation","vertical_scroll","grid_panes_direction","objects","processOptions","setArrows","setPanelSize","setHtmlPanel","panelX","getGridMaxHeight","spaceTaken","maxGridHeight","numPanes","getNumPanesEstimationByHeight","arrowsSize","arrowsHeight","getGridMaxWidth","maxGridWidth","getNumPanesEstimationByWidth","arrowsWidth","showArrows","getNumPanes","gridSize","attachPrevPaneButton","attachNextPaneButton","______PLACE_ELEMENTS___________","getGridPaddingLeft","gridPanelLeft","placeElements_noarrows","gridY","gridPaddingY","gridElement","placeElementsVert_arrows","prevArrowY","nextArrowY","nextArrowPaddingY","objArrowSize","objGridSize","gridpanel_arrows_padding_vert_vert","placeElementsVert","placeElementsHor_arrows","arrowsY","prevArrowPadding","arrowsPaddingY","nextArrowPadding","elementsHeight","remainHeight","placeElementsHor","placeElementsHorType_arrows","gridX","prevArrowX","nextArrowX","placeElementHorType_noarrows","placeElementsHorType","gridMaxHeight","setMaxHeight","gridMaxWidth","setMaxWidth","g_objInner","g_tilesDesign","UGTileDesign","grid_num_cols","grid_min_cols","grid_num_rows","grid_space_between_cols","grid_space_between_rows","grid_space_between_mobile","grid_transition_duration","grid_transition_easing","grid_carousel","grid_padding","grid_vertical_scroll_ondrag","PANE_CHANGE","isHorizontal","isMaxHeight","isMaxWidth","gridHeight","gridWidth","innerHeight","arrPanes","currentPane","numThumbsInPane","isNavigationVertical","touchActive","startScrollPos","isFirstTimeRun","isTilesMode","tileMaxWidth","tileMaxHeight","spaceBetweenCols","spaceBetweenRows","__________GENERAL_________","setFixedMode","setApproveClickFunction","isApproveTileClick","options_td","tile_height","tile_width","validateBeforeRun","initGridDynamicSize","isChanged","objTiles","tile","getThumbsSize","objThumbSize","getGlobalTileSize","isMobile","isMobileMode","spaceOld","lastThumbSize","lastThumbWidth","tileWidth","setTileSizeOptions","initSizeParamsHor","thumbsHeight","initSizeParamsVert","thumbsWidth","thumbIndex","paneIndex","getPaneIndexByThumbIndex","gotoPane","positionThumb_hor","baseX","maxx","maxy","endY","endX","positionThumb_vert","paneStartY","endy","paneMaxY","positionThumb_hortype","baseY","gridMaxY","rowsCounter","validateThumbIndex","validatePaneIndex","validateInnerPos","absPos","setInnerPos","getInnerPosObj","animateInnerTo","animateToCurrentPane","__________GETTERS_________","getInnerSize","getPaneSize","getMousePos","getInnerPos","numPane","getPanePosition","startInnerPos","isMovementValidForChange","diffPos","paneSize","breakSize","isApprove","__________EVENTS_______","isScroll","direction","lastPaneSize","isLastPane","nextPane","isFirstPane","prevPane","__________EXTERNAL_GENERAL_________","itemIndex","__________EXTERNAL_API_________","numRows","ceil","getHeightEstimationByWidth","getPaneInfo","pane","total","getPane","nextPaneIndex","prevPaneIndex","attachBullets","objBullets","setActive","BULLET_CLICK","numBullet","getObjTileDesign","UGTiles","g_objTileDesign","g_vars","g_arrNestedGridRow","g_arrNestedItems","tiles_type","tiles_col_width","tiles_align","tiles_exact_width","tiles_space_between_cols","tiles_space_between_cols_mobile","tiles_include_padding","tiles_min_columns","tiles_max_columns","tiles_keep_order","tiles_set_initial_height","tiles_justified_row_height","tiles_justified_space_between","tiles_nested_optimal_tile_width","tiles_nested_col_width","tiles_nested_debug","tiles_enable_transition","THUMB_SIZE_CHANGE","TILES_FIRST_PLACED","ALL_TILES_LOADED","isFixedMode","isTransActive","isTransInited","isAllLoaded","g_nestedWork","nestedOptimalCols","maxColumns","columnsValueToEnableHeightResize","resizeLeftRightToColumn","currentItem","currentGap","optimalTileWidth","maxGridY","modifyOptions","tilesType","setTransition","optionsTile","tile_enable_image_effect","tile_image_effect_reverse","getParentWidth","doBeforeTransition","disableEvents","doAfterTransition_setClasses","doAfterTransition","enableEvents","triggerSizeChangeEventAllTiles","__________COLUMN_TYPE_RELATED_________","fillTilesVars_countWidthByCols","availWidth","fillTilesVars","minCols","maxCols","galleryWidth","addX","maxColHeight","arrPosx","colX","colHeights","getTilesMinCol","numCol","minHeight","placeTile","objTile","toShow","setGalleryHeight","itemHeight","getTileHeightByWidth","realHeight","placeTiles","resizeAllTiles","resizemode","VISIBLE_ELEMENTS","galleryHeight","isOrderedTilePlaceAlowed","getItem","ordered_placed","objPrevItem","placeOrderedTile","isAlowed","resizeTile","nextTile","onSingleImageLoad","runColumnsType","diffWidth","estimateHeight","initNumCols","initWidth","isFirstPlace","__________JUSTIFIED_TYPE_RELATED_________","getJustifiedData","rowHeightOpt","arrWidths","gap","numTiles","tileHeight","finalRowWidth","arrRows","eachRowWidth","rowsWidths","rowsTiles","progressWidth","numRow","arrRowWidths","arrRowHeights","rowWidth","gapWidth","rowHeight","ratioHeights","arrRowTileWidths","actualRowWidth","indexInRow","tileIndex","newTotal","placeJustified","parentWidthAfter","runJustifiedType","__________NESTED_TYPE_RELATED_________","runNestedType","placeNestedImages","fillNestedVars","sizes","setNestedSize","placeNestedImagesCycle","drawNestedImages","dimWidth","dimHeight","objImageSize","getTileImageSize","maxDim","getPresettedRandomByWidth","imgWidth","imgHeight","placeNestedImagesDebug","placeOne","placeNestedImage","drawNestedImage","tileID","rowsValue","column","isGridRowExists","isGridCellTaken","totalFree","getTotalFreeFromPosition","calculateOptimalStretchAndPosition","currentWidth","placeForNextImage","optimalWidth","onlyCurrentImage","resizeToNewWidth","isGridImageAligned","columnInfo","getGridColumnHeight","sideHelper","getGridImageVerticalDifference","columnSizes","resizeToNewHeight","columnResizes","redistributeColumnItems","columnCrosshairs","getColumnCrosshairsCount","disableColumnResizes","sideResizes","getSideResizeInfo","idToResize","sideResizesVal","calcResizeRatio","columnResizesVal","applyResizes","putImageToGridRow","tilesAndSizes","crosshairsCountR","crosshairsCountL","topItem","bottomItem","currentTile","tileLeft","tileTop","tileDimTop","tileDimLeft","newSideHeight","sideSizes","resizeTilesAndSizes","columnWidth","columnHeight","cordX","cordY","tempHeight","tempY","curImage","prevImage","imagesIDs","toReturn","newHeightR","newHeightL","leftID","rightID","array","newDimWidth","newDimHeight","objTilesAndSizes","tempResizes","tempNum","resizeVal","addGridRow","setGridCellValue","Object","__________COMMON_AND_EVENTS_______","onResize","setFixedSizeMode","g_objParentWrapper","g_items","FULL","WRAPPER_ONLY","sizeby","GLOBAL_RATIO","TILE_RATIO","IMAGE_RATIO","CUSTOM","TILE_CLICK","tile_size_by","tile_visible_before_image","tile_enable_background","tile_background_color","tile_enable_border","tile_border_width","tile_border_color","tile_border_radius","tile_enable_outline","tile_outline_color","tile_enable_shadow","tile_shadow_h","tile_shadow_v","tile_shadow_blur","tile_shadow_spread","tile_shadow_color","tile_enable_action","tile_as_link","tile_link_newpage","tile_enable_overlay","tile_overlay_opacity","tile_overlay_color","tile_enable_icons","tile_show_link_icon","tile_videoplay_icon_always_on","tile_space_between_icons","tile_image_effect_type","tile_enable_textpanel","tile_textpanel_source","tile_textpanel_always_on","tile_textpanel_appear_type","tile_textpanel_position","tile_textpanel_offset","g_defaults","tile_textpanel_enable_description","tile_textpanel_bg_opacity","tile_textpanel_padding_top","tile_textpanel_padding_bottom","ratioByHeight","ratioByWidth","funcCustomTileHtml","funcCustomPositionElements","funcParentApproveClick","isSaparateIcons","tileInnerReduce","isTextpanelOutside","hasImageContainer","isVideoplayIconAlwaysOn","isTextPanelHidden","getArrItems","objCustomOptions","customThumbsAdd","setHtmlThumb","thumbOptions","tile_textpanel_align","tile_textpanel_margin","tile_textpanel_desc_style_as_title","modifyOptionsBeforeRender","classImage","imageAlt","title","urlThumb","htmlShadow","htmlAdd","iconPlayClass","toSaparateIcon","objButtonZoom","objButtonLink","imageEffectClassAdd","imageOverlayHtml","objTextPanel","UGTextPanel","textpanelAddClass","appendHTML","panelTitle","panelDesc","description","setTextPlain","textPanelElement","getTextPanelElement","htmlClone","objCloneWrapper","objTextPanelClone","loadTileImage","getTileImage","onPlaceImage","_________________GETTERS________________","getTileOverlayImage","objOverlayImage","getTileOverlay","getTileImageContainer","objImageContainer","getTileImageEffect","objImageEffect","getTextPanel","getTextPanelClone","getTextPanelCloneElement","getTextPanelHeight","getButtonLink","getTileRatio","getItemByTile","getButtonZoom","isOverStyle","isTileClickable","isItemIconAlwaysOn","_________________SETTERS________________","positionElements_images","visibleOnly","imagePosy","textHeight","dontResize","positionElements_textpanel","refresh","textPanelCloneSizeSet","isPosition","positionPanel","positionElements","sizeTile","overlayWidth","overlayHeight","overlayY","gapVert","objTextPanelElement","texPanelSize","sizeZoom","sizeLink","spaceBetween","buttonsWidth","buttonsX","setImageOverlayEffect","setTextpanelEffect","panelSize","endPos","startClass","endClass","posName","setIconsEffect","g_objIconZoom","g_objIconLink","setOverStyle","setNormalStyle","setAllTilesNormalStyle","objTileExcept","not","_________________EVENTS________________","onSizeChange","forcePosition","onMobileClick","onTileClick","tagname","prop","isApproved","onZoomButtonClick","onLinkButtonClick","delegate","thumb","textPanel","funcApprove","resizeMode","triggerSizeChangeEvent","newOptions","newTileWidth","setCustomFunctions","funcCustomHtml","funcPositionElements","_____________EXTERNAL_GETTERS____________","isMouseInsideStrip","strip_finalPos","handle_timeout","isStripMoving","strip_touch_active","moveStripToMousePosition","stopStripMovingLoop","getInnerPosY","innerOffsetTop","innerOffsetBottom","stripOffset","mlineStart","mlineEnd","mLineSize","innerPosY","getInnerPosX","innerOffsetLeft","innerOffsetRight","innerPosX","moveStripStep","is_strip_moving","dpos","startStripMovingLoop","UGSlider","g_objThumbs","g_objSlider","g_objSlide1","g_objSlide2","g_objSlide3","g_objArrowLeft","g_objArrowRight","g_objTouchSlider","g_objZoomSlider","g_objZoomPanel","g_objButtonPlay","g_objButtonFullscreen","g_objBullets","g_objVideoPlayer","UGVideoPlayer","g_optionsPrefix","g_objTextPanel","ITEM_CHANGED","BEFORE_SWITCH_SLIDES","BEFORE_RETURN","AFTER_RETURN","ZOOM_START","ZOOM_END","ZOOMING","ZOOM_CHANGE","START_DRAG","AFTER_DRAG_CHANGE","ACTION_START","ACTION_END","CLICK","TRANSITION_START","TRANSITION_END","AFTER_PUT_IMAGE","IMAGE_MOUSEENTER","IMAGE_MOUSELEAVE","CURRENTSLIDE_LOAD_START","CURRENTSLIDE_LOAD_END","slider_scale_mode","slider_scale_mode_media","slider_scale_mode_fullscreen","slider_item_padding_top","slider_item_padding_bottom","slider_item_padding_left","slider_item_padding_right","slider_background_color","slider_background_opacity","slider_image_padding_top","slider_image_padding_bottom","slider_image_padding_left","slider_image_padding_right","slider_image_border","slider_image_border_width","slider_image_border_color","slider_image_border_radius","slider_image_border_maxratio","slider_image_shadow","slider_video_constantsize","slider_video_constantsize_scalemode","slider_video_constantsize_width","slider_video_constantsize_height","slider_video_padding_top","slider_video_padding_bottom","slider_video_padding_left","slider_video_padding_right","slider_video_enable_closebutton","slider_transition","slider_transition_speed","slider_transition_easing","slider_control_swipe","slider_control_zoom","slider_zoom_mousewheel","slider_vertical_scroll_ondrag","slider_loader_type","slider_loader_color","slider_enable_links","slider_links_newpage","slider_enable_bullets","slider_bullets_skin","slider_bullets_space_between","slider_bullets_align_hor","slider_bullets_align_vert","slider_bullets_offset_hor","slider_bullets_offset_vert","slider_enable_arrows","slider_arrows_skin","slider_arrow_left_align_hor","slider_arrow_left_align_vert","slider_arrow_left_offset_hor","slider_arrow_left_offset_vert","slider_arrow_right_align_hor","slider_arrow_right_align_vert","slider_arrow_right_offset_hor","slider_arrow_right_offset_vert","slider_enable_progress_indicator","slider_progress_indicator_type","slider_progress_indicator_align_hor","slider_progress_indicator_align_vert","slider_progress_indicator_offset_hor","slider_progress_indicator_offset_vert","slider_enable_play_button","slider_play_button_skin","slider_play_button_align_hor","slider_play_button_align_vert","slider_play_button_offset_hor","slider_play_button_offset_vert","slider_play_button_mobilehide","slider_enable_fullscreen_button","slider_fullscreen_button_skin","slider_fullscreen_button_align_hor","slider_fullscreen_button_align_vert","slider_fullscreen_button_offset_hor","slider_fullscreen_button_offset_vert","slider_fullscreen_button_mobilehide","slider_enable_zoom_panel","slider_zoompanel_skin","slider_zoompanel_align_hor","slider_zoompanel_align_vert","slider_zoompanel_offset_hor","slider_zoompanel_offset_vert","slider_zoompanel_mobilehide","slider_controls_always_on","slider_controls_appear_ontap","slider_controls_appear_duration","slider_enable_text_panel","slider_textpanel_always_on","slider_videoplay_button_type","g_defaultsProgressBar","isTextPanelSaparateHover","numPrev","numNext","isControlsVisible","currentControlsMode","__________GENERAL___________","initSlider","objGallery","optionsPrefix","UGBullets","bulletsOptions","bullets_skin","bullets_space_between","UGZoomButtonsPanel","galleryID","getGalleryID","runSlider","bgColor","UGTouchSliderControl","UGZoomSliderControl","video_enable_closebutton","gallery_mousewheel_role","getHtmlSlide","numSlide","classVideoplay","setHtmlSlider","getLoaderClass","finalType","getType","setProgressIndicator","panelElement","positionSlideElements","objSlide","objPreloader","getSlidePreloader","objVideoPlayButton","getSlideVideoPlayButton","hideControls","objProgressElement","sliderWidth","setSize","placeControlsElements","checkMobileModify","zoomPanelElement","positionSlides","slides","getSlidesReference","posX","posY","posXPrev","posXCurrent","posXNext","nextHasItem","prevHasItem","isSlideHasItem","objNextSlide","objPrevSlide","objCurrentSlide","resizeSlideItem","setItemToSlide","showPreloader","hidePreloader","getImageBorderWidth","imageData","totalSize","borderSize","borderRatio","setImageDesign","slideType","scaleImageConstantSize","constantWidth","constantHeight","setImageToSlide","objItemWrapper","currentImage","getScaleMode","getSlideType","getObjImagePadding","checkFillImageSize","objImageData","isBigImageLoaded","isSlideCurrent","onItemBigImageLoaded","removeData","currentIndex","fileName","showErrorMessageReplaceGallery","message","hideTextPanel","animationTime","showTextPanel","isHidden","validateSlideType","getCurrentSlide","__________VIDEO_PLAYER_______","setVideoPlayerPosition","getSlideImage","slideSize","setVideoPlayerConstantSize","videoWidth","videoHeight","videoElement","getObject","__________TRANSITION_______","doTransition","forceTransition","stopSlideAction","transitionFade","transitionSlide","switchSlideNums","currentNum","animating","isAnimating","itemWaiting","posPrev","destX","posNext","transSpeed","transEasing","animateParams","getSlideDirection","placeNabourItems","animateOpacity","completeFunction","noHidePlayer","objCurrentPos","__________CONTROLS_OBJECT_______","modifyForMobile","modifyForDesctop","getControlsObjects","objControl","objControls","checkAndShowControls","showControls","toggleControls","setControlsMode","mode","arg_objItem","role","setItem","onBulletClick","bulletIndex","onClick","isTapEventOccured","onActualClick","currentSlide","isClickable","getCurrentItem","href","open","isCurrentSlideType","isCurrentSlideImageFit","onZoomChange","onMouseEnter","onMouseLeave","objVideoPlayClick","startSlideAction","onVideoPlayerShow","isPlayMode","pausePlaying","onVideoPlayerHide","continuePlaying","onItemImageUpdate","onSlideImageLoaded","objButtonVideoPlay","initSlideEvents","ITEM_IMAGE_UPDATED","setNextButton","setPrevButton","setPlayButton","setFullScreenToggleButton","SHOW","HIDE","isMouseOver","isMouseInsideSlideImage","undelegate","__________GETTERS___________","getSlideByNum","getSlideItem","getNumSlide","isInnerInPlace","posCurrent","inPlaceX","objInnerSize","isAnimated","getCurrentItemIndex","getLastMousePos","currentSlideType","isCurrentSlideLoadingImage","isLoading","forseTransition","isFirstSlide","itemPrev","getPrevItem","itemNext","getNextItem","________EXTERNAL_API___________","isPause","pause","playYoutube","videoid","playVimeo","playHtml5Video","videoogv","videowebm","videomp4","playSoundCloud","trackid","playWistia","getObjZoom","getVideoObject","isFit","isCurrentImageInPlace","objFitSize","isSlideActionActive","isSwiping","isPreloading","objCssSlider","objCssSlide","itemWidth","objCssItemWrapper","setSizeByParent","refreshSlideItems","zoomOut","zoomBack","g_objTitle","g_objDesc","g_objBG","g_objTextWrapper","textpanel_align","textpanel_margin","textpanel_text_valign","textpanel_padding_top","textpanel_padding_bottom","textpanel_height","textpanel_padding_title_description","textpanel_padding_right","textpanel_padding_left","textpanel_fade_duration","textpanel_enable_title","textpanel_enable_description","textpanel_enable_bg","textpanel_bg_color","textpanel_bg_opacity","textpanel_title_color","textpanel_title_font_family","textpanel_title_text_align","textpanel_title_font_size","textpanel_title_bold","textpanel_css_title","textpanel_desc_color","textpanel_desc_font_family","textpanel_desc_text_align","textpanel_desc_font_size","textpanel_desc_bold","textpanel_css_description","textpanel_desc_style_as_title","textpanel_bg_css","isFirstTime","setInternalHeight","positionElementsTop","animateHeight","startY","titleY","objTitleSize","textDesc","trim","descY","objDescSize","getTotalTextHeight","positionElementsMiddle","totalTextHeight","positionElementBottom","currentHeight","setCss","objCssBG","background-color","objCssTitle","objCssDesc","setText","textWrapperWidth","textWrapperLeft","customTop","customLeft","noPosition","getOption","optionName","g_objButtonPlus","g_objButtonMinus","g_objButtonReturn","g_slider","objSlider","setObjects","objButtonPlus","objButtonMinus","objButtonReturn","g_numBullets","g_activeIndex","g_bulletWidth","isInited","bullets_addclass","numBullets","setHtmlBullets","objBullet","getBulletsWidth","validateInited","updateNumBullets","validateIndex","bullet","getNumBullets","g_isInited","g_percent","g_objBar","slider_progressbar_color","slider_progressbar_opacity","slider_progressbar_line_width","put","userOptions","objInnerHTML","filter","draw","setProgress","g_objPie","slider_progresspie_type_fill","slider_progresspie_color1","slider_progresspie_color2","slider_progresspie_stroke_width","slider_progresspie_width","slider_progresspie_height","radius","ctx","rotate","translate","clearRect","centerX","centerY","startPoint","endPoint","beginPath","moveTo","arc","lineTo","fillStyle","fill","closePath","globalCompositeOperation","radius2","slider_transition_continuedrag_speed","slider_transition_continuedrag_easing","slider_transition_return_speed","slider_transition_return_easing","startPosx","isInitDataValid","lastNumTouches","isDragging","videoStartX","isDragVideo","videoObject","getDiffPosFromCurrentItem","diffX","diffY","numTouches","returnToPlace","animation","number","remainingMS","innerX","posDiff","videoPosX","changeItem","continueSlideDragChange","isReturn","handleSliderDrag","objZoomSlider","isPanEnabled","storeInitTouchData","currentPosx","innerEnd","startArrTouches","disableTouchActive","who","enableTouchActive","isParentInPlace","isValid","slider_zoom_step","slider_zoom_max_ratio","slider_zoom_return_pan_duration","slider_zoom_return_pan_easing","isPanActive","startImageX","startImageY","panXActive","panYActive","objParentSize","storeImageLastTime","isZoomActive","startDistance","startMiddlePoint","imageOrientPoint","objFitImageSize","isZoomedOnce","initObject","getFitScaleMode","storeCurrentImage","zoomCurrentImage","isZoomed","____________PAN_____________","isPanPosible","stictTouchesCheck","storePanInitValues","startPan","panImage","diffLastX","diffLastY","directionX","directionY","posImage","imageX","imageY","checkReturnAfterPan","isReturnX","isReturnY","objImagePadding","objCenterPos","isImageAnimating","____________END_PAN_____________","________TOUCH_ZOOM_____________","startTouchZoom","isInsideImage","checkTouchZoomEnd","checkTouchZoomStart","doTouchZoom","middlePoint","diffMiddleX","diffMiddleY","checkReturnFromZoom","________END_TOUCH_ZOOM_____________","isStored","target","panWasActive","zoomWasActive","panPosible","onSliderMouseWheel","delta","________EXTERNAL_____________","UGWistiaAPI","isAPILoaded","g_intHandle","g_player","g_isPlayerReady","START_PLAYING","STOP_PLAYING","VIDEO_ENDED","isWistiaActive","Wistia","loadAPI","g_ugWistiaAPI","putVideoActually","divID","videoID","isAutoplay","htmlID","embed","container","autoPlay","doCommand","command","play","putVideo","isPlayerReady","UGSoundCloudAPI","g_lastContainerID","isSCActive","SC","g_ugSoundCloudAPI","putSoundActually","trackID","iframeID","Widget","Events","READY","PLAY","PAUSE","FINISH","putSound","UGHtml5MediaAPI","g_ugHtml5MediaAPI","isMediaElementActive","mejs","urlFlash","urlSilverlight","htmlAutoplay","htmlPoster","posterImage","mp4","webm","ogv","MediaElement","enablePluginDebug","flashName","silverlightName","success","mediaElement","domObject","objError","UGVimeoAPI","g_lastCotnainerID","g_cueChangeAutoplay","g_ugVimeoAPI","isFroogaloopActive","Froogaloop","iframe","api","changeVideo","getVideoImages","onSuccessFunction","get","preview","thumbnail_large","thumbnail_medium","UGYoutubeAPI","g_prevState","video_youtube_showinfo","playerVars","controls","showinfo","rel","autoplay","YT","Player","videoId","onReady","onPlayerReady","onStateChange","onPlayerStateChange","isYTActive","getPlayerState","state","PlayerState","PLAYING","ENDED","g_ugYoutubeAPI","opt1","playVideo","pauseVideo","seekTo","PAUSED","clearVideo","stopToBeginning","loadVideoById","cueVideoById","g_galleryID","g_youtubeAPI","g_vimeoAPI","g_html5API","g_soundCloudAPI","g_wistiaAPI","g_objPlayer","g_objYoutube","g_objVimeo","g_objHtml5","g_objButtonClose","g_objSoundCloud","g_objWistia","g_activePlayerType","PLAY_START","PLAY_STOP","standAloneMode","youtubeInnerID","vimeoPlayerID","html5PlayerID","wistiaPlayerID","soundCloudPlayerID","optOptions","isStandAloneMode","onCloseButtonClick","onPlayStart","onPlayStop","onVideoEnded","stopAndHidePlayers","getActiveAPI","activeAPI","except","arrPlayers","player","objYoutubeInner","unitegallery","UG_API","ugCheckForMinJQueryVersion","isMinJQuery","ugCheckForErrors","checkForJqueryPresents","checkForDoubleJQuery","errorMessage","getElementById","innerHTML","display","g_objTabs","g_numItems","g_selectedItem","g_selectedItemIndex","g_objTheme","g_objCache","ENTER_FULLSCREEN","EXIT_FULLSCREEN","START_PLAY","STOP_PLAY","PAUSE_PLAYING","CONTINUE_PLAYING","GALLERY_KEYPRESS","GALLERY_BEFORE_REQUEST_ITEMS","OPEN_LIGHTBOX","CLOSE_LIGHTBOX","gallery_width","gallery_height","gallery_min_width","gallery_min_height","gallery_theme","gallery_images_preload_type","gallery_autoplay","gallery_play_interval","gallery_pause_on_mouseover","gallery_control_keyboard","gallery_preserve_ratio","gallery_background_color","gallery_debug_errors","gallery_shuffle","gallery_urlajax","gallery_enable_tabs","gallery_enable_cache","gallery_initial_catid","isAllItemsPreloaded","isFreestyleMode","lastWidth","lastHeigh","handleResize","isPlayModePaused","playTimePassed","playTimeLastStep","playHandle","playStepInterval","objProgress","thumbsType","isYoutubePresent","isVimeoPresent","isHtml5VideoPresent","isSoundCloudPresent","isWistiaPresent","resizeDelay","isRunFirstTime","originalOptions","funcCustomHeight","__________INIT_GALLERY_______","getThemeFunction","themeFunction","initTheme","defaultTheme","eval","resetOptions","checkForStartupErrors","throwErrorShowMessage","runGallery","htmlItems","cacheID","isCustomOptions","cacheItems","setSizeClass","objItems","fillItemsArray","loadAPIs","clearInitData","showErrorMessage","UGTabs","modifyInitParams","validateParams","shuffleItems","setGalleryHtml","setHtmlObjectsProperties","runGalleryActually","setHeightByOriginalRatio","preloadBigImages","startPlayMode","remove","storeLastSize","lastHeight","orig_ratio","optionWidth","max-width","min-width","arrChildren","numIndex","objChild","itemLink","itemType","lasyLoadSrc","imageSrc","urlThumbMobile","urlImageMobile","objPreloadImage","isBigImageLoadStarted","isBigImageLoadError","dataWidth","dataHeight","isImageMissing","isThumbMissing","objChildImage","objChildren","preloadItemImage","checkPreloadItemImage","imageUrl","checkAllItemsStartedPreloading","preloadNearBigImages","lastItemIndex","nextItemIndex","setFreestyleMode","__________END_INIT_GALLERY_______","__________EVENTS_____________","onGalleryMouseWheel","onSliderMouseEnter","onSliderMouseLeave","isStillLoading","onKeyPress","keyCode","charCode","which","wasAction","onGalleryResized","heightWasSet","onThumbsChange","onFullScreenChange","isFullscreen","onItemImageUpdated","onCurrentSlideImageLoadEnd","sliderIndex","sliderElement","retriggerEvent","keydown","__________GENERAL_______","getObjSlider","orig_width","orig_height","forceCarousel","___________SET_CONTROLS___________","toggleFullscreen","destroyFullscreenButton","togglePlayMode","destroyPlayButton","setTextContainers","objTitle","objDescription","showDisabledOverlay","hideDisabledOverlay","___________END_SET_CONTROLS___________","htmlItemsArg","removeAllSizeClasses","objWrapper","newEvent","advanceNextStep","timeNow","timeDiff","___________PLAY_MODE___________","objElement","resetPlaying","stopPlayMode","unselectSeletedItem","___________GENERAL_EXTERNAL___________","stillLoading","newItemIndex","toFakeFullScreen","exitFakeFullscreen","toFullScreen","divGallery","isSupported","exitFullScreen","noevent","isSmallWindow","windowWidth","changeItems","itemsContent","setFuncCustomHeight","__________AJAX_REQUEST_______","ajaxRequest","action","isJSON","successFunction","dataType","urlAjax","client_action","ajax","response","jqXHR","textStatus","errorThrown","requestNewItems","catID","checkCache","catid","objParams","debug_errors","lineNumber","stack","UGLightbox","g_objOverlay","g_objNumbers","g_objTopPanel","lightbox_type","lightbox_show_textpanel","lightbox_textpanel_width","lightbox_hide_arrows_onvideoplay","lightbox_arrows_position","lightbox_arrows_offset","lightbox_arrows_inside_offset","lightbox_arrows_inside_alwayson","lightbox_overlay_color","lightbox_overlay_opacity","lightbox_top_panel_opacity","lightbox_show_numbers","lightbox_numbers_size","lightbox_numbers_color","lightbox_numbers_padding_top","lightbox_numbers_padding_right","lightbox_compact_closebutton_offsetx","lightbox_compact_closebutton_offsety","lightbox_close_on_emptyspace","LIGHTBOX_INIT","topPanelHeight","initTextPanelHeight","isOpened","isRightNowOpened","putSlider","isCompact","fadeDuration","positionFrom","textPanelTop","textPanelLeft","isArrowsInside","isArrowsOnHoverMode","isSliderChangedOnce","isTopPanelEnabled","lightbox_slider_controls_always_on","lightbox_slider_enable_bullets","lightbox_slider_enable_arrows","lightbox_slider_enable_progress_indicator","lightbox_slider_enable_play_button","lightbox_slider_enable_fullscreen_button","lightbox_slider_enable_zoom_panel","lightbox_slider_enable_text_panel","lightbox_slider_scale_mode_media","lightbox_slider_scale_mode","lightbox_slider_loader_type","lightbox_slider_loader_color","lightbox_slider_transition","lightbox_slider_image_padding_top","lightbox_slider_image_padding_bottom","lightbox_slider_video_padding_top","lightbox_slider_video_padding_bottom","lightbox_textpanel_align","lightbox_textpanel_padding_top","lightbox_textpanel_padding_bottom","lightbox_slider_image_border","lightbox_textpanel_enable_title","lightbox_textpanel_enable_description","lightbox_textpanel_desc_style_as_title","lightbox_textpanel_enable_bg","lightbox_slider_video_enable_closebutton","lightbox_slider_enable_links","g_defaultsCompact","lightbox_slider_image_shadow","lightbox_textpanel_title_text_align","lightbox_textpanel_desc_text_align","lightbox_textpanel_padding_left","lightbox_textpanel_padding_right","initLightbox","putLightboxHtml","setProperties","cssNumbers","refreshSliderItem","__________WIDE_ONLY_________","handlePanelHeight","newPanelHeight","objTextPanelSize","textPanelHeight","positionTextPanelWide","textWidth","minPaddingLeft","minPaddingRight","maxTextPanelWidth","hideTopPanel","showTopPanel","__________COMPACT_ONLY_________","handleCompactHeight","wrapperSize","textPanelSize","totalBottom","sliderOptions","imagePaddingBottom","setCompactTextpanelTop","handleCompactTextpanelSizes","showTextpanel","textPanelWidth","objNumbersSize","numbersLeft","showNumbers","isSliderImageInPlace","isImageInPlace","positionArrowsInside","isAnimation","isMouseInsideImage","hideArrows","leftArrowLeft","leftArrowTop","rightArrowLeft","rightArrowTop","objSliderSize","objCssLeft","objCssRight","positionCloseButton","minButtonTop","maxButtonLeft","closeButtonTop","closeButtonLeft","objButtonSize","showCloseButton","hideCompactElements","hideNumbers","actualHideCompactElements","__________COMMON_________","sliderHeight","sliderTop","sliderLeft","isArrowsHidden","noStop","fromHover","updateTextPanelText","updateNumbersText","numCurrentItem","__________EVENTS_________","onSliderDragStart","onSliderAfterReturn","onSliderAfterPutImage","onSliderTransitionEnd","imagePaddingTop","onSliderClick","close","isInside","onPlayVideo","onStopVideo","isScrollKey","onImageMouseEnter","onImageMouseLeave","onMouseMove","onMouseWheel","click","objVideo","switchToWide","putHtml","UGCarousel","g_objCarouselWrapper","arrOrigTiles","carousel_padding","carousel_space_between_tiles","carousel_navigation_numtiles","carousel_scroll_duration","carousel_scroll_easing","carousel_autoplay","carousel_autoplay_timeout","carousel_autoplay_direction","carousel_autoplay_pause_onhover","carousel_vertical_scroll_ondrag","PAUSE_PLAY","carouselMaxWidth","initTileWidth","initTileHeight","sideSpace","spaceActionSize","scrollShortDuration","scrollShortEasing","isPaused","resizeTiles","newTileHeight","optUpdate","positionTiles","realWidth","objTileOriginal","startAutoplay","pauseAutoplay","scrollToTile","__________GETTERS_______","getTiles","getNumTilesInSpace","getNumTiles","getTile","numTile","validateTileNum","getFirstTile","first","getLastTile","last","getTileClones","numClones","arrClonedItems","itemToAdd","clonedTile","getRemainSpaceRight","spaceRemain","getRemainSpaceLeft","getCarouselWidth","getNumTilesInCarousel","__________OTHER_METHODS_______","tileSize","addTiles","anchorTile","clonesType","arrNewTiles","prepend","removeTiles","numTilesToRemove","arrTiles","isShort","posScroll","fillSidesWithTiles","getNeerestTileNum","tile1Pos","tile2Pos","scrollToNeerestTile","tileNum","spaceLeft","spaceRight","numItemsLeft","numItemsRight","numItemsRemoveLeft","numItemsRemoveRight","isPositioned","__________AUTOPLAY_______","autoplayStep","unpauseAutoplay","stopAutoplay","scrollRight","scrollLeft","getEstimatedHeight","tilesToScroll","numTilesInCarousel","setScrollLeftButton","setScrollRightButton","setPlayPauseButton","g_objSelect","tabs_type","tabs_container","tabs_class_selected","initTabs","runTabs","requestGalleryItems","onTabClick","classSelected","objTab","onSelectChange","objSelect","val","change","g_arrEvents","API_INIT_FUNCTIONS","API_ON_EVENT","convertItemDataForOutput","handlerFunction","notCache","togglePlay","enterFullscreen","resetZoom","numItem","reloadGallery"],"mappings":"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","file":"unitegallery.js","sourcesContent":["// Unite Gallery, Version: 1.7.40, released 29 Nov 2016 \n\n\n\n/**\n * write something to debug line\n */\nfunction debugLine(html,addRandom, addHtml){\n\t\n\tif(html === true)\n\t\thtml = \"true\";\n\t\n\tif(html === false)\n\t\thtml = \"false\";\t\t\n\t\n\tvar output = html;\n\t\n\tif(typeof html == \"object\"){\n\t\toutput = \"\";\n\t\tfor(name in html){\n\t\t\tvar value = html[name];\n\t\t\toutput += \" \" + name + \": \" + value;\n\t\t}\n\t}\n\t\n\tif(addRandom == true && !addHtml)\n\t\toutput += \" \" + Math.random();\t\n\t\n\tif(addHtml == true){\n\t\tvar objLine = jQuery(\"#debug_line\");\n\t\tobjLine.width(200);\n\t\t\n\t\tif(objLine.height() >= 500)\n\t\t\tobjLine.html(\"\");\n\t\t\n\t\tvar currentHtml = objLine.html();\n\t\toutput = currentHtml + \"<br> -------------- <br>\" + output;\t\t\n\t}\n\t\n\tjQuery(\"#debug_line\").show().html(output);\t\t\n\t\t\n}\n\n/**\n * \n * debug side some object\n */\nfunction debugSide(obj){\n\t\n\tvar html = \"\";\n\tfor(name in obj){\n\t\tvar value = obj[name];\n\t\thtml += name+\" : \" + value + \"<br>\";\t\t\n\t}\n\t\n\tjQuery(\"#debug_side\").show().html(html);\n\n}\n\n\n/**\n * output some string to console\n */\nfunction trace(str){\n\t\n\tif(typeof console != \"undefined\")\n\t\tconsole.log(str);\n\n}\n\n\n\n\n/** -------------- UgFunctions class ---------------------*/\n\nfunction UGFunctions(){\n\t\n\tvar g_browserPrefix = null;\t\n\tvar t = this;\n\tvar g_temp = {\n\t\tstarTime:0,\n\t\tarrThemes:[],\n\t\tisTouchDevice:-1,\n\t\tisRgbaSupported: -1,\n\t\ttimeCache:{},\n\t\tdataCache:{},\n\t\tlastEventType:\"\",\t\t//for validate touchstart click\n\t\tlastEventTime:0,\n\t\thandle: null\t\t\t//interval handle\n\t};\n\t\n\tthis.debugVar = \"\";\n\n\tthis.z__________FULL_SCREEN___________ = function(){}\n\t\n\t\n\t\n\t/**\n\t * move to full screen mode\n\t * fullscreen ID - the ID of current fullscreen\n\t */\n\tthis.toFullscreen = function(element, fullscreenID) {\n\t\t\t\t  \n\t\t  if(element.requestFullscreen) {\n\t\t    element.requestFullscreen();\n\t\t  } else if(element.mozRequestFullScreen) {\n\t\t    element.mozRequestFullScreen();\n\t\t  } else if(element.webkitRequestFullscreen) {\n\t\t    element.webkitRequestFullscreen(); \n\t\t  } else if(element.msRequestFullscreen) {\n\t\t\t    element.msRequestFullscreen(); \n\t\t  } else{\n\t\t\t  return(false);\n\t\t  }\n\t\t  \n\t\t  return(true);\n\t}\t\n\t\n\t\n\t/**\n\t * exit full screen mode\n\t * return if operation success (or if fullscreen mode supported)\n\t */\n\tthis.exitFullscreen = function() {\n\t\t  if(t.isFullScreen() == false)\n\t\t\t  return(false);\n\t\t\t  \n\t\t  if(document.exitFullscreen) {\n\t\t    document.exitFullscreen();\n\n\t\t  } else if(document.cancelFullScreen) {\n\t\t\t    document.cancelFullScreen();\n\t\t    \n\t\t  } else if(document.mozCancelFullScreen) {\n\t\t    document.mozCancelFullScreen();\n\t\t    \n\t\t  } else if(document.webkitExitFullscreen) {\n\t\t    document.webkitExitFullscreen();\n\t\t    \n\t\t  } else if(document.msExitFullscreen) {\n\t\t\t    document.msExitFullscreen();\n\t\t\t    \n\t\t  }else{\n\t\t\t  return(false);\n\t\t  }\n\t\t  \n\t\t  return(true);\n\t}\t\n\n\t/**\n\t * cross browser attach even function\n\t */\n\tfunction addEvent(evnt, elem, func) {\n\t\t   if (elem.addEventListener)  // W3C DOM\n\t\t      elem.addEventListener(evnt,func,false);\n\t\t   else if (elem.attachEvent) { // IE DOM\n\t\t      elem.attachEvent(\"on\"+evnt, func);\n\t\t   }\n\t\t   else { // No much to do\n\t\t      elem[evnt] = func;\n\t\t   }\n\t}\n\t\n\t\n\t/**\n\t * add fullscreen event to some function\n\t */\n\tthis.addFullScreenChangeEvent = function(func){\n\t\t\n\t\tif(document[\"webkitCancelFullScreen\"])\n\t\t\taddEvent(\"webkitfullscreenchange\",document,func);\n\t\telse if(document[\"msExitFullscreen\"])\n\t\t\taddEvent(\"MSFullscreenChange\",document,func);\n\t\telse if(document[\"mozCancelFullScreen\"])\n\t\t\taddEvent(\"mozfullscreenchange\",document,func);\n\t\telse\n\t\t\taddEvent(\"fullscreenchange\",document,func);\n\t}\n\t\n\t\n\t/**\n\t * destroy the full screen change event\n\t */\n\tthis.destroyFullScreenChangeEvent = function(){\n\t\t\n\t\tjQuery(document).unbind(\"fullscreenChange\");\n\t\tjQuery(document).unbind(\"mozfullscreenchange\");\n\t\tjQuery(document).unbind(\"webkitfullscreenchange\");\n\t\tjQuery(document).unbind(\"MSFullscreenChange\");\n\t}\n\t\n\t\n\t/**\n\t * get the fullscreen element\n\t */\n\tthis.getFullScreenElement = function(){\n\t\t\n\t\tvar fullscreenElement = document.fullscreenElement || document.mozFullScreenElement || document.webkitFullscreenElement || document.msFullscreenElement;\n\t\t\n\t\treturn(fullscreenElement);\n\t}\n\n\t/**\n\t * return if fullscreen enabled\n\t */\n\tthis.isFullScreen = function(){\n\t\t\n\t\tvar isFullScreen = document.fullscreen || document.mozFullScreen || document.webkitIsFullScreen || document.msFullscreenElement;\n\t\t\n\t\tif(!isFullScreen)\n\t\t\tisFullScreen = false;\n\t\telse\n\t\t\tisFullScreen = true;\n\t\t\n\t\treturn(isFullScreen);\n\t}\n\t\n\t\n\t\n\tthis.z__________GET_PROPS___________ = function(){}\n\t\n\t/**\n\t * get browser prefix, can be empty if not detected.\n\t */\n\tthis.getBrowserPrefix = function(){\n\t\t\n\t   if(g_browserPrefix !== null)\n\t\t   return g_browserPrefix;\n\t\t\t\t\n\t   var arrayOfPrefixes = ['webkit','Moz','ms','O'];\n\t   \n\t   var div = document.createElement(\"div\");\n\t   \n\t   for(var index in arrayOfPrefixes){\n\t\t   var prefix = arrayOfPrefixes[index];\n\t\t   \n\t\t   if(prefix+\"Transform\" in div.style){\n\t\t\t   prefix = prefix.toLowerCase();\n\t\t\t   g_browserPrefix = prefix;\n\t\t\t   return(prefix);\n\t\t   }\n\t   }\n\t   \n\t   g_browserPrefix = \"\";\n\t   return \"\";\n\t}\n\t\n\t/**\n\t * get image inside parent data by image (find parent and size)\n\t * scaleMode: fit, down, fill, fitvert\n\t */\n\tthis.getImageInsideParentDataByImage = function(objImage, scaleMode, objPadding){\n\t\t\n\t\tvar objParent = objImage.parent();\n\t\t\n\t\tvar objOrgSize = t.getImageOriginalSize(objImage);\n\t\t\n\t\tvar objData = t.getImageInsideParentData(objParent, objOrgSize.width, objOrgSize.height, scaleMode, objPadding);\n\t\t\n\t\treturn(objData);\n\t}\n\t\n\t\n\t/**\n\t * get data of image inside parent\n\t * scaleMode: fit, down, fill, fitvert\n\t */\n\tthis.getImageInsideParentData = function(objParent, originalWidth, originalHeight, scaleMode, objPadding, maxWidth, maxHeight){\n\t\t\n\t\tif(!objPadding)\n\t\t\tvar objPadding = {};\n\t\t\n\t\tvar objOutput = {};\n\t\t\n\t\tif(typeof maxWidth === \"undefined\")\n\t\t\tvar maxWidth = objParent.width();\n\t\t\n\t\tif(typeof maxHeight === \"undefined\")\n\t\t\tvar maxHeight = objParent.height();\n\t\t\n\t\tif(objPadding.padding_left)\n\t\t\tmaxWidth -= objPadding.padding_left;\n\t\t\n\t\tif(objPadding.padding_right)\n\t\t\tmaxWidth -= objPadding.padding_right;\n\t\t\n\t\tif(objPadding.padding_top)\n\t\t\tmaxHeight -= objPadding.padding_top;\n\t\t\n\t\tif(objPadding.padding_bottom)\n\t\t\tmaxHeight -= objPadding.padding_bottom;\n\t\t\n\t\tvar imageWidth = null;\n\t\tvar imageHeight = \"100%\";\n\t\tvar imageTop = null;\n\t\tvar imageLeft = null;\t\t\n\t\tvar style = \"display:block;margin:0px auto;\";\n\t\t\n\t\tif(originalWidth > 0 && originalHeight > 0){\n\t\t\t\n\t\t\t//get image size and position\n\t\t\t\n\t\t\tif(scaleMode == \"down\" && originalWidth < maxWidth && originalHeight < maxHeight){\n\t\t\t\n\t\t\t\timageHeight = originalHeight;\n\t\t\t\timageWidth = originalWidth;\n\t\t\t\timageLeft = (maxWidth - imageWidth) / 2;\n\t\t\t\timageTop = (maxHeight - imageHeight) / 2;\n\t\t\t\t\n\t\t\t}else if(scaleMode == \"fill\"){\n\t\t\t\tvar ratio = originalWidth / originalHeight;\n\t\t\t\t\n\t\t\t\timageHeight = maxHeight;\n\t\t\t\timageWidth = imageHeight * ratio;\n\t\t\t\t\t\t\t\t\n\t\t\t\tif(imageWidth < maxWidth){\n\t\t\t\t\timageWidth = maxWidth;\n\t\t\t\t\timageHeight = imageWidth / ratio;\n\t\t\t\t\t\n\t\t\t\t\t//center y position\n\t\t\t\t\timageLeft = 0;\n\t\t\t\t\timageTop = Math.round((imageHeight - maxHeight) / 2 * -1);\n\t\t\t\t}else{\t//center x position\n\t\t\t\t\timageTop = 0;\n\t\t\t\t\timageLeft = Math.round((imageWidth - maxWidth) / 2 * -1);\n\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t}\n\t\t\telse{\t\t//fit to borders\n\t\t\t\tvar ratio = originalWidth / originalHeight;\n\t\t\t\timageHeight = maxHeight;\n\t\t\t\timageWidth = imageHeight * ratio;\n\t\t\t\timageTop = 0;\n\t\t\t\timageLeft = (maxWidth - imageWidth) / 2;\n\t\t\t\t\n\t\t\t\tif(scaleMode != \"fitvert\" && imageWidth > maxWidth){\n\t\t\t\t\timageWidth = maxWidth;\n\t\t\t\t\timageHeight = imageWidth / ratio;\n\t\t\t\t\timageLeft = 0;\n\t\t\t\t\timageTop = (maxHeight - imageHeight) / 2;\n\t\t\t\t}\n\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\timageWidth = Math.floor(imageWidth);\n\t\t\timageHeight = Math.floor(imageHeight);\n\t\t\t\n\t\t\timageTop = Math.floor(imageTop);\n\t\t\timageLeft = Math.floor(imageLeft);\n\t\t\t\n\t\t\tstyle=\"position:absolute;\";\n\t\t}\n\t\t\n\t\t//set padding\n\t\tif(objPadding.padding_top)\n\t\t\timageTop += objPadding.padding_top;\n\t\t\n\t\tif(objPadding.padding_left)\n\t\t\timageLeft += objPadding.padding_left;\n\t\t\n\t\tobjOutput.imageWidth = imageWidth;\n\t\tobjOutput.imageHeight = imageHeight;\n\t\tobjOutput.imageTop = imageTop;\n\t\tobjOutput.imageLeft = imageLeft;\n\t\tobjOutput.imageRight = imageLeft + imageWidth;\n\t\tif(imageTop == 0 || imageHeight == \"100%\")\n\t\t\tobjOutput.imageBottom = null;\n\t\telse\n\t\t\tobjOutput.imageBottom = imageTop + imageHeight;\n\t\t\n\t\tobjOutput.style = style;\n\t\t\n\t\treturn(objOutput);\t\t\n\t}\n\t\n\t\n\t/**\n\t * get element center position inside parent \n\t * even if the object bigger than the parent\n\t */\n\tthis.getElementCenterPosition = function(element, objPadding){\n\t\t\n\t\tvar parent = element.parent();\n\t\tvar objSize = t.getElementSize(element);\n\t\tvar objSizeParent = t.getElementSize(parent);\n\t\t\n\t\tvar parentWidth = objSizeParent.width;\n\t\tvar parentHeight = objSizeParent.height;\n\t\t\n\t\tif(objPadding && objPadding.padding_top !== undefined)\n\t\t\tparentHeight -= objPadding.padding_top;\n\t\t\n\t\tif(objPadding && objPadding.padding_bottom !== undefined)\n\t\t\tparentHeight -= objPadding.padding_bottom;\n\t\t\n\t\tif(objPadding && objPadding.padding_left !== undefined)\n\t\t\tparentWidth -= objPadding.padding_left;\n\t\t\n\t\tif(objPadding && objPadding.padding_right !== undefined)\n\t\t\tparentWidth -= objPadding.padding_right;\n\t\t\n\t\t\n\t\tvar output = {};\n\t\toutput.left = Math.round((parentWidth - objSize.width) / 2);\n\t\toutput.top = Math.round((parentHeight - objSize.height) / 2);\n\t\t\n\t\tif(objPadding && objPadding.padding_top !== undefined)\n\t\t\toutput.top += objPadding.padding_top;\n\t\t\n\t\tif(objPadding && objPadding.padding_left !== undefined)\n\t\t\toutput.left += objPadding.padding_left;\n\t\t\n\t\t\n\t\treturn(output);\n\t}\n\t\n\t\n\t/**\n\t * get the center of the element \n\t * includeParent - including left / right related to the parent\n\t */\n\tthis.getElementCenterPoint = function(element, includeParent){\n\t\t\n\t\tif(!includeParent)\n\t\t\tvar includeParent = false;\n\t\t\n\t\tvar objSize = t.getElementSize(element);\n\t\tvar output = {};\n\t\t\n\t\toutput.x =  objSize.width / 2;\n\t\toutput.y =  objSize.height / 2;\n\t\t\n\t\tif(includeParent == true){\n\t\t\toutput.x += objSize.left;\n\t\t\toutput.y += objSize.top;\n\t\t}\n\t\t\n\t\toutput.x = Math.round(output.x);\n\t\toutput.y = Math.round(output.y);\n\t\t\n\t\treturn(output);\n\t}\n\t\n\t\n\t/**\n\t * \n\t * get mouse position from the event\n\t * optimised to every device\n\t */\n\tthis.getMousePosition = function(event, element){\n\t\t\n\t\tvar output = {\n\t\t\tpageX: \tevent.pageX,\n\t\t\tpageY: \tevent.pageY,\n\t\t\tclientX: \tevent.clientX,\n\t\t\tclientY: \tevent.clientY\n\t\t};\n\t\t\n\t\tif(event.originalEvent && event.originalEvent.touches && event.originalEvent.touches.length > 0){\n\t\t\toutput.pageX = event.originalEvent.touches[0].pageX;\n\t\t\toutput.pageY = event.originalEvent.touches[0].pageY;\n\t\t\toutput.clientX = event.originalEvent.touches[0].clientX;\n\t\t\toutput.clientY = event.originalEvent.touches[0].clientY;\n\t\t}\n\t\t\n\t\t/**\n\t\t * get element's mouse position\n\t\t */\n\t\tif(element){\n\t\t\tvar elementPos = element.offset();\n\t\t\toutput.mouseX = output.pageX - elementPos.left;\n\t\t\toutput.mouseY = output.pageY - elementPos.top;\n\t\t}\n\t\t\n\t\treturn(output);\n\t}\n\t\n\t/**\n\t * get mouse element related point from page related point\n\t */\n\tthis.getMouseElementPoint = function(point, element){\n\t\t\n\t\t//rename the input and output\n\t\tvar newPoint = {x: point.pageX, y: point.pageY};\n\t\t\n\t\tvar elementPoint = t.getElementLocalPoint(newPoint, element);\n\t\t\n\t\treturn(elementPoint);\n\t}\n\t\n\t\n\t/**\n\t * get element local point from global point position\n\t */\n\tthis.getElementLocalPoint = function(point, element){\n\t\t\n\t\tvar elementPoint = {};\n\t\tvar elementPos = element.offset();\n\t\t\n\t\telementPoint.x = Math.round(point.x - elementPos.left);\n\t\telementPoint.y = Math.round(point.y - elementPos.top);\n\t\t\n\t\treturn(elementPoint);\n\t}\n\n\t\n\t/**\n\t * get image oritinal size\n\t * if originalWidth, originalHeight is set, just return them.\n\t */\t\t\n\tthis.getImageOriginalSize = function(objImage, originalWidth, originalHeight){\n\t\t\n\t\tif(typeof originalWidth != \"undefined\" && typeof originalHeight != \"undefined\")\n\t\t\treturn({width:originalWidth, height:originalHeight});\n\t\t\n\t\tvar htmlImage = objImage[0];\n\t\t\n\t\tif(typeof htmlImage == \"undefined\")\n\t\t\tthrow new Error(\"getImageOriginalSize error - Image not found\");\n\t\t\n\t\tvar output = {};\n\t\t\n\t\tif(typeof htmlImage.naturalWidth == \"undefined\"){\n\n\t\t\t//check from cache\n\t\t\tif(typeof objImage.data(\"naturalWidth\") == \"number\"){\n\t\t\t\tvar output = {};\n\t\t\t\toutput.width = objImage.data(\"naturalWidth\");\n\t\t\t\toutput.height = objImage.data(\"naturalHeight\");\n\t\t\t\treturn(output);\n\t\t\t}\n\t\t\t\n\t\t   //load new image\n\t\t   var newImg = new Image();\n\t       newImg.src = htmlImage.src;\n\t        \n\t       if (newImg.complete) {\n\t        \toutput.width = newImg.width;\n\t        \toutput.height = newImg.height;\n\n\t        \t//caching\n\t\t\t\tobjImage.data(\"naturalWidth\", output.width);\n\t\t\t\tobjImage.data(\"naturalHeight\", output.height);\n\t        \treturn(output);\n\t        \t\n\t       }\n\t    \n\t       return({width:0,height:0});\n\t\t        \n\t\t}else{\n\t\t\t\n\t\t\toutput.width = htmlImage.naturalWidth;\n\t\t\toutput.height = htmlImage.naturalHeight;\n\t\t\t\n\t\t\treturn(output);\n\t\t}\n\t\t\n\t}\n\n\t\n\t/**\n\t * get current image ratio from original size\n\t */\n\tthis.getimageRatio = function(objImage){\n\t\t\n\t\tvar originalSize = t.getImageOriginalSize(objImage);\n\t\tvar size = t.getElementSize(objImage);\n\t\tvar ratio = size.width / originalSize.width;\n\t\t\n\t\treturn(ratio);\n\t}\n\t\n\t/**\n\t * tells if the image fit the parent (smaller then the parent)\n\t */\n\tthis.isImageFitParent = function(objImage){\n\t\tvar objParent = objImage.parent();\n\t\tvar sizeImage = t.getElementSize(objImage);\n\t\tvar sizeParent = t.getElementSize(objParent);\n\t\t\n\t\tif(sizeImage.width <= sizeParent.width && sizeImage.height <= sizeParent.height)\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\t\n\t/**\n\t * get size and position of some object\n\t */\n\tthis.getElementSize = function(element){\n\n\t\tif(element === undefined){\n\t\t\tthrow new Error(\"Can't get size, empty element\");\n\t\t}\n\t\t\t\t\n\t\tvar obj = element.position();\n\t\t\t\t\n\t\tobj.height = element.outerHeight();\n\t\tobj.width = element.outerWidth();\n\t\t\n\t\tobj.left = Math.round(obj.left);\n\t\tobj.top = Math.round(obj.top);\n\t\t\n\t\tobj.right = obj.left + obj.width;\n\t\tobj.bottom = obj.top + obj.height;\n\t\t\n\t\treturn(obj);\t\t\n\t}\n\t\n\t\n\t\n\t/**\n\t * return true if the element is bigger then it's parent\n\t */\n\tthis.isElementBiggerThenParent = function(element){\n\t\t\n\t\tvar objParent = element.parent();\n\t\tvar objSizeElement = t.getElementSize(element);\n\t\tvar objSizeParent = t.getElementSize(objParent);\n\t\t\n\t\tif(objSizeElement.width > objSizeParent.width || objSizeElement.height > objSizeParent.height)\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\t\n\t\n\t/**\n\t * tells if the mouse point inside image\n\t * the mouse point is related to image pos\n\t */\n\tthis.isPointInsideElement = function(point, objSize){\n\t\t\n\t\tvar isMouseXInside = (point.x >= 0 && point.x < objSize.width);\n\t\tif(isMouseXInside == false)\n\t\t\treturn(false);\n\t\t\n\t\tvar isMouseYInside = (point.y >= 0 && point.y < objSize.height);\n\t\tif(isMouseYInside == false)\n\t\t\treturn(false);\n\t\t\n\t\treturn(true);\n\t}\n\t\n\t\n\t/**\n\t * get element relative position according the parent\n\t * if the left / top is offset text (left , center, right / top, middle , bottom)\n\t * the element can be number size as well\n\t */\n\tthis.getElementRelativePos = function(element, pos, offset, objParent){\n\t\t\n\t\tif(!objParent)\n\t\t\tvar objParent = element.parent();\n\t\t\n\t\tif(typeof element == \"number\"){\n\t\t\tvar elementSize = {\n\t\t\t\t\twidth: element,\n\t\t\t\t\theight: element\n\t\t\t};\n\t\t}else\n\t\t\tvar elementSize = t.getElementSize(element);\n\t\t\n\t\tvar parentSize = t.getElementSize(objParent);\n\t\t\n\t\t\n\t\tswitch(pos){\n\t\t\tcase \"top\":\n\t\t\tcase \"left\":\n\t\t\t\tpos = 0;\n\t\t\t\tif(offset)\n\t\t\t\t\tpos += offset;\n\t\t\tbreak;\n\t\t\tcase \"center\":\n\t\t\t\tpos = Math.round((parentSize.width - elementSize.width) / 2);\n\t\t\t\tif(offset)\n\t\t\t\t\tpos += offset;\n\t\t\t\t\n\t\t\tbreak;\n\t\t\tcase \"right\":\n\t\t\t\tpos = parentSize.width - elementSize.width;\n\t\t\t\tif(offset)\n\t\t\t\t\tpos -= offset;\n\t\t\tbreak;\n\t\t\tcase \"middle\":\n\t\t\t\tpos = Math.round((parentSize.height - elementSize.height) / 2);\n\t\t\t\tif(offset)\n\t\t\t\t\tpos += offset;\n\t\t\tbreak;\n\t\t\tcase \"bottom\":\n\t\t\t\tpos = parentSize.height - elementSize.height;\n\t\t\t\tif(offset)\n\t\t\t\t\tpos -= offset;\n\t\t\tbreak;\n\t\t}\n\t\t\n\t\treturn(pos);\n\t}\n\t\n\t\t\n\t\n\tthis.z_________SET_ELEMENT_PROPS_______ = function(){}\n\t\t\n\t\n\t/**\n\t * \n\t * zoom image inside parent\n\t * the mouse point is page offset position, can be null\n\t * return true if zoomed and false if not zoomed\n\t */\n\tthis.zoomImageInsideParent = function(objImage, zoomIn, step, point, scaleMode, maxZoomRatio, objPadding){\n\t\t\n\t\tif(!step)\n\t\t\tvar step = 1.2;\n\t\t\n\t\tif(!scaleMode)\n\t\t\tvar scaleMode = \"fit\";\n\t\t\n\t\tvar zoomRatio = step;\n\t\t\n\t\tvar objParent = objImage.parent();\t\t\n\t\t\n\t\tvar objSize = t.getElementSize(objImage);\n\t\tvar objOriginalSize = t.getImageOriginalSize(objImage);\n\t\t\n\t\t\n\t\tvar isMouseInside = false;\n\t\tvar newHeight,newWidth, panX = 0, panY = 0, newX, newY,panOrientX = 0, panOrientY = 0;\n\t\t\n\t\tif(!point){\n\t\t\tisMouseInside = false;\n\t\t}else{\n\t\t\tvar pointImg = t.getMouseElementPoint(point, objImage);\t\t\t\t\n\t\t\tisMouseInside = t.isPointInsideElement(pointImg, objSize);\n\t\t\t\n\t\t\t//if mouse point outside image, set orient to image center\n\t\t\tpanOrientX = pointImg.x;\n\t\t\tpanOrientY = pointImg.y;\n\t\t}\n\t\t\t\t\n\t\tif(isMouseInside == false){\n\t\t\tvar imgCenterPoint = t.getElementCenterPoint(objImage);\n\t\t\tpanOrientX = imgCenterPoint.x;\n\t\t\tpanOrientY = imgCenterPoint.y;\n\t\t}\n\t\t\t\t\t\t\n\t\t//zoom:\n\t\tif(zoomIn == true){\t\t//zoom in\n\t\t\t\n\t\t\tnewHeight = objSize.height * zoomRatio;\n\t\t\tnewWidth =  objSize.width * zoomRatio;\n\t\t\t\n\t\t\tif(panOrientX != 0)\n\t\t\t\tpanX = -(panOrientX * zoomRatio - panOrientX);\n\t\t\t\n\t\t\tif(panOrientY != 0)\n\t\t\t\tpanY = -(panOrientY * zoomRatio - panOrientY);\n\t\t\t\n\t\t\t\n\t\t}else{\t\t//zoom out\n\t\t\t\n\t\t\tnewHeight = objSize.height / zoomRatio;\n\t\t\tnewWidth =  objSize.width / zoomRatio;\n\t\t\t\n\t\t\tvar objScaleData = t.getImageInsideParentData(objParent, objOriginalSize.width, objOriginalSize.height, scaleMode, objPadding);\n\t\t\t\n\t\t\t//go back to original size\n\t\t\tif(newWidth < objScaleData.imageWidth){\n\t\t\t\t\n\t\t\t\tt.scaleImageFitParent(objImage, objOriginalSize.width, objOriginalSize.height, scaleMode, objPadding);\n\t\t\t\treturn(true);\n\t\t\t}\n\t\t\t\n\t\t\tif(isMouseInside == true){\n\t\t\t\tif(panOrientX != 0)\n\t\t\t\t\tpanX = -(panOrientX / zoomRatio - panOrientX);\n\t\t\t\t\n\t\t\t\tif(panOrientY != 0)\t\t\t\n\t\t\t\t\tpanY = -(panOrientY / zoomRatio - panOrientY);\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\t//check max zoom ratio, ix exeeded, abort\n\t\tif(maxZoomRatio){\n\t\t\tvar expectedZoomRatio = 1;\n\t\t\tif(objOriginalSize.width != 0)\n\t\t\t\texpectedZoomRatio = newWidth / objOriginalSize.width;\n\t\t\t\n\t\t\tif(expectedZoomRatio > maxZoomRatio)\n\t\t\t\treturn(false);\n\t\t}\n\t\t\n\t\t//resize the element\n\t\tt.setElementSize(objImage, newWidth, newHeight);\n\t\t\n\t\t//set position:\n\t\t\n\t\t//if zoom out and mouse point not inside image, \n\t\t//get the image to center\n\t\tif(zoomIn == false && isMouseInside == false){\n\t\t\tvar posCenter = t.getElementCenterPosition(objImage);\n\t\t\tnewX = posCenter.left;\n\t\t\tnewY = posCenter.top;\n\t\t}else{\n\t\t\t\n\t\t\tnewX = objSize.left + panX;\n\t\t\tnewY = objSize.top + panY;\n\t\t}\n\t\t\n\t\tt.placeElement(objImage, newX, newY);\n\t\t\n\t\treturn(true);\n\t}\n\t\n\n\t\n\t/**\n\t * place some element to some position\n\t * if the left / top is offset text (left , center, right / top, middle , bottom)\n\t * then put it in parent by the offset.\n\t */\n\tthis.placeElement = function(element, left, top, offsetLeft, offsetTop, objParent){\n\t\t\n\t\t\n\t\tif(jQuery.isNumeric(left) == false || jQuery.isNumeric(top) == false){\n\t\t\t\n\t\t\tif(!objParent)\n\t\t\t\tvar objParent = element.parent();\n\t\t\t\n\t\t\tvar elementSize = t.getElementSize(element);\n\t\t\tvar parentSize = t.getElementSize(objParent);\n\t\t}\n\t\t\n\t\t//select left position\n\t\tif(jQuery.isNumeric(left) == false){\n\t\t\t\n\t\t\tswitch(left){\n\t\t\t\tcase \"left\":\n\t\t\t\t\tleft = 0;\n\t\t\t\t\tif(offsetLeft)\n\t\t\t\t\t\tleft += offsetLeft;\n\t\t\t\tbreak;\n\t\t\t\tcase \"center\":\n\t\t\t\t\tleft = Math.round((parentSize.width - elementSize.width) / 2);\n\t\t\t\t\tif(offsetLeft)\n\t\t\t\t\t\tleft += offsetLeft;\n\t\t\t\tbreak;\n\t\t\t\tcase \"right\":\n\t\t\t\t\tleft = parentSize.width - elementSize.width;\n\t\t\t\t\tif(offsetLeft)\n\t\t\t\t\t\tleft -= offsetLeft;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t\n\t\t//select top position\n\t\tif(jQuery.isNumeric(top) == false){\n\t\t\t\n\t\t\tswitch(top){\n\t\t\t\tcase \"top\":\n\t\t\t\t\ttop = 0;\n\t\t\t\t\tif(offsetTop)\n\t\t\t\t\t\ttop += offsetTop;\n\t\t\t\tbreak;\n\t\t\t\tcase \"middle\":\n\t\t\t\tcase \"center\":\n\t\t\t\t\ttop = Math.round((parentSize.height - elementSize.height) / 2);\n\t\t\t\t\tif(offsetTop)\n\t\t\t\t\t\ttop += offsetTop;\n\t\t\t\tbreak;\n\t\t\t\tcase \"bottom\":\n\t\t\t\t\ttop = parentSize.height - elementSize.height;\n\t\t\t\t\tif(offsetTop)\n\t\t\t\t\t\ttop -= offsetTop;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\tvar objCss = {\n\t\t\t\t\"position\":\"absolute\",\n\t\t\t\t\"margin\":\"0px\"\t\t\t\t\n\t\t};\n\t\t\n\t\tif(left !== null)\n\t\t\tobjCss.left = left;\n\t\t\n\t\tif(top !== null)\n\t\t\tobjCss.top = top;\n\t\t\t\t\n\t\telement.css(objCss);\t\t\n\t}\n\t\n\t\n\t/**\n\t * place element inside parent center.\n\t * the element should be absolute position\n\t */\n\tthis.placeElementInParentCenter = function(element){\n\t\t\t\t\n\t\tt.placeElement(element, \"center\", \"middle\");\n\t}\n\t\n\t\n\t/**\n\t * set element size and position\n\t */\n\tthis.setElementSizeAndPosition = function(element,left,top,width,height){\n\t\t\n\t\tvar objCss = {\n\t\t\t\"width\":width+\"px\",\n\t\t\t\"height\":height+\"px\",\n\t\t\t\"left\":left+\"px\",\n\t\t\t\"top\":top+\"px\",\n\t\t\t\"position\":\"absolute\",\n\t\t\t\"margin\":\"0px\"\n\t\t}\n\t\t\n\t\telement.css(objCss);\n\t}\n\t\n\t/**\n\t * set widht and height of the element\n\t */\n\tthis.setElementSize = function(element, width, height){\n\t\t\n\t    var objCss = {\n\t\t\t\"width\":width+\"px\"\n\t\t}\n\t    \n\t    if(height !== null && typeof height != \"undefined\")\n\t    \tobjCss[\"height\"] = height+\"px\"\n\t    \n\t\telement.css(objCss);\t\n\t}\n\t\n\t\n\t/**\n\t * clone element size and position\n\t */\n\tthis.cloneElementSizeAndPos = function(objSource, objTarget, isOuter, offsetX, offsetY){\n\t\t\n\t\tvar objSize = objSource.position();\n\t\t\n\t\tif(objSize == undefined){\n\t\t\tthrow new Error(\"Can't get size, empty element\");\n\t\t}\n\t\t\n\t\tif(isOuter === true){\n\t\t\tobjSize.height = objSource.outerHeight();\n\t\t\tobjSize.width = objSource.outerWidth();\n\t\t}else{\n\t\t\tobjSize.height = objSource.height();\n\t\t\tobjSize.width = objSource.width();\n\t\t}\n\t\t\n\t\tobjSize.left = Math.round(objSize.left);\n\t\tobjSize.top = Math.round(objSize.top);\n\t\t\n\t\tif(offsetX)\n\t\t\tobjSize.left += offsetX;\n\t\t\n\t\tif(offsetY)\n\t\t\tobjSize.top += offsetY;\n\t\t\n\t\tt.setElementSizeAndPosition(objTarget, objSize.left, objSize.top, objSize.width, objSize.height);\n\t}\n\n\t\n\t/**\n\t * place image inside parent, scale it by the options\n\t * and scale it to fit the parent.\n\t * scaleMode: fit, down, fill\n\t */\n\tthis.placeImageInsideParent = function(urlImage, objParent, originalWidth, originalHeight, scaleMode, objPadding){\n\t\tvar obj = t.getImageInsideParentData(objParent, originalWidth, originalHeight, scaleMode, objPadding);\n\t\t\n\t\t//set html image:\n\t\tvar htmlImage = \"<img\";\n\t\t\n\t\tif(obj.imageWidth !== null){\n\t\t\thtmlImage += \" width = '\" + obj.imageWidth + \"'\";\n\t\t\tobj.style += \"width:\" + obj.imageWidth + \";\";\n\t\t}\n\t\t\n\t\tif(obj.imageHeight != null){\n\t\t\t\n\t\t\tif(obj.imageHeight == \"100%\"){\n\t\t\t\thtmlImage += \" height = '\" + obj.imageHeight+\"'\";\n\t\t\t\tobj.style += \"height:\" + obj.imageHeight+\";\";\t\t\t\t\n\t\t\t}else{\n\t\t\t\thtmlImage += \" height = '\" + obj.imageHeight + \"'\";\n\t\t\t\tobj.style += \"height:\" + obj.imageHeight + \"px;\";\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\tif(obj.imageTop !== null)\n\t\t\tobj.style += \"top:\"+obj.imageTop+\"px;\";\n\t\t\n\t\tif(obj.imageLeft !== null){\n\t\t\tobj.style += \"left:\"+obj.imageLeft+\"px;\";\n\t\t}\n\t\t\n\t\turlImage = t.escapeDoubleSlash(urlImage);\n\t\t\n\t\thtmlImage += \" style='\"+obj.style+\"'\";\n\t\thtmlImage += \" src=\\\"\"+urlImage+\"\\\"\";\n\t\thtmlImage += \">\";\n\t\t\t\t\n\t\tobjParent.html(htmlImage);\n\t\t\n\t\t//return the image just created\n\t\tvar objImage = objParent.children(\"img\");\n\t\t\n\t\treturn(objImage);\n\t}\n\t\n\t\n\t/**\n\t * scale image to fit parent, and place it into parent\n\t * parent can be width , height, or object\n\t */\t\n\tthis.scaleImageCoverParent = function(objImage, objParent, pHeight){\n\t\t\n\t\tif(typeof objParent == \"number\"){\n\t\t\tvar parentWidth = objParent;\n\t\t\tvar parentHeight = pHeight;\n\t\t}else{\n\t\t\tvar parentWidth = objParent.outerWidth();\n\t\t\tvar parentHeight = objParent.outerHeight();\n\t\t}\n\t\t\n\t\tvar objOriginalSize = t.getImageOriginalSize(objImage);\n\n\t\tvar imageWidth = objOriginalSize.width;\n\t\tvar imageHeight = objOriginalSize.height;\n\t\t\n\t\tvar ratio = imageWidth / imageHeight;\n\t\t\n\t\tvar fitHeight = parentHeight;\n\t\tvar fitWidth = fitHeight * ratio;\n\t\tvar posy = 0, posx = 0;\n\t\t\n\t\tif(fitWidth < parentWidth){\n\t\t\tfitWidth = parentWidth;\n\t\t\tfitHeight = fitWidth / ratio;\n\t\t\t\n\t\t\t//center y position\n\t\t\tposx = 0;\n\t\t\tposy = Math.round((fitHeight - parentHeight) / 2 * -1);\n\t\t}else{\t//center x position\n\t\t\tposy = 0;\n\t\t\tposx = Math.round((fitWidth - parentWidth) / 2 * -1);\n\t\t}\n\t\t\n\t\tfitWidth = Math.round(fitWidth);\n\t\tfitHeight = Math.round(fitHeight);\n\t\t\n\t\tobjImage.css({\"width\":fitWidth+\"px\",\n\t\t\t\t\t  \"height\":fitHeight+\"px\",\n\t\t\t\t\t  \"left\":posx+\"px\",\n\t\t\t\t\t  \"top\":posy+\"px\"});\t\t\n\t}\n\n\n\t\n\t\n\t/**\n\t * resize image to fit the parent, scale it by the options\n\t * scaleMode: fit, down, fill\n\t */\n\tthis.scaleImageFitParent = function(objImage, originalWidth, originalHeight, scaleMode, objPadding){\n\t\t\n\t\tvar objParent = objImage.parent();\n\t\t\n\t\tvar obj = t.getImageInsideParentData(objParent, originalWidth, originalHeight, scaleMode, objPadding);\n\t\t\n\t\tvar updateCss = false;\n\t\t\n\t\tvar objCss = {};\n\t\t\n\t\tif(obj.imageWidth !== null){\n\t\t\tupdateCss = true\n\t\t\tobjImage.removeAttr(\"width\");\n\t\t\tobjCss[\"width\"] = obj.imageWidth+\"px\";\n\t\t}\n\t\t\n\t\tif(obj.imageHeight != null){\n\t\t\tupdateCss = true\n\t\t\tobjImage.removeAttr(\"height\");\n\t\t\tobjCss[\"height\"] = obj.imageHeight+\"px\";\n\t\t}\n\t\t\n\t\tif(obj.imageTop !== null){\n\t\t\tupdateCss = true;\t\t\t\n\t\t\tobjCss.top = obj.imageTop+\"px\";\n\t\t}\n\t\t\n\t\tif(obj.imageLeft !== null){\n\t\t\tupdateCss = true;\t\t\n\t\t\tobjCss.left = obj.imageLeft+\"px\";\n\t\t}\n\t\t\t\n\t\tif(updateCss == true){\n\t\t\t\n\t\t\tobjCss.position = \"absolute\";\n\t\t\tobjCss.margin = \"0px 0px\";\n\t\t\t\n\t\t\tobjImage.css(objCss);\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\treturn(obj);\n\t}\n\t\n\t\n\t/**\n\t * scale image by height\n\t */\n\tthis.scaleImageByHeight = function(objImage, height, originalWidth, originalHeight){\n\t\t\n\t\tvar objOriginalSize = t.getImageOriginalSize(objImage, originalWidth, originalHeight);\n\t\t\n\t\tvar ratio = objOriginalSize.width / objOriginalSize.height;\n\t\tvar width = Math.round(height * ratio);\n\t\theight = Math.round(height);\n\t\t\n\t\tt.setElementSize(objImage, width, height);\n\t}\n\n\t\n\t/**\n\t * scale image by height\n\t */\n\tthis.scaleImageByWidth = function(objImage, width, originalWidth, originalHeight){\n\t\t\n\t\tvar objOriginalSize = t.getImageOriginalSize(objImage, originalWidth, originalHeight);\n\t\t\n\t\tvar ratio = objOriginalSize.width / objOriginalSize.height;\n\t\t\n\t\tvar height = Math.round(width / ratio);\n\t\twidth = Math.round(width);\n\t\t\n\t\tt.setElementSize(objImage, width, height);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * scale image to exact size in parent, by setting image size and padding\n\t */\n\tthis.scaleImageExactSizeInParent = function(objImage, originalWidth, originalHeight, exactWidth, exactHeight, scaleMode){\n\t\t\n\t\tvar objParent = objImage.parent();\n\t\tvar parentSize = t.getElementSize(objParent);\n\t\t\n\t\tif(parentSize.width < exactWidth)\n\t\t\texactWidth = parentSize.width;\n\t\t\n\t\tif(parentSize.height < exactHeight)\n\t\t\texactHeight = parentSize.height;\n\t\t\n\t\tvar obj = t.getImageInsideParentData(null, originalWidth, originalHeight, scaleMode, null, exactWidth, exactHeight);\n\t\t\n\t\tvar imageWidth = exactWidth;\n\t\tvar imageHeight = exactHeight;\n\t\t\n\t\tvar paddingLeft = obj.imageLeft;\n\t\tvar paddingRight = obj.imageLeft;\n\t\tvar paddingTop = obj.imageTop;\n\t\tvar paddingBottom = obj.imageTop;\n\t\tvar imageLeft = Math.round((parentSize.width - exactWidth) / 2);\n\t\tvar imageTop = Math.round((parentSize.height - exactHeight) / 2);\n\t\t\n\t\tvar totalWidth = obj.imageWidth + paddingLeft + paddingRight;\n\t\tvar diff = exactWidth - totalWidth;\n\t\tif(diff != 0)\n\t\t\tpaddingRight += diff;\n\t\t\n\t\tvar totalHeight = obj.imageHeight + paddingTop + paddingBottom;\n\t\t\n\t\tvar diff = exactHeight - totalHeight;\n\t\tif(diff != 0)\n\t\t\tpaddingBottom += diff;\n\t\t\n\t\t//update css:\n\t\tobjImage.removeAttr(\"width\");\n\t\tobjImage.removeAttr(\"height\");\n\n\t\tvar objCss = {\n\t\t\t\tposition: \"absolute\",\n\t\t\t\tmargin: \"0px 0px\"\n\t\t};\n\t\t\n\t\tobjCss[\"width\"] = imageWidth+\"px\";\n\t\tobjCss[\"height\"] = imageHeight+\"px\";\n\t\tobjCss[\"left\"] = imageLeft+\"px\";\n\t\tobjCss[\"top\"] = imageTop+\"px\";\n\t\tobjCss[\"padding-left\"] = paddingLeft+\"px\";\n\t\tobjCss[\"padding-top\"] = paddingTop+\"px\";\n\t\tobjCss[\"padding-right\"] = paddingRight+\"px\";\n\t\tobjCss[\"padding-bottom\"] = paddingBottom+\"px\";\n\t\t\t\t\n\t\tobjImage.css(objCss);\n\t\t\n\t\t//return size object\n\t\t\n\t\tvar objReturn = {};\n\t\tobjReturn[\"imageWidth\"] = imageWidth;\n\t\tobjReturn[\"imageHeight\"] = imageHeight;\n\t\treturn(objReturn);\n\t}\n\t\n\t\n\t/**\n\t * show some element and make opacity:1\n\t */\n\tthis.showElement = function(element, element2, element3){\n\t\t\n\t\telement.show().fadeTo(0,1);\n\t\t\n\t\tif(element2)\n\t\t\telement2.show().fadeTo(0,1);\n\t\t\t\n\t\tif(element3)\n\t\t\t\telement3.show().fadeTo(0,1);\n\t\t\t\n\t}\n\t\n\t\t\n\tthis.z_________GALLERY_RELATED_FUNCTIONS_______ = function(){}\n\t\n\t/**\n\t * disable button\n\t */\n\tthis.disableButton = function(objButton, className){\n\t\tif(!className)\n\t\t\tvar className = \"ug-button-disabled\";\n\t\t\n\t\tif(t.isButtonDisabled(objButton, className) == false)\t\t\n\t\t\tobjButton.addClass(className);\t\t\n\t}\n\n\t\n\t/**\n\t * convert custom prefix options\n\t * prefix - the prefix.\n\t * base - after the prefix text. example lightbox_slider_option (lightbox - prefix, slider - base)\n\t */\n\tthis.convertCustomPrefixOptions = function(objOptions, prefix, base){\n\t\t\t\n\t\tif(!prefix)\n\t\t\treturn(objOptions);\n\t\t\n\t\tvar modifiedOptions = {};\n\t\t\n\t\tjQuery.each(objOptions, function(key, option){\n\t\t\t\n\t\t\tif(key.indexOf(prefix + \"_\"+base+\"_\") === 0){\n\t\t\t\tvar newKey = key.replace(prefix+\"_\"+base+\"_\", base+\"_\");\n\t\t\t\tmodifiedOptions[newKey] = option;\n\t\t\t}else{\n\t\t\t\tmodifiedOptions[key] = option;\n\t\t\t}\n\t\t\t\n\t\t});\n\t\t\n\t\treturn(modifiedOptions);\n\t}\n\t\n\t\n\t/**\n\t * enable button\n\t */\n\tthis.enableButton = function(objButton, className){\n\t\tif(!className)\n\t\t\tvar className = \"ug-button-disabled\";\n\t\t\n\t\tif(t.isButtonDisabled(objButton, className) == true)\t\t\n\t\t\tobjButton.removeClass(className);\n\t}\n\t\n\t\n\t/**\n\t * check if some buggon disabled\n\t */\n\tthis.isButtonDisabled = function(objButton, className){\n\t\tif(!className)\n\t\t\tvar className = \"ug-button-disabled\";\n\t\t\n\t\tif(objButton.hasClass(className))\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\t\n\t\n\n\tthis.z_________MATH_FUNCTIONS_______ = function(){}\n\t\n\t/**\n\t * \n\t * normalize the value for readable \"human\" setting value.\n\t */\n\tthis.normalizeSetting = function(realMin, realMax, settingMin, settingMax, value, fixBounds){\n\t\tif(!fixBounds)\n\t\t\tvar fixBounds = false;\n\t\t\n\t\tvar ratio = (value - settingMin)  / (settingMax - settingMin);\n\t\tvalue = realMin + (realMax - realMin) * ratio;\n\t\t\n\t\tif(fixBounds == true){\n\t\t\tif(value < realMin)\n\t\t\t\tvalue = realMin;\n\t\t\t\n\t\t\tif(value > realMax)\n\t\t\t\tvalue = realMax;\n\t\t}\n\t\t\n\t\treturn(value);\n\t}\n\n\t\n\t/**\n\t * \n\t * get \"real\" setting from normalized setting\n\t */\n\tthis.getNormalizedValue = function(realMin, realMax, settingMin, settingMax, realValue){\n\t\t\n\t\tvar ratio = (realValue - realMin)  / (realMax - realMin);\n\t\trealValue = realMin + (settingMax - settingMin) * ratio;\n\t\t\n\t\treturn(realValue);\n\t}\n\t\n\t\n\t/**\n\t * get distance between 2 points\n\t */\n\tthis.getDistance = function(x1,y1,x2,y2) {\n\t\t\n\t\tvar distance = Math.round(Math.sqrt(Math.abs(((x2-x1)*(x2-x1)) + ((y2-y1)*(y2-y1)))));\n\t\t\n\t\treturn distance;\n\t}\n\t\n\t\n\t/**\n\t * get center point of the 2 points\n\t */\n\tthis.getMiddlePoint = function(x1,y1,x2,y2){\n\t\tvar output = {}\n\t\toutput.x = x1 + Math.round((x2 - x1) / 2);\n\t\toutput.y = y1 + Math.round((y2 - y1) / 2);\n\t\t\n\t\treturn(output);\n\t}\n\t\n\t\n\t/**\n\t * get number of items in space width gap\n\t * even item sizes\n\t * by lowest\n\t */\n\tthis.getNumItemsInSpace = function(spaceSize, itemsSize, gapSize){\n\t\tvar numItems = Math.floor((spaceSize + gapSize) / (itemsSize + gapSize));\n\t\treturn(numItems);\n\t}\n\n\t/**\n\t * get number of items in space width gap\n\t * even item sizes\n\t * by Math.round\n\t */\n\tthis.getNumItemsInSpaceRound = function(spaceSize, itemsSize, gapSize){\n\t\tvar numItems = Math.round((spaceSize + gapSize) / (itemsSize + gapSize));\n\t\treturn(numItems);\n\t}\n\n\t/**\n\t * get space (width in carousel for example) by num items, item size, and gap size\n\t */\n\tthis.getSpaceByNumItems = function(numItems, itemSize, gapSize){\n\t\tvar space = numItems * itemSize + (numItems-1) * gapSize;\n\t\treturn(space);\n\t}\n\t\n\n\t/**\n\t * get item size by space and gap\n\t */\n\tthis.getItemSizeInSpace = function(spaceSize, numItems, gapSize){\n\t\tvar itemSize = Math.floor((spaceSize - (numItems-1) * gapSize) / numItems);\n\t\t\n\t\treturn(itemSize);\n\t}\n\t\n\t\n\t/**\n\t * get column x pos with even column sizes, start from 0\n\t */\n\tthis.getColX = function(col, colWidth, colGap){\n\t\t\n\t\tvar posx = col * (colWidth + colGap);\n\t\t\n\t\treturn posx;\n\t}\n\t\n\n\t/**\n\t * get column number by index\n\t */\n\tthis.getColByIndex = function(numCols, index){\n\t\tvar col = index % numCols;\n\t\treturn(col);\n\t}\n\t\n\t\n\t/**\n\t * get col and row by index\n\t */\n\tthis.getColRowByIndex = function(index, numCols){\n\t\t\n\t\tvar row = Math.floor(index / numCols);\n\t\tvar col = Math.floor(index % numCols);\n\t\t\n\t\treturn({col:col,row:row});\n\t}\n\t\n\t\n\t/**\n\t * get index by row, col, numcols\n\t */\n\tthis.getIndexByRowCol = function(row, col, numCols){\n\t\t\n\t\tif(row < 0)\n\t\t\treturn(-1);\n\t\t\n\t\tif(col < 0)\n\t\t\treturn(-1);\n\t\t\n\t\tvar index = row * numCols + col;\n\t\treturn(index);\n\t}\n\t\n\t/**\n\t * get previous row item in the same column\n\t */\n\tthis.getPrevRowSameColIndex = function(index, numCols){\n\t\tvar obj = t.getColRowByIndex(index, numCols);\n\t\tvar prevIndex = t.getIndexByRowCol(obj.row-1, obj.col, numCols);\n\t\treturn(prevIndex);\n\t}\n\t\n\t/**\n\t * get next row item in the same column\n\t */\n\tthis.getNextRowSameColIndex = function(index, numCols){\n\t\tvar obj = t.getColRowByIndex(index, numCols);\n\t\tvar nextIndex = t.getIndexByRowCol(obj.row+1, obj.col, numCols);\n\t\treturn(nextIndex);\n\t}\n\t\n\t\n\tthis.z_________DATA_FUNCTIONS_______ = function(){}\n\t\n\t\n\t/**\n\t * set data value\n\t */\n\tthis.setGlobalData = function(key, value){\n\t\t\n\t\tjQuery.data(document.body, key, value);\n\t\t\n\t}\n\t\n\t/**\n\t * get global data\n\t */\n\tthis.getGlobalData = function(key){\n\t\t\n\t\tvar value = jQuery.data(document.body, key);\n\t\t\n\t\treturn(value);\n\t}\n\t\n\tthis.z_________EVENT_DATA_FUNCTIONS_______ = function(){}\n\n\t\n\t/**\n\t * handle scroll top, return if scroll mode or not\n\t */\n\tthis.handleScrollTop = function(storedEventID){\n\t\t\n\t\tif(t.isTouchDevice() == false)\n\t\t\treturn(null);\n\t\t\n\t\tvar objData = t.getStoredEventData(storedEventID);\n\t\t\n\t\tvar horPass = 15;\n\t\tvar vertPass = 15;\n\t\t\n\t\t//check if need to set some movement\n\t\tif(objData.scrollDir === null){\n\t\t\t\n\t\t\tif(Math.abs(objData.diffMouseX) > horPass)\n\t\t\t\tobjData.scrollDir = \"hor\";\n\t\t\telse\n\t\t\t\tif(Math.abs(objData.diffMouseY) > vertPass && Math.abs(objData.diffMouseY) > Math.abs(objData.diffMouseX) ){\n\t\t\t\t\tobjData.scrollDir = \"vert\";\n\t\t\t\t\tobjData.scrollStartY = objData.lastMouseClientY;\n\t\t\t\t\tobjData.scrollOrigin = jQuery(document).scrollTop();\n\t\t\t\t\t\n\t\t\t\t\tg_temp.dataCache[storedEventID].scrollStartY = objData.lastMouseClientY;\n\t\t\t\t\tg_temp.dataCache[storedEventID].scrollOrigin = objData.scrollOrigin;\n\t\t\t\t}\n\t\t\t\n\t\t\t//update scrollDir\n\t\t\tg_temp.dataCache[storedEventID].scrollDir = objData.scrollDir;\n\t\t}\n\t\t\t\t\n\t\tif(objData.scrollDir !== \"vert\")\n\t\t\treturn(objData.scrollDir);\n\t\t\n\t\t\n\t\tvar currentScroll = jQuery(document).scrollTop();\n\t\t\n\t\tvar scrollPos = objData.scrollOrigin - (objData.lastMouseClientY - objData.scrollStartY);\n\t\t\n\t\tif(scrollPos >= 0)\n\t\t\tjQuery(document).scrollTop(scrollPos);\n\t\t\n\t\treturn(objData.scrollDir);\n\t}\n\n\t\n\t/**\n\t * return true / false if was vertical scrolling\n\t */\n\tthis.wasVerticalScroll = function(storedEventID){\n\t\tvar objData = t.getStoredEventData(storedEventID);\n\t\t\n\t\tif(objData.scrollDir === \"vert\")\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\t\n\t\n\t/**\n\t * store event data\n\t */\n\tthis.storeEventData = function(event, id, addData){\n\t\t\t\t\n\t\tvar mousePos = t.getMousePosition(event);\n\t\tvar time = jQuery.now();\n\t\t\n\t\tvar obj = {\n\t\t\t\tstartTime: time,\n\t\t\t\tlastTime: time,\n\t\t\t\tstartMouseX: mousePos.pageX,\n\t\t\t\tstartMouseY: mousePos.pageY,\n\t\t\t\tlastMouseX: mousePos.pageX,\n\t\t\t\tlastMouseY: mousePos.pageY,\n\t\t\t\t\n\t\t\t\tstartMouseClientY: mousePos.clientY,\n\t\t\t\tlastMouseClientY: mousePos.clientY,\n\t\t\t\t\n\t\t\t\tscrollTop: jQuery(document).scrollTop(),\n\t\t\t\tscrollDir: null\n\t\t};\n\t\t\n\t\tif(addData)\n\t\t\tobj = jQuery.extend(obj, addData);\n\t\t\n\t\tg_temp.dataCache[id] = obj;\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * update event data with last position\n\t */\n\tthis.updateStoredEventData = function(event, id, addData){\n\t\t\n\t\tif(!g_temp.dataCache[id])\n\t\t\tthrow new Error(\"updateEventData error: must have stored cache object\");\n\t\t\n\t\tvar obj = g_temp.dataCache[id];\n\t\t\n\t\tvar mousePos = t.getMousePosition(event);\n\t\tobj.lastTime = jQuery.now();\n\t\t\n\t\tif(mousePos.pageX !== undefined){\n\t\t\tobj.lastMouseX = mousePos.pageX;\n\t\t\tobj.lastMouseY = mousePos.pageY;\n\t\t\tobj.lastMouseClientY = mousePos.clientY;\n\t\t}\n\t\t\n\t\tif(addData)\n\t\t\tobj = jQuery.extend(obj, addData);\n\t\t\n\t\tg_temp.dataCache[id] = obj;\n\t}\n\t\n\t/**\n\t * get stored event data\n\t */\n\tthis.getStoredEventData = function(id, isVertical){\n\t\tif(!g_temp.dataCache[id])\n\t\t\tthrow new Error(\"updateEventData error: must have stored cache object\");\n\t\t\n\t\tvar obj = g_temp.dataCache[id];\n\t\t\n\t\tobj.diffMouseX = obj.lastMouseX - obj.startMouseX;\n\t\tobj.diffMouseY = obj.lastMouseY - obj.startMouseY;\n\t\t\n\t\tobj.diffMouseClientY = obj.lastMouseClientY - obj.startMouseClientY;\n\t\t\n\t\tobj.diffTime = obj.lastTime - obj.startTime;\n\t\t\n\t\t//get mouse position according orientation\n\t\tif(isVertical === true){\n\t\t\tobj.startMousePos = obj.lastMouseY;\n\t\t\tobj.lastMousePos = obj.lastMouseY;\n\t\t\tobj.diffMousePos = obj.diffMouseY;\n\t\t}else{\n\t\t\tobj.startMousePos = obj.lastMouseX;\n\t\t\tobj.lastMousePos = obj.lastMouseX;\n\t\t\tobj.diffMousePos = obj.diffMouseX;\t\t\t\n\t\t}\n\t\t\n\t\treturn(obj);\n\t}\n\t\n\t/**\n\t * return if click event approved according the done motion\n\t */\n\tthis.isApproveStoredEventClick = function(id, isVertical){\n\t\t\n\t\tif(!g_temp.dataCache[id])\n\t\t\treturn(true);\n\t\t\n\t\tvar objData = t.getStoredEventData(id, isVertical);\n\t\t\n\t\tvar passedDistanceAbs = Math.abs(objData.diffMousePos);\n\t\t\n\t\tif(objData.diffTime > 400)\n\t\t\treturn(false);\n\t\t\n\t\tif(passedDistanceAbs > 30)\n\t\t\treturn(false);\n\t\t\n\t\treturn(true);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * clear stored event data\n\t */\n\tthis.clearStoredEventData = function(id){\n\t\tg_temp.dataCache[id] = null;\n\t}\n\n\tthis.z_________CHECK_SUPPORT_FUNCTIONS_______ = function(){}\n\t\n\t\n\t\n\t/**\n\t * is canvas exists in the browser\n\t */\n\tthis.isCanvasExists = function(){\n\t\t\n\t\tvar canvas = jQuery('<canvas width=\"500\" height=\"500\" > </canvas>')[0];\n\t\t\n\t\tif(typeof canvas.getContext == \"function\")\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\t\n\t/**\n\t * tells if vertical scrollbar exists\n\t */\n\tthis.isScrollbarExists = function(){\n\t\tvar hasScrollbar = window.innerWidth > document.documentElement.clientWidth;\n\t\treturn(hasScrollbar);\n\t}\n\t\n\t/**\n\t * check if this device are touch enabled\n\t */\n\tthis.isTouchDevice = function(){\n\t\t\n\t\t  //get from cache\n\t\t  if(g_temp.isTouchDevice !== -1)\n\t\t\t  return(g_temp.isTouchDevice);\n\t\t  \n\t\t  try{ \n\t\t\t  document.createEvent(\"TouchEvent\"); \n\t\t\t  g_temp.isTouchDevice = true; \n\t\t  }\n\t\t  catch(e){ \n\t\t\t  g_temp.isTouchDevice = false; \n\t\t  }\n\t\t  \n\t\t  return(g_temp.isTouchDevice);\n\t}\n\t\n\t\n\t\n\t/**\n\t * check if \n\t */\n\tthis.isRgbaSupported = function(){\n\t\t\n\t\tif(g_temp.isRgbaSupported !== -1)\n\t\t\treturn(g_temp.isRgbaSupported);\n\t\t\n\t\tvar scriptElement = document.getElementsByTagName('script')[0];\n\t\tvar prevColor = scriptElement.style.color;\n\t\ttry {\n\t\t\tscriptElement.style.color = 'rgba(1,5,13,0.44)';\n\t\t} catch(e) {}\n\t\tvar result = scriptElement.style.color != prevColor;\n\t\tscriptElement.style.color = prevColor;\n\t\t\n\t\tg_temp.isRgbaSupported = result;\n\t\t\n\t\treturn result;\n\t}\n\t\n\tthis.z_________GENERAL_FUNCTIONS_______ = function(){}\n\t\n\t\n\t/**\n\t * check if current jquery version is more then minimal version\n\t * version can be \"1.8.0\" for example\n\t */\n\tthis.checkMinJqueryVersion = function(version){\n\n\t   var arrCurrent = jQuery.fn.jquery.split('.');\n       var arrMin = version.split('.');\n\t  \n\t  for (var i=0, len=arrCurrent.length; i<len; i++) {\n\t\t  \n\t\t  var numCurrent = parseInt(arrCurrent[i]);\n\t      var numMin = parseInt(arrMin[i]);\n\n\t      if(typeof arrMin[i] == \"undefined\")\n\t    \t  return(true);\n\t      \n\t      if(numMin > numCurrent)\n\t    \t  return(false);\n\t      \n\t      if(numCurrent > numMin)\n\t    \t  return(true);\n\t  }\n\t  \n\t  \n\t  //if all equal then all ok\n\t  return true;\n\t}\n\n\t\n\t/**\n\t * get css size parameter, like width. if % given, leave it, if number without px - add px.\n\t */\n\tthis.getCssSizeParam = function(sizeParam){\n\t\tif(jQuery.isNumeric(sizeParam))\n\t\t\treturn(sizeParam + \"px\");\n\t\t\t\n\t\treturn(sizeParam);\n\t}\n\t\n\t/**\n\t * convert hex color to rgb color\n\t */\n\tthis.convertHexToRGB = function(hexInput, opacity){\n\t    \n\t\tvar hex = hexInput.replace('#','');\n\t    if(hex === hexInput)\n\t    \treturn(hexInput);\n\t    \n\t    r = parseInt(hex.substring(0,2), 16);\n\t    g = parseInt(hex.substring(2,4), 16);\n\t    b = parseInt(hex.substring(4,6), 16);\n\t    result = 'rgba('+r+','+g+','+b+','+opacity+')';\n\t    return result;\n\t}\t\n\t\n\t/**\n\t * get timestamp to string\n\t */\n\tthis.timestampToString = function(stamp){\n\t\t\n\t\tvar d = new Date(stamp);\n\t\tvar str = d.getDate() + \"/\" + d.getMonth();\n\t\tstr += \" \" + d.getHours() + \":\" + d.getMinutes() + \":\" + d.getSeconds() + \":\" + d.getMilliseconds();\n\t\t\n\t\treturn(str);\n\t}\n\t\n\t/**\n\t * get touches array (if exists) from the event\n\t */\n\tthis.getArrTouches = function(event){\n\t\t\n\t\tvar arrTouches = [];\n\t\t\t\t\n\t\tif(event.originalEvent && event.originalEvent.touches && event.originalEvent.touches.length > 0){\t\t\t\n\t\t\tarrTouches = event.originalEvent.touches;\n\t\t}\n\t\t\n\t\treturn(arrTouches);\n\t}\n\t\n\t/**\n\t * extract touch positions from arrTouches\n\t */\n\tthis.getArrTouchPositions = function(arrTouches){\n\t\t\n\t\tvar arrOutput = [];\n\t\t\n\t\tfor(var i=0;i<arrTouches.length;i++){\n\t\t\t\n\t\t\tvar point = {\n\t\t\t\tpageX:arrTouches[i].pageX,\n\t\t\t\tpageY:arrTouches[i].pageY\n\t\t\t};\n\t\t\t\n\t\t\tarrOutput.push(point);\n\t\t}\n\t\t\n\t\treturn(arrOutput);\n\t}\n\t\n\t\n\t/**\n\t * start time debug\n\t */\n\tthis.startTimeDebug = function(){\n\t\tg_temp.starTime = jQuery.now();\n\t}\n\t\n\t/**\n\t * show time debug\n\t */\n\tthis.showTimeDebug = function(){\n\t\t\n\t\tvar endTime = jQuery.now();\n\t\tvar diffTime = endTime - g_temp.starTime;\n\t\t\n\t\tdebugLine({\"Time Passed\": diffTime},true);\n\t}\n\t\n\t\t\n\t/**\n\t * put progress indicator to some parent by type\n\t * return the progress indicator object\n\t */\n\tthis.initProgressIndicator = function(type, options, objParent){\n\t\t\n\t\t//check canvas compatability\n\t\tif(type != \"bar\" && t.isCanvasExists() == false)\n\t\t\ttype = \"bar\";\n\t\t\n\t\t//put the progress indicator\n\t\tswitch(type){\n\t\t\tcase \"bar\":\n\t\t\t\tvar g_objProgress = new UGProgressBar();\t\t\n\t\t\t\tg_objProgress.putHidden(objParent, options);\n\t\t\tbreak;\n\t\t\tdefault:\n\t\t\tcase \"pie\":\n\t\t\t\tvar g_objProgress = new UGProgressPie();\t\t\n\t\t\t\tg_objProgress.putHidden(objParent, options);\n\t\t\tbreak;\t\t\t\n\t\t\tcase \"pie2\":\n\t\t\t\toptions.type_fill = true;\n\t\t\t\t\n\t\t\t\tvar g_objProgress = new UGProgressPie();\t\t\t\t\n\t\t\t\tg_objProgress.putHidden(objParent, options);\n\t\t\tbreak;\t\t\t\n\t\t}\n\t\t\n\t\treturn(g_objProgress);\n\t}\n\t\n\t\n\t/**\n\t * add to button ug-nohover class on ipad\n\t * need to be processed in css\n\t */\n\tthis.setButtonMobileReady = function(objButton){\n\t\t\n\t\tobjButton.on(\"touchstart\",function(event){\n\t\t\t//event.preventDefault();\n\t\t\tjQuery(this).addClass(\"ug-nohover\");\n\t\t});\n\t\t\n\t\tobjButton.on(\"mousedown touchend\",function(event){\n\t\t\t\n\t\t\t//debugLine(\"button touchend\",true,true);\n\t\t\t//event.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\tevent.stopImmediatePropagation();\n\t\t\t\n\t\t\t//debugLine(event.type, true, true);\n\t\t\t\n\t\t\treturn(false);\n\t\t});\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * register gallery theme\n\t */\n\tthis.registerTheme = function(themeName){\n\t\t\n\t\tg_temp.arrThemes.push(themeName);\n\t}\n\t\n\t/**\n\t * get themes array\n\t */\n\tthis.getArrThemes = function(){\n\t\t\n\t\treturn(g_temp.arrThemes);\n\t}\n\t\n\t\n\t/**\n\t * check if theme exists\n\t */\n\tthis.isThemeRegistered = function(theme){\n\t\n\t\tif(jQuery.inArray(theme, g_temp.arrThemes) !== -1)\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\t\n\t/**\n\t * get first registered theme name\n\t */\n\tthis.getFirstRegisteredTheme = function(){\n\t\tif(g_temp.arrThemes.length == 0)\n\t\t\treturn(\"\");\n\t\tvar themeName = g_temp.arrThemes[0];\n\t\t\n\t\treturn(themeName);\n\t}\n\n\t\n\t\n\t\n\t/**\n\t * function checks if enought time passsed between function calls.\n\t * good for filtering same time events\n\t */\n\tthis.isTimePassed = function(handlerName, timeLimit){\n\t\t\n\t\tif(!timeLimit)\n\t\t\tvar timeLimit = 100;\n\t\t\n\t\tvar currentTime = jQuery.now();\n\t\tif(g_temp.timeCache.hasOwnProperty(handlerName) == false)\n\t\t\tlastTime = 0;\n\t\telse\n\t\t\tlastTime = g_temp.timeCache[handlerName];\n\t\t\n\t\tvar diffTime = currentTime - lastTime;\n\t\t\n\t\tg_temp.timeCache[handlerName] = currentTime;\n\t\t\n\t\t//debugLine(diffTime,true,true);\n\t\t\n\t\tif(diffTime <= timeLimit)\n\t\t\treturn(false);\n\t\t\t\t\n\t\treturn(true);\n\t}\n\t\n\t\n\t/**\n\t * check if continious event is over like resize\n\t */\n\tthis.whenContiniousEventOver = function(handlerName, onEventOver, timeLimit){\n\t\t\n\t\tif(!timeLimit)\n\t\t\tvar timeLimit = 300;\n\t\t\n\t\t\n\t\tif(g_temp.timeCache.hasOwnProperty(handlerName) == true && g_temp.timeCache[handlerName] != null){\n\t\t\tclearTimeout(g_temp.timeCache[handlerName]);\n\t\t\tg_temp.timeCache[handlerName] = null;\t\t\t\n\t\t}\n\t\t\n\t\tg_temp.timeCache[handlerName] = setTimeout(onEventOver, timeLimit);\n\t}\n\t\n\t\n\t/**\n\t * validate click and touchstart events. \n\t * if click comes after touchstart, return false.\n\t */\n\tthis.validateClickTouchstartEvent = function(eventType){\n\t\t\n\t\tvar returnVal = true;\n\t\t\n\t\tvar diff = jQuery.now() - g_temp.lastEventTime;\n\t\t\n\t\t//debugLine({lastType:g_temp.lastEventType, diff:diff},true, true);\n\t\t\n\t\tif(eventType == \"click\" && g_temp.lastEventType == \"touchstart\" && diff < 1000)\n\t\t\treturnVal = false;\n\t\t\n\t\tg_temp.lastEventTime = jQuery.now();\n\t\tg_temp.lastEventType = eventType;\n\t\t\n\t\treturn(returnVal);\n\t}\n\t\n\t/**\n\t * add some class on hover (hover event)\n\t */\n\tthis.addClassOnHover = function(element,className){\n\t\tif(!className)\n\t\t\tvar className = \"ug-button-hover\";\n\t\t\n\t\telement.hover(function(){\n\t\t\tjQuery(this).addClass(className);\n\t\t},function(){\t\t\t\t\n\t\t\tjQuery(this).removeClass(className);\n\t\t});\n\t\t\n\t}\n\t\n\t/**\n\t * destroy hover effect on elements\n\t */\n\tthis.destroyButton = function(element){\n\t\telement.off(\"mouseenter\");\n\t\telement.off(\"mouseleave\");\n\t\telement.off(\"click\");\n\t\telement.off(\"touchstart\");\n\t\telement.off(\"touchend\");\n\t\telement.off(\"mousedown\");\n\t}\n\t\n\t/**\n\t * set button on click event, advanced\n\t */\n\tthis.setButtonOnClick = function(objButton, onClickFunction){\n\t\t\n\t\tt.setButtonMobileReady(objButton);\n\t\t\n\t\tobjButton.on(\"click touchstart\", function(event){\n\t\t\t\n\t\t\tobjThis = jQuery(this);\n\t\t\t\t\t\t\n\t\t\tevent.stopPropagation();\n\t\t\tevent.stopImmediatePropagation();\n\t\t\t\n\t\t\tif(t.validateClickTouchstartEvent(event.type) == false)\n\t\t\t\treturn(true);\n\t\t\t\n\t\t\tonClickFunction(objThis, event);\n\t\t});\n\t\t\n\t}\n\t\n\t/**\n\t * load javascript dynamically\n\t */\n\tthis.loadJs = function(url, addProtocol){\n\t\t\n\t\tif(addProtocol === true)\n\t\t\turl = location.protocol + \"//\" + url;\n\t\t\n\t\tvar tag = document.createElement('script');\n\t\ttag.src = url;\n\t\tvar firstScriptTag = document.getElementsByTagName('script')[0];\n\t\tfirstScriptTag.parentNode.insertBefore(tag, firstScriptTag);\t\t\n\t}\n\t\n\t/**\n\t * load css dymanically\n\t */\n\tthis.loadCss = function(url, addProtocol){\n\t\tif(addProtocol === true)\n\t\t\turl = location.protocol + \"//\" + url;\n\t\t\n\t\tvar tag=document.createElement(\"link\");\n\t\t  tag.setAttribute(\"rel\", \"stylesheet\");\n\t\t  tag.setAttribute(\"type\", \"text/css\");\n\t\t  tag.setAttribute(\"href\", url);\n\t\t  \n\t\tdocument.getElementsByTagName(\"head\")[0].appendChild(tag);\n\t}\n\t\n\t/**\n\t * add event listener with old browsers fallback\n\t */\n\t this.addEvent = function(elem, event, func ) {\n\t\t \n\t\t if (typeof (elem.addEventListener) != \"undefined\") {\n\t\t\t elem.addEventListener(event, func, false);\n\t\t    } else if (elem.attachEvent) {\n\t\t    \telem.attachEvent('on' + event, func);\n\t\t  }\n\t\t \n\t  }\n\n\n\n\n\t/**\n\t * fire event where all images are loaded\n\t */\n\tthis.checkImagesLoaded = function(objImages, onComplete, onProgress){\n\t\t\n\t\tvar arrImages = [];\n\t\tvar counter = 0;\n\t\tvar numImages = objImages.length;\n\t\t\n\t\t//if no images - exit\n\t\tif(numImages == 0 && onComplete){\n\t\t\tonComplete();\n\t\t\treturn(false);\n\t\t}\n\t\t\n\t\t//nested function\n\t\tfunction checkComplete(image, isError){\n\t\t\tcounter++;\n\t\t\t\t\t\t\n\t\t\tif(typeof onProgress == \"function\"){\n\t\t\t\t\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\tonProgress(image, isError);\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\tif(counter == numImages && typeof onComplete == \"function\"){\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\tonComplete();\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t}\n\n\n\t\t//start a little later\n\t\tsetTimeout(function(){\n\t\t\t\n\t\t\t//start the function\n\t\t\tfor(var index=0;index < numImages; index++){\n\t\t\t\tvar image = objImages[index];\n\t\t\t\t\n\t\t\t\t//arrImages.push(jQuery(image));\n\t\t\t\tif(image.naturalWidth !== undefined && image.naturalWidth !== 0){\n\t\t\t\t\tcheckComplete(objImages[index], false);\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tvar proxyImage = jQuery('<img/>');\n\t\t\t\t\tproxyImage.data(\"index\", index);\n\t\t\t\t\t\n\t\t\t\t\tproxyImage.on(\"load\", function(){\n\t\t\t\t\t\tvar index = jQuery(this).data(\"index\");\n\t\t\t\t\t\tcheckComplete(objImages[index], false);\n\t\t\t\t\t});\n\t\t\t\t\tproxyImage.on(\"error\", function(){\n\t\t\t\t\t\tvar index = jQuery(this).data(\"index\");\n\t\t\t\t\t\tcheckComplete(objImages[index], true);\n\t\t\t\t\t});\n\t\t\t\t\tproxyImage.attr(\"src\", image.src);\t\t\t\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t});\n\t\t\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * run the function when the element size will be not 0\n\t */\n\tthis.waitForWidth = function(element, func){\n\t\tvar width = element.width();\n\t\tif(width != 0){\n\t\t\tfunc();\n\t\t\treturn(false);\n\t\t}\n\n\t\tg_temp.handle = setInterval(function(){\n\t\t\twidth = element.width();\n\t\t\tif(width != 0){\n\t\t\t\tclearInterval(g_temp.handle);\n\t\t\t\tfunc();\t\t\t\t\n\t\t\t}\n\n\t\t}, 300);\n\t\t\n\t}\n\t\n\t/**\n\t * shuffle (randomise) array\n\t */\n\tthis.arrayShuffle = function(arr){\n\t\t\n\t\tif(typeof arr != \"object\")\n\t\t\treturn(arr);\n\t\t\t\n\t    for(var j, x, i = arr.length; i; j = parseInt(Math.random() * i), x = arr[--i], arr[i] = arr[j], arr[j] = x);\n\t    return arr;\n\t}\n\n\t\n\t/**\n\t * get object length\n\t */\n\tthis.getObjectLength = function(object){\n\t\tvar num = 0;\n\t\tfor(var item in object)\n\t\t\tnum++;\n\t\treturn num;\n\t}\n\n\t/**\n\t * normalize the percent, return always between 0 and 1\n\t */\n\tthis.normalizePercent = function(percent){\n\t\t\n\t\tif(percent < 0)\n\t\t\tpercent = 0;\n\t\t\n\t\tif(percent > 1)\n\t\t\tpercent = 1;\n\t\t\n\t\treturn(percent);\n\t}\n\t\n\t\n\t/**\n\t * strip tags from string\n\t */\n\tthis.stripTags = function(html){\n\t\t\n\t\tvar text = html.replace(/(<([^>]+)>)/ig,\"\");\n\t\t\n\t\treturn(text);\n\t}\n\t\n\t\n\t/**\n\t * escape double slash\n\t */\n\tthis.escapeDoubleSlash = function(str){\n\t\t\n\t\treturn str.replace('\"','\\\"');\n\t}\n\t\n\t\n\t/**\n\t * html entitles\n\t */\n\tthis.htmlentitles = function(html){\n\t\tvar text = jQuery('<div/>').text(html).html();\n\t\treturn(text);\n\t}\n\t\n\t\n\tthis.z_________END_GENERAL_FUNCTIONS_______ = function(){}\n\t\n}\n\n\n\nvar g_ugFunctions = new UGFunctions();\n\n\n/** -------------- END UgFunctions class ---------------------*/\n\n\n\n/** -------------- MouseWheel ---------------------*/\n\n!function(e){\"function\"==typeof define&&define.amd?define([\"jquery\"],e):\"object\"==typeof exports?module.exports=e:e(jQuery)}(function(e){function t(t){var s=t||window.event,a=h.call(arguments,1),u=0,r=0,d=0,f=0;if(t=e.event.fix(s),t.type=\"mousewheel\",\"detail\"in s&&(d=-1*s.detail),\"wheelDelta\"in s&&(d=s.wheelDelta),\"wheelDeltaY\"in s&&(d=s.wheelDeltaY),\"wheelDeltaX\"in s&&(r=-1*s.wheelDeltaX),\"axis\"in s&&s.axis===s.HORIZONTAL_AXIS&&(r=-1*d,d=0),u=0===d?r:d,\"deltaY\"in s&&(d=-1*s.deltaY,u=d),\"deltaX\"in s&&(r=s.deltaX,0===d&&(u=-1*r)),0!==d||0!==r){if(1===s.deltaMode){var c=e.data(this,\"mousewheel-line-height\");u*=c,d*=c,r*=c}else if(2===s.deltaMode){var m=e.data(this,\"mousewheel-page-height\");u*=m,d*=m,r*=m}return f=Math.max(Math.abs(d),Math.abs(r)),(!l||l>f)&&(l=f,i(s,f)&&(l/=40)),i(s,f)&&(u/=40,r/=40,d/=40),u=Math[u>=1?\"floor\":\"ceil\"](u/l),r=Math[r>=1?\"floor\":\"ceil\"](r/l),d=Math[d>=1?\"floor\":\"ceil\"](d/l),t.deltaX=r,t.deltaY=d,t.deltaFactor=l,t.deltaMode=0,a.unshift(t,u,r,d),o&&clearTimeout(o),o=setTimeout(n,200),(e.event.dispatch||e.event.handle).apply(this,a)}}function n(){l=null}function i(e,t){return r.settings.adjustOldDeltas&&\"mousewheel\"===e.type&&t%120===0}var o,l,s=[\"wheel\",\"mousewheel\",\"DOMMouseScroll\",\"MozMousePixelScroll\"],a=\"onwheel\"in document||document.documentMode>=9?[\"wheel\"]:[\"mousewheel\",\"DomMouseScroll\",\"MozMousePixelScroll\"],h=Array.prototype.slice;if(e.event.fixHooks)for(var u=s.length;u;)e.event.fixHooks[s[--u]]=e.event.mouseHooks;var r=e.event.special.mousewheel={version:\"3.1.9\",setup:function(){if(this.addEventListener)for(var n=a.length;n;)this.addEventListener(a[--n],t,!1);else this.onmousewheel=t;e.data(this,\"mousewheel-line-height\",r.getLineHeight(this)),e.data(this,\"mousewheel-page-height\",r.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var e=a.length;e;)this.removeEventListener(a[--e],t,!1);else this.onmousewheel=null},getLineHeight:function(t){return parseInt(e(t)[\"offsetParent\"in e.fn?\"offsetParent\":\"parent\"]().css(\"fontSize\"),10)},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind(\"mousewheel\",e):this.trigger(\"mousewheel\")},unmousewheel:function(e){return this.unbind(\"mousewheel\",e)}})});\n\n/** -------------- EASING FUNCTIONS ---------------------*/\n\n(function(factory){if(typeof define===\"function\"&&define.amd){define([\"jquery\"],function($){return factory($)})}else if(typeof module===\"object\"&&typeof module.exports===\"object\"){exports=factory(require(\"jquery\"))}else{factory(jQuery)}})(function($){$.easing[\"jswing\"]=$.easing[\"swing\"];var pow=Math.pow,sqrt=Math.sqrt,sin=Math.sin,cos=Math.cos,PI=Math.PI,c1=1.70158,c2=c1*1.525,c3=c1+1,c4=2*PI/3,c5=2*PI/4.5;function bounceOut(x){var n1=7.5625,d1=2.75;if(x<1/d1){return n1*x*x}else if(x<2/d1){return n1*(x-=1.5/d1)*x+.75}else if(x<2.5/d1){return n1*(x-=2.25/d1)*x+.9375}else{return n1*(x-=2.625/d1)*x+.984375}}$.extend($.easing,{def:\"easeOutQuad\",swing:function(x){return $.easing[$.easing.def](x)},easeInQuad:function(x){return x*x},easeOutQuad:function(x){return 1-(1-x)*(1-x)},easeInOutQuad:function(x){return x<.5?2*x*x:1-pow(-2*x+2,2)/2},easeInCubic:function(x){return x*x*x},easeOutCubic:function(x){return 1-pow(1-x,3)},easeInOutCubic:function(x){return x<.5?4*x*x*x:1-pow(-2*x+2,3)/2},easeInQuart:function(x){return x*x*x*x},easeOutQuart:function(x){return 1-pow(1-x,4)},easeInOutQuart:function(x){return x<.5?8*x*x*x*x:1-pow(-2*x+2,4)/2},easeInQuint:function(x){return x*x*x*x*x},easeOutQuint:function(x){return 1-pow(1-x,5)},easeInOutQuint:function(x){return x<.5?16*x*x*x*x*x:1-pow(-2*x+2,5)/2},easeInSine:function(x){return 1-cos(x*PI/2)},easeOutSine:function(x){return sin(x*PI/2)},easeInOutSine:function(x){return-(cos(PI*x)-1)/2},easeInExpo:function(x){return x===0?0:pow(2,10*x-10)},easeOutExpo:function(x){return x===1?1:1-pow(2,-10*x)},easeInOutExpo:function(x){return x===0?0:x===1?1:x<.5?pow(2,20*x-10)/2:(2-pow(2,-20*x+10))/2},easeInCirc:function(x){return 1-sqrt(1-pow(x,2))},easeOutCirc:function(x){return sqrt(1-pow(x-1,2))},easeInOutCirc:function(x){return x<.5?(1-sqrt(1-pow(2*x,2)))/2:(sqrt(1-pow(-2*x+2,2))+1)/2},easeInElastic:function(x){return x===0?0:x===1?1:-pow(2,10*x-10)*sin((x*10-10.75)*c4)},easeOutElastic:function(x){return x===0?0:x===1?1:pow(2,-10*x)*sin((x*10-.75)*c4)+1},easeInOutElastic:function(x){return x===0?0:x===1?1:x<.5?-(pow(2,20*x-10)*sin((20*x-11.125)*c5))/2:pow(2,-20*x+10)*sin((20*x-11.125)*c5)/2+1},easeInBack:function(x){return c3*x*x*x-c1*x*x},easeOutBack:function(x){return 1+c3*pow(x-1,3)+c1*pow(x-1,2)},easeInOutBack:function(x){return x<.5?pow(2*x,2)*((c2+1)*2*x-c2)/2:(pow(2*x-2,2)*((c2+1)*(x*2-2)+c2)+2)/2},easeInBounce:function(x){return 1-bounceOut(1-x)},easeOutBounce:bounceOut,easeInOutBounce:function(x){return x<.5?(1-bounceOut(1-2*x))/2:(1+bounceOut(2*x-1))/2}})});\n\n/** -------------- JQuery Color Animations ---------------------*/\n\n!function(r,n){\n\tif(typeof r.cssHooks == \"undefined\")\t\t//error protection\n\t\treturn(false);\n\tfunction t(r,n,t){var e=f[n.type]||{};return null==r?t||!n.def?null:n.def:(r=e.floor?~~r:parseFloat(r),isNaN(r)?n.def:e.mod?(r+e.mod)%e.mod:0>r?0:e.max<r?e.max:r)}function e(n){var t=l(),e=t._rgba=[];return n=n.toLowerCase(),h(u,function(r,o){var a,s=o.re.exec(n),i=s&&o.parse(s),u=o.space||\"rgba\";return i?(a=t[u](i),t[c[u].cache]=a[c[u].cache],e=t._rgba=a._rgba,!1):void 0}),e.length?(\"0,0,0,0\"===e.join()&&r.extend(e,a.transparent),t):a[n]}function o(r,n,t){return t=(t+1)%1,1>6*t?r+(n-r)*t*6:1>2*t?n:2>3*t?r+(n-r)*(2/3-t)*6:r}var a,s=\"backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor\",i=/^([\\-+])=\\s*(\\d+\\.?\\d*)/,u=[{re:/rgba?\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*(?:,\\s*(\\d?(?:\\.\\d+)?)\\s*)?\\)/,parse:function(r){return[r[1],r[2],r[3],r[4]]}},{re:/rgba?\\(\\s*(\\d+(?:\\.\\d+)?)\\%\\s*,\\s*(\\d+(?:\\.\\d+)?)\\%\\s*,\\s*(\\d+(?:\\.\\d+)?)\\%\\s*(?:,\\s*(\\d?(?:\\.\\d+)?)\\s*)?\\)/,parse:function(r){return[2.55*r[1],2.55*r[2],2.55*r[3],r[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(r){return[parseInt(r[1],16),parseInt(r[2],16),parseInt(r[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(r){return[parseInt(r[1]+r[1],16),parseInt(r[2]+r[2],16),parseInt(r[3]+r[3],16)]}},{re:/hsla?\\(\\s*(\\d+(?:\\.\\d+)?)\\s*,\\s*(\\d+(?:\\.\\d+)?)\\%\\s*,\\s*(\\d+(?:\\.\\d+)?)\\%\\s*(?:,\\s*(\\d?(?:\\.\\d+)?)\\s*)?\\)/,space:\"hsla\",parse:function(r){return[r[1],r[2]/100,r[3]/100,r[4]]}}],l=r.Color=function(n,t,e,o){return new r.Color.fn.parse(n,t,e,o)},c={rgba:{props:{red:{idx:0,type:\"byte\"},green:{idx:1,type:\"byte\"},blue:{idx:2,type:\"byte\"}}},hsla:{props:{hue:{idx:0,type:\"degrees\"},saturation:{idx:1,type:\"percent\"},lightness:{idx:2,type:\"percent\"}}}},f={\"byte\":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},p=l.support={},d=r(\"<p>\")[0],h=r.each;d.style.cssText=\"background-color:rgba(1,1,1,.5)\",p.rgba=d.style.backgroundColor.indexOf(\"rgba\")>-1,h(c,function(r,n){n.cache=\"_\"+r,n.props.alpha={idx:3,type:\"percent\",def:1}}),l.fn=r.extend(l.prototype,{parse:function(o,s,i,u){if(o===n)return this._rgba=[null,null,null,null],this;(o.jquery||o.nodeType)&&(o=r(o).css(s),s=n);var f=this,p=r.type(o),d=this._rgba=[];return s!==n&&(o=[o,s,i,u],p=\"array\"),\"string\"===p?this.parse(e(o)||a._default):\"array\"===p?(h(c.rgba.props,function(r,n){d[n.idx]=t(o[n.idx],n)}),this):\"object\"===p?(o instanceof l?h(c,function(r,n){o[n.cache]&&(f[n.cache]=o[n.cache].slice())}):h(c,function(n,e){var a=e.cache;h(e.props,function(r,n){if(!f[a]&&e.to){if(\"alpha\"===r||null==o[r])return;f[a]=e.to(f._rgba)}f[a][n.idx]=t(o[r],n,!0)}),f[a]&&r.inArray(null,f[a].slice(0,3))<0&&(f[a][3]=1,e.from&&(f._rgba=e.from(f[a])))}),this):void 0},is:function(r){var n=l(r),t=!0,e=this;return h(c,function(r,o){var a,s=n[o.cache];return s&&(a=e[o.cache]||o.to&&o.to(e._rgba)||[],h(o.props,function(r,n){return null!=s[n.idx]?t=s[n.idx]===a[n.idx]:void 0})),t}),t},_space:function(){var r=[],n=this;return h(c,function(t,e){n[e.cache]&&r.push(t)}),r.pop()},transition:function(r,n){var e=l(r),o=e._space(),a=c[o],s=0===this.alpha()?l(\"transparent\"):this,i=s[a.cache]||a.to(s._rgba),u=i.slice();return e=e[a.cache],h(a.props,function(r,o){var a=o.idx,s=i[a],l=e[a],c=f[o.type]||{};null!==l&&(null===s?u[a]=l:(c.mod&&(l-s>c.mod/2?s+=c.mod:s-l>c.mod/2&&(s-=c.mod)),u[a]=t((l-s)*n+s,o)))}),this[o](u)},blend:function(n){if(1===this._rgba[3])return this;var t=this._rgba.slice(),e=t.pop(),o=l(n)._rgba;return l(r.map(t,function(r,n){return(1-e)*o[n]+e*r}))},toRgbaString:function(){var n=\"rgba(\",t=r.map(this._rgba,function(r,n){return null==r?n>2?1:0:r});return 1===t[3]&&(t.pop(),n=\"rgb(\"),n+t.join()+\")\"},toHslaString:function(){var n=\"hsla(\",t=r.map(this.hsla(),function(r,n){return null==r&&(r=n>2?1:0),n&&3>n&&(r=Math.round(100*r)+\"%\"),r});return 1===t[3]&&(t.pop(),n=\"hsl(\"),n+t.join()+\")\"},toHexString:function(n){var t=this._rgba.slice(),e=t.pop();return n&&t.push(~~(255*e)),\"#\"+r.map(t,function(r){return r=(r||0).toString(16),1===r.length?\"0\"+r:r}).join(\"\")},toString:function(){return 0===this._rgba[3]?\"transparent\":this.toRgbaString()}}),l.fn.parse.prototype=l.fn,c.hsla.to=function(r){if(null==r[0]||null==r[1]||null==r[2])return[null,null,null,r[3]];var n,t,e=r[0]/255,o=r[1]/255,a=r[2]/255,s=r[3],i=Math.max(e,o,a),u=Math.min(e,o,a),l=i-u,c=i+u,f=.5*c;return n=u===i?0:e===i?60*(o-a)/l+360:o===i?60*(a-e)/l+120:60*(e-o)/l+240,t=0===l?0:.5>=f?l/c:l/(2-c),[Math.round(n)%360,t,f,null==s?1:s]},c.hsla.from=function(r){if(null==r[0]||null==r[1]||null==r[2])return[null,null,null,r[3]];var n=r[0]/360,t=r[1],e=r[2],a=r[3],s=.5>=e?e*(1+t):e+t-e*t,i=2*e-s;return[Math.round(255*o(i,s,n+1/3)),Math.round(255*o(i,s,n)),Math.round(255*o(i,s,n-1/3)),a]},h(c,function(e,o){var a=o.props,s=o.cache,u=o.to,c=o.from;l.fn[e]=function(e){if(u&&!this[s]&&(this[s]=u(this._rgba)),e===n)return this[s].slice();var o,i=r.type(e),f=\"array\"===i||\"object\"===i?e:arguments,p=this[s].slice();return h(a,function(r,n){var e=f[\"object\"===i?r:n.idx];null==e&&(e=p[n.idx]),p[n.idx]=t(e,n)}),c?(o=l(c(p)),o[s]=p,o):l(p)},h(a,function(n,t){l.fn[n]||(l.fn[n]=function(o){var a,s=r.type(o),u=\"alpha\"===n?this._hsla?\"hsla\":\"rgba\":e,l=this[u](),c=l[t.idx];return\"undefined\"===s?c:(\"function\"===s&&(o=o.call(this,c),s=r.type(o)),null==o&&t.empty?this:(\"string\"===s&&(a=i.exec(o),a&&(o=c+parseFloat(a[2])*(\"+\"===a[1]?1:-1))),l[t.idx]=o,this[u](l)))})})}),l.hook=function(n){var t=n.split(\" \");h(t,function(n,t){r.cssHooks[t]={set:function(n,o){var a,s,i=\"\";if(\"transparent\"!==o&&(\"string\"!==r.type(o)||(a=e(o)))){if(o=l(a||o),!p.rgba&&1!==o._rgba[3]){for(s=\"backgroundColor\"===t?n.parentNode:n;(\"\"===i||\"transparent\"===i)&&s&&s.style;)try{i=r.css(s,\"backgroundColor\"),s=s.parentNode}catch(u){}o=o.blend(i&&\"transparent\"!==i?i:\"_default\")}o=o.toRgbaString()}try{n.style[t]=o}catch(u){}}},r.fx.step[t]=function(n){n.colorInit||(n.start=l(n.elem,t),n.end=l(n.end),n.colorInit=!0),r.cssHooks[t].set(n.elem,n.start.transition(n.end,n.pos))}})},l.hook(s),r.cssHooks.borderColor={expand:function(r){var n={};return h([\"Top\",\"Right\",\"Bottom\",\"Left\"],function(t,e){n[\"border\"+e+\"Color\"]=r}),n}},a=r.Color.names={aqua:\"#00ffff\",black:\"#000000\",blue:\"#0000ff\",fuchsia:\"#ff00ff\",gray:\"#808080\",green:\"#008000\",lime:\"#00ff00\",maroon:\"#800000\",navy:\"#000080\",olive:\"#808000\",purple:\"#800080\",red:\"#ff0000\",silver:\"#c0c0c0\",teal:\"#008080\",white:\"#ffffff\",yellow:\"#ffff00\",transparent:[null,null,null,0],_default:\"#ffffff\"}}(jQuery);\n\n\n/** -------------- SOME GENERAL FUNCTIONS ---------------------*/\n\n/**\n * ismouseover function - check if the mouse over some object\n */\n!function(t){function e(){try{var i=this===document?t(this):t(this).contents();}catch(error){return(false);}i.mousemove(function(e){t.mlp={x:e.pageX,y:e.pageY}}),i.find(\"iframe\").on(\"load\",e)}t.mlp={x:0,y:0},t(e),t.fn.ismouseover=function(){var e=!1;return this.eq(0).each(function(){var i=t(this).is(\"iframe\")?t(this).contents().find(\"body\"):t(this),n=i.offset();e=n.left<=t.mlp.x&&n.left+i.outerWidth()>t.mlp.x&&n.top<=t.mlp.y&&n.top+i.outerHeight()>t.mlp.y}),e}}(jQuery);\n\n\n\nfunction UGThumbsGeneral(){\n\t\n\tvar t = this, g_objThis = jQuery(t);\n\t\n\tvar g_gallery = new UniteGalleryMain(), g_objGallery, g_objects, g_objWrapper; \n\tvar g_arrItems, g_objStrip, g_objParent;\n\tvar g_functions = new UGFunctions();\n\tvar g_strip;\n\tvar outer_options;\n\n\tthis.events = {\t\t\n\t\tSETOVERSTYLE: \"thumbmouseover\",\n\t\tSETNORMALSTYLE: \"thumbmouseout\",\n\t\tSETSELECTEDSTYLE: \"thumbsetselected\",\n\t\t\n\t\tPLACEIMAGE: \"thumbplaceimage\",\n\t\tAFTERPLACEIMAGE: \"thumb_after_place_image\",\n\t\tIMAGELOADERROR: \"thumbimageloaderror\",\n\t\tTHUMB_IMAGE_LOADED: \"thumb_image_loaded\"\n\t};\n\t\n\tvar g_options = {\n\t\t\tthumb_width:88,\t\t\t\t\t\t\t\t//thumb width\n\t\t\tthumb_height:50,\t\t\t\t\t\t\t//thumb height\n\t\t\tthumb_fixed_size: true,\t\t\t\t\t\t//true,false - fixed/dynamic thumbnail width\n\t\t\tthumb_resize_by: \"height\",\t\t\t\t\t//set resize by width or height of the image in case of non fixed size, \n\t\t\t\n\t\t\tthumb_border_effect:true,\t\t\t\t\t//true, false - specify if the thumb has border\n\t\t\tthumb_border_width: 0,\t\t\t\t\t\t//thumb border width\n\t\t\tthumb_border_color: \"#000000\",\t\t\t\t//thumb border color\n\t\t\tthumb_over_border_width: 0,\t\t\t\t\t//thumb border width in mouseover state\n\t\t\tthumb_over_border_color: \"#d9d9d9\",\t\t\t//thumb border color in mouseover state\n\t\t\tthumb_selected_border_width: 1,\t\t\t\t//thumb width in selected state\n\t\t\tthumb_selected_border_color: \"#d9d9d9\",\t\t//thumb border color in selected state\n\t\t\t\n\t\t\tthumb_round_corners_radius:0,\t\t\t\t//thumb border radius\n\t\t\t\n\t\t\tthumb_color_overlay_effect: true,\t\t\t//true,false - thumb color overlay effect, release the overlay on mouseover and selected states\n\t\t\tthumb_overlay_color: \"#000000\",\t\t\t\t//thumb overlay color\n\t\t\tthumb_overlay_opacity: 0.4,\t\t\t\t\t//thumb overlay color opacity\n\t\t\tthumb_overlay_reverse:false,\t\t\t\t//true,false - reverse the overlay, will be shown on selected state only\n\t\t\t\n\t\t\tthumb_image_overlay_effect: false,\t\t\t//true,false - images orverlay effect on normal state only\n\t\t\tthumb_image_overlay_type: \"bw\",\t\t\t\t//bw , blur, sepia - the type of image effect overlay, black and white, sepia and blur.\n\t\t\t\n\t\t\tthumb_transition_duration: 200,\t\t\t\t//thumb effect transition duration\n\t\t\tthumb_transition_easing: \"easeOutQuad\",\t\t//thumb effect transition easing\n\t\t\t\n\t\t\tthumb_show_loader: true,\t\t\t\t\t//show thumb loader while loading the thumb\n\t\t\tthumb_loader_type: \"dark\",\t\t\t\t\t//dark, light - thumb loader type\n\t\t\t\n\t\t\tthumb_wrapper_as_link: false,\t\t\t\t//set thumb as link\n\t\t\tthumb_link_newpage: false\t\t\t\t\t//set the link to open newpage\n\t\t}\n\t\n\t\tvar g_temp = {\n\t\t\ttouchEnabled: false,\n\t\t\tnum_thumbs_checking:0,\n\t\t\tcustomThumbs:false,\n\t\t\tfuncSetCustomThumbHtml:null,\n\t\t\tisEffectBorder: false,\n\t\t\tisEffectOverlay: false,\n\t\t\tisEffectImage: false,\n\t\t\tcolorOverlayOpacity: 1,\n\t\t\tthumbInnerReduce: 0,\n\t\t\tallowOnResize: true\t\t//allow onresize event\n\t\t};\n\t\t\n\t\n\t\tvar g_serviceParams = {\t\t\t//service variables\t\n\t\t\ttimeout_thumb_check:100,\n\t\t\tthumb_max_check_times:600,\t//60 seconds\n\t\t\teventSizeChange: \"thumb_size_change\"\n\t\t};\n\n\t\t/**\n\t\t * init the thumbs object\n\t\t */\n\t\tthis.init = function(gallery, customOptions){\n\t\t\tg_objects = gallery.getObjects();\n\t\t\tg_gallery = gallery;\n\t\t\tg_objGallery = jQuery(gallery);\n\t\t\tg_objWrapper = g_objects.g_objWrapper;\n\t\t\tg_arrItems = g_objects.g_arrItems;\n\n\t\t\tg_options = jQuery.extend(g_options, customOptions);\n\n\t\t\t//set effects vars:\n\t\t\tg_temp.isEffectBorder = g_options.thumb_border_effect;\n\t\t\tg_temp.isEffectOverlay = g_options.thumb_color_overlay_effect;\n\t\t\tg_temp.isEffectImage = g_options.thumb_image_overlay_effect;\n\t\t\n\t\t}\n\t\t\n\t\tthis._____________EXTERNAL_SETTERS__________ = function(){};\n\t\t\n\t\t/**\n\t\t * append the thumbs html to some parent\n\t\t */\n\t\tthis.setHtmlThumbs = function(objParent){\n\t\t\t\t\t\n\t\t\tg_objParent = objParent;\n\t\t\t\n\t\t\tvar numItems = g_gallery.getNumItems();\n\n\t\t\t//set image effect class\n\t\t\tif(g_temp.isEffectImage == true){\n\t\t\t\tvar imageEffectClass = getImageEffectsClass();\n\t\t\t}\n\t\t\t\n\t\t\t //append thumbs to strip\n\t\t\t for(var i=0;i<numItems;i++){\n\t\t\t\t \n\t\t\t\t var objItem = g_arrItems[i];\n\t\t\t\t \n\t\t\t\t var classAddition = \"\";\n\t\t\t\t if(g_temp.customThumbs == false)\n\t\t\t\t\t classAddition = \" ug-thumb-generated\";\n\t\t\t\t\n\t\t\t\tvar zIndex = objItem.index + 1;\n\t\t\t\tvar thumbStyle = \"style='z-index:\"+zIndex+\";'\";\n\t\t\t\t\n\t\t\t \tvar htmlThumb = \"<div class='ug-thumb-wrapper\"+classAddition+\"' \" + thumbStyle + \"></div>\";\n\n\t\t\t\t if(g_options.thumb_wrapper_as_link == true){\n\t\t\t\t\t var urlLink = objItem.link;\n\t\t\t\t\t if(objItem.link == \"\")\n\t\t\t\t\t\t urlLink = \"javascript:void(0)\";\n\t\t\t\t\t\n\t\t\t\t\t var linkTarget = \"\";\n\t\t\t\t\t\tif(g_options.thumb_link_newpage == true && objItem.link)\n\t\t\t\t\t\t\tlinkTarget = \" target='_blank'\";\n\t\t\t\t\t \n\t\t\t\t\t var htmlThumb = \"<a href='\" + urlLink + \"'\"+linkTarget+\" class='ug-thumb-wrapper\"+classAddition+\"'></a>\";\n\t\t\t\t }\n\t\t\t\t \n\t\t\t\t var objThumbWrapper = jQuery(htmlThumb);\n\t\t\t\t \n\t\t\t\t var objImage = objItem.objThumbImage;\n\t\t\t\t\n\t\t\t\t if(g_temp.customThumbs == false){\n \t\t\t\t \n\t\t\t\t\t if(g_options.thumb_show_loader == true && objImage){\n\t\t\t\t\t\t \n\t\t\t\t\t\t var loaderClass = \"ug-thumb-loader-dark\";\n\t\t\t\t\t\t if(g_options.thumb_loader_type == \"bright\")\n\t\t\t\t\t\t\t loaderClass = \"ug-thumb-loader-bright\";\n\t\t\t\t\t\t \n\t\t\t\t\t\t objThumbWrapper.append(\"<div class='ug-thumb-loader \" + loaderClass + \"'></div>\");\n\t\t\t\t\t\t objThumbWrapper.append(\"<div class='ug-thumb-error' style='display:none'></div>\");\n\t\t\t\t\t }\n\t\t\t\t\t \t\t\t\t\t \n\t\t\t\t\t if(objImage){\n\t\t\t\t\t\t objImage.addClass(\"ug-thumb-image\");\n\t\t\t\t\t\t \n\t\t\t\t\t\t //if image overlay effects active, clone the image, and set the effects class on it\n\t\t\t\t\t\t if(g_options.thumb_image_overlay_effect == true){\n\t\t\t\t\t\t\tvar objImageOverlay = objImage.clone().appendTo(objThumbWrapper);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tobjImageOverlay.addClass(\"ug-thumb-image-overlay \" + imageEffectClass).removeClass(\"ug-thumb-image\");\n\t\t\t\t\t\t\tobjImageOverlay.fadeTo(0,0);\n\t\t\t\t\t\t\tobjItem.objImageOverlay = objImageOverlay;\n\t\t\t\t\t\t }\n\t\t\t\t\t\t\t\t \n\t\t\t\t\t\t objThumbWrapper.append(objImage);\n\t\t\t\t\t }\n\t\t\t\t\t \n\t\t\t\t }//end if not custom thumb\n\t\t\t\t \n\t\t\t\t if(g_temp.isEffectBorder)\n\t\t\t\t\t objThumbWrapper.append(\"<div class='ug-thumb-border-overlay'></div>\");\n\t\t\t\t \n\t\t\t\t if(g_temp.isEffectOverlay)\n\t\t\t\t\t objThumbWrapper.append(\"<div class='ug-thumb-overlay'></div>\");\n\t\t\t\t \n\t\t\t\t g_objParent.append(objThumbWrapper);\n\n\t\t\t\t //only custom thumbs function\n\t\t\t\t if(g_temp.customThumbs){\n\t\t\t\t\t \n\t\t\t\t\t g_temp.funcSetCustomThumbHtml(objThumbWrapper, objItem);\n\t\t\t\t\t \n\t\t\t\t }\n\t\t\t\t \n\t\t\t\t //add thumb wrapper object to items array\n\t\t\t\t g_arrItems[i].objThumbWrapper = objThumbWrapper;\n\t\t\t\t \n\t\t\t }\n\t\t}\n\n\t\t\n\t\tfunction _______________SETTERS______________(){};\n\n\t\t\n\t\t/**\n\t\t * set thumb size with all the inside components (without the image).\n\t\t * else, set to all the thumbs\n\t\t */\n\t\tfunction setThumbSize(width, height, objThumb, innerOnly){\n\t\t\t\t\t\t\n\t\t\tvar objCss = {\n\t\t\t\twidth: width+\"px\",\n\t\t\t\theight: height+\"px\"\n\t\t\t};\n\t\t\t\n\t\t\tvar objCssInner = {\n\t\t\t\t\twidth: width-g_temp.thumbInnerReduce+\"px\",\n\t\t\t\t\theight: height-g_temp.thumbInnerReduce+\"px\"\n\t\t\t\t};\n\t\t\t\n\t\t\tvar selectorsString = \".ug-thumb-loader, .ug-thumb-error, .ug-thumb-border-overlay, .ug-thumb-overlay\";\n\t\t\t\n\t\t\t//set thumb size\n\t\t\tif(objThumb){\n\t\t\t\tif(innerOnly !== true)\n\t\t\t\t\tobjThumb.css(objCss);\n\t\t\t\t\n\t\t\t\tobjThumb.children(selectorsString).css(objCssInner);\n\t\t\t}\n\t\t\telse{\t//set to all items\n\t\t\t\tg_objParent.children(\".ug-thumb-wrapper\").css(objCss);\n\t\t\t\tg_objParent.find(selectorsString).css(objCssInner);\n\t\t\t}\n\t\t\t\n\t\t}\n\n\t\t\n\t\t/**\n\t\t * set thumb border effect\n\t\t */\n\t\tfunction setThumbBorderEffect(objThumb, borderWidth, borderColor, noAnimation){\n\t\t\t\t\t\t\n\t\t\tif(!noAnimation)\n\t\t\t\tvar noAnimation = false;\n\t\t\t\n\t\t\tif(g_gallery.isFakeFullscreen())\n\t\t\t\tnoAnimation = true;\n\t\t\t\n\t\t\tvar objBorderOverlay = objThumb.children(\".ug-thumb-border-overlay\");\n\t\t\t\n\t\t\t//set the border to thumb and not to overlay if no border size transition\n\t\t\t/*\n\t\t\tif(g_options.thumb_border_width == g_options.thumb_over_border_width\n\t\t\t\t&& g_options.thumb_border_width == g_options.thumb_selected_border_width)\n\t\t\t\tobjBorderOverlay = objThumb;\n\t\t\t*/\n\t\t\t\n\t\t\tvar objCss = {};\n\t\t\t\n\t\t\tobjCss[\"border-width\"] = borderWidth + \"px\";\n\t\t\t\n\t\t\tif(borderWidth != 0)\n\t\t\t\tobjCss[\"border-color\"] = borderColor;\n\t\t\t\n\t\t\tif(noAnimation && noAnimation === true){\n\t\t\t\tobjBorderOverlay.css(objCss);\n\t\t\t\t\n\t\t\t\tif(borderWidth == 0)\n\t\t\t\t\tobjBorderOverlay.hide();\n\t\t\t\telse\n\t\t\t\t\tobjBorderOverlay.show();\n\t\t\t}\n\t\t\telse{\n\t\t\t\t\n\t\t\t\tif(borderWidth == 0)\n\t\t\t\t\tobjBorderOverlay.stop().fadeOut(g_options.thumb_transition_duration);\n\t\t\t\telse\n\t\t\t\t\tobjBorderOverlay.show().stop().fadeIn(g_options.thumb_transition_duration);\n\t\t\t\t\n\t\t\t\tanimateThumb(objBorderOverlay, objCss);\n\t\t\t}\n\t\t\n\t\t}\n\t\t\n\t\t\n\t\t/**\n\t\t * set thumb border effect\n\t\t */\n\t\tfunction setThumbColorOverlayEffect(objThumb, isActive, noAnimation){\n\t\t\t\n\t\t\tvar objOverlay = objThumb.children(\".ug-thumb-overlay\");\n\t\t\t\n\t\t\tvar animationDuration = g_options.thumb_transition_duration;\n\t\t\tif(noAnimation && noAnimation === true)\n\t\t\t\tanimationDuration = 0;\n\t\t\t\n\t\t\tif(isActive){\n\t\t\t\tobjOverlay.stop(true).fadeTo(animationDuration, g_temp.colorOverlayOpacity);\n\t\t\t}else{\n\t\t\t\tobjOverlay.stop(true).fadeTo(animationDuration, 0);\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\t/**\n\t\t * set thumbnail bw effect\n\t\t */\n\t\tfunction setThumbImageOverlayEffect(objThumb, isActive, noAnimation){\n\t\t\t\n\t\t\tvar objImage = objThumb.children(\"img.ug-thumb-image\");\n\t\t\tvar objImageOverlay = objThumb.children(\"img.ug-thumb-image-overlay\");\n\t\t\t\t\t\n\t\t\tvar animationDuration = g_options.thumb_transition_duration;\n\t\t\tif(noAnimation && noAnimation === true)\n\t\t\t\tanimationDuration = 0;\n\t\t\t\t\t\t\n\t\t\tif(isActive){\n\t\t\t\tobjImageOverlay.stop(true).fadeTo(animationDuration,1);\n\t\t\t}else{\n\t\t\t\t//show the image, hide the overlay\n\t\t\t\tobjImage.fadeTo(0,1);\n\t\t\t\tobjImageOverlay.stop(true).fadeTo(animationDuration,0);\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\t/**\n\t\t * on thumb mouse out - return the thumb style to original\n\t\t */\n\t\tthis.setThumbNormalStyle = function(objThumb, noAnimation, fromWhere){\n\t\t\t\n\t\t\tif(g_temp.customThumbs == true){\n\t\t\t\tobjThumb.removeClass(\"ug-thumb-over\");\n\t\t\t}\n\t\t\t\n\t\t\tif(g_temp.isEffectBorder)\n\t\t\t  setThumbBorderEffect(objThumb, g_options.thumb_border_width, g_options.thumb_border_color, noAnimation);\n\t\t\t\n\t\t\tif(g_temp.isEffectOverlay){\n\t\t\t\tvar isSet = (g_options.thumb_overlay_reverse == true)?false:true;\n\t\t\t\tsetThumbColorOverlayEffect(objThumb, isSet, noAnimation);\n\t\t\t}\n\t\t\t\t\t\t\n\t\t\tif(g_temp.isEffectImage){\n\t\t\t\tsetThumbImageOverlayEffect(objThumb, true, noAnimation);\n\t\t\t}\n\t\t\t\n\t\t\tg_objThis.trigger(t.events.SETNORMALSTYLE, objThumb);\n\t\t}\n\t\t\n\t\t\n\t\t/**\n\t\t * on thumb mouse over - turn thumb style to over position\n\t\t */\n\t\tthis.setThumbOverStyle = function(objThumb){\n\t\t\t\n\t\t\tif(g_temp.customThumbs == true){\n\t\t\t\tobjThumb.addClass(\"ug-thumb-over\");\n\t\t\t}\n\t\t\t\n\t\t\t//border effect\n\t\t\tif(g_temp.isEffectBorder)\n\t\t\t\tsetThumbBorderEffect(objThumb, g_options.thumb_over_border_width, g_options.thumb_over_border_color);\n\t\t\t\n\t\t\t//color overlay effect \n\t\t\tif(g_temp.isEffectOverlay){\n\t\t\t\tvar isSet = (g_options.thumb_overlay_reverse == true)?true:false;\n\t\t\t\tsetThumbColorOverlayEffect(objThumb, isSet);\n\t\t\t}\n\t\t\t\n\t\t\t//image overlay effect\n\t\t\tif(g_temp.isEffectImage == true){\n\t\t\t\tsetThumbImageOverlayEffect(objThumb, false);\n\t\t\t}\n\t\t\t\n\t\t\t//trigger event for parent classes\n\t\t\tg_objThis.trigger(t.events.SETOVERSTYLE, objThumb);\n\t\t}\n\t\t\n\t\t\n\t\t/**\n\t\t * set thumb selected style\n\t\t */\n\t\tfunction setThumbSelectedStyle(objThumb, noAnimation){\n\t\t\t\t\t\t\n\t\t\tif(g_temp.isEffectBorder)\t\t\t\n\t\t\t\tsetThumbBorderEffect(objThumb, g_options.thumb_selected_border_width, g_options.thumb_selected_border_color, noAnimation);\n\t\t\t\n\t\t\tif(g_temp.isEffectOverlay){\n\t\t\t\tvar isSet = (g_options.thumb_overlay_reverse == true)?true:false;\n\t\t\t\tsetThumbColorOverlayEffect(objThumb, isSet, noAnimation);\n\t\t\t}\n\t\t\t\n\t\t\t//image overlay effect\n\t\t\tif(g_temp.isEffectImage)\n\t\t\t\tsetThumbImageOverlayEffect(objThumb, false, noAnimation);\n\n\t\t\t\n\t\t\tg_objThis.trigger(t.events.SETSELECTEDSTYLE, objThumb);\n\n\t\t}\n\t\t\n\t\t\n\t\t/**\n\t\t * set loading error of the thumb\n\t\t */\n\t\tfunction setItemThumbLoadedError(objThumb){\n\t\t\t\n\t\t\tvar objItem = t.getItemByThumb(objThumb);\n\t\t\t\n\t\t\tobjItem.isLoaded = true;\n\t\t\tobjItem.isThumbImageLoaded = false;\t\t\n\t\t\t\n\t\t\tif(g_temp.customThumbs == true){\n\t\t\t\t\n\t\t\t\tg_objThis.trigger(t.events.IMAGELOADERROR, objThumb);\n\t\t\t\treturn(true);\n\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\tobjThumb.children(\".ug-thumb-loader\").hide();\n\t\t\tobjThumb.children(\".ug-thumb-error\").show();\t\t\n\t\t}\n\t\t\n\t\t\n\t\t/**\n\t\t * set border radius of all the thmbs\n\t\t */\n\t\tfunction setThumbsBorderRadius(){\n\t\t\t\t\t\t\n\t\t\tif(g_options.thumb_round_corners_radius <= 0)\n\t\t\t\treturn(false);\n\t\t\t\n\t\t\t//set radius:\n\t\t\tvar objCss = {\n\t\t\t\t\"border-radius\":g_options.thumb_round_corners_radius + \"px\"\n\t\t\t};\n\t\t\t\n\t\t\tg_objParent.find(\".ug-thumb-wrapper, .ug-thumb-wrapper .ug-thumb-border-overlay\").css(objCss);\n\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\t/**\n\t\t * animate thumb transitions\n\t\t */\n\t\tfunction animateThumb(objThumb, objThumbCss){\n\t\t\t\n\t\t\tobjThumb.stop(true).animate(objThumbCss ,{\n\t\t\t\tduration: g_options.thumb_transition_duration,\n\t\t\t\teasing: g_options.thumb_transition_easing,\n\t\t\t\tqueue: false\n\t\t\t});\n\t\t\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\t/**\n\t\t * redraw the thumb style according the state\n\t\t */\n\t\tfunction redrawThumbStyle(objThumb){\n\n\t\t\tif(isThumbSelected(objThumb) == true)\n\t\t\t\tsetThumbSelectedStyle(objThumb, true, \"redraw\");\n\t\t\telse\n\t\t\t\tt.setThumbNormalStyle(objThumb, true, \"redraw\");\n\t\t}\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t/**\n\t\t * place thumb image\n\t\t * retrun - false, if already loaded\n\t\t * return true - if was set on this function\n\t\t * isForce - set the image anyway\n\t\t */\n\t\tfunction placeThumbImage(objThumb, objImage, objItem){\n\t\t\t\n\t\t\t//scale the image\n\t\t\tif(g_options.thumb_fixed_size == true){\n\t\t\t\tg_functions.scaleImageCoverParent(objImage, objThumb);\n\t\t\t}\n\t\t\telse{\n\t\t\t\t\n\t\t\t\t//variant size\n\t\t\t\t\n\t\t\t\tif(g_options.thumb_resize_by == \"height\")\t//horizontal strip\n\t\t\t\t\tg_functions.scaleImageByHeight(objImage, g_options.thumb_height);\n\t\t\t\telse\t\t//vertical strip\n\t\t\t\t\tg_functions.scaleImageByWidth(objImage, g_options.thumb_width);\n\t\t\t\t\n\t\t\t\tvar imageSize = g_functions.getElementSize(objImage);\n\t\t\t\tg_functions.placeElement(objImage, 0, 0);\n\t\t\t\tsetThumbSize(imageSize.width, imageSize.height, objThumb);\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\t//hide loader\n\t\t\tobjThumb.children(\".ug-thumb-loader\").hide();\n\t\t\t\n\t\t\t//show image\n\t\t\tobjImage.show();\n\t\t\t\n\t\t\t//if overlay effect exists\n\t\t\tif(g_options.thumb_image_overlay_effect == false){\n\t\t\t\tobjImage.fadeTo(0,1);\n\t\t\t}\n\t\t\telse{\n\n\t\t\t\t//place bw image also if exists\n\t\t\t\tif(g_options.thumb_image_overlay_effect == true){\n\t\t\t\t\tcopyPositionToThumbOverlayImage(objImage);\n\t\t\t\t}\n\n\t\t\t\t//hide the original image (avoid blinking at start)\n\t\t\t\tobjImage.fadeTo(0,0);\n\n\t\t\t\t//redraw the style, because this function can overwrite it\n\t\t\t\tredrawThumbStyle(objThumb);\n\t\t\t}\n\t\t\t\n\t\t\tg_objThis.trigger(t.events.AFTERPLACEIMAGE, objThumb);\n\t\t\t\n\t\t}\n\n\n\t\t\n\t\t/**\n\t\t * copy image position to bw image (if exists)\n\t\t */\n\t\tfunction copyPositionToThumbOverlayImage(objImage){\n\t\t\t\t\t\t\n\t\t\tvar objImageBW = objImage.siblings(\".ug-thumb-image-overlay\");\n\t\t\tif(objImageBW.length == 0)\n\t\t\t\treturn(false);\n\t\t\t\n\t\t\tvar objSize = g_functions.getElementSize(objImage);\n\t\t\t\t\n\t\t\tvar objCss = {\n\t\t\t\t\t\"width\":objSize.width+\"px\",\n\t\t\t\t\t\"height\":objSize.height+\"px\",\n\t\t\t\t\t\"left\":objSize.left+\"px\",\n\t\t\t\t\t\"top\":objSize.top+\"px\"\n\t\t\t\t}\n\t\t\t\t\n\t\t\tobjImageBW.css(objCss);\n\t\t\t\n\t\t\t//show the image\n\t\t\tif(g_temp.customThumbs == false)\n\t\t\t\tobjImageBW.fadeTo(0,1);\n\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\t\n\t\t\n\t\tfunction _______________GETTERS______________(){};\n\t\t\n\t\t\n\t\t/**\n\t\t * get the image effects class from the options\n\t\t */\n\t\tfunction getImageEffectsClass(){\n\t\t\t\n\t\t\tvar imageEffectClass = \"\";\n\t\t\tvar arrEffects = g_options.thumb_image_overlay_type.split(\",\");\n\t\t\t\n\t\t\tfor(var index in arrEffects){\n\t\t\t\tvar effect = arrEffects[index];\n\t\t\t\t\n\t\t\t\tswitch(effect){\n\t\t\t\t\tcase \"bw\":\n\t\t\t\t\t\timageEffectClass += \" ug-bw-effect\";\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"blur\":\n\t\t\t\t\t\timageEffectClass += \" ug-blur-effect\";\n\t\t\t\t\tbreak; \n\t\t\t\t\tcase \"sepia\":\n\t\t\t\t\t\timageEffectClass += \" ug-sepia-effect\";\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\t\t\n\t\t\treturn(imageEffectClass);\n\t\t}\n\n\t\t/**\n\t\t * get if the thumb is selected\n\t\t */\n\t\tfunction isThumbSelected(objThumbWrapper){\n\t\t\t\n\t\t\tif(objThumbWrapper.hasClass(\"ug-thumb-selected\"))\n\t\t\t\treturn(true);\n\t\t\t\n\t\t\treturn(false);\n\t\t}\n\n\t\t\n\t\tfunction _______________EVENTS______________(){};\n\t\t\n\t\t/**\n\t\t * on thumb size change - triggered by parent on custom thumbs type\n\t\t */\n\t\tfunction onThumbSizeChange(temp, objThumb){\n\t\t\t\n\t\t\tobjThumb = jQuery(objThumb);\n\t\t\tvar objItem = t.getItemByThumb(objThumb);\n\t\t\t\n\t\t\tvar objSize = g_functions.getElementSize(objThumb);\n\t\t\t\n\t\t\tsetThumbSize(objSize.width, objSize.height, objThumb, true);\n\t\t\t\n\t\t\tredrawThumbStyle(objThumb);\n\t\t}\n\t\t\n\t\t\n\t\t/**\n\t\t * on thumb mouse over\n\t\t */\n\t\tfunction onMouseOver(objThumb){\n\t\t\t\n\t\t\t\n\t\t\t//if touch enabled unbind event\n\t\t\tif(g_temp.touchEnabled == true){\n\t\t\t\tobjThumbs.off(\"mouseenter\").off(\"mouseleave\");\n\t\t\t\treturn(true);\n\t\t\t}\n\t\t\t\n\t\t\tif(isThumbSelected(objThumb) == false)\n\t\t\t\tt.setThumbOverStyle(objThumb);\n\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\t/**\n\t\t * on thumb mouse out\n\t\t */\n\t\tfunction onMouseOut(objThumb){\n\t\t\t\n\t\t\tif(g_temp.touchEnabled == true)\n\t\t\t\treturn(true);\n\t\t\t\t\t\t\t\n\t\t\tif(isThumbSelected(objThumb) == false)\n\t\t\t\tt.setThumbNormalStyle(objThumb, false);\n\t\t}\n\t\t\n\t\t\n\t\t/**\n\t\t * on image loaded event\n\t\t */\n\t\tfunction onImageLoaded(image, isForce){\n\n\t\t\tif(!isForce)\n\t\t\t\tvar isForce = false;\n\t\t\t\n\t\t\tvar objImage = jQuery(image);\n\t\t\tvar objThumb = objImage.parents(\".ug-thumb-wrapper\");\n\t\t\t\n\t\t\tif(objThumb.parent().length == 0)\t\t//don't treat detached thumbs\n\t\t\t\treturn(false);\n\t\t\t\t\t\t\n\t\t\tobjItem = t.getItemByThumb(objThumb);\n\t\t\t\n\t\t\tif(objItem.isLoaded == true && isForce === false)\n\t\t\t\treturn(false);\n\t\t\t\n\t\t\tt.triggerImageLoadedEvent(objThumb, objImage);\n\t\t\t\n\t\t\tif(g_temp.customThumbs == true){\n\t\t\t\t\n\t\t\t\tg_objThis.trigger(t.events.PLACEIMAGE, [objThumb, objImage]);\n\t\t\t\n\t\t\t}else{\n\t\t\t\t\n\t\t\t\tplaceThumbImage(objThumb, objImage, objItem);\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\t/**\n\t\t * on image loaded - set appropriete item vars\n\t\t */\n\t\tfunction onThumbImageLoaded(data, objThumb, objImage){\n\t\t\t\n\t\t\tobjItem = t.getItemByThumb(objThumb);\n\t\t\t\t\t\t\n\t\t\tobjItem.isLoaded = true;\n\t\t\tobjItem.isThumbImageLoaded = true;\n\t\t\t\n\t\t\tvar objSize = g_functions.getImageOriginalSize(objImage);\n\t\t\t\n\t\t\tobjItem.thumbWidth = objSize.width;\n\t\t\tobjItem.thumbHeight = objSize.height;\n\t\t\tobjItem.thumbRatioByWidth = objSize.width / objSize.height;\n\t\t\tobjItem.thumbRatioByHeight = objSize.height / objSize.width;\n\t\t\t\n\t\t}\n\n\t\t\n\t\t/**\n\t\t * set thumbnails html properties\n\t\t */\n\t\tthis.setHtmlProperties = function(){\n\t\t\t\t\t\t\n\t\t\t //set thumb params\n\t\t\tif(g_temp.customThumbs == false){\n\t\t\t\tvar objThumbCss = {};\n\t\t\t\n\t\t\t\t//set thumb fixed size\n\t\t\t\tif(g_options.thumb_fixed_size == true)\n\t\t\t\t\tsetThumbSize(g_options.thumb_width, g_options.thumb_height);\n\t\t\t\t\t\n\t\t\t\t setThumbsBorderRadius();\n\t\t\t}\n\t\t\t \n\t\t\t //set normal style to all the thumbs\n\t\t\t g_objParent.children(\".ug-thumb-wrapper\").each(function(){\n\t\t\t\t var objThumb = jQuery(this);\n\t\t\t\t redrawThumbStyle(objThumb);\n\t\t\t });\n\t\t\t\n\n\t\t\t//set color. if empty set from css\n\t\t\tif(g_temp.isEffectOverlay){\n\t\t\t\t\n\t\t\t\tif(g_options.thumb_overlay_color){\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\tvar objCss = {};\n\t\t\t\t\tif(g_functions.isRgbaSupported()){\n\t\t\t\t\t\tvar colorRGB = g_functions.convertHexToRGB(g_options.thumb_overlay_color, g_options.thumb_overlay_opacity);\n\t\t\t\t\t\tobjCss[\"background-color\"] = colorRGB;\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t}else{\n\t\t\t\t\t\tobjCss[\"background-color\"] = g_options.thumb_overlay_color;\n\t\t\t\t\t\tg_temp.colorOverlayOpacity = g_options.thumb_overlay_opacity;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tg_objParent.find(\".ug-thumb-wrapper .ug-thumb-overlay\").css(objCss);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t}\n\n\t\t\t\t\n\t\t/**\n\t\t * set the thumb on selected state\n\t\t */\n\t\tthis.setThumbSelected = function(objThumbWrapper){\n\t\t\t\n\t\t\tif(g_temp.customThumbs == true)\n\t\t\t\tobjThumbWrapper.removeClass(\"ug-thumb-over\");\n\t\t\t\n\t\t\tif(isThumbSelected(objThumbWrapper) == true)\n\t\t\t\treturn(true);\n\t\t\t\n\t\t\tobjThumbWrapper.addClass(\"ug-thumb-selected\");\n\t\t\t\n\t\t\t//set thumb selected style\n\t\t\tsetThumbSelectedStyle(objThumbWrapper);\n\t\t}\n\t\t\n\t\t/**\n\t\t * set the thumb unselected state\n\t\t */\n\t\tthis.setThumbUnselected = function(objThumbWrapper){\n\t\t\t\n\t\t\t//remove the selected class\n\t\t\tobjThumbWrapper.removeClass(\"ug-thumb-selected\");\n\t\t\t\n\t\t\tt.setThumbNormalStyle(objThumbWrapper, false, \"set unselected\");\n\t\t}\n\t\t\n\t\t\n\t\t/**\n\t\t * set the options of the strip\n\t\t */\n\t\tthis.setOptions = function(objOptions){\n\t\t\t\n\t\t\tg_options = jQuery.extend(g_options, objOptions);\n\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\t/**\n\t\t * set thumb inner reduce - reduce this number when resizing thumb inner\n\t\t */\n\t\tthis.setThumbInnerReduce = function(innerReduce){\n\t\t\t\n\t\t\tg_temp.thumbInnerReduce = innerReduce;\n\t\t\t\n\t\t}\n\t\t\n\t\t/**\n\t\t * set custom thumbs\n\t\t * allowedEffects - border, overlay, image\n\t\t */\n\t\tthis.setCustomThumbs = function(funcSetHtml, arrAlowedEffects, customOptions){\n\t\t\t\n\t\t\tg_temp.customThumbs = true;\n\t\t\t\t\t\t\n\t\t\tif(typeof funcSetHtml != \"function\")\n\t\t\t\tthrow new Error(\"The argument should be function\");\n\t\t\t\n\t\t\t\n\t\t\tg_temp.funcSetCustomThumbHtml = funcSetHtml;\n\t\t\t\n\t\t\t//enable effects:\n\t\t\tif(jQuery.inArray(\"overlay\", arrAlowedEffects) == -1)\n\t\t\t\tg_temp.isEffectOverlay = false;\t\t\t\t\n\t\t\t\n\t\t\tif(jQuery.inArray(\"border\", arrAlowedEffects) == -1)\n\t\t\t\tg_temp.isEffectBorder = false;\n\t\t\t\n\t\t\tg_temp.isEffectImage = false;\t\t//for custom effects the image is always off\n\n\t\t\t//check for dissalow onresize\n\t\t\tif(customOptions && customOptions.allow_onresize === false){\n\t\t\t\tg_temp.allowOnResize = false;\n\t\t\t}\n\t\t\n\t\t}\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t\n\t\tthis._____________EXTERNAL_GETTERS__________ = function(){};\n\n\t\t/**\n\t\t * get the options object\n\t\t */\n\t\tthis.getOptions = function(){\n\t\t\t\n\t\t\treturn(g_options);\n\t\t}\n\t\t\n\t\t\n\t\t/**\n\t\t * get num thumbs\n\t\t */\n\t\tthis.getNumThumbs = function(){\n\t\t\tvar numThumbs = g_arrItems.length;\n\t\t\treturn(numThumbs);\n\t\t}\n\n\t\t\n\t\t/**\n\t\t * get thumb image\n\t\t */\n\t\tthis.getThumbImage = function(objThumb){\n\t\t\t\n\t\t\tvar objImage = objThumb.find(\".ug-thumb-image\");\n\t\t\treturn(objImage);\n\t\t}\n\t\t\n\t\t\n\t\t/**\n\t\t * get thumbs by index\n\t\t */\n\t\tthis.getThumbByIndex = function(index){\n\t\t\tvar objThumbs = t.getThumbs();\n\t\t\t\n\t\t\tif(index >= objThumbs.length || index < 0)\n\t\t\t\tthrow new Error(\"Wrong thumb index\");\n\t\t\t\n\t\t\tvar objThumb = jQuery(objThumbs[index]);\n\t\t\t\n\t\t\treturn(objThumb);\n\t\t}\n\t\t\n\t\t\n\t\t/**\n\t\t * get all thumbs jquery object\n\t\t */\n\t\tthis.getThumbs = function(){\n\t\t\treturn(g_objParent.children(\".ug-thumb-wrapper\"));\n\t\t}\n\t\t\n\t\t/**\n\t\t * get item by thumb object\n\t\t */\n\t\tthis.getItemByThumb = function(objThumb){\n\t\t\t\n\t\t\tvar index = objThumb.data(\"index\");\n\t\t\t\n\t\t\tif(index === undefined)\n\t\t\t\tindex = objThumb.index();\n\t\t\t\n\t\t\tvar arrItem = g_arrItems[index];\n\t\t\treturn(arrItem);\n\t\t}\n\t\t\n\t\t\n\t\t/**\n\t\t * is thumb loaded\n\t\t */\n\t\tthis.isThumbLoaded = function(objThumb){\n\t\t\t\n\t\t\tvar objItem = t.getItemByThumb(objThumb);\n\t\t\t\n\t\t\treturn(objItem.isLoaded);\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\t/**\n\t\t * get global thumb size\n\t\t */\n\t\tthis.getGlobalThumbSize = function(){\n\t\t\t\n\t\t\tvar objSize = {\n\t\t\t\twidth:g_options.thumb_width,\n\t\t\t\theight: g_options.thumb_height\n\t\t\t};\n\t\t\t\n\t\t\treturn(objSize);\n\t\t}\n\t\t\n\t\t\n\t\tthis._____________EXTERNAL_OTHERS__________ = function(){};\n\n\n\t\t\n\t\t/**\n\t\t * init events\n\t\t */\n\t\tthis.initEvents = function(){\n\t\t\t\n\t\t\tvar objThumbs = g_objParent.find(\".ug-thumb-wrapper\");\n\t\t\t\n\t\t\tobjThumbs.on(\"touchstart\",function(){\n\t\t\t\tg_temp.touchEnabled = true;\n\t\t\t\tobjThumbs.off(\"mouseenter\").off(\"mouseleave\");\n\t\t\t});\n\t\t\t\n\t\t\tif(g_temp.allowOnResize == true)\n\t\t\t\tg_objWrapper.on(g_serviceParams.eventSizeChange, onThumbSizeChange);\n\t\t\t\n\t\t\tobjThumbs.hover(function(event){\t\t//on mouse enter\n\t\t\t\tvar objThumb = jQuery(this);\n\t\t\t\tonMouseOver(objThumb);\n\t\t\t}, function(event){\t\t//on mouse leave\n\t\t\t\tvar objThumb = jQuery(this);\n\t\t\t\tonMouseOut(objThumb);\n\t\t\t});\n\t\t\t\n\t\t\t\n\t\t\t//on image loaded event - for setting the image sizes\n\t\t\tg_objThis.on(t.events.THUMB_IMAGE_LOADED, onThumbImageLoaded);\n\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\t/**\n\t\t * destroy the thumb element\n\t\t */\n\t\tthis.destroy = function(){\n\t\t\tvar objThumbs = g_objParent.find(\".ug-thumb-wrapper\");\n\t\t\tobjThumbs.off(\"touchstart\");\n\t\t\tg_objWrapper.off(g_serviceParams.eventSizeChange);\n\t\t\tobjThumbs.off(\"mouseenter\");\n\t\t\tobjThumbs.off(\"mouseleave\");\n\t\t\tg_objThis.off(t.events.THUMB_IMAGE_LOADED);\n\t\t}\n\t\t\n\t\t\n\t\t/**\n\t\t * preload thumbs images and put them into the thumbnails\n\t\t */\n\t\tthis.loadThumbsImages = function(){\n\n\t\t\tvar objImages = g_objParent.find(\".ug-thumb-image\");\n\t\t\tg_functions.checkImagesLoaded(objImages, null, function(objImage,isError){\n\t\t\t\t\n\t\t\t\tif(isError == false){\n\t\t\t\t\tonImageLoaded(objImage, true);\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tvar objItem = jQuery(objImage).parent();\n\t\t\t\t\tsetItemThumbLoadedError(objItem);\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t\n\t\t\n\t\t/**\n\t\t * trigger image loaded event\n\t\t */\n\t\tthis.triggerImageLoadedEvent = function(objThumb, objImage){\n\n\t\t\tg_objThis.trigger(t.events.THUMB_IMAGE_LOADED, [objThumb, objImage]);\n\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\t/**\n\t\t * hide thumbs\n\t\t */\n\t\tthis.hideThumbs = function(){\n\t\t\t\n\t\t\tg_objParent.find(\".ug-thumb-wrapper\").hide();\n\t\t\t\n\t\t}\n\t\t\n}\n\n/**\n * thumbs class\n * addon to strip gallery\n */\nfunction UGThumbsStrip(){\n\n\tvar t = this;\n\tvar g_gallery = new UniteGalleryMain(), g_objGallery, g_objects, g_objWrapper; \n\tvar g_arrItems, g_objStrip, g_objStripInner;\n\tvar g_aviaControl, g_touchThumbsControl, g_functions = new UGFunctions();\t\n\tvar g_isVertical = false, g_thumbs = new UGThumbsGeneral();\n\tvar g_functions = new UGFunctions();\n\t\n\tvar g_options = {\n\t\tstrip_vertical_type: false,\n\t\tstrip_thumbs_align: \"left\",\t\t\t\t\t//left, center, right, top, middle, bottom - the align of the thumbs when they smaller then the strip size.\n\t\tstrip_space_between_thumbs:6,\t\t\t\t//space between thumbs\n\t\tstrip_thumb_touch_sensetivity:15,  \t\t\t//from 1-100, 1 - most sensetive, 100 - most unsensetive\n\t\tstrip_scroll_to_thumb_duration:500,\t\t\t//duration of scrolling to thumb\n\t\tstrip_scroll_to_thumb_easing:\"easeOutCubic\",\t\t//easing of scrolling to thumb animation\n\t\tstrip_control_avia:true,\t\t\t\t\t//avia control - move the strip according strip moseover position\n\t\tstrip_control_touch:true,\t\t\t\t\t//touch control - move the strip by dragging it\n\t\tstrip_padding_top: 0,\t\t\t\t\t\t//add some space from the top\t\t\t\t\t\n\t\tstrip_padding_bottom: 0,\t\t\t\t\t//add some space from the bottom\n\t\tstrip_padding_left: 0,\t\t\t\t\t\t//add some space from left\n\t\tstrip_padding_right: 0\t\t\t\t\t\t//add some space from right\n\t}\n\t\n\tvar g_temp = {\n\t\tisRunOnce:false,\n\t\tis_placed:false,\n\t\tisNotFixedThumbs: false,\n\t\thandle: null\n\t};\n\t\n\tvar g_sizes = {\n\t\tstripSize:0,\t\t//set after position thumbs\n\t\tstripActiveSize:0,\t//strip size without the padding\n\t\tstripInnerSize:0,\t\n\t\tthumbSize:0,\n\t\tthumbSecondSize:0\t//size of the height and width of the strip\n\t}\n\t\n\tthis.events = {\t\t//events variables\n\t\t\tSTRIP_MOVE:\"stripmove\",\n\t\t\tINNER_SIZE_CHANGE:\"size_change\"\n\t}\t\n\t\n\t//the defaults for vertical align\n\tvar g_defaultsVertical = {\n\t\tstrip_thumbs_align: \"top\",\n\t\tthumb_resize_by: \"width\"\n\t}\n\t\n\t\n\t/**\n\t * set the thumbs strip html\n\t */\t\n\tthis.setHtml = function(objParent){\n\t\t\n\t\tif(!objParent){\n\t\t\tvar objParent = g_objWrapper;\n\t\t\tif(g_options.parent_container != null)\n\t\t\t\tobjParent = g_options.parent_container;\t\t\t\n\t\t}\n\t\t\t\t\n\t\tobjParent.append(\"<div class='ug-thumbs-strip'><div class='ug-thumbs-strip-inner'></div></div>\");\t\t \n\t\tg_objStrip = objParent.children(\".ug-thumbs-strip\");\n\t\t\n\t\tg_objStripInner = g_objStrip.children(\".ug-thumbs-strip-inner\");\t\t\n\t\t\t\t\n\t\t//put the thumbs to inner strip\n\t\tg_thumbs.setHtmlThumbs(g_objStripInner);\n\t\t\n\t\t//hide thumbs on not fixed mode\n\t\tif(g_temp.isNotFixedThumbs == true)\n\t\t\tg_thumbs.hideThumbs();\n\t\t\n\t}\n\n\t\n\tfunction ___________GENERAL___________(){};\n\t\n\t\n\t/**\n\t * init the strip\n\t */\n\tfunction initStrip(gallery, customOptions){\n\t\t\n\t\tg_objects = gallery.getObjects();\n\t\tg_gallery = gallery;\n\t\t\n\t\tg_gallery.attachThumbsPanel(\"strip\", t);\n\t\t\n\t\tg_objGallery = jQuery(gallery);\n\t\tg_objWrapper = g_objects.g_objWrapper;\n\t\tg_arrItems = g_objects.g_arrItems;\n\n\t\tg_options = jQuery.extend(g_options, customOptions);\n\t\tg_isVertical = g_options.strip_vertical_type;\n\t\t\n\t\t//set vertical defaults\n\t\tif(g_isVertical == true){\n\t\t\tg_options = jQuery.extend(g_options, g_defaultsVertical);\n\t\t\tg_options = jQuery.extend(g_options, customOptions);\n\t\t\t\n\t\t\tcustomOptions.thumb_resize_by = \"width\";\n\t\t}\n\t\t\n\t\tg_thumbs.init(gallery, customOptions);\n\t\t\n\t\tonAfterSetOptions();\n\t}\n\t\n\t\n\t/**\n\t * run this funcion after set options.\n\t */\n\tfunction onAfterSetOptions(){\n\n\t\tvar thumbsOptions = g_thumbs.getOptions();\n\t\t\n\t\tg_temp.isNotFixedThumbs = (thumbsOptions.thumb_fixed_size === false);\n\t\tg_isVertical = g_options.strip_vertical_type;\n\t}\n\t\n\t\n\t/**\n\t * run the strip\n\t */\n\tfunction runStrip(){\n\t\t\n\t\tg_thumbs.setHtmlProperties();\n\t\t\n\t\tinitSizeParams();\n\n\t\tfixSize();\n\n\t\tpositionThumbs();\n\t\t\n\t\t//run only once\n\t\tif(g_temp.isRunOnce == false){\n\n\t\t\t//init thumbs strip touch\n\t\t\tif(g_options.strip_control_touch == true){\n\t\t\t\tg_touchThumbsControl = new UGTouchThumbsControl();\n\t\t\t\tg_touchThumbsControl.init(t);\n\t\t\t}\n\n\t\t\t//init thumbs strip avia control\n\t\t\tif(g_options.strip_control_avia == true){\n\t\t\t\tg_aviaControl = new UGAviaControl();\n\t\t\t\tg_aviaControl.init(t);\n\t\t\t}\n\n\t\t\tcheckControlsEnableDisable();\n\n\t\t\tg_thumbs.loadThumbsImages();\n\t\t\t\n\t\t\tinitEvents();\n\t\t}\n\t\t\n\t\t\t\t\t\t\n\t\tg_temp.isRunOnce = true;\n\n\t}\n\t\n\t\n\t/**\n\t * store strip size and strip active size in vars\n\t * do after all strip size change\n\t */\n\tfunction storeStripSize(size){\n\t\t\n\t\tg_sizes.stripSize = size;\n\n\t\tif(g_isVertical == false)\n\t\t\tg_sizes.stripActiveSize = g_sizes.stripSize - g_options.strip_padding_left - g_options.strip_padding_right;\n\t\telse\n\t\t\tg_sizes.stripActiveSize = g_sizes.stripSize - g_options.strip_padding_top - g_options.strip_padding_bottom;\n\t\t\t\n\t\tif(g_sizes.stripActiveSize < 0)\n\t\t\tg_sizes.stripActiveSize = 0;\n\n\t}\n\t\n\t\n\t/**\n\t * init some size parameters, before size init and after position thumbs\n\t */\n\tfunction initSizeParams(){\n\t\t\n\t\t//set thumb outer size:\n\t\tvar arrThumbs = g_objStripInner.children(\".ug-thumb-wrapper\");\n\t\tvar firstThumb = jQuery(arrThumbs[0]);\n\t\tvar thumbsRealWidth = firstThumb.outerWidth();\n\t\tvar thumbsRealHeight = firstThumb.outerHeight();\n\t\tvar thumbs_options = g_thumbs.getOptions();\n\t\t\n\t\tif(g_isVertical == false){\t\t\t//horizontal\n\t\t\t\n\t\t\tg_sizes.thumbSize = thumbsRealWidth;\n\t\t\n\t\t\tif(thumbs_options.thumb_fixed_size == true){\n\t\t\t\tg_sizes.thumbSecondSize = thumbsRealHeight;\n\t\t\t} else {\n\t\t\t\tg_sizes.thumbSecondSize = thumbs_options.thumb_height;\n\t\t\t}\n\t\t\t\n\t\t\tstoreStripSize(g_objStrip.width());\n\t\t\tg_sizes.stripInnerSize = g_objStripInner.width();\n\t\t\n\t\t}else{\t\t//vertical\n\t\t\tg_sizes.thumbSize = thumbsRealHeight;\n\t\t\t\n\t\t\tif(thumbs_options.thumb_fixed_size == true){\n\t\t\t\tg_sizes.thumbSecondSize = thumbsRealWidth;\n\t\t\t} else {\n\t\t\t\tg_sizes.thumbSecondSize = thumbs_options.thumb_width;\n\t\t\t}\n\t\t\t\n\t\t\tstoreStripSize(g_objStrip.height());\n\n\t\t\tg_sizes.stripInnerSize = g_objStripInner.height();\t\t\t\n\t\t}\n\n\t\t\n\t}\n\t\n\t\n\n\t\n\t/**\n\t * set size of inner strip according the orientation\n\t */\n\tfunction setInnerStripSize(innerSize){\n\n\t\tif(g_isVertical == false)\n\t\t\tg_objStripInner.width(innerSize);\n\t\telse\n\t\t\tg_objStripInner.height(innerSize);\n\t\t\t\n\t\tg_sizes.stripInnerSize = innerSize;\n\t\t\n\t\tcheckControlsEnableDisable();\n\t\t\n\t\tjQuery(t).trigger(t.events.INNER_SIZE_CHANGE);\n\t}\n\t\n\t\n\t/**\n\t * position thumbnails in the thumbs panel\n\t */\n\tfunction positionThumbs(){\n\t\t\n\t\tvar arrThumbs = g_objStripInner.children(\".ug-thumb-wrapper\");\n\t\t\n\t\tvar posx = 0;\n\t\tvar posy = 0;\n\t\t\n\t\tif(g_isVertical == false)\n\t\t\tposy = g_options.strip_padding_top;\n\t\t\n\t\tfor (i = 0; i < arrThumbs.length; i++) {\n\t\t\t\n\t\t\tvar objThumb = jQuery(arrThumbs[i]);\n\t\t\t\n\t\t\t//skip from placing if not loaded yet on non fixed mode\n\t\t\tif(g_temp.isNotFixedThumbs == true){\n\t\t\t\tobjItem = g_thumbs.getItemByThumb(objThumb);\n\t\t\t\tif(objItem.isLoaded == false)\n\t\t\t\t\tcontinue;\n\t\t\t\t\n\t\t\t\t//the thumb is hidden if not placed\n\t\t\t\tobjThumb.show();\n\t\t\t}\n\t\t\t\n\t\t\tg_functions.placeElement(objThumb, posx, posy);\n\t\t\t\n\t\t\tif(g_isVertical == false)\n\t\t\t\tposx += objThumb.outerWidth() + g_options.strip_space_between_thumbs;\n\t\t\telse\n\t\t\t\tposy += objThumb.outerHeight() + g_options.strip_space_between_thumbs;\n\t\t}\n\t\t\n\t\t//set strip size, width or height\n\t\tif(g_isVertical == false)\n\t\t\tvar innerStripSize = posx - g_options.strip_space_between_thumbs;\n\t\telse\n\t\t\tvar innerStripSize = posy - g_options.strip_space_between_thumbs;\n\t\t\t\n\t\tsetInnerStripSize(innerStripSize);\n\t}\n\n\t\n\t\n\t/**\n\t * fix strip and inner size\n\t */\n\tfunction fixSize(){\n\t\t\n\t\tif(g_isVertical == false){\t\t//fix horizontal\n\t\t\t\n\t\t\tvar height = g_sizes.thumbSecondSize;\n\t\t\t\n\t\t\t var objCssStrip = {};\n\t\t\t objCssStrip[\"height\"] = height+\"px\";\n\t\t\t \t\t \n\t\t\t //set inner strip params\n\t\t\t var objCssInner = {};\n\t\t\t objCssInner[\"height\"] = height+\"px\";\n\n\t\t}else{\t//fix vertical\n\t\t\t\n\t\t\tvar width = g_sizes.thumbSecondSize;\n\t\t\t\n\t\t\t var objCssStrip = {};\n\t\t\t objCssStrip[\"width\"] = width+\"px\";\n\t\t\t \t\t \n\t\t\t //set inner strip params\n\t\t\t var objCssInner = {};\n\t\t\t objCssInner[\"width\"] = width+\"px\";\n\t\t\t \n\t\t}\n\t\t \n\t\tg_objStrip.css(objCssStrip);\n\t\tg_objStripInner.css(objCssInner);\t\t\t\t\n\t}\n\t\n\t\n\t\n\t/**\n\t * scroll by some number\n\t * .\n\t */\n\tfunction scrollBy(scrollStep){\n\t\t\n\t\tvar innerPos = t.getInnerStripPos();\n\t\tvar finalPos = innerPos + scrollStep;\n\t\t\n\t\tfinalPos = t.fixInnerStripLimits(finalPos);\n\t\t\n\t\tt.positionInnerStrip(finalPos, true);\t\t\n\t}\n\t\n\n\t/**\n\t * scroll to thumb from min. (left or top) position\n\t */\n\tfunction scrollToThumbMin(objThumb){\n\t\t\n\t\tvar objThumbPos = getThumbPos(objThumb);\n\t\t\n\t\tvar scrollPos = objThumbPos.min * -1;\n\t\tscrollPos = t.fixInnerStripLimits(scrollPos);\n\n\t\tt.positionInnerStrip(scrollPos, true);\n\t}\n\t\n\t\n\t/**\n\t * scroll to thumb from max. (right or bottom) position\n\t */\n\tfunction scrollToThumbMax(objThumb){\n\t\t\n\t\tvar objThumbPos = getThumbPos(objThumb);\t\t\n\t\t\n\t\tvar scrollPos = objThumbPos.max * -1 + g_sizes.stripSize;\n\t\tscrollPos = t.fixInnerStripLimits(scrollPos);\n\t\t\n\t\tt.positionInnerStrip(scrollPos, true);\n\t}\n\n\t\n\t/**\n\t * scroll to some thumbnail\n\t */\n\tfunction scrollToThumb(objThumb){\n\t\t\n\t\tif(isStripMovingEnabled() == false)\n\t\t\treturn(false);\n\t\t\n\t\tvar objBounds = getThumbsInsideBounds();\n\t\t\n\t\tvar objThumbPos = getThumbPos(objThumb);\n\t\t\n\t\tif(objThumbPos.min < objBounds.minPosThumbs){\t\t\t\n\t\t\t\n\t\t\tvar prevThumb = objThumb.prev();\n\t\t\tif(prevThumb.length)\n\t\t\t\tscrollToThumbMin(prevThumb);\n\t\t\telse \n\t\t\t\tscrollToThumbMin(objThumb);\t\t\t\t\n\t\t\t\n\t\t}else if(objThumbPos.max > objBounds.maxPosThumbs){\t\t\t\n\t\t\t\n\t\t\tvar nextThumb = objThumb.next();\n\t\t\tif(nextThumb.length)\n\t\t\t\tscrollToThumbMax(nextThumb);\n\t\t\telse\n\t\t\t\tscrollToThumbMax(objThumb);\n\t\t\t\t\n\t\t}\n\t\t\n\t}\n\t\n\t/**\n\t * scroll to selected thumb\n\t */\n\tfunction scrollToSelectedThumb(){\n\t\t\n\t\tvar selectedItem = g_gallery.getSelectedItem();\n\t\tif(selectedItem == null)\n\t\t\treturn(true);\n\t\t\n\t\tvar objThumb = selectedItem.objThumbWrapper;\n\t\tif(objThumb)\n\t\t\tscrollToThumb(objThumb);\n\t\t\n\t}\n\t\n\t\n\t\n\t/**\n\t * check that the inner strip off the limits position, and reposition it if there is a need\n\t */\n\tfunction checkAndRepositionInnerStrip(){\n\t\tif(isStripMovingEnabled() == false)\n\t\t\treturn(false);\n\t\t\n\t\tvar pos = t.getInnerStripPos();\n\t\t\n\t\tvar posFixed = t.fixInnerStripLimits(pos);\n\t\t\t\t\n\t\tif(pos != posFixed)\n\t\t\tt.positionInnerStrip(posFixed, true);\n\t}\n\t\n\t\n\t/**\n\t * enable / disable controls according inner width (move enabled).\n\t */\n\tfunction checkControlsEnableDisable(){\n\t\t\n\t\tvar isMovingEndbled = isStripMovingEnabled();\n\t\t\n\t\tif(isMovingEndbled == true){\n\t\t\t\n\t\t\tif(g_aviaControl)\n\t\t\t\tg_aviaControl.enable();\n\t\t\t\n\t\t\tif(g_touchThumbsControl)\n\t\t\t\tg_touchThumbsControl.enable();\n\t\t\t\n\t\t}else{\n\t\t\t\n\t\t\tif(g_aviaControl)\n\t\t\t\tg_aviaControl.disable();\n\t\t\t\n\t\t\tif(g_touchThumbsControl)\n\t\t\t\tg_touchThumbsControl.disable();\n\t\t\t\n\t\t}\n\t\t\n\t}\n\t\n\t/**\n\t * align inner strip according the options\n\t */\n\tfunction alignInnerStrip(){\n\t\t\n\t\tif(isStripMovingEnabled())\n\t\t\treturn(false);\n\t\t\n\t\tif(g_isVertical == false)\n\t\t\tg_functions.placeElement(g_objStripInner, g_options.strip_thumbs_align, 0);\n\t\telse\n\t\t\tg_functions.placeElement(g_objStripInner, 0, g_options.strip_thumbs_align);\n\t\t\t\n\t}\n\t\n\t\n\tfunction ___________EVENTS___________(){};\n\t\n\t/**\n\t * on thumb click event. Select the thumb\n\t */\n\tfunction onThumbClick(objThumb){\n\n\t\t//cancel click event only if passed significant movement\n\t\tif(t.isTouchMotionActive()){\n\n\t\t\tvar isSignificantPassed = g_touchThumbsControl.isSignificantPassed();\n\t\t\tif(isSignificantPassed == true)\n\t\t\t\treturn(true);\n\t\t}\n\n\t\t//run select item operation\n\t\tvar objItem = g_thumbs.getItemByThumb(objThumb);\n\n\t\tg_gallery.selectItem(objItem);\n\t}\n\t\n\t\n\t/**\n\t * on some thumb placed, run the resize, but with time passed\n\t */\n\tfunction onThumbPlaced(){\n\t\t\n\t\tclearTimeout(g_temp.handle);\n\t\t\n\t\tg_temp.handle = setTimeout(function(){\n\t\t\t\n\t\t\tpositionThumbs();\n\t\t\t\n\t\t},50);\n\t\t\t\n\t\t\n\t}\n\t\n\t/**\n\t * on item change\n\t */\n\tfunction onItemChange(){\n\n\t\tvar objItem = g_gallery.getSelectedItem();\n\t\tg_thumbs.setThumbSelected(objItem.objThumbWrapper);\n\t\tscrollToThumb(objItem.objThumbWrapper);\n\t}\n\t\n\t\n\t/**\n\t * init panel events\n\t */\n\tfunction initEvents(){\n\t\t\n\t\tg_thumbs.initEvents();\n\n\t\tvar objThumbs = g_objStrip.find(\".ug-thumb-wrapper\");\n\t\t\t\t\n\t\tobjThumbs.on(\"click touchend\", function(event){\n\t\t\t\n\t\t\tvar clickedThumb = jQuery(this);\n\t\t\tonThumbClick(clickedThumb);\n\t\t});\n\t\t\n\t\t//on item change, make the thumb selected\n\t\tg_objGallery.on(g_gallery.events.ITEM_CHANGE, onItemChange);\n\n\t\t\n\t\t//position thumbs after each load on non fixed mode\n\t\tif(g_temp.isNotFixedThumbs){\n\t\t\t\n\t\t\tjQuery(g_thumbs).on(g_thumbs.events.AFTERPLACEIMAGE, onThumbPlaced);\n\t\t\t\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * destroy the strip panel events\n\t */\n\tthis.destroy = function(){\n\t\t\n\t\tvar objThumbs = g_objStrip.find(\".ug-thumb-wrapper\");\n\t\t\n\t\tobjThumbs.off(\"click\");\n\t\tobjThumbs.off(\"touchend\");\n\t\tg_objGallery.off(g_gallery.events.ITEM_CHANGE);\n\n\t\tjQuery(g_thumbs).off(g_thumbs.events.AFTERPLACEIMAGE);\n\t\t\n\t\tif(g_touchThumbsControl)\n\t\t\tg_touchThumbsControl.destroy();\n\t\t\n\t\tif(g_aviaControl)\n\t\t\tg_aviaControl.destroy();\n\t\t\n\t\tg_thumbs.destroy();\n\t}\n\t\n\t\n\tfunction ____________GETTERS___________(){};\n\t\t\n\n\t/**\n\t * check if the inner width is more then strip width\n\t */\n\tfunction isStripMovingEnabled(){\n\t\t\n\t\tif(g_sizes.stripInnerSize > g_sizes.stripActiveSize)\n\t\t\treturn(true);\n\t\telse\n\t\t\treturn(false);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * get bounds, if the thumb not in them, it need to be scrolled\n\t * minPosThumbs, maxPosThumbs - the min and max position that the thumbs should be located to be visible\n\t */\n\tfunction getThumbsInsideBounds(){\n\t\tvar obj = {};\n\t\tvar innerPos = t.getInnerStripPos();\n\t\t\n\t\t//the 1 is gap that avoid exact bounds\n\t\tobj.minPosThumbs = innerPos * -1 + 1;\t\t\t\t\n\t\tobj.maxPosThumbs = innerPos * -1 + g_sizes.stripSize - 1;\t\t\n\t\t\n\t\treturn(obj);\n\t}\n\t\n\t\n\t/**\n\t * get thumb position according the orientation in the inner strip\n\t */\n\tfunction getThumbPos(objThumb){\n\t\t\n\t\tvar objReturn = {};\n\t\t\n\t\tvar objPos = objThumb.position();\n\t\t\n\t\tif(g_isVertical == false){\n\t\t\tobjReturn.min = objPos.left;\n\t\t\tobjReturn.max = objPos.left + g_sizes.thumbSize;\n\t\t}else{\n\t\t\tobjReturn.min = objPos.top;\n\t\t\tobjReturn.max = objPos.top + g_sizes.thumbSize;\n\t\t}\n\n\t\t\n\t\treturn(objReturn);\n\t}\n\t\n\t\n\t\n\t\n\tthis.________EXTERNAL_GENERAL___________ = function(){};\n\n\t/**\n\t * init function for avia controls\n\t */\n\tthis.init = function(gallery, customOptions){\n\t\t\n\t\tinitStrip(gallery, customOptions);\n\t}\n\t\n\t\n\t/**\n\t * set html and properties\n\t */\t\n\tthis.run = function(){\n\t\trunStrip();\n\t}\n\t\n\t\n\t\n\t\n\t/**\n\t* position inner strip on some pos according the orientation\n\t*/\n\tthis.positionInnerStrip = function(pos, isAnimate){\n\t\t\n\t\tif(isAnimate === undefined)\n\t\t\tvar isAnimate = false;\n\t\t\n\t\tif(g_isVertical == false)\n\t\t\tvar objPosition = {\"left\": pos + \"px\"};\n\t\telse\n\t\t\tvar objPosition = {\"top\": pos + \"px\"};\n\t\t\n\t\tif(isAnimate == false){\t\t//normal position\n\t\t\t\n\t\t\tg_objStripInner.css(objPosition);\n\t\t\tt.triggerStripMoveEvent();\n\t\t}\n\t\telse{\t\t//position with animation\n\t\t\t\n\t\t\tt.triggerStripMoveEvent();\n\t\t\t\n\t\t\tg_objStripInner.stop(true).animate(objPosition ,{\n\t\t\t\tduration: g_options.strip_scroll_to_thumb_duration,\n\t\t\t\teasing: g_options.strip_scroll_to_thumb_easing,\n\t\t\t\tqueue: false,\n\t\t\t\tprogress:function(){t.triggerStripMoveEvent()},\n\t\t\t\talways: function(){t.triggerStripMoveEvent()}\n\t\t\t});\t\t\t\t\t\n\t\t\t\n\t\t}\n\t\t\n\t}\n\n\t/**\n\t * trigger event - on strip move\n\t */\n\tthis.triggerStripMoveEvent = function(){\n\t\t\n\t\t//trigger onstripmove event\n\t\tjQuery(t).trigger(t.events.STRIP_MOVE);\n\t\t\n\t}\n\t\n\t\t\n\t\n\t/**\n\t * return true if the touch animation or dragging is active\n\t */\n\tthis.isTouchMotionActive = function(){\n\t\tif(!g_touchThumbsControl)\n\t\t\treturn(false);\n\t\t\n\t\tvar isActive = g_touchThumbsControl.isTouchActive();\n\t\t\n\t\treturn(isActive);\n\t}\n\t\n\t\n\t/**\n\t * check if thmb item visible, means inside the visible part of the inner strip\n\t */\n\tthis.isItemThumbVisible = function(objItem){\n\t\t\n\t\tvar objThumb = objItem.objThumbWrapper;\n\t\tvar thumbPos = objThumb.position();\n\t\t\n\t\tvar posMin = t.getInnerStripPos() * -1;\n\t\t\n\t\tif(g_isVertical == false){\n\t\t\tvar posMax = posMin + g_sizes.stripSize;\n\t\t\tvar thumbPosMin = thumbPos.left;\n\t\t\tvar thumbPosMax = thumbPos.left + objThumb.width();\t\t\t\n\t\t}else{\n\t\t\tvar posMax = posMin + g_sizes.stripSize;\n\t\t\tvar thumbPosMin = thumbPos.top;\n\t\t\tvar thumbPosMax = thumbPos.top + objThumb.height();\t\t\t\n\t\t}\n\t\t\t\t\n\t\tvar isVisible = false;\n\t\tif(thumbPosMax >= posMin && thumbPosMin <= posMax)\n\t\t\tisVisible = true;\n\t\t\n\t\treturn(isVisible);\n\t}\n\t\n\t/**\n\t * get inner strip position according the orientation\n\t */\n\tthis.getInnerStripPos = function(){\n\t\t\n\t\tif(g_isVertical == false)\t\t\t\n\t\t\treturn g_objStripInner.position().left;\n\t\telse\n\t\t\treturn g_objStripInner.position().top;\n\t}\n\t\n\t\n\t/**\n\t * get inner strip limits\n\t */\n\tthis.getInnerStripLimits = function(){\n\t\t\n\t\tvar output = {};\n\t\t\n\t\tif(g_isVertical == false)\n\t\t\toutput.maxPos = g_options.strip_padding_left;\n\t\telse\n\t\t\toutput.maxPos = g_options.strip_padding_top;\n\t\t\n\t\t//debugLine(g_sizes.stripActiveSize);\n\t\t\n\t\toutput.minPos = -(g_sizes.stripInnerSize - g_sizes.stripActiveSize);\n\t\t\n\t\treturn(output);\n\t}\n\n\t\n\t/**\n\t * fix inner position by check boundaries limit\n\t */\n\tthis.fixInnerStripLimits = function(distPos){\n\t\t\n\t\tvar minPos;\n\t\t\n\t\tvar objLimits = t.getInnerStripLimits();\n\t\t\n\t\tif(distPos > objLimits.maxPos)\n\t\t\tdistPos = objLimits.maxPos;\n\t\t\n\t\tif(distPos < objLimits.minPos)\n\t\t\tdistPos = objLimits.minPos;\n\t\t\n\t\treturn(distPos);\n\t}\n\t\n\t\n\t\n\t/**\n\t * scroll left or down\n\t */\n\tthis.scrollForeward = function(){\n\t\tscrollBy(-g_sizes.stripSize);\n\t}\n\t\n\t\n\t/**\n\t * scroll left or down\n\t */\n\tthis.scrollBack = function(){\n\t\t\t\t\n\t\tscrollBy(g_sizes.stripSize);\n\t}\n\t\n\t\n\tthis.________EXTERNAL_SETTERS___________ = function(){};\n\n\t\n\t/**\n\t * set the options of the strip\n\t */\n\tthis.setOptions = function(objOptions){\n\t\t\n\t\tg_options = jQuery.extend(g_options, objOptions);\n\t\t\n\t\tg_thumbs.setOptions(objOptions);\n\t\t\n\t\tonAfterSetOptions();\n\t}\n\t\n\t\n\t/**\n\t * set size of the strip\n\t * the height size is set automatically from options\n\t */\n\tthis.setSizeVertical = function(height){\n\t\t\n\t\t if(g_isVertical == false){\n\t\t\t throw new Error(\"setSizeVertical error, the strip size is not vertical\");\n\t\t\t return(false);\n\t\t }\n\t\t\n\t\t var width = g_sizes.thumbSecondSize;\n\t\t\n\t\t var objCssStrip = {};\n\t\t objCssStrip[\"width\"] = width+\"px\";\n\t\t objCssStrip[\"height\"] = height+\"px\";\n\t\t \n\t\t g_objStrip.css(objCssStrip);\n\n\t\t storeStripSize(height);\n\t\t \n\t\t //set inner strip params\n\t\t var objCssInner = {};\n\t\t objCssInner[\"width\"] = width+\"px\";\n\t\t objCssInner[\"left\"] = \"0px\";\n\t\t objCssInner[\"top\"] = \"0px\";\n\t\t \n\t\t g_objStripInner.css(objCssInner);\n\t\t \n\t\t g_temp.is_placed = true;\n\t\t \n\t\t checkControlsEnableDisable();\n\t}\n\n\t\n\t/**\n\t * set size of the strip\n\t * the height size is set automatically from options\n\t */\n\tthis.setSizeHorizontal = function(width){\n\t\t\t\t\n\t\t if(g_isVertical == true){\n\t\t\t throw new Error(\"setSizeHorizontal error, the strip size is not horizontal\");\n\t\t\t return(false);\n\t\t }\n\t\t\n\t\tvar height = g_sizes.thumbSecondSize + g_options.strip_padding_top + g_options.strip_padding_bottom;\n\t\t\n\t\tvar objCssStrip = {};\n\t\tobjCssStrip[\"width\"] = width+\"px\";\n\t\tobjCssStrip[\"height\"] = height+\"px\";\n\t\t \n\t\tg_objStrip.css(objCssStrip);\n\t\t\n\t\tstoreStripSize(width);\n\t\t\n\t\tvar innerLeft = g_options.strip_padding_left;\n\t\t\n\t\t //set inner strip params\n\t\t var objCssInner = {};\n\t\t objCssInner[\"height\"] = height+\"px\";\n\t\t objCssInner[\"left\"] = innerLeft + \"px\";\n\t\t objCssInner[\"top\"] = \"0px\";\n\t\t \n\t\t g_objStripInner.css(objCssInner);\n\t\t \n\t\t g_temp.is_placed = true;\n\t\t\n\t\t checkControlsEnableDisable();\n\t}\n\t\n\t\n\t/**\n\t * set position of the strip\n\t */\n\tthis.setPosition = function(left, top, offsetLeft, offsetTop){\n\t\tg_functions.placeElement(g_objStrip, left, top, offsetLeft, offsetTop);\t\t\n\t}\n\t\n\t\n\t/**\n\t * resize the panel according the orientation\n\t */\n\tthis.resize = function(newSize){\n\t\t\n\t\tif(g_isVertical == false){\n\t\t\t\n\t\t\tg_objStrip.width(newSize);\n\t\t\tg_sizes.stripActiveSize = newSize - g_options.strip_padding_left - g_options.strip_padding_right;\n\n\t\t}else{\n\t\t\tg_objStrip.height(newSize);\n\t\t\tg_sizes.stripActiveSize = newSize - g_options.strip_padding_top - g_options.strip_padding_bottom;\n\t\t}\n\t\t\n\t\tstoreStripSize(newSize);\n\t\t\n\t\tcheckControlsEnableDisable();\n\t\t\n\t\tcheckAndRepositionInnerStrip();\n\t\t\n\t\talignInnerStrip();\n\t\t\n\t\tscrollToSelectedThumb();\n\t}\n\t\n\t\n\t/**\n\t * set the thumb unselected state\n\t */\n\tthis.setThumbUnselected = function(objThumbWrapper){\n\t\t\n\t\tg_thumbs.setThumbUnselected(objThumbWrapper);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * set custom thumbs\n\t */\n\tthis.setCustomThumbs = function(funcSetHtml){\n\t\t\n\t\tg_thumbs.setCustomThumbs(funcSetHtml);\n\t\t\n\t}\n\t\n\t\n\t\n\t\n\tthis.________EXTERNAL_GETTERS___________ = function(){};\n\t\n\t/**\n\t * get objects\n\t */\t\n\tthis.getObjects = function(){\n\t\t\n\t\tvar thumbsOptions = g_thumbs.getOptions();\n\t\tvar commonOpitions = jQuery.extend(g_options, thumbsOptions);\n\t\t\n\t\tvar obj = {\n\t\t\tg_gallery: g_gallery,\n\t\t\tg_objGallery: g_objGallery,\n\t\t\tg_objWrapper:g_objWrapper,\n\t\t\tg_arrItems:g_arrItems,\n\t\t\tg_objStrip : g_objStrip,\n\t\t\tg_objStripInner : g_objStripInner,\n\t\t\tg_aviaControl:g_aviaControl,\n\t\t\tg_touchThumbsControl:g_touchThumbsControl,\n\t\t\tisVertical: g_isVertical,\n\t\t\tg_options: commonOpitions,\n\t\t\tg_thumbs: g_thumbs\n\t\t};\n\t\t\n\t\treturn(obj);\n\t}\n\t\n\t\n\t/**\n\t * get thumbs onject\n\t */\n\tthis.getObjThumbs = function(){\n\t\t\n\t\treturn(g_thumbs);\n\t}\n\t\n\t\n\t/**\n\t * get selected thumb\n\t */\n\tthis.getSelectedThumb = function(){\n\t\t\n\t\tvar selectedIndex = g_gallery.getSelectedItemIndex();\n\t\tif(selectedIndex == -1)\n\t\t\treturn(null);\n\t\t\n\t\treturn g_thumbs.getThumbByIndex(selectedIndex);\n\t}\n\t\n\t\n\t/**\n\t * get strip size and position object\n\t */\n\tthis.getSizeAndPosition = function(){\n\t\t\n\t\tvar obj = g_functions.getElementSize(g_objStrip);\n\t\t\n\t\treturn(obj);\n\t}\n\t\n\t/**\n\t * get thumbs strip height\n\t */\n\tthis.getHeight = function(){\n\t\t\n\t\tvar stripHeight = g_objStrip.outerHeight();\n\t\t\n\t\treturn(stripHeight)\n\t}\n\t\n\t\n\t/**\n\t * get thumbs strip width\n\t */\n\tthis.getWidth = function(){\n\t\t\n\t\tvar stripWidth = g_objStrip.outerWidth();\n\t\t\n\t\treturn(stripWidth);\n\t}\n\t\n\t\n\t\n\t/**\n\t * get all stored sizes object\n\t */\n\tthis.getSizes = function(){\n\t\t\n\t\treturn(g_sizes);\n\t}\n\t\n\t\n\t/**\n\t * return if vertical orientation or not\n\t */\n\tthis.isVertical = function(){\n\t\treturn(g_isVertical);\n\t}\n\t\n\t\n\t/**\n\t * return if the strip is placed or not\n\t */\n\tthis.isPlaced = function(){\n\t\t\n\t\treturn(g_temp.is_placed);\n\t}\n\t\n\t/**\n\t * return if the strip moving enabled or not\n\t */\n\tthis.isMoveEnabled = function(){\n\t\tvar isEnabled = isStripMovingEnabled();\n\t\treturn(isEnabled);\n\t}\n\n}\n\n\n/**\n * touch thumbs control class\n * addon to strip gallery\n */\nfunction UGTouchThumbsControl(){\n\t\n\tvar g_parent, g_gallery, g_objGallery, g_objects;\n\tvar g_objStrip, g_objStripInner, g_options, g_isVertical;\n\tvar g_functions = new UGFunctions();\n\t\n\t//service variables\t\n\tvar g_serviceParams = {\t\t\t\n\t\ttouch_portion_time:200,\t\t\t\t\t//the time in ms that the potion is counts for continue touch movement\n\t\tthumb_touch_slowFactor:0,\t\t\t\t//set from user\n\t\tminDeltaTime: 70,\t\t\t\t\t\t//don't alow portion less then the minTime\n\t\tminPath: 10,\t\t\t\t\t\t\t//if less then this path, dont' continue motion\n\t\tlimitsBreakAddition: 30,\t\t\t\t//the limits break addition for second return animation\n\t\treturnAnimateSpeed: 500,\t\t\t\t//the speed of return animation\n\t\tanimationEasing: \"easeOutCubic\",\t\t//animation easing function\n\t\treturnAnimationEasing: \"easeOutCubic\"\t//return animation easing function\n\t};\n\t\n\t\n\tvar g_temp = {\t\t\t\t\t//temp variables\n\t\ttouch_active:false,\n\t\tloop_active:false,\n\t\tmousePos:0,\n\t\tinnerPos:0,\n\t\tstartPos:0,\n\t\tstartTime:0,\t\t\n\t\tlastTime:0,\n\t\tbuttonReleaseTime:0,\n\t\tlastPos:0,\n\t\tlastPortionPos:0,\n\t\tlastDeltaTime:0,\n\t\tlastDeltaPos:0,\n\t\tspeed:0,\n\t\thandle:\"\",\n\t\ttouchEnabled: false, \n\t\tisControlEnabled: true\n\t};\n\n\n\t/**\n\t * enable the control\n\t */\n\tthis.enable = function(){\n\t\tg_temp.isControlEnabled = true;\n\t}\n\t\n\t\n\t/**\n\t * disable the control\n\t */\n\tthis.disable = function(){\n\t\tg_temp.isControlEnabled = false;\t\t\n\t}\n\t\n\t/**\n\t * init function for avia controls\n\t */\n\tthis.init = function(objStrip){\n\t\t\n\t\tg_parent = objStrip;\n\t\tg_objects = objStrip.getObjects();\n\t\t\n\t\tg_gallery = g_objects.g_gallery;\n\t\tg_objGallery = g_objects.g_objGallery;\t//jquery object\n\t\t\t\t\n\t\tg_objStrip = g_objects.g_objStrip;\n\t\tg_objStripInner = g_objects.g_objStripInner;\n\t\tg_options = g_objects.g_options;\n\t\tg_isVertical = g_objects.isVertical;\n\t\t\n\t\tsetServiceParams();\n\t\t\n\t\tinitEvents();\n\t}\n\t\n\t/**\n\t * get action related variables\n\t */\n\tfunction getActionVars(){\n\t\t\n\t\tvar currentTime = jQuery.now();\n\n\t\tvar obj = {};\n\t\tobj.passedTime = g_temp.lastTime - g_temp.startTime;\n\t\tobj.lastActiveTime = currentTime - g_temp.buttonReleaseTime;\n\t\tobj.passedDistance = g_temp.lastPos - g_temp.startPos;\n\t\tobj.passedDistanceAbs = Math.abs(obj.passedDistance);\n\t\t\t\t\n\t\treturn(obj);\n\t}\n\t\n\t/**\n\t * return if passed some significant movement\n\t */\n\tthis.isSignificantPassed = function(){\n\t\tvar objVars = getActionVars();\n\t\tif(objVars.passedTime > 300)\n\t\t\treturn(true);\n\t\t\n\t\tif(objVars.passedDistanceAbs > 30)\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\t\t\n\t}\n\t\n\t\n\t/**\n\t * return true if the touch dragging or animate motion is active\n\t */\n\tthis.isTouchActive = function(){\n\t\t\n\t\tif(g_temp.touch_active == true)\n\t\t\treturn(true);\n\t\t\t\n\t\t//check if still animating\n\t\tif(g_objStripInner.is(\":animated\") == true)\n\t\t\treturn(true);\n\t\t\n\t\t//check if just ended, the touch active continue for a few moments.\n\t\tvar objVars = getActionVars();\n\t\tif(objVars.lastActiveTime < 50) \n\t\t\treturn(true);\n\t\t\t\t\n\t\treturn(false);\n\t}\n\t\n\t/**\n\t * set service parameters from user parameters\n\t */\n\tfunction setServiceParams(){\n\t\t\t\t\n\t\t//set slow factor by sensetivity of touch motion\t\t\n\t\tg_serviceParams.thumb_touch_slowFactor = g_functions.normalizeSetting(0.00005, 0.01, 1, 100, g_options.strip_thumb_touch_sensetivity, true);\n\t\t\t\t\n\t\t//debugLine(\"slowfactor \"+ g_serviceParams.thumb_touch_slowFactor);\n\t}\n\t\n\t\n\t/**\n\t * get mouse position based on orientation\n\t */\n\tfunction getMouseOrientPosition(event){\n\t\t\n\t\tif(g_isVertical == false)\n\t\t\treturn(g_functions.getMousePosition(event).pageX);\n\t\telse\n\t\t\treturn(g_functions.getMousePosition(event).pageY);\t\t\t\n\t}\n\t\n\t/**\n\t * position the strip according the touch drag diff\n\t */\n\tfunction handleStripDrag(mousePos){\n\t\tvar diff = g_temp.mousePos - mousePos;\n\t\tvar distPos = g_temp.innerPos - diff;\n\t\t\n\t\t//make harder to drag the limits\n\t\tvar objLimits = g_parent.getInnerStripLimits();\n\t\t\n\t\tif(distPos > objLimits.maxPos){\n\t\t\tvar path = distPos - objLimits.maxPos;\n\t\t\tdistPos = objLimits.maxPos + path/3;\t\t\t\n\t\t}\n\t\t\n\t\tif(distPos < objLimits.minPos){\n\t\t\tvar path = objLimits.minPos - distPos;\n\t\t\tdistPos = objLimits.minPos - path/3;\t\t\t\t\t\t\n\t\t}\n\t\t\n\t\tg_parent.positionInnerStrip(distPos);\n\t}\n\t\n\t\n\t/**\n\t * store initial touch values\n\t */\n\tfunction storeInitTouchValues(pagePos){\n\t\tvar currentInnerPos = g_parent.getInnerStripPos();\n\t\t\n\t\t//remember current mouse position and inner strip position\n\t\tg_temp.mousePos = pagePos;\n\t\tg_temp.innerPos = currentInnerPos;\n\t\tg_temp.lastPortionPos = currentInnerPos;\n\t\tg_temp.lastDeltaTime = 0;\n\t\tg_temp.lastDeltaPos = 0;\n\t\t\n\t\t//init position and time related variables\n\t\tg_temp.startTime = jQuery.now();\n\t\tg_temp.startPos = g_temp.innerPos;\n\t\t\n\t\tg_temp.lastTime = g_temp.startTime;\n\t\tg_temp.lastPos = g_temp.startPos;\n\t\tg_temp.speed = 0;\n\t}\n\t\n\t\n\t/**\n\t * store touch portion data\n\t */\n\tfunction storeTouchPortionData(){\n\t\t\t\t\n\t\t//calc speed\n\t\tvar currentTime = jQuery.now();\n\t\tvar deltaTime = currentTime - g_temp.lastTime;\n\t\t\n\t\tif(deltaTime >= g_serviceParams.touch_portion_time){\n\t\t\tg_temp.lastDeltaTime = currentTime - g_temp.lastTime;\n\t\t\tif(g_temp.lastDeltaTime > g_serviceParams.touch_portion_time)\n\t\t\t\tg_temp.lastDeltaTime = g_serviceParams.touch_portion_time;\n\t\t\t\t\n\t\t\tg_temp.lastDeltaPos = g_temp.lastPos - g_temp.lastPortionPos;\n\t\t\t\t\t\t\n\t\t\tg_temp.lastPortionPos = g_temp.lastPos;\n\t\t\tg_temp.lastTime = currentTime;\n\t\t\t\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * continue touch motion - touch motion ending.\n\t */\n\tfunction continueTouchMotion(){\n\t\t\t\t\n\t\tvar slowFactor = g_serviceParams.thumb_touch_slowFactor;\n\t\t\n\t\t//don't alow portion less then the minTime\n\t\tvar minDeltaTime = g_serviceParams.minDeltaTime;\n\t\t\n\t\t//if less then this path, dont' continue motion\n\t\tvar minPath = g_serviceParams.minPath;\t\n\t\t\n\t\tvar currentInnerPos = g_parent.getInnerStripPos();\n\t\t\n\t\tvar currentTime = jQuery.now();\n\t\tvar deltaTime = currentTime - g_temp.lastTime;\n\t\tvar deltaPos = currentInnerPos - g_temp.lastPortionPos;\n\t\t\n\t\t//if time too fast, take last portion values\n\t\tif(deltaTime < minDeltaTime && g_temp.lastDeltaTime > 0){\n\t\t\tdeltaTime = g_temp.lastDeltaTime;\n\t\t\tdeltaPos = g_temp.lastDeltaPos + deltaPos;\n\t\t}\n\t\t\n\t\t//fix delta time\n\t\tif(deltaTime < minDeltaTime)\n\t\t\tdeltaTime = minDeltaTime;\n\t\t\t\t\t\n\t\tvar dir = (deltaPos > 0)?1:-1;\n\t\t\n\t\tvar speed = 0;\n\t\tif(deltaTime > 0)\n\t\t\tspeed = deltaPos / deltaTime;\t\n\t\t\n\t\tvar path = (speed * speed) / (slowFactor * 2) * dir;\n\t\t\n\t\t//disable path for very slow motions\n\t\tif(Math.abs(path) <= minPath)\n\t\t\tpath = 0;\n\t\t\n\t\t\n\t\tvar innerStripPos = g_parent.getInnerStripPos();\n\t\tvar newPos = innerStripPos + path;\t\n\t\t\n\t\tvar correctPos = g_parent.fixInnerStripLimits(newPos);\n\t\tvar objLimits = g_parent.getInnerStripLimits();\n\t\t\n\t\t//check the off the limits and return (second animation)\n\t\tvar limitsBreakAddition = g_serviceParams.limitsBreakAddition;\n\t\tvar doQueue = false;\n\t\tvar returnPos = correctPos;\n\t\t\n\t\t//fix the first animation position (off the limits)\n\t\tif(newPos > objLimits.maxPos){\n\t\t\tdoQueue = true;\n\t\t\tcorrectPos = limitsBreakAddition;\n\t\t\tif(newPos < limitsBreakAddition)\n\t\t\t\tcorrectPos = newPos;\t\t\t\n\t\t}\n\t\t\t\t\n\t\tif(newPos < objLimits.minPos){\n\t\t\tdoQueue = true;\n\t\t\tvar maxStopPos = objLimits.minPos - limitsBreakAddition;\n\t\t\tcorrectPos = maxStopPos;\n\t\t\tif(newPos > maxStopPos)\n\t\t\t\tcorrectPos = newPos;\n\t\t}\n\t\t\t\t\n\t\tvar correctPath = correctPos - innerStripPos;\n\t\t\n\t\t//set animation speed\t\t\n\t\tvar animateSpeed =  Math.abs(Math.round(speed / slowFactor));\n\t\t\n\t\t//fix animation speed according the paths difference\n\t\tif(path != 0)\n\t\t\tanimateSpeed = animateSpeed * correctPath / path;\t\t\n\t\t\n\t\t\n\t\t//Do first animation\n\t\tif(innerStripPos != correctPos){\n\t\t\t\n\t\t\tvar animateProps = {\"left\":correctPos+\"px\"};\n\t\t\tif(g_isVertical == true)\n\t\t\t\tanimateProps = {\"top\":correctPos+\"px\"};\t\t\n\t\t\t\n\t\t\tg_objStripInner.animate(animateProps ,{\n\t\t\t\t\tduration: animateSpeed,\n\t\t\t\t\teasing: g_serviceParams.animationEasing,\n\t\t\t\t\tqueue: true,\n\t\t\t\t\tprogress:onAnimateProgress \n\t\t\t});\n\t\t\t\t\t\t\n\t\t}\n\t\t\n\t\t\t\t\n\t\t//do second animation if off limits\n\t\tif(doQueue == true){\n\t\t\tvar returnAnimateSpeed = g_serviceParams.returnAnimateSpeed;\n\t\t\t\n\t\t\tvar returnAnimateProps = {\"left\":returnPos+\"px\"};\n\t\t\tif(g_isVertical == true)\n\t\t\t\treturnAnimateProps = {\"top\":returnPos+\"px\"};\t\t\n\t\t\t\n\t\t\t\n\t\t\tg_objStripInner.animate(returnAnimateProps,{\t\t\t\t\n\t\t\t\tduration: returnAnimateSpeed,\n\t\t\t\teasing: g_serviceParams.returnAnimationEasing,\n\t\t\t\tqueue: true,\n\t\t\t\tprogress:onAnimateProgress \n\t\t\t});\n\t\t}\n\t\t\n\t}\n\t\n\t/**\n\t * on animate progress event. store position and trigger event to gallery\n\t */\n\tfunction onAnimateProgress(){\n\t\tg_temp.lastPos = g_parent.getInnerStripPos();\n\t\tg_parent.triggerStripMoveEvent();\n\t}\n\t\n\t/**\n\t * start loop while touching strip\n\t */\n\tfunction startStripTouchLoop(){\n\t\t\n\t\tif(g_temp.loop_active == true)\n\t\t\treturn(true);\n\t\t\t\n\t\tg_temp.loop_active = true;\n\t\tg_temp.handle = setInterval(storeTouchPortionData,10);\n\t}\n\t\n\t\n\t/**\n\t * end loop when not touching\n\t */\n\tfunction endStripTouchLoop(event){\n\t\t\n\t\tif(g_temp.loop_active == false)\n\t\t\treturn(true);\n\t\t\n\t\tif(event){\n\t\t\tvar pagePos = getMouseOrientPosition(event);\n\t\t\tcontinueTouchMotion(pagePos);\n\t\t}\n\t\t\n\t\tg_temp.loop_active = false;\n\t\tg_temp.handle = clearInterval(g_temp.handle);\n\t}\n\t\n\t\n\t/**\n\t * on tuch end event\n\t */\n\tfunction onTouchEnd(event){\n\t\t\n\t\tif(g_temp.isControlEnabled == false)\n\t\t\treturn(true);\n\t\t\t\t\n\t\tg_temp.buttonReleaseTime = jQuery.now();\n\t\t\n\t\tif(g_temp.touch_active == false){\n\t\t\tendStripTouchLoop(event);\n\t\t\treturn(true);\n\t\t}\n\t\t\n\t\tevent.preventDefault();\n\t\t\t\n\t\tg_temp.touch_active = false;\n\t\t\n\t\tendStripTouchLoop(event);\n\t\t\n\t\tg_objStrip.removeClass(\"ug-dragging\");\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * on touch start - start the motion\n\t * @param event\n\t */\n\tfunction onTouchStart(event){\n\t\t\n\t\tif(g_temp.isControlEnabled == false)\n\t\t\treturn(true);\n\t\t\n\t\tevent.preventDefault();\n\t\t\n\t\tg_temp.touch_active = true;\t\t//don't move this up\n\t\t\n\t\tvar pagePos = getMouseOrientPosition(event);\n\t\t\t\t\t\n\t\t//stop inner animation if exist\n\t\tg_objStripInner.stop(true);\n\t\t\n\t\t//store initial touch values\n\t\tstoreInitTouchValues(pagePos);\n\t\tstartStripTouchLoop();\n\t\t\n\t\tg_objStrip.addClass(\"ug-dragging\");\n\t}\n\t\n\t\n\t/**\n\t * on touch move event, move the strip\n\t */\n\tfunction onTouchMove(event){\n\t\t\n\t\tif(g_temp.isControlEnabled == false)\n\t\t\treturn(true);\t\t\n\t\t\n\t\tif(g_temp.touch_active == false)\n\t\t\treturn(true);\n\t\t\n\t\tevent.preventDefault();\n\t\t\n\t\t//detect moving without button press\n\t\tif(event.buttons == 0){\n\t\t\tg_temp.touch_active = false;\n\t\t\t\n\t\t\tendStripTouchLoop(event);\n\t\t\treturn(true);\n\t\t}\n\t\n\t\t//store current position\n\t\tvar pagePos = getMouseOrientPosition(event);\n\t\tg_temp.lastPos = g_parent.getInnerStripPos();\n\t\t\n\t\thandleStripDrag(pagePos);\n\t\t\n\t\tstoreTouchPortionData();\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * init strip touch events\n\t */\n\tfunction initEvents(){\n\t\t\n\t\t//strip mouse down - drag start\n\t\tg_objStrip.bind(\"mousedown touchstart\",onTouchStart);\n\n\t\t\n\t\t//on body mouse up - drag end\n\t\tjQuery(window).add(\"body\").bind(\"mouseup touchend\",onTouchEnd);\n\t\t\t\t\n\t\t//on body move\n\t\tjQuery(\"body\").bind(\"mousemove touchmove\", onTouchMove);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * destroy the touch events\n\t */\n\tthis.destroy = function(){\n\t\tg_objStrip.unbind(\"mousedown\");\n\t\tg_objStrip.unbind(\"touchstart\");\n\t\tjQuery(window).add(\"body\").unbind(\"mouseup\").unbind(\"touchend\");\n\t\tjQuery(\"body\").unbind(\"mousemove\").unbind(\"touchmove\");\n\t}\n}\n\n\n/** -------------- Panel Base Functions ---------------------*/\n\nfunction UGPanelsBase(){\n\t\n\tvar g_temp, g_panel, g_objPanel, g_options, g_objThis;\n\tvar g_gallery = new UniteGalleryMain();\n\tvar t = this, g_objHandle, g_objGallery;\n\tvar g_functions = new UGFunctions();\n\t\n\t\n\t/**\n\t * init the base panel\n\t */\n\tthis.init = function(gallery, g_tempArg, g_panelArg, options, g_objThisArg){\n\t\tg_temp = g_tempArg; \n\t\tg_panel = g_panelArg;\n\t\tg_gallery = gallery;\n\t\tg_options = options;\n\t\tg_objThis = g_objThisArg;\n\t\t\n\t\tg_objGallery = jQuery(g_gallery);\n\t}\n\n\t/**\n\t * set common panels html\n\t */\n\tthis.setHtml = function(g_objPanelArg){\n\t\t\n\t\tg_objPanel = g_objPanelArg;\n\t\t\n\t\tif(g_temp.panelType == \"strip\")\n\t\t\tvar enable_handle = g_options.strippanel_enable_handle;\n\t\telse\n\t\t\tvar enable_handle = g_options.gridpanel_enable_handle;\n\t\t\n\t\t// add handle\n\t\tif (enable_handle == true) {\n\t\t\tg_objHandle = new UGPanelHandle();\n\t\t\tg_objHandle.init(g_panel, g_objPanel, g_options, g_temp.panelType, g_gallery);\n\t\t\tg_objHandle.setHtml();\n\t\t}\n\t\t\n\t\t\n\t\t//set disabled at start if exists\n\t\tif(g_temp.isDisabledAtStart === true){\n\t\t\tvar html = \"<div class='ug-overlay-disabled'></div>\";\n\t\t\tg_objPanel.append(html);\n\t\t\t\n\t\t\tsetTimeout(function(){\n\t\t\t\tg_objPanel.children(\".ug-overlay-disabled\").hide();\n\t\t\t}, g_temp.disabledAtStartTimeout);\n\t\t\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * place common elements\n\t */\n\tthis.placeElements = function(){\n\t\t\n\t\t// place handle\n\t\tif (g_objHandle)\n\t\t\tg_objHandle.placeHandle();\t\t\n\t}\n\t\n\t\n\t/**\n\t * init common events\n\t */\n\tthis.initEvents = function(){\n\t\t\n\t\t// set handle events\n\t\tif (g_objHandle){\n\t\t\tg_objHandle.initEvents();\n\t\t\t\n\t\t\t//set on slider action events\n\t\t\tg_objGallery.on(g_gallery.events.SLIDER_ACTION_START, function(){\t\t\t\n\t\t\t\tg_objHandle.hideHandle();\n\t\t\t});\n\t\t\t\n\t\t\tg_objGallery.on(g_gallery.events.SLIDER_ACTION_END, function(){\t\t\t\n\t\t\t\tg_objHandle.showHandle();\n\t\t\t});\n\t\t\t\n\t\t}\n\t\t\n\t}\n\t\n\t/**\n\t * destroy the panel events\n\t */\n\tthis.destroy = function(){\n\t\t\n\t\tif(g_objHandle){\n\t\t\tg_objHandle.destroy();\n\t\t\tg_objGallery.off(g_gallery.events.SLIDER_ACTION_START);\n\t\t\tg_objGallery.off(g_gallery.events.SLIDER_ACTION_END);\n\t\t}\n\t\t\n\t}\n\t\n\t/**\n\t * place panel with some animation\n\t */\n\tfunction placePanelAnimation(panelDest, functionOnComplete) {\n\n\t\tswitch (g_temp.orientation) {\n\t\tcase \"right\": // vertical\n\t\tcase \"left\":\n\t\t\tvar objCss = {\n\t\t\t\tleft : panelDest + \"px\"\n\t\t\t};\n\t\t\tbreak;\n\t\tcase \"top\":\n\t\tcase \"bottom\":\n\t\t\tvar objCss = {\n\t\t\t\ttop : panelDest + \"px\"\n\t\t\t};\n\t\t\tbreak;\n\t\t}\n\n\t\tg_objPanel.stop(true).animate(objCss, {\n\t\t\tduration : 300,\n\t\t\teasing : \"easeInOutQuad\",\n\t\t\tqueue : false,\n\t\t\tcomplete : function() {\n\t\t\t\tif (functionOnComplete)\n\t\t\t\t\tfunctionOnComplete();\n\t\t\t}\n\t\t});\n\n\t}\n\t\n\t\n\t/**\n\t * place the panel without animation\n\t * \n\t * @param panelDest\n\t */\n\tfunction placePanelNoAnimation(panelDest) {\n\n\t\tswitch (g_temp.orientation) {\n\t\tcase \"right\": // vertical\n\t\tcase \"left\":\n\t\t\tg_functions.placeElement(g_objPanel, panelDest, null);\n\t\t\tbreak;\n\t\tcase \"top\":\n\t\tcase \"bottom\":\n\t\t\tg_functions.placeElement(g_objPanel, null, panelDest);\n\t\t\tbreak;\n\t\t}\n\t}\n\t\n\t/**\n\t * event on panel slide finish\n\t */\n\tfunction onPanelSlideFinish() {\n\n\t\tg_objThis.trigger(g_panel.events.FINISH_MOVE);\n\n\t}\n\t\n\t\n\t/**\n\t * open the panel\n\t */\n\tthis.openPanel = function(noAnimation) {\n\n\t\tif (!noAnimation)\n\t\t\tvar noAnimation = false;\n\n\t\tif (g_objPanel.is(\":animated\"))\n\t\t\treturn (false);\n\n\t\tif (g_temp.isClosed == false)\n\t\t\treturn (false);\n\n\t\tg_temp.isClosed = false;\n\n\t\tg_objThis.trigger(g_panel.events.OPEN_PANEL);\n\n\t\tif (noAnimation === false)\n\t\t\tplacePanelAnimation(g_temp.originalPos, onPanelSlideFinish);\n\t\telse {\n\n\t\t\tplacePanelNoAnimation(g_temp.originalPos);\n\t\t\tonPanelSlideFinish();\n\t\t}\n\n\t}\n\n\t\n\t/**\n\t * close the panel (slide in)\n\t */\n\tthis.closePanel = function(noAnimation) {\n\n\t\tif (!noAnimation)\n\t\t\tvar noAnimation = false;\n\n\t\tif (g_objPanel.is(\":animated\"))\n\t\t\treturn (false);\n\n\t\tif (g_temp.isClosed == true)\n\t\t\treturn (false);\n\n\t\tvar panelDest = t.getClosedPanelDest();\n\n\t\tg_temp.isClosed = true;\n\n\t\tg_objThis.trigger(g_panel.events.CLOSE_PANEL);\n\n\t\tif (noAnimation === false)\n\t\t\tplacePanelAnimation(panelDest, onPanelSlideFinish);\n\t\telse {\n\t\t\tplacePanelNoAnimation(panelDest);\n\t\t\tonPanelSlideFinish();\n\t\t}\n\n\t}\n\t\n\t/**\n\t * set the panel that it's in closed state, and set original pos for opening\n\t * later\n\t */\n\tthis.setClosedState = function(originalPos) {\n\t\t\n\t\tg_temp.originalPos = originalPos;\n\t\tg_objThis.trigger(g_panel.events.CLOSE_PANEL);\n\n\t\tg_temp.isClosed = true;\n\t}\n\n\t/**\n\t * set the panel opened state\n\t */\n\tthis.setOpenedState = function(originalPos) {\n\t\tg_objThis.trigger(g_panel.events.OPEN_PANEL);\n\n\t\tg_temp.isClosed = false;\n\t}\n\n\t/**\n\t * get closed panel destanation\n\t */\n\tthis.getClosedPanelDest = function() {\n\n\t\tvar objPanelSize = g_functions.getElementSize(g_objPanel), panelDest;\n\n\t\tswitch (g_temp.orientation) {\n\t\tcase \"left\":\n\t\t\tg_temp.originalPos = objPanelSize.left;\n\t\t\tpanelDest = -g_temp.panelWidth;\n\t\t\tbreak;\n\t\tcase \"right\":\n\t\t\tg_temp.originalPos = objPanelSize.left;\n\t\t\tvar gallerySize = g_gallery.getSize();\n\t\t\tpanelDest = gallerySize.width;\n\t\t\tbreak;\n\t\tcase \"top\":\n\t\t\tg_temp.originalPos = objPanelSize.top;\n\t\t\tpanelDest = -g_temp.panelHeight;\n\t\t\tbreak;\n\t\tcase \"bottom\":\n\t\t\tg_temp.originalPos = objPanelSize.top;\n\t\t\tvar gallerySize = g_gallery.getSize();\n\t\t\tpanelDest = gallerySize.height;\n\t\t\tbreak;\n\t\t}\n\n\t\treturn (panelDest);\n\t}\n\n\n\t/**\n\t * tells if the panel is closed\n\t */\n\tthis.isPanelClosed = function() {\n\n\t\treturn (g_temp.isClosed);\n\t}\n\t\n\t\n\t/**\n\t * set the panel disabled at start, called after init before setHtml\n\t * it's enabled again after timeout end\n\t */\n\tthis.setDisabledAtStart = function(timeout){\n\t\t\n\t\tif(timeout <= 0)\n\t\t\treturn(false);\n\t\t\t\n\t\tg_temp.isDisabledAtStart = true;\n\t\tg_temp.disabledAtStartTimeout = timeout;\n\t\t\n\t}\n\t\n\t\n}\n\n\n/** -------------- Panel Handle object ---------------------*/\n\nfunction UGPanelHandle(){\n\t\n\tvar t = this, g_objPanel, g_panel, g_objHandleTip, g_panelOptions = {};\n\tvar g_functions = new UGFunctions();\n\t\n\tvar g_options = {\n\t\t\tpanel_handle_align: \"top\",\t\t//top, middle, bottom , left, right, center - close handle tip align on the handle bar according panel orientation\n\t\t\tpanel_handle_offset: 0,\t\t\t//offset of handle bar according the valign\n\t\t\tpanel_handle_skin: 0\t\t\t//skin of the handle, if empty inherit from gallery skin\n\t};\n\t\n\t\n\t/**\n\t * init the handle\n\t */\n\tthis.init = function(panel, objPanel, panelOptions, panelType, gallery){\n\t\tg_panel = panel;\n\t\tg_objPanel = objPanel;\n\t\t\n\t\t//set needed options\n\t\tswitch(panelType){\t\t\n\t\t\tcase \"grid\":\n\t\t\t\tg_options.panel_handle_align = panelOptions.gridpanel_handle_align;\n\t\t\t\tg_options.panel_handle_offset = panelOptions.gridpanel_handle_offset;\n\t\t\t\tg_options.panel_handle_skin = panelOptions.gridpanel_handle_skin;\n\t\t\tbreak;\n\t\t\tcase \"strip\":\n\t\t\t\tg_options.panel_handle_align = panelOptions.strippanel_handle_align;\n\t\t\t\tg_options.panel_handle_offset = panelOptions.strippanel_handle_offset;\n\t\t\t\tg_options.panel_handle_skin = panelOptions.strippanel_handle_skin;\n\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow new Error(\"Panel handle error: wrong panel type: \" + panelType);\t\t\t\n\t\t\tbreak;\n\t\t}\n\t\t\n\t\t//set arrows skin:\n\t\tvar galleryOptions = gallery.getOptions();\n\t\tvar globalSkin = galleryOptions.gallery_skin;\t\t\n\t\tif(g_options.panel_handle_skin == \"\")\n\t\t\tg_options.panel_handle_skin = globalSkin;\n\t\t\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * set handle html\n\t */\n\tthis.setHtml = function(){\n\t\t\n\t\tvar orientation = g_panel.getOrientation();\n\t\t\t\t\n\t\tvar classTip = \"ug-panel-handle-tip\";\n\t\t\n\t\tswitch(orientation){\n\t\t\tcase \"right\":\n\t\t\t\tclassTip += \" ug-handle-tip-left\";\t\t\t\t\n\t\t\tbreak;\n\t\t\tcase \"left\":\n\t\t\t\tclassTip += \" ug-handle-tip-right\";\n\t\t\tbreak;\n\t\t\tcase \"bottom\":\n\t\t\t\tclassTip += \" ug-handle-tip-top\";\t\t\t\t\n\t\t\tbreak;\n\t\t\tcase \"top\":\n\t\t\t\tclassTip += \" ug-handle-tip-bottom\";\n\t\t\tbreak;\n\t\t}\n\t\t\n\t\tg_objPanel.append(\"<div class='\"+classTip+\" ug-skin-\" + g_options.panel_handle_skin + \"'></div>\");\n\t\tg_objHandleTip = g_objPanel.children(\".ug-panel-handle-tip\");\n\t}\n\t\n\t\n\t/**\n\t * remove hover state of the tip\n\t */\n\tfunction removeHoverState(){\n\t\t\t\t\n\t\tg_objHandleTip.removeClass(\"ug-button-hover\");\n\t}\n\t\n\t/**\n\t * add closed state class\n\t */\n\tfunction setClosedState(){\n\t\t\t\t\n\t\tg_objHandleTip.addClass(\"ug-button-closed\");\t\t\n\t}\n\t\n\t/**\n\t * add closed state class\n\t */\n\tfunction removeClosedState(){\n\t\tg_objHandleTip.removeClass(\"ug-button-closed\");\t\t\n\t}\n\n\t/**\n\t * on handle click, close or open panel\n\t */\n\tfunction onHandleClick(event){\n\t\t\n\t\tevent.stopPropagation();\n\t\tevent.stopImmediatePropagation();\n\t\t\n\t\tif(g_functions.validateClickTouchstartEvent(event.type) == false)\n\t\t\treturn(true);\n\t\t\n\t\tif(g_panel.isPanelClosed())\n\t\t\tg_panel.openPanel();\n\t\telse\n\t\t\tg_panel.closePanel();\n\t}\n\t\n\t/**\n\t * init events\n\t */\n\tthis.initEvents = function(){\n\t\tg_functions.addClassOnHover(g_objHandleTip);\n\t\tg_objHandleTip.bind(\"click touchstart\", onHandleClick);\n\t\t\n\t\t//on panel open\n\t\tjQuery(g_panel).on(g_panel.events.OPEN_PANEL, function(){\n\t\t\tremoveHoverState();\n\t\t\tremoveClosedState();\n\t\t});\n\t\t\n\t\t//one panel close\n\t\tjQuery(g_panel).on(g_panel.events.CLOSE_PANEL, function(){\n\t\t\tremoveHoverState();\n\t\t\tsetClosedState();\n\t\t});\n\t\t\n\t}\n\t\n\t/**\n\t * destroy the handle panel events\n\t */\n\tthis.destroy = function(){\n\t\tg_functions.destroyButton(g_objHandleTip);\n\t\tjQuery(g_panel).off(g_panel.events.OPEN_PANEL);\n\t\tjQuery(g_panel).off(g_panel.events.CLOSE_PANEL);\n\t}\n\t\n\t\n\t\n\t/**\n\t * check and fix align option, set write direction\n\t */\n\tfunction checkAndFixAlign(){\n\t\tvar orientation = g_panel.getOrientation();\n\t\t\n\t\tswitch(orientation){\n\t\t\tcase \"right\":\n\t\t\tcase \"left\":\n\t\t\t\tif(g_options.panel_handle_align != \"top\" && g_options.panel_handle_align != \"bottom\")\n\t\t\t\t\tg_options.panel_handle_align = \"top\";\n\t\t\tbreak;\n\t\t\tcase \"bottom\":\n\t\t\t\tif(g_options.panel_handle_align != \"left\" && g_options.panel_handle_align != \"right\")\n\t\t\t\t\tg_options.panel_handle_align = \"left\";\n\t\t\tbreak;\n\t\t\tcase \"top\":\n\t\t\t\tif(g_options.panel_handle_align != \"left\" && g_options.panel_handle_align != \"right\")\n\t\t\t\t\tg_options.panel_handle_align = \"right\";\t\t\t\t\n\t\t\tbreak;\n\t\t}\t\t\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * place the panel\n\t */\n\tthis.placeHandle = function(){\n\t\tvar handleSize = g_functions.getElementSize(g_objHandleTip);\n\t\t\n\t\tcheckAndFixAlign();\n\t\t\t\t\n\t\tvar orientation = g_panel.getOrientation();\n\t\t\n\t\tswitch(orientation){\n\t\t\tcase \"left\":\n\t\t\t\tg_functions.placeElement(g_objHandleTip, \"right\", g_options.panel_handle_align, -handleSize.width);\n\t\t\tbreak;\n\t\t\tcase \"right\":\n\t\t\t\tg_functions.placeElement(g_objHandleTip, -handleSize.width, g_options.panel_handle_align, 0 ,g_options.panel_handle_offset);\n\t\t\tbreak;\n\t\t\tcase \"top\":\n\t\t\t\tg_functions.placeElement(g_objHandleTip, g_options.panel_handle_align, \"bottom\", g_options.panel_handle_offset, -handleSize.height);\n\t\t\tbreak;\n\t\t\tcase \"bottom\":\n\t\t\t\tg_functions.placeElement(g_objHandleTip, g_options.panel_handle_align, \"top\", g_options.panel_handle_offset, -handleSize.height);\n\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow new Error(\"Wrong panel orientation: \" + orientation);\n\t\t\tbreak;\n\t\t}\n\t\t\n\t}\n\t\n\t/**\n\t * hide the handle\n\t */\n\tthis.hideHandle = function(){\n\t\t\n\t\tif(g_objHandleTip.is(\":visible\") == true)\n\t\t\tg_objHandleTip.hide();\n\t\n\t}\n\t\n\t/**\n\t * show the handle\n\t */\n\tthis.showHandle = function(){\n\t\t\n\t\tif(g_objHandleTip.is(\":visible\") == false)\n\t\t\tg_objHandleTip.show();\n\t\t\n\t}\n\t\n\t\n}\n\n/**\n * grid panel class addon to grid gallery\n */\nfunction UGStripPanel() {\n\n\tvar t = this, g_objThis = jQuery(this);\n\tvar g_gallery = new UniteGalleryMain(), g_objGallery, g_objWrapper, g_objPanel;\n\tvar g_functions = new UGFunctions(), g_objStrip = new UGThumbsStrip(), g_panelBase = new UGPanelsBase();\n\tvar g_objButtonNext, g_objButtonPrev;\n\n\tthis.events = {\n\t\tFINISH_MOVE : \"gridpanel_move_finish\", // called after close or open panel (slide finish).\n\t\tOPEN_PANEL : \"open_panel\", \t\t\t   // called before opening the panel.\n\t\tCLOSE_PANEL : \"close_panel\" \t\t   // called before closing the panel.\n\t};\n\n\tvar g_options = {\n\n\t\tstrippanel_vertical_type : false, // true, false - specify if the panel is vertical or horizonatal type\n\n\t\tstrippanel_padding_top : 8,       // space from top of the panel\n\t\tstrippanel_padding_bottom : 8,    // space from bottom of the panel\n\n\t\tstrippanel_padding_left : 0,      // space from left of the panel\n\t\tstrippanel_padding_right : 0,     // space from right of the panel\n\n\t\tstrippanel_enable_buttons : true, // enable buttons from the sides of the panel\n\t\tstrippanel_buttons_skin : \"\",     // skin of the buttons, if empty inherit from gallery skin\n\t\t\t\t\t\t\t\t\t\t  \n\t\tstrippanel_padding_buttons : 2,   // padding between the buttons and the panel\n\n\t\tstrippanel_buttons_role : \"scroll_strip\",   // scroll_strip, advance_item - the role of the side buttons\n\t\t\n\t\tstrippanel_enable_handle : true,  // enable grid handle\n\t\tstrippanel_handle_align : \"top\",  // top, middle, bottom , left, right, center - close handle tip align on the handle bar according panel orientation\n\t\tstrippanel_handle_offset : 0, \t  // offset of handle bar according the valign\n\t\t\t\t\t\t\t\t\t\t\n\t\tstrippanel_handle_skin : \"\", \t  // skin of the handle, if empty inherit  from gallery skin\n\n\t\tstrippanel_background_color : \"\"  // background color of the strip wrapper, if not set, it will be taken from the css\n\t\t\n\t};\n\n\tvar g_defaults_vertical = {\n\t\tstrip_vertical_type : true,\n\t\tstrippanel_padding_left : 8,\n\t\tstrippanel_padding_right : 8,\n\t\tstrippanel_padding_top : 0,\n\t\tstrippanel_padding_bottom : 0\n\t};\n\n\tvar g_defaults_no_buttons = {\n\t\tstrippanel_padding_left : 8,\n\t\tstrippanel_padding_right : 8,\n\t\tstrippanel_padding_top : 8,\n\t\tstrippanel_padding_bottom : 8\n\t};\n\n\tvar g_temp = {\n\t\tpanelType: \"strip\",\n\t\tpanelWidth : 0,\n\t\tpanelHeight : 0,\n\t\tisEventsInited : false,\n\t\tisClosed : false,\n\t\torientation : null,\n\t\toriginalPos : null,\n\t\tisFirstRun : true\n\t};\n\n\t/**\n\t * init the panel\n\t */\n\tfunction initPanel(gallery, customOptions) {\n\t\tg_gallery = gallery;\n\n\t\tg_objGallery = jQuery(g_gallery);\n\n\t\tg_options = jQuery.extend(g_options, customOptions);\n\n\t\tvar repeatCustomOptions = false;\n\n\t\tif (g_options.strippanel_vertical_type == true) {\n\t\t\tg_options = jQuery.extend(g_options, g_defaults_vertical);\n\t\t\trepeatCustomOptions = true;\n\t\t}\n\n\t\tif (g_options.strippanel_enable_buttons == false) {\n\t\t\tg_options = jQuery.extend(g_options, g_defaults_no_buttons);\n\t\t\trepeatCustomOptions = true;\n\t\t}\n\n\t\tif (repeatCustomOptions == true)\n\t\t\tg_options = jQuery.extend(g_options, customOptions); // do the\n\t\t\n\t\t\n\t\t// set arrows skin:\n\t\tvar galleryOptions = g_gallery.getOptions();\n\t\tvar globalSkin = galleryOptions.gallery_skin;\n\t\tif (g_options.strippanel_buttons_skin == \"\")\n\t\t\tg_options.strippanel_buttons_skin = globalSkin;\n\n\t\tg_objWrapper = g_gallery.getElement();\n\t\t\n\t\t//init the base panel object:\n\t\tg_panelBase.init(g_gallery, g_temp, t, g_options, g_objThis);\n\t\t\n\t\t//init thumbs strip\n\t\tg_objStrip = new UGThumbsStrip();\n\t\tg_objStrip.init(g_gallery, g_options);\n\t\t\n\t}\n\n\t\n\t/**\n\t * validate panel before run\n\t */\n\tfunction validatePanelBeforeRun() {\n\t\t\n\t\tif (g_options.strippanel_vertical_type == false) { // horizontal\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// validate\n\t\t\tif (g_temp.panelWidth == 0) {\n\t\t\t\tthrow new Error(\n\t\t\t\t\t\t\"Strip panel error: The width not set, please set width\");\n\t\t\t\treturn (false);\n\t\t\t}\n\n\t\t} else { // vertical validate\n\n\t\t\tif (g_temp.panelHeight == 0) {\n\t\t\t\tthrow new Error(\n\t\t\t\t\t\t\"Strip panel error: The height not set, please set height\");\n\t\t\t\treturn (false);\n\t\t\t}\n\n\t\t}\n\n\t\t// validate orientation\n\t\tif (g_temp.orientation == null) {\n\t\t\tthrow new Error(\n\t\t\t\t\t\"Wrong orientation, please set panel orientation before run\");\n\t\t\treturn (false);\n\t\t}\n\n\t\treturn (true);\n\t}\n\n\t/**\n\t * run the panel\n\t */\n\tfunction runPanel() {\n\n\t\t// validation\n\t\tif (g_temp.isFirstRun == true && validatePanelBeforeRun() == false)\n\t\t\treturn (false);\n\n\t\tg_objStrip.run();\n\t\t\n\t\tsetElementsSize();\n\t\tplaceElements();\n\t\t\t\t\n\t\tinitEvents();\n\n\t\tg_temp.isFirstRun = false;\n\n\t\tcheckSideButtons();\n\t}\n\n\t/**\n\t * set panel html\n\t */\n\tfunction setPanelHtml(parentContainer) {\n\t\t\n\t\tif (!parentContainer)\n\t\t\tvar parentContainer = g_objWrapper;\n\n\t\t// add panel wrapper\n\t\tparentContainer.append(\"<div class='ug-strip-panel'></div>\");\n\n\t\tg_objPanel = parentContainer.children('.ug-strip-panel');\n\n\t\t// add arrows:\n\t\tif (g_options.strippanel_enable_buttons == true) {\n\n\t\t\tvar arrowPrevClass = \"ug-strip-arrow-left\";\n\t\t\tvar arrowNextClass = \"ug-strip-arrow-right\";\n\t\t\tif (g_options.strippanel_vertical_type == true) {\n\t\t\t\tarrowPrevClass = \"ug-strip-arrow-up\";\n\t\t\t\tarrowNextClass = \"ug-strip-arrow-down\";\n\t\t\t}\n\n\t\t\tg_objPanel.append(\"<div class='ug-strip-arrow \" + arrowPrevClass\n\t\t\t\t\t+ \" ug-skin-\" + g_options.strippanel_buttons_skin\n\t\t\t\t\t+ \"'><div class='ug-strip-arrow-tip'></div></div>\");\n\t\t\tg_objPanel.append(\"<div class='ug-strip-arrow \" + arrowNextClass\n\t\t\t\t\t+ \" ug-skin-\" + g_options.strippanel_buttons_skin\n\t\t\t\t\t+ \"'><div class='ug-strip-arrow-tip'></div></div>\");\n\n\t\t}\n\t\t\n\t\tg_panelBase.setHtml(g_objPanel);\n\t\t\n\t\tg_objStrip.setHtml(g_objPanel);\n\t\t\n\t\tif (g_options.strippanel_enable_buttons == true) {\n\t\t\tg_objButtonPrev = g_objPanel.children(\".\" + arrowPrevClass);\n\t\t\tg_objButtonNext = g_objPanel.children(\".\" + arrowNextClass);\n\t\t}\n\n\t\tsetHtmlProperties();\n\t}\n\n\t/**\n\t * set html properties according the options\n\t */\n\tfunction setHtmlProperties() {\n\n\t\t// set panel background color\n\t\tif (g_options.strippanel_background_color != \"\")\n\t\t\tg_objPanel.css(\"background-color\",\n\t\t\t\t\tg_options.strippanel_background_color);\n\n\t}\n\n\t/**\n\t * set elements size horizontal type\n\t */\n\tfunction setElementsSize_hor() {\n\t\t\n\t\t// get strip height\n\t\tvar stripHeight = g_objStrip.getHeight();\n\t\tvar panelWidth = g_temp.panelWidth;\n\n\t\t// set buttons height\n\t\tif (g_objButtonNext) {\n\t\t\tg_objButtonPrev.height(stripHeight);\n\t\t\tg_objButtonNext.height(stripHeight);\n\n\t\t\t// arrange buttons tip\n\t\t\tvar prevTip = g_objButtonPrev.children(\".ug-strip-arrow-tip\");\n\t\t\tg_functions.placeElement(prevTip, \"center\", \"middle\");\n\n\t\t\tvar nextTip = g_objButtonNext.children(\".ug-strip-arrow-tip\");\n\t\t\tg_functions.placeElement(nextTip, \"center\", \"middle\");\n\t\t}\n\n\t\t// set panel height\n\t\tvar panelHeight = stripHeight + g_options.strippanel_padding_top\n\t\t\t\t+ g_options.strippanel_padding_bottom;\n\n\t\t// set panel size\n\t\tg_objPanel.width(panelWidth);\n\t\tg_objPanel.height(panelHeight);\n\n\t\tg_temp.panelHeight = panelHeight;\n\n\t\t// set strip size\n\t\tvar stripWidth = panelWidth - g_options.strippanel_padding_left\t- g_options.strippanel_padding_right;\n\n\t\tif (g_objButtonNext) {\n\t\t\tvar buttonWidth = g_objButtonNext.outerWidth();\n\t\t\tstripWidth = stripWidth - buttonWidth * 2 - g_options.strippanel_padding_buttons * 2;\n\t\t}\n\n\t\tg_objStrip.resize(stripWidth);\n\t}\n\n\t/**\n\t * set elements size vertical type\n\t */\n\tfunction setElementsSize_vert() {\n\t\t\t\t\n\t\t// get strip width\n\t\tvar stripWidth = g_objStrip.getWidth();\n\t\tvar panelHeight = g_temp.panelHeight;\n\t\t\n\t\t// set buttons height\n\t\tif (g_objButtonNext) {\n\t\t\tg_objButtonPrev.width(stripWidth);\n\t\t\tg_objButtonNext.width(stripWidth);\n\n\t\t\t// arrange buttons tip\n\t\t\tvar prevTip = g_objButtonPrev.children(\".ug-strip-arrow-tip\");\n\t\t\tg_functions.placeElement(prevTip, \"center\", \"middle\");\n\n\t\t\tvar nextTip = g_objButtonNext.children(\".ug-strip-arrow-tip\");\n\t\t\tg_functions.placeElement(nextTip, \"center\", \"middle\");\n\t\t}\n\n\t\t// set panel width\n\t\tvar panelWidth = stripWidth + g_options.strippanel_padding_left\n\t\t\t\t+ g_options.strippanel_padding_right;\n\n\t\t// set panel size\n\t\tg_objPanel.width(panelWidth);\n\t\tg_objPanel.height(panelHeight);\n\n\t\tg_temp.panelWidth = panelWidth;\n\n\t\t// set strip size\n\t\tvar stripHeight = panelHeight - g_options.strippanel_padding_top\n\t\t\t\t- g_options.strippanel_padding_bottom;\n\n\t\tif (g_objButtonNext) {\n\t\t\tvar buttonHeight = g_objButtonNext.outerHeight();\n\t\t\tstripHeight = stripHeight - buttonHeight * 2\n\t\t\t\t\t- g_options.strippanel_padding_buttons * 2;\n\t\t}\n\n\t\tg_objStrip.resize(stripHeight);\n\t}\n\n\t/**\n\t * set elements size and place the elements\n\t */\n\tfunction setElementsSize() {\n\n\t\tif (g_options.strippanel_vertical_type == false)\n\t\t\tsetElementsSize_hor();\n\t\telse\n\t\t\tsetElementsSize_vert();\n\t}\n\n\t/**\n\t * place elements horizontally\n\t */\n\tfunction placeElements_hor() {\n\n\t\t// place buttons\n\t\tif (g_objButtonNext) {\n\t\t\tg_functions.placeElement(g_objButtonPrev, \"left\", \"top\",\n\t\t\t\t\tg_options.strippanel_padding_left,\n\t\t\t\t\tg_options.strippanel_padding_top);\n\t\t\tg_functions.placeElement(g_objButtonNext, \"right\", \"top\",\n\t\t\t\t\tg_options.strippanel_padding_right,\n\t\t\t\t\tg_options.strippanel_padding_top);\n\t\t}\n\n\t\tvar stripX = g_options.strippanel_padding_left;\n\t\tif (g_objButtonNext)\n\t\t\tstripX += g_objButtonNext.outerWidth()\n\t\t\t\t\t+ g_options.strippanel_padding_buttons;\n\n\t\tg_objStrip.setPosition(stripX, g_options.strippanel_padding_top);\n\n\t}\n\n\t/**\n\t * place elements vertically\n\t */\n\tfunction placeElements_vert() {\n\n\t\t// place buttons\n\t\tif (g_objButtonNext) {\n\t\t\tg_functions.placeElement(g_objButtonPrev, \"left\", \"top\",\n\t\t\t\t\tg_options.strippanel_padding_left,\n\t\t\t\t\tg_options.strippanel_padding_top);\n\t\t\tg_functions.placeElement(g_objButtonNext, \"left\", \"bottom\",\n\t\t\t\t\tg_options.strippanel_padding_left,\n\t\t\t\t\tg_options.strippanel_padding_bottom);\n\t\t}\n\n\t\tvar stripY = g_options.strippanel_padding_top;\n\t\tif (g_objButtonNext)\n\t\t\tstripY += g_objButtonNext.outerHeight()\n\t\t\t\t\t+ g_options.strippanel_padding_buttons;\n\n\t\tg_objStrip.setPosition(g_options.strippanel_padding_left, stripY);\n\t}\n\n\t/**\n\t * place elements\n\t */\n\tfunction placeElements() {\n\n\t\tif (g_options.strippanel_vertical_type == false)\n\t\t\tplaceElements_hor();\n\t\telse\n\t\t\tplaceElements_vert();\n\n\t\tg_panelBase.placeElements();\n\n\t}\n\n\n\n\tfunction __________EVENTS___________() {\n\t}\n\t;\n\n\t/**\n\t * on next button click\n\t */\n\tfunction onNextButtonClick(objButton) {\n\n\t\tif (g_functions.isButtonDisabled(objButton))\n\t\t\treturn (true);\n\n\t\tif (g_options.strippanel_buttons_role == \"advance_item\")\n\t\t\tg_gallery.nextItem();\n\t\telse\n\t\t\tg_objStrip.scrollForeward();\n\t}\n\n\t/**\n\t * on previous button click\n\t */\n\tfunction onPrevButtonClick(objButton) {\n\n\t\tif (g_functions.isButtonDisabled(objButton))\n\t\t\treturn (true);\n\n\t\tif (g_options.strippanel_buttons_role == \"advance_item\")\n\t\t\tg_gallery.prevItem();\n\t\telse\n\t\t\tg_objStrip.scrollBack();\n\t}\n\n\t/**\n\t * check buttons if they need to be disabled or not\n\t */\n\tfunction checkSideButtons() {\n\t\t\t\t\n\t\tif (!g_objButtonNext)\n\t\t\treturn (true);\n\n\t\t// if the strip not movable - disable both buttons\n\t\tif (g_objStrip.isMoveEnabled() == false) {\n\t\t\tg_functions.disableButton(g_objButtonPrev);\n\t\t\tg_functions.disableButton(g_objButtonNext);\n\t\t\treturn (true);\n\t\t}\n\t\t\n\t\t// check the limits\n\t\tvar limits = g_objStrip.getInnerStripLimits();\n\t\tvar pos = g_objStrip.getInnerStripPos();\n\t\t\n\t\tif (pos >= limits.maxPos) {\n\t\t\tg_functions.disableButton(g_objButtonPrev);\n\t\t} else {\n\t\t\tg_functions.enableButton(g_objButtonPrev);\n\t\t}\n\n\t\tif (pos <= limits.minPos)\n\t\t\tg_functions.disableButton(g_objButtonNext);\n\t\telse\n\t\t\tg_functions.enableButton(g_objButtonNext);\n\n\t}\n\n\t/**\n\t * on strip move event\n\t */\n\tfunction onStripMove() {\n\t\tcheckSideButtons();\n\t}\n\n\t/**\n\t * on item change event, disable or enable buttons according the images\n\t * position\n\t */\n\tfunction onItemChange() {\n\n\t\tif (g_gallery.isLastItem())\n\t\t\tg_functions.disableButton(g_objButtonNext);\n\t\telse\n\t\t\tg_functions.enableButton(g_objButtonNext);\n\n\t\tif (g_gallery.isFirstItem())\n\t\t\tg_functions.disableButton(g_objButtonPrev);\n\t\telse\n\t\t\tg_functions.enableButton(g_objButtonPrev);\n\n\t}\n\n\n\t/**\n\t * init panel events\n\t */\n\tfunction initEvents() {\n\n\t\tif (g_temp.isEventsInited == true)\n\t\t\treturn (false);\n\t\t\n\t\tg_temp.isEventsInited = true;\n\t\t\n\t\t// buttons events\n\t\tif (g_objButtonNext) {\n\n\t\t\t// add hove class\n\t\t\tg_functions.addClassOnHover(g_objButtonNext, \"ug-button-hover\");\n\t\t\tg_functions.addClassOnHover(g_objButtonPrev, \"ug-button-hover\");\n\n\t\t\t// add click events\n\t\t\tg_functions.setButtonOnClick(g_objButtonPrev, onPrevButtonClick);\n\t\t\tg_functions.setButtonOnClick(g_objButtonNext, onNextButtonClick);\n\n\t\t\t// add disable / enable buttons on strip move event\n\t\t\tif (g_options.strippanel_buttons_role != \"advance_item\") {\n\t\t\t\t\n\t\t\t\tjQuery(g_objStrip).on(g_objStrip.events.STRIP_MOVE, onStripMove);\n\t\t\t\t\n\t\t\t\tjQuery(g_objStrip).on(g_objStrip.events.INNER_SIZE_CHANGE, checkSideButtons);\n\t\t\t\t\n\t\t\t\tg_objGallery.on(g_gallery.events.SIZE_CHANGE, checkSideButtons);\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\tvar galleryOptions = g_gallery.getOptions();\n\t\t\t\tif (galleryOptions.gallery_carousel == false)\n\t\t\t\t\tjQuery(g_gallery).on(g_gallery.events.ITEM_CHANGE, onItemChange);\n\t\t\t}\n\n\t\t}\n\n\t\tg_panelBase.initEvents();\n\t}\n\t\n\t/**\n\t * destroy the strip panel events\n\t */\n\tthis.destroy = function(){\n\t\t\n\t\tif(g_objButtonNext){\n\t\t\tg_functions.destroyButton(g_objButtonNext);\n\t\t\tg_functions.destroyButton(g_objButtonPrev);\n\t\t\tjQuery(g_objStrip).off(g_objStrip.events.STRIP_MOVE);\n\t\t\tjQuery(g_gallery).off(g_gallery.events.ITEM_CHANGE);\n\t\t\tjQuery(g_gallery).off(g_gallery.events.SIZE_CHANGE);\n\t\t}\n\t\t\n\t\tg_panelBase.destroy();\n\t\tg_objStrip.destroy();\n\t}\n\t\n\t\n\t/**\n\t * get panel orientation\n\t */\n\tthis.getOrientation = function() {\n\n\t\treturn (g_temp.orientation);\n\t}\n\n\t/**\n\t * set panel orientation (left, right, top, bottom)\n\t */\n\tthis.setOrientation = function(orientation) {\n\n\t\tg_temp.orientation = orientation;\n\t}\n\n\t\n\t/**\n\t * init the panel\n\t */\n\tthis.init = function(gallery, customOptions) {\n\t\tinitPanel(gallery, customOptions);\n\t}\n\n\t/**\n\t * run the panel\n\t */\n\tthis.run = function() {\n\t\trunPanel();\n\t}\n\n\t/**\n\t * place panel html\n\t */\n\tthis.setHtml = function(parentContainer) {\n\t\tsetPanelHtml(parentContainer);\n\t}\n\n\t/**\n\t * get the panel element\n\t */\n\tthis.getElement = function() {\n\t\treturn (g_objPanel);\n\t}\n\n\t/**\n\t * get panel size object\n\t */\n\tthis.getSize = function() {\n\n\t\tvar objSize = g_functions.getElementSize(g_objPanel);\n\n\t\treturn (objSize);\n\t}\n\n\t/**\n\t * set panel width (for horizonal type)\n\t */\n\tthis.setWidth = function(width) {\n\n\t\tg_temp.panelWidth = width;\n\n\t}\n\n\t/**\n\t * set panel height (for vertical type)\n\t */\n\tthis.setHeight = function(height) {\n\n\t\tg_temp.panelHeight = height;\n\n\t}\n\n\t/**\n\t * resize the panel\n\t */\n\tthis.resize = function(newWidth) {\n\t\tt.setWidth(newWidth);\n\t\tsetElementsSize();\n\t\tplaceElements();\n\t}\n\t\n\tthis.__________Functions_From_Base_____ = function() {}\n\t\n\t/**\n\t * tells if the panel is closed\n\t */\n\tthis.isPanelClosed = function() {\t\t\n\t\treturn (g_panelBase.isPanelClosed());\n\t}\n\n\t/**\n\t * get closed panel destanation\n\t */\n\tthis.getClosedPanelDest = function() {\n\t\treturn g_panelBase.getClosedPanelDest();\n\t}\t\n\t\t\n\t/**\n\t * open the panel\n\t */\t\n\tthis.openPanel = function(noAnimation) {\n\t\tg_panelBase.openPanel(noAnimation);\n\t}\n\t\n\t\n\t/**\n\t * close the panel (slide in)\n\t */\n\tthis.closePanel = function(noAnimation) {\n\t\tg_panelBase.closePanel(noAnimation);\t\t\n\t}\t\n\t\n\t/**\n\t * set the panel opened state\n\t */\n\tthis.setOpenedState = function(originalPos) {\n\t\tg_panelBase.setOpenedState(originalPos);\n\t}\n\n\t/**\n\t * set the panel that it's in closed state, and set original pos for opening later\n\t */\n\tthis.setClosedState = function(originalPos) {\n\t\tg_panelBase.setClosedState(originalPos);\t\n\t}\n\t\n\t/**\n\t * set custom thumbs of the strip\n\t */\n\tthis.setCustomThumbs = function(funcSetHtml){\n\t\t\n\t\tg_objStrip.setCustomThumbs(funcSetHtml);\n\t\n\t}\n\t\n\t/**\n\t * set panel disabled at start\n\t */\n\tthis.setDisabledAtStart = function(timeout){\n\t\t\n\t\tg_panelBase.setDisabledAtStart(timeout);\n\t\t\n\t}\n\t\n}\n\n\n/**\n * grid panel class\n * addon to grid gallery\n */\nfunction UGGridPanel(){\n\t\n\tvar t = this, g_objThis = jQuery(this);\n\tvar g_gallery = new UniteGalleryMain(), g_objGallery, g_objWrapper, g_objPanel;\n\tvar g_functions = new UGFunctions();\n\tvar g_objGrid = new UGThumbsGrid();\n\tvar g_panelBase = new UGPanelsBase();\n\tvar g_objArrowNext, g_objArrowPrev;\n\t\n\tthis.events = {\n\t\tFINISH_MOVE: \"gridpanel_move_finish\",\t//called after close or open panel (slide finish).\n\t\tOPEN_PANEL: \"open_panel\",\t\t\t\t//called before opening the panel.\n\t\tCLOSE_PANEL: \"close_panel\"\t\t\t\t//called before closing the panel.\n\t};\n\t\n\tvar g_options = {\n\t\t\tgridpanel_vertical_scroll: true,\t\t\t//vertical or horizontal grid scroll and arrows\n\t\t\tgridpanel_grid_align: \"middle\",\t\t\t\t//top , middle , bottom, left, center, right - the align of the grid panel in the gallery \n\t\t\tgridpanel_padding_border_top: 10,\t\t    //padding between the top border of the panel\n\t\t\tgridpanel_padding_border_bottom: 4,\t\t\t//padding between the bottom border of the panel\n\t\t\tgridpanel_padding_border_left: 10,\t\t\t//padding between the left border of the panel\n\t\t\tgridpanel_padding_border_right: 10,\t\t\t//padding between the right border of the panel\n\t\t\t\n\t\t\tgridpanel_arrows_skin: \"\",\t\t\t\t\t//skin of the arrows, if empty inherit from gallery skin\n\t\t\tgridpanel_arrows_align_vert: \"middle\",\t\t//borders, grid, middle - vertical align of arrows, to the top and bottom botders, to the grid, or in the middle space.\n\t\t\tgridpanel_arrows_padding_vert: 4,\t\t\t//padding between the arrows and the grid, in case of middle align, it will be minimal padding\n\t\t\tgridpanel_arrows_align_hor: \"center\",\t\t//borders, grid, center - horizontal align of arrows, to the left and right botders, to the grid, or in the center space.\n\t\t\tgridpanel_arrows_padding_hor: 10,\t\t\t//in case of horizontal type only, minimal size from the grid in case of \"borders\" and size from the grid in case of \"grid\"\n\t\t\t\n\t\t\tgridpanel_space_between_arrows: 20,\t\t\t//space between arrows on horizontal grids only\n\t\t\tgridpanel_arrows_always_on: false,\t\t\t//always show arrows even if the grid is one pane only\n\n\t\t\tgridpanel_enable_handle: true,\t\t\t\t//enable grid handle\t\t\t\n\t\t\tgridpanel_handle_align: \"top\",\t\t\t\t//top, middle, bottom , left, right, center - close handle tip align on the handle bar according panel orientation\n\t\t\tgridpanel_handle_offset: 0,\t\t\t\t\t//offset of handle bar according the valign\n\t\t\tgridpanel_handle_skin: \"\",\t\t\t\t\t//skin of the handle, if empty inherit from gallery skin\n\t\t\t\n\t\t\tgridpanel_background_color:\"\"\t\t\t\t//background color of the grid wrapper, if not set, it will be taken from the css\n\t};\n\t\n\t\n\t//default options for vertical scroll\n\tvar g_defaultsVertical = {\n\t\t\tgridpanel_grid_align: \"middle\",\t\t\t//top , middle , bottom\n\t\t\tgridpanel_padding_border_top: 2,\t\t//padding between the top border of the panel\n\t\t\tgridpanel_padding_border_bottom: 2\t\t//padding between the bottom border of the panel\n\t};\n\t\n\t//default options for horizontal type panel\n\tvar g_defaultsHorType = {\n\t\t\tgridpanel_grid_align: \"center\"\t\t\t//left, center, right\t\t\t\n\t};\n\t\n\tvar g_temp = {\n\t\tpanelType: \"grid\",\n\t\tisHorType: false,\n\t\tarrowsVisible: false,\n\t\tpanelHeight: 0,\n\t\tpanelWidth: 0,\n\t\toriginalPosX:null,\n\t\tisEventsInited: false,\n\t\tisClosed: false,\n\t\torientation: null\n\t};\n\t\n\t\n\t/**\n\t * init the grid panel\n\t */\n\tfunction initGridPanel(gallery, customOptions){\n\t\t\n\t\tg_gallery = gallery;\n\t\t\n\t\tvalidateOrientation();\n\t\t\n\t\t//set defaults and custom options\n\t\tif(customOptions && customOptions.vertical_scroll){\n\t\t\tg_options.gridpanel_vertical_scroll = customOptions.vertical_scroll;\t\t\t\n\t\t}\n\t\t\n\t\tg_options = jQuery.extend(g_options, customOptions);\n\t\t\t\t\n\t\t//set defautls for horizontal panel type\n\t\tif(g_temp.isHorType == true){\n\t\t\t\t\t\t\n\t\t\tg_options = jQuery.extend(g_options, g_defaultsHorType);\n\t\t\tg_options = jQuery.extend(g_options, customOptions);\n\t\t\t\t\t\n\t\t}else if(g_options.gridpanel_vertical_scroll == true){\n\n\t\t\t//set defaults for vertical scroll\n\t\t\tg_options = jQuery.extend(g_options, g_defaultsVertical);\n\t\t\tg_options = jQuery.extend(g_options, customOptions);\n\t\t\tg_options.grid_panes_direction = \"bottom\";\t\t\n\t\t}\n\t\t\n\t\t//set arrows skin:\n\t\tvar galleryOptions = g_gallery.getOptions();\n\t\tvar globalSkin = galleryOptions.gallery_skin;\t\t\n\t\tif(g_options.gridpanel_arrows_skin == \"\")\n\t\t\tg_options.gridpanel_arrows_skin = globalSkin;\n\t\t\n\t\t\n\t\t//get the gallery wrapper\n\t\tvar objects = gallery.getObjects();\n\t\tg_objWrapper = objects.g_objWrapper;\n\t\t\n\t\t//init the base panel object:\n\t\tg_panelBase.init(g_gallery, g_temp, t, g_options, g_objThis);\t\t\n\n\t\t//init the grid \n\t\tg_objGrid = new UGThumbsGrid();\n\t\tg_objGrid.init(g_gallery, g_options);\n\n\t}\n\t\n\t\n\t/**\n\t * validate the orientation if exists\n\t */\n\tfunction validateOrientation(){\n\t\t\n\t\tif(g_temp.orientation == null)\n\t\t\tthrow new Error(\"Wrong orientation, please set panel orientation before run\");\n\t\t\n\t}\n\t\n\t/**\n\t * run the rid panel\n\t */\n\tfunction runPanel(){\n\t\t\n\t\t//validate orientation\n\t\tvalidateOrientation();\n\t\t\n\t\tprocessOptions();\n\t\t\n\t\tg_objGrid.run();\n\t\t\n\t\tsetArrows();\n\t\tsetPanelSize();\n\t\tplaceElements();\n\t\t\n\t\tinitEvents();\n\t}\n\t\n\t\n\t/**\n\t * set html of the grid panel\n\t */\n\tfunction setHtmlPanel(){\n\t\t\n\t\t//add panel wrapper\n\t\tg_objWrapper.append(\"<div class='ug-grid-panel'></div>\");\n\t\t\n\t\tg_objPanel = g_objWrapper.children('.ug-grid-panel');\n\t\t\n\t\t//add arrows:\n\t\tif(g_temp.isHorType){\n\t\t\t\n\t\t\tg_objPanel.append(\"<div class='grid-arrow grid-arrow-left-hortype ug-skin-\" + g_options.gridpanel_arrows_skin + \"'></div>\");\n\t\t\tg_objPanel.append(\"<div class='grid-arrow grid-arrow-right-hortype ug-skin-\" + g_options.gridpanel_arrows_skin + \"'></div>\");\n\t\t\t\n\t\t\tg_objArrowPrev = g_objPanel.children(\".grid-arrow-left-hortype\");\n\t\t\tg_objArrowNext = g_objPanel.children(\".grid-arrow-right-hortype\");\n\t\t}\n\t\telse if(g_options.gridpanel_vertical_scroll == false){\t\t//horizonatl arrows\n\t\t\tg_objPanel.append(\"<div class='grid-arrow grid-arrow-left ug-skin-\" + g_options.gridpanel_arrows_skin + \"'></div>\");\n\t\t\tg_objPanel.append(\"<div class='grid-arrow grid-arrow-right ug-skin-\" + g_options.gridpanel_arrows_skin + \"'></div>\");\n\t\t\t\n\t\t\tg_objArrowPrev = g_objPanel.children(\".grid-arrow-left\");\n\t\t\tg_objArrowNext = g_objPanel.children(\".grid-arrow-right\");\n\t\t\t\n\t\t}else{\t\t//vertical arrows\n\t\t\tg_objPanel.append(\"<div class='grid-arrow grid-arrow-up ug-skin-\" + g_options.gridpanel_arrows_skin + \"'></div>\");\n\t\t\tg_objPanel.append(\"<div class='grid-arrow grid-arrow-down ug-skin-\" + g_options.gridpanel_arrows_skin + \"'></div>\");\n\t\t\t\n\t\t\tg_objArrowPrev = g_objPanel.children(\".grid-arrow-up\");\n\t\t\tg_objArrowNext = g_objPanel.children(\".grid-arrow-down\");\n\t\t}\n\t\t\n\t\tg_panelBase.setHtml(g_objPanel);\n\t\t\n\t\t//hide the arrows\n\t\tg_objArrowPrev.fadeTo(0,0);\n\t\tg_objArrowNext.fadeTo(0,0);\n\t\t\n\t\tg_objGrid.setHtml(g_objPanel);\n\t\t\n\t\tsetHtmlProperties();\n\t}\n\t\n\t\n\t/**\n\t * set html properties according the options\n\t */\n\tfunction setHtmlProperties(){\n\t\t\n\t\t//set panel background color\n\t\tif(g_options.gridpanel_background_color != \"\")\n\t\t\tg_objPanel.css(\"background-color\",g_options.gridpanel_background_color);\n\t}\n\t\n\t\n\t/**\n\t * process and fix certain options, avoid arrows and validate options\n\t */\n\tfunction processOptions(){\n\t\t\n\t\tif(g_options.gridpanel_grid_align == \"center\")\n\t\t\tg_options.gridpanel_grid_align = \"middle\";\n\t}\n\t\n\t\t\n\t/**\n\t * place panel with some animation\n\t */\n\tfunction placePanelAnimation(panelX, functionOnComplete){\n\t\t\t\t\t\t\n\t\tvar objCss  = {left: panelX + \"px\"};\n\t\t\n\t\tg_objPanel.stop(true).animate(objCss ,{\n\t\t\tduration: 300,\n\t\t\teasing: \"easeInOutQuad\",\n\t\t\tqueue: false,\n\t\t\tcomplete: function(){\n\t\t\t\tif(functionOnComplete)\n\t\t\t\t\tfunctionOnComplete();\n\t\t\t}\n\t\t});\n\t\t\n\t}\n\t\n\t\t\n\t\n\t/**\n\t * get max height of the grid according the arrows size\n\t */\n\tfunction getGridMaxHeight(){\n\t\t\n\t\t//check space taken without arrows for one pane grids\n\t\tvar spaceTaken = g_options.gridpanel_padding_border_top + g_options.gridpanel_padding_border_bottom;\n\t\tvar maxGridHeight = g_temp.panelHeight - spaceTaken;\n\t\t\n\t\tif(g_options.gridpanel_arrows_always_on == false){\n\t\t\tvar numPanes = g_objGrid.getNumPanesEstimationByHeight(maxGridHeight);\n\t\t\tif(numPanes == 1)\n\t\t\t\treturn(maxGridHeight);\n\t\t}\n\t\t\n\t\t//count the size with arrows\n\t\tvar arrowsSize = g_functions.getElementSize(g_objArrowNext);\n\t\tvar arrowsHeight = arrowsSize.height;\n\t\t\n\t\tvar spaceTaken = arrowsHeight + g_options.gridpanel_arrows_padding_vert;\n\t\t\n\t\tif(g_options.gridpanel_vertical_scroll == true)\t//in case of 2 arrows multiply by 2\n\t\t\tspaceTaken *= 2;\n\t\t\t\t\n\t\tspaceTaken += g_options.gridpanel_padding_border_top + g_options.gridpanel_padding_border_bottom;\n\t\t\n\t\tmaxGridHeight = g_temp.panelHeight - spaceTaken;\t\t\t\n\t\t\n\t\treturn(maxGridHeight);\n\t}\n\t\n\t\n\t/**\n\t * get grid maximum width\n\t */\n\tfunction getGridMaxWidth(){\n\t\t\t\t\n\t\t//check space taken without arrows for one pane grids\n\t\tvar spaceTaken = g_options.gridpanel_padding_border_left + g_options.gridpanel_padding_border_right;\n\t\t\t\t\n\t\tvar maxGridWidth = g_temp.panelWidth - spaceTaken;\n\t\t\n\t\tif(g_options.gridpanel_arrows_always_on == false){\n\t\t\tvar numPanes = g_objGrid.getNumPanesEstimationByWidth(maxGridWidth);\n\t\t\t\t\t\t\n\t\t\tif(numPanes == 1)\n\t\t\t\treturn(maxGridWidth);\n\t\t}\n\t\t\n\t\t//count the size with arrows\n\t\tvar arrowsSize = g_functions.getElementSize(g_objArrowNext);\n\t\tvar arrowsWidth = arrowsSize.width;\n\t\t\n\t\tspaceTaken += (arrowsWidth + g_options.gridpanel_arrows_padding_hor) * 2;\n\t\t\t\t\t\t\t\t\n\t\tmaxGridWidth = g_temp.panelWidth - spaceTaken;\t\t\t\n\t\t\n\t\treturn(maxGridWidth);\n\t}\n\t\t\n\t\n\t/**\n\t * enable / disable arrows according the grid\n\t */\n\tfunction setArrows(){\n\t\t\n\t\tvar showArrows = false;\n\t\tif(g_options.gridpanel_arrows_always_on == true){\n\t\t\tshowArrows = true;\n\t\t}\n\t\telse{\n\t\t\tvar numPanes = g_objGrid.getNumPanes();\n\t\t\tif(numPanes > 1)\n\t\t\t\tshowArrows = true;\n\t\t}\n\t\t\n\t\tif(showArrows == true){\t\t//show arrows\n\t\t\t\n\t\t\tg_objArrowNext.show().fadeTo(0,1);\n\t\t\tg_objArrowPrev.show().fadeTo(0,1);\n\t\t\tg_temp.arrowsVisible = true;\n\t\t\t\n\t\t}else{\t\t//hide arrows\n\t\t\t\n\t\t\tg_objArrowNext.hide();\n\t\t\tg_objArrowPrev.hide();\n\t\t\tg_temp.arrowsVisible = false;\t\t\t\n\t\t\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * set panel size by the given height and grid width\n\t */\n\tfunction setPanelSize(){\n\t\tvar gridSize = g_objGrid.getSize();\n\t\t\t\t\n\t\t//set panel size\n\t\tif(g_temp.isHorType == true)\n\t\t\tg_temp.panelHeight = gridSize.height + g_options.gridpanel_padding_border_top + g_options.gridpanel_padding_border_bottom;\n\t\telse\n\t\t\tg_temp.panelWidth = gridSize.width + g_options.gridpanel_padding_border_left + g_options.gridpanel_padding_border_right;\n\t\t\n\t\tg_functions.setElementSize(g_objPanel, g_temp.panelWidth, g_temp.panelHeight);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * place the panel without animation\n\t * @param panelDest\n\t */\n\tfunction placePanelNoAnimation(panelDest){\n\t\t\n\t\tswitch(g_temp.orientation){\n\t\t\tcase \"right\":\t\t//vertical\n\t\t\tcase \"left\":\n\t\t\t\tg_functions.placeElement(g_objPanel, panelDest, null);\n\t\t\tbreak;\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t\n\tfunction __________EVENTS___________(){};\n\t\n\t\n\t\n\t/**\n\t * event on panel slide finish\n\t */\n\tfunction onPanelSlideFinish(){\n\t\t\t\t\n\t\tg_objThis.trigger(t.events.FINISH_MOVE);\n\t\t\t\n\t}\n\t\n\t\n\t/**\n\t * init panel events\n\t */\n\tfunction initEvents(){\n\t\t\n\t\tif(g_temp.isEventsInited == true)\n\t\t\treturn(false);\n\t\t\n\t\tg_temp.isEventsInited = true;\n\t\t\t\t\n\t\tif(g_objArrowPrev){\n\t\t\tg_functions.addClassOnHover(g_objArrowPrev);\n\t\t\tg_objGrid.attachPrevPaneButton(g_objArrowPrev);\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\tif(g_objArrowNext){\n\t\t\tg_functions.addClassOnHover(g_objArrowNext);\n\t\t\tg_objGrid.attachNextPaneButton(g_objArrowNext);\t\t\t\n\t\t}\n\t\t\n\t\tg_panelBase.initEvents();\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * destroy the events\n\t */\n\tthis.destroy = function(){\n\t\t\n\t\tif(g_objArrowPrev)\n\t\t\tg_functions.destroyButton(g_objArrowPrev);\n\t\t\n\t\tif(g_objArrowNext)\n\t\t\tg_functions.destroyButton(g_objArrowNext);\n\t\t\n\t\tg_panelBase.destroy();\n\t\t\n\t\tg_objGrid.destroy();\n\t}\n\t\n\t\n\tfunction ______PLACE_ELEMENTS___________(){};\n\t\n\t\n\t/**\n\t * get padding left of the grid\n\t */\n\tfunction getGridPaddingLeft(){\n\t\t\n\t\tvar gridPanelLeft = g_options.gridpanel_padding_border_left;\n\t\t\n\t\treturn(gridPanelLeft);\n\t}\n\t\n\t\n\t/**\n\t * place elements vertical - grid only\n\t */\n\tfunction placeElements_noarrows(){\n\t\t\n\t\t//place grid\n\t\tvar gridY = g_options.gridpanel_grid_align, gridPaddingY = 0;\n\t\t\n\t\tswitch(gridY){\n\t\t\tcase \"top\":\n\t\t\t\tgridPaddingY = g_options.gridpanel_padding_border_top;\n\t\t\t\t\n\t\t\tbreak;\n\t\t\tcase \"bottom\":\n\t\t\t\tgridPaddingY = g_options.gridpanel_padding_border_bottom;\t\t\t\t\n\t\t\tbreak;\n\t\t}\n\t\t\n\t\tvar gridPanelLeft = getGridPaddingLeft();\n\t\t\n\t\tvar gridElement = g_objGrid.getElement();\t\t\n\t\tg_functions.placeElement(gridElement, gridPanelLeft, gridY, 0 , gridPaddingY);\n\t\t\t\t\n\t}\n\t\n\t\n\t/**\n\t * place elements vertical - with arrows\n\t */\n\tfunction placeElementsVert_arrows(){\n\t\t\n\t\t//place grid\n\t\tvar gridY, prevArrowY, nextArrowY, nextArrowPaddingY;\n\t\tvar objArrowSize = g_functions.getElementSize(g_objArrowPrev);\t\t\n\t\tvar objGridSize = g_objGrid.getSize();\t\t\n\t\t\n\t\t\n\t\tswitch(g_options.gridpanel_grid_align){\n\t\t\tdefault:\n\t\t\tcase \"top\":\n\t\t\t\tgridY = g_options.gridpanel_padding_border_top + objArrowSize.height + g_options.gridpanel_arrows_padding_vert;\n\t\t\tbreak;\n\t\t\tcase \"middle\":\n\t\t\t\tgridY = \"middle\";\n\t\t\tbreak;\n\t\t\tcase \"bottom\":\n\t\t\t\tgridY = g_temp.panelHeight - objGridSize.height - objArrowSize.height - g_options.gridpanel_padding_border_bottom - g_options.gridpanel_arrows_padding_vert;\n\t\t\tbreak;\n\t\t}\n\t\t\n\t\t//place the grid\n\t\tvar gridPanelLeft = getGridPaddingLeft();\n\t\t\n\t\tvar gridElement = g_objGrid.getElement();\t\t\n\t\tg_functions.placeElement(gridElement, gridPanelLeft, gridY);\n\t\t\n\t\tvar objGridSize = g_objGrid.getSize();\t\t\n\t\t\t\t\t\t\n\t\t//place arrows\n\t\tswitch(g_options.gridpanel_arrows_align_vert){\n\t\t\tdefault:\n\t\t\tcase \"center\":\n\t\t\tcase \"middle\":\n\t\t\t\tprevArrowY = (objGridSize.top - objArrowSize.height) / 2;\n\t\t\t\tnextArrowY = objGridSize.bottom + (g_temp.panelHeight - objGridSize.bottom - objArrowSize.height) / 2;\n\t\t\t\tnextArrowPaddingY = 0;\n\t\t\tbreak;\n\t\t\tcase \"grid\":\n\t\t\t\tprevArrowY = objGridSize.top - objArrowSize.height - g_options.gridpanel_arrows_padding_vert_vert\n\t\t\t\tnextArrowY = objGridSize.bottom + g_options.gridpanel_arrows_padding_vert;\n\t\t\t\tnextArrowPaddingY = 0;\n\t\t\tbreak;\n\t\t\tcase \"border\":\n\t\t\tcase \"borders\":\n\t\t\t\tprevArrowY = g_options.gridpanel_padding_border_top;\t\t\t\t\n\t\t\t\tnextArrowY = \"bottom\"; \n\t\t\t\tnextArrowPaddingY = g_options.gridpanel_padding_border_bottom;\n\t\t\tbreak;\n\t\t}\n\t\t\n\t\tg_functions.placeElement(g_objArrowPrev, \"center\", prevArrowY);\n\t\t\t\t\t\t\n\t\tg_functions.placeElement(g_objArrowNext, \"center\", nextArrowY, 0, nextArrowPaddingY);\n\t}\n\t\n\t\n\t/**\n\t * place elements vertical\n\t */\n\tfunction placeElementsVert(){\n\t\t\n\t\tif(g_temp.arrowsVisible == true)\n\t\t\tplaceElementsVert_arrows();\n\t\telse\n\t\t\tplaceElements_noarrows();\n\t}\n\t\n\t\n\t/**\n\t * place elements horizontal with arrows\n\t */\n\tfunction placeElementsHor_arrows(){\n\t\t\n\t\tvar arrowsY, prevArrowPadding, arrowsPaddingY, nextArrowPadding;\n\t\tvar objArrowSize = g_functions.getElementSize(g_objArrowPrev);\t\t\n\t\tvar objGridSize = g_objGrid.getSize();\n\t\t\n\t\t//place grid\n\t\tvar gridY = g_options.gridpanel_padding_border_top;\n\t\t\n\t\tswitch(g_options.gridpanel_grid_align){\n\t\t\tcase \"middle\":\n\t\t\t\t\n\t\t\t\tswitch(g_options.gridpanel_arrows_align_vert){\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tvar elementsHeight = objGridSize.height + g_options.gridpanel_arrows_padding_vert + objArrowSize.height;\n\t\t\t\t\t\tgridY = (g_temp.panelHeight - elementsHeight) / 2;\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"border\":\n\t\t\t\t\tcase \"borders\":\n\t\t\t\t\t\tvar remainHeight = g_temp.panelHeight - objArrowSize.height - g_options.gridpanel_padding_border_bottom;\n\t\t\t\t\t\tgridY = (remainHeight - objGridSize.height) / 2;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\tbreak;\n\t\t\tcase \"bottom\":\n\t\t\t\tvar elementsHeight = objGridSize.height + objArrowSize.height + g_options.gridpanel_arrows_padding_vert;\n\t\t\t\tgridY = g_temp.panelHeight - elementsHeight - g_options.gridpanel_padding_border_bottom;\n\t\t\tbreak;\n\t\t}\n\t\t\t\t\n\t\tvar gridElement = g_objGrid.getElement();\t\t\n\t\tvar gridPanelLeft = getGridPaddingLeft();\n\t\t\n\t\tg_functions.placeElement(gridElement, gridPanelLeft, gridY);\n\t\t\n\t\tvar objGridSize = g_objGrid.getSize();\n\t\t\n\t\tswitch(g_options.gridpanel_arrows_align_vert){\n\t\t\tdefault:\n\t\t\tcase \"center\":\n\t\t\tcase \"middle\":\n\t\t\t\tarrowsY = objGridSize.bottom + (g_temp.panelHeight - objGridSize.bottom - objArrowSize.height) / 2;\n\t\t\t\tarrowsPaddingY = 0;\t\t\t\t\t\t\t\t\n\t\t\tbreak;\n\t\t\tcase \"grid\":\n\t\t\t\tarrowsY = objGridSize.bottom + g_options.gridpanel_arrows_padding_vert;\n\t\t\t\tarrowsPaddingY = 0;\n\t\t\tbreak;\n\t\t\tcase \"border\":\n\t\t\tcase \"borders\":\n\t\t\t\tarrowsY = \"bottom\";\n\t\t\t\tarrowsPaddingY = g_options.gridpanel_padding_border_bottom;\n\t\t\tbreak;\n\t\t}\n\t\t\n\t\tprevArrowPadding = -objArrowSize.width/2 - g_options.gridpanel_space_between_arrows / 2;\n\t\t\t\t\n\t\tg_functions.placeElement(g_objArrowPrev, \"center\", arrowsY, prevArrowPadding, arrowsPaddingY);\n\t\t\t\t\t\t\n\t\t//place next arrow\n\t\tvar nextArrowPadding = Math.abs(prevArrowPadding);\t\t//make positive\n\t\t\t\t\n\t\tg_functions.placeElement(g_objArrowNext, \"center\", arrowsY, nextArrowPadding, arrowsPaddingY);\n\t\t\t\t\t\n\t}\n\t\n\t\n\t/**\n\t * place elements horizonatal\n\t */\n\tfunction placeElementsHor(){\n\t\t\n\t\tif(g_temp.arrowsVisible == true)\n\t\t\tplaceElementsHor_arrows();\n\t\telse\n\t\t\tplaceElements_noarrows();\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * place elements horizontal type with arrows\n\t */\n\tfunction placeElementsHorType_arrows(){\n\t\t\n\t\t//place grid\n\t\tvar gridX, prevArrowX, nextArrowX, arrowsY;\n\t\tvar objArrowSize = g_functions.getElementSize(g_objArrowPrev);\t\t\n\t\tvar objGridSize = g_objGrid.getSize();\n\t\t\n\t\tswitch(g_options.gridpanel_grid_align){\n\t\t\tdefault:\n\t\t\tcase \"left\":\n\t\t\t\tgridX = g_options.gridpanel_padding_border_left + g_options.gridpanel_arrows_padding_hor + objArrowSize.width;\n\t\t\tbreak;\n\t\t\tcase \"middle\":\n\t\t\tcase \"center\":\n\t\t\t\tgridX = \"center\";\n\t\t\tbreak;\n\t\t\tcase \"right\":\n\t\t\t\tgridX = g_temp.panelWidth - objGridSize.width - objArrowSize.width - g_options.gridpanel_padding_border_right - g_options.gridpanel_arrows_padding_hor;\n\t\t\tbreak;\n\t\t}\n\t\t\n\t\t//place the grid\t\t\n\t\tvar gridElement = g_objGrid.getElement();\n\t\tg_functions.placeElement(gridElement, gridX, g_options.gridpanel_padding_border_top);\n\t\tobjGridSize = g_objGrid.getSize();\n\t\t\n\t\t//place arrows, count Y\n\t\tswitch(g_options.gridpanel_arrows_align_vert){\n\t\t\tdefault:\n\t\t\tcase \"center\":\n\t\t\tcase \"middle\":\n\t\t\t\tarrowsY = (objGridSize.height - objArrowSize.height) / 2 + objGridSize.top;\n\t\t\tbreak;\n\t\t\tcase \"top\":\n\t\t\t\tarrowsY = g_options.gridpanel_padding_border_top + g_options.gridpanel_arrows_padding_vert;\n\t\t\tbreak;\n\t\t\tcase \"bottom\":\n\t\t\t\tarrowsY = g_temp.panelHeight - g_options.gridpanel_padding_border_bottom - g_options.gridpanel_arrows_padding_vert - objArrowSize.height;\n\t\t\tbreak;\n\t\t}\n\t\t\t\t\n\t\t//get arrows X\n\t\tswitch(g_options.gridpanel_arrows_align_hor){\n\t\t\tdefault:\n\t\t\tcase \"borders\":\n\t\t\t\tprevArrowX = g_options.gridpanel_padding_border_left;\n\t\t\t\tnextArrowX = g_temp.panelWidth - g_options.gridpanel_padding_border_right - objArrowSize.width;\n\t\t\tbreak;\n\t\t\tcase \"grid\":\n\t\t\t\tprevArrowX = objGridSize.left - g_options.gridpanel_arrows_padding_hor - objArrowSize.width;\n\t\t\t\tnextArrowX = objGridSize.right + g_options.gridpanel_arrows_padding_hor;\n\t\t\tbreak;\n\t\t\tcase \"center\":\n\t\t\t\tprevArrowX = (objGridSize.left - objArrowSize.width) / 2;\n\t\t\t\tnextArrowX = objGridSize.right + (g_temp.panelWidth - objGridSize.right - objArrowSize.width) / 2;\n\t\t\tbreak;\n\t\t}\n\t\t\n\t\tg_functions.placeElement(g_objArrowPrev, prevArrowX, arrowsY);\t\t\n\t\tg_functions.placeElement(g_objArrowNext, nextArrowX, arrowsY);\n\t}\n\t\n\t\n\t/**\n\t * place elements horizontal type without arrows\n\t */\n\tfunction placeElementHorType_noarrows(){\n\t\t\n\t\tvar gridX;\n\t\tvar objGridSize = g_objGrid.getSize();\n\t\t\n\t\tswitch(g_options.gridpanel_grid_align){\n\t\t\tdefault:\n\t\t\tcase \"left\":\n\t\t\t\tgridX = g_options.gridpanel_padding_border_left;\n\t\t\tbreak;\n\t\t\tcase \"middle\":\n\t\t\tcase \"center\":\n\t\t\t\tgridX = \"center\";\n\t\t\tbreak;\n\t\t\tcase \"right\":\n\t\t\t\tgridX = g_temp.panelWidth - objGridSize.width - g_options.gridpanel_padding_border_right;\n\t\t\tbreak;\n\t\t}\n\t\t\n\t\t//place the grid\t\t\n\t\tvar gridElement = g_objGrid.getElement();\n\t\tg_functions.placeElement(gridElement, gridX, g_options.gridpanel_padding_border_top);\n\t}\n\t\n\t\n\t/**\n\t * place elements when the grid in horizontal position\n\t */\n\tfunction placeElementsHorType(){\n\t\t\n\t\tif(g_temp.arrowsVisible == true)\n\t\t\tplaceElementsHorType_arrows();\n\t\telse\n\t\t\tplaceElementHorType_noarrows();\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * place the arrows\n\t */\n\tfunction placeElements(){\n\t\t\n\t\tif(g_temp.isHorType == false){\n\t\t\t\n\t\t\tif(g_options.gridpanel_vertical_scroll == true)\n\t\t\t\tplaceElementsVert();\n\t\t\telse\n\t\t\t\tplaceElementsHor();\n\t\t\t\n\t\t}else{\n\t\t\tplaceElementsHorType();\n\t\t}\n\t\t\n\t\tg_panelBase.placeElements();\n\t}\n\t\n\t\n\t/**\n\t * get panel orientation\n\t */\n\tthis.getOrientation = function(){\n\t\t\n\t\treturn(g_temp.orientation);\n\t}\n\t\n\t\n\t/**\n\t * set panel orientation (left, right, top, bottom)\n\t */\n\tthis.setOrientation = function(orientation){\n\t\t\n\t\tg_temp.orientation = orientation;\n\t\t\n\t\t//set isHorType temp variable for ease of use\n\t\tswitch(orientation){\n\t\t\tcase \"right\":\n\t\t\tcase \"left\":\n\t\t\t\tg_temp.isHorType = false;\n\t\t\tbreak;\n\t\t\tcase \"top\":\n\t\t\tcase \"bottom\":\n\t\t\t\tg_temp.isHorType = true;\n\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow new Error(\"Wrong grid panel orientation: \" + orientation);\n\t\t\tbreak;\n\t\t}\n\t\t\n\t}\n\t\n\t/**\n\t * set panel height\n\t */\n\tthis.setHeight = function(height){\n\t\t\n\t\tif(g_temp.isHorType == true)\n\t\t\tthrow new Error(\"setHeight is not appliable to this orientatio (\"+g_temp.orientation+\"). Please use setWidth\");\t\t\n\t\t\n\t\tg_temp.panelHeight = height;\n\t\tvar gridMaxHeight = getGridMaxHeight();\n\t\t\n\t\tg_objGrid.setMaxHeight(gridMaxHeight);\n\t}\n\t\n\t\n\t/**\n\t * set panel width\n\t */\n\tthis.setWidth = function(width){\n\n\t\tif(g_temp.isHorType == false)\n\t\t\tthrow new Error(\"setWidth is not appliable to this orientatio (\"+g_temp.orientation+\"). Please use setHeight\");\t\t\n\t\t\n\t\tg_temp.panelWidth = width;\n\t\t\n\t\tvar gridMaxWidth = getGridMaxWidth();\n\t\t\t\t\n\t\tg_objGrid.setMaxWidth(gridMaxWidth);\n\t}\n\t\n\t\n\t/**\n\t * init the panel\n\t */\n\tthis.init = function(gallery, customOptions){\n\t\t\n\t\tinitGridPanel(gallery, customOptions);\n\t}\n\t\n\t/**\n\t * place panel html\n\t */\n\tthis.setHtml = function(){\n\t\tsetHtmlPanel();\n\t}\n\t\n\t\n\t/**\n\t * run the panel\n\t */\n\tthis.run = function(){\n\t\t\n\t\trunPanel();\n\t}\n\t\n\t\n\t/**\n\t * get the panel element\n\t */\n\tthis.getElement = function(){\n\t\treturn(g_objPanel);\n\t}\n\t\n\t\n\t/**\n\t * get panel size object\n\t */\n\tthis.getSize = function(){\n\t\t\n\t\tvar objSize = g_functions.getElementSize(g_objPanel);\n\t\t\n\t\treturn(objSize);\n\t}\n\t\n\tthis.__________Functions_From_Base_____ = function() {}\n\t\n\t/**\n\t * tells if the panel is closed\n\t */\n\tthis.isPanelClosed = function() {\t\t\n\t\treturn (g_panelBase.isPanelClosed());\n\t}\n\n\t/**\n\t * get closed panel destanation\n\t */\n\tthis.getClosedPanelDest = function() {\n\t\treturn g_panelBase.getClosedPanelDest();\n\t}\t\n\t\t\n\t/**\n\t * open the panel\n\t */\t\n\tthis.openPanel = function(noAnimation) {\n\t\tg_panelBase.openPanel(noAnimation);\n\t}\n\t\n\t\n\t/**\n\t * close the panel (slide in)\n\t */\n\tthis.closePanel = function(noAnimation) {\n\t\tg_panelBase.closePanel(noAnimation);\t\t\n\t}\t\n\t\n\t/**\n\t * set the panel opened state\n\t */\n\tthis.setOpenedState = function(originalPos) {\n\t\tg_panelBase.setOpenedState(originalPos);\n\t}\n\n\t/**\n\t * set the panel that it's in closed state, and set original pos for opening later\n\t */\n\tthis.setClosedState = function(originalPos) {\n\t\tg_panelBase.setClosedState(originalPos);\t\n\t}\n\t\n\t\n\t/**\n\t * set panel disabled at start\n\t */\n\tthis.setDisabledAtStart = function(timeout){\n\t\t\n\t\tg_panelBase.setDisabledAtStart(timeout);\n\t\t\n\t}\n\t\n\t\n}\n\n/**\n * thumbs class\n * addon to strip gallery\n */\nfunction UGThumbsGrid(){\n\n\tvar t = this, g_objThis = jQuery(this);\n\tvar g_gallery = new UniteGalleryMain(), g_objGallery, g_objects, g_objWrapper;\n\tvar g_functions = new UGFunctions(), g_arrItems, g_objGrid, g_objInner;\n\tvar g_thumbs = new UGThumbsGeneral(), g_tilesDesign = new UGTileDesign();\n\t\n\tvar g_options = {\n\t\tgrid_panes_direction: \"left\",\t\t\t\t//where panes will move -> left, bottom\n\t\tgrid_num_cols: 2,\t\t\t\t\t\t\t//number of grid columns\n\t\tgrid_min_cols: 2,\t\t\t\t\t\t\t//minimum number of columns (for horizontal type) - the tile size is dynamic \n\t\tgrid_num_rows: 2,\t\t\t\t\t\t\t//number of grid rows (for horizontal type)\n\t\tgrid_space_between_cols: 10,\t\t\t\t//space between columns\n\t\tgrid_space_between_rows: 10,\t\t\t\t//space between rows\n\t\tgrid_space_between_mobile: 10,\t\t\t\t//space between rows and cols mobile\n\t\tgrid_transition_duration: 300,\t\t\t\t//transition of the panes change duration \n\t\tgrid_transition_easing: \"easeInOutQuad\",\t//transition of the panes change easing function\n\t\tgrid_carousel: false,\t\t\t\t\t\t//next pane goes to first when last\n\t\tgrid_padding: 0,\t\t\t\t\t\t\t//set padding to the grid\n\t\tgrid_vertical_scroll_ondrag: false\t\t\t//scroll the gallery on vertical drag\n\t};\n\t\n\tthis.events = {\n\t\tPANE_CHANGE: \"pane_change\"\n\t};\n\t\n\tvar g_temp = {\n\t\t\teventSizeChange: \"thumb_size_change\",\n\t\t\tisHorizontal: false,\n\t\t\tisMaxHeight:false,\t\t//set if the height that set is max height. In that case need a height correction\n\t\t\tisMaxWidth:false,\t\t//set if the height that set is max height. In that case need a height correction\n\t\t\tgridHeight: 0,\n\t\t\tgridWidth: 0,\n\t\t\tinnerWidth: 0,\n\t\t\tinnerHeight:0,\n\t\t\tnumPanes:0,\n\t\t\tarrPanes:0,\n\t\t\tnumThumbs:0,\n\t\t\tcurrentPane:0,\n\t\t\tnumThumbsInPane:0,\n\t\t\tisNavigationVertical:false,\n\t\t\ttouchActive: false,\n\t\t\tstartScrollPos:0,\n\t\t\tisFirstTimeRun:true,\n\t\t\tisTilesMode: false,\n\t\t\tstoredEventID: \"thumbsgrid\",\n\t\t\ttileMaxWidth:null,\n\t\t\ttileMaxHeight:null,\n\t\t\tspaceBetweenCols: null,\n\t\t\tspaceBetweenRows: null\n\t\t};\n\t\n\t\n\tfunction __________GENERAL_________(){};\n\t\n\t/**\n\t * init the gallery\n\t */\n\tfunction init(gallery, customOptions, isTilesMode){\n\t\t\t\t\n\t\tg_objects = gallery.getObjects();\n\t\tg_gallery = gallery;\n\t\t\n\t\tg_gallery.attachThumbsPanel(\"grid\", t);\n\t\t\n\t\tg_objGallery = jQuery(gallery);\n\t\tg_objWrapper = g_objects.g_objWrapper;\n\t\tg_arrItems = g_objects.g_arrItems;\n\t\t\n\t\tif(isTilesMode === true)\n\t\t\tg_temp.isTilesMode = true;\n\t\t\n\t\tg_temp.numThumbs = g_arrItems.length;\n\t\t\n\t\tsetOptions(customOptions);\n\t\t\n\t\tif(g_temp.isTilesMode == true){\n\t\t\t\n\t\t\tg_tilesDesign.setFixedMode();\n\t\t\tg_tilesDesign.setApproveClickFunction(isApproveTileClick);\n\t\t\tg_tilesDesign.init(gallery, g_options);\n\t\t\t\n\t\t\tvar options_td = g_tilesDesign.getOptions();\n\t\t\tg_temp.tileMaxHeight = options_td.tile_height;\n\t\t\tg_temp.tileMaxWidth = options_td.tile_width;\n\t\t\t\n\t\t\tg_thumbs = g_tilesDesign.getObjThumbs();\n\t\t}else{\n\t\t\t\n\t\t\t//disable the dynamic size in thumbs\n\t\t\tcustomOptions.thumb_fixed_size = true;\n\t\t\t\n\t\t\tg_thumbs.init(gallery, customOptions);\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * set the grid panel html\n\t */\n\tfunction setHtml(parentContainer){\n\t\t\n\t\tvar objParent = g_objWrapper;\n\t\t\n\t\tif(parentContainer)\n\t\t\tobjParent = parentContainer;\n\t\t\n\t\tobjParent.append(\"<div class='ug-thumbs-grid'><div class='ug-thumbs-grid-inner'></div></div>\");\t\t \n\t\tg_objGrid = objParent.children(\".ug-thumbs-grid\");\n\t\tg_objInner = g_objGrid.children(\".ug-thumbs-grid-inner\");\t\t\n\t\t\n\t\t//put the thumbs to inner strip\n\t\t\n\t\tif(g_temp.isTilesMode == true)\n\t\t\tg_tilesDesign.setHtml(g_objInner);\n\t\telse\n\t\t\tg_thumbs.setHtmlThumbs(g_objInner);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * validate before running the grid\n\t */\n\tfunction validateBeforeRun(){\n\t\t\n\t\tif(g_temp.isHorizontal == false){\t//vertical type\t\t\t\n\t\t\tif(g_temp.gridHeight == 0)\n\t\t\t\tthrow new Error(\"You must set height before run.\");\t\t\n\t\t}else{\n\t\t\tif(g_temp.gridWidth == 0)\n\t\t\t\tthrow new Error(\"You must set width before run.\");\t\t\t\t\t\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * run the gallery after init and set html\n\t */\n\tfunction run(){\n\t\t\n\t\tvar selectedItem = g_gallery.getSelectedItem();\n\t\t\n\t\tvalidateBeforeRun();\n\t\t\n\t\tif(g_temp.isFirstTimeRun == true){\n\t\t\t\n\t\t\tinitEvents();\n\t\t\t\t\t\t\n\t\t\tif(g_temp.isTilesMode == true){\n\t\t\t\t\n\t\t\t\tinitGridDynamicSize();\n\t\t\t\tinitSizeParams();\t\t\t\t\t\n\t\t\t\tg_tilesDesign.run();\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\tg_thumbs.setHtmlProperties();\n\t\t\t\tinitSizeParams();\t\t\t\n\t\t\t\tg_thumbs.loadThumbsImages();\n\t\t\t}\n\t\t\t\n\t\t}else{\n\t\t\t\n\t\t\tif(g_temp.isTilesMode == true){\n\t\t\t\t\n\t\t\t\t//check if dynamic size changed. If do, run the thumbs again\n\t\t\t\tvar isChanged = initGridDynamicSize();\n\t\t\t\t\n\t\t\t\tif(isChanged == true){\n\t\t\t\t\tinitSizeParams();\t\t\t\t\t\n\t\t\t\t\tg_tilesDesign.run();\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\t\t\n\t\tpositionThumbs();\n\t\t\n\t\tif(g_temp.isFirstTimeRun == true && g_temp.isTilesMode){\n\t\t\t\n\t\t\tvar objTiles = g_thumbs.getThumbs();\n\t\t\t\n\t\t\t//fire size change event\n\t\t\tobjTiles.each(function(index, tile){\n\t\t\t\t\n\t\t\t\tg_objWrapper.trigger(g_temp.eventSizeChange, jQuery(tile));\n\t\t\t});\n\t\t\t\n\t\t\tobjTiles.fadeTo(0,1);\n\t\t}\n\t\t\t\n\t\tif(selectedItem != null)\n\t\t\tscrollToThumb(selectedItem.index);\n\t\t\n\t\t//trigger pane change event on the start\n\t\tg_objThis.trigger(t.events.PANE_CHANGE, g_temp.currentPane);\n\t\t\n\t\tg_temp.isFirstTimeRun = false;\n\t}\n\t\n\t/**\n\t * get thumb size object\n\t */\n\tfunction getThumbsSize(){\n\t\tif(g_temp.isTilesMode == true)\n\t\t\tvar objThumbSize = g_tilesDesign.getGlobalTileSize();\n\t\telse\n\t\t\tvar objThumbSize = g_thumbs.getGlobalThumbSize();\n\t\t\n\t\treturn(objThumbSize);\n\t}\n\t\n\t\n\t/**\n\t * init grid dynamic size (tiles mode)\n\t */\n\tfunction initGridDynamicSize(){\n\t\t\n\t\tif(g_temp.isTilesMode == false)\n\t\t\tthrow new Error(\"Dynamic size can be set only in tiles mode\");\n\t\t\n\t\tvar isChanged = false;\n\t\tvar isMobile = g_gallery.isMobileMode();\n\t\t\n\t\t//--- set space between cols and rows\n\t\t\n\t\tvar spaceOld = g_temp.spaceBetweenCols;\n\t\t\n\t\tif(isMobile == true){\n\t\t\tg_temp.spaceBetweenCols = g_options.grid_space_between_mobile;\n\t\t\tg_temp.spaceBetweenRows = g_options.grid_space_between_mobile;\n\t\t}else{\n\t\t\tg_temp.spaceBetweenCols = g_options.grid_space_between_cols;\n\t\t\tg_temp.spaceBetweenRows = g_options.grid_space_between_rows;\n\t\t}\n\t\t\n\t\tif(g_temp.spaceBetweenCols != spaceOld)\n\t\t\tisChanged = true;\n\t\t\n\t\t//set tile size\n\t\t\n\t\tvar lastThumbSize = getThumbsSize();\n\t\tvar lastThumbWidth = lastThumbSize.width;\n\t\t\n\t\tvar tileWidth = g_temp.tileMaxWidth;\n\t\tvar numCols = g_functions.getNumItemsInSpace(g_temp.gridWidth, g_temp.tileMaxWidth, g_temp.spaceBetweenCols);\n\t\t\n\t\tif(numCols < g_options.grid_min_cols){\n\t\t\ttileWidth = g_functions.getItemSizeInSpace(g_temp.gridWidth, g_options.grid_min_cols, g_temp.spaceBetweenCols);\n\t\t}\n\t\t\n\t\tg_tilesDesign.setTileSizeOptions(tileWidth);\n\t\t\n\t\tif(tileWidth != lastThumbWidth)\n\t\t\tisChanged = true;\n\t\t\n\t\t\n\t\treturn(isChanged);\n\t}\n\t\n\t\n\t/**\n\t * init grid size horizontal\n\t * get height param\n\t */\n\tfunction initSizeParamsHor(){\n\t\t\t\t\n\t\tvar objThumbSize = getThumbsSize();\n\t\t\n\t\tvar thumbsHeight = objThumbSize.height;\n\t\t\n\t\t//set grid size\n\t\tvar gridWidth = g_temp.gridWidth;\n\t\tvar gridHeight = g_options.grid_num_rows * thumbsHeight + (g_options.grid_num_rows-1) * g_temp.spaceBetweenRows + g_options.grid_padding*2;\n\t\t\n\t\tg_temp.gridHeight = gridHeight;\n\t\t\n\t\tg_functions.setElementSize(g_objGrid, gridWidth, gridHeight);\n\t\n\t\t//set inner size (as grid size, will be corrected after placing thumbs\n\t\tg_functions.setElementSize(g_objInner, gridWidth, gridHeight);\n\t\t\n\t\t//set initial inner size params\n\t\tg_temp.innerWidth = gridWidth;\n\t\tg_temp.innerHeight = gridHeight;\n\t}\n\t\n\t\n\t/**\n\t * init size params vertical\n\t */\n\tfunction initSizeParamsVert(){\n\n\t\tvar objThumbSize = getThumbsSize();\n\t\t\n\t\tvar thumbsWidth = objThumbSize.width;\n\t\t\n\t\t//set grid size\n\t\tvar gridWidth = g_options.grid_num_cols * thumbsWidth + (g_options.grid_num_cols-1) * g_temp.spaceBetweenCols + g_options.grid_padding*2;\n\t\tvar gridHeight = g_temp.gridHeight;\n\t\t\n\t\tg_temp.gridWidth = gridWidth;\n\t\t\n\t\tg_functions.setElementSize(g_objGrid, gridWidth, gridHeight);\n\t\n\t\t//set inner size (as grid size, will be corrected after placing thumbs\n\t\tg_functions.setElementSize(g_objInner, gridWidth, gridHeight);\n\t\t\n\t\t//set initial inner size params\n\t\tg_temp.innerWidth = gridWidth;\n\t\tg_temp.innerHeight = gridHeight;\n\t\t\n\t}\n\t\n\t/**\n\t * init grid size\n\t */\n\tfunction initSizeParams(){\n\t\t\n\t\tif(g_temp.isHorizontal == false)\n\t\t\tinitSizeParamsVert();\n\t\telse\n\t\t\tinitSizeParamsHor();\n\t\t\n\t}\n\n\t\n\n\t/**\n\t * goto pane by index\n\t */\n\tfunction scrollToThumb(thumbIndex){\n\t\t\n\t\tvar paneIndex = getPaneIndexByThumbIndex(thumbIndex);\n\t\tif(paneIndex == -1)\n\t\t\treturn(false);\n\t\t\t\t\n\t\tt.gotoPane(paneIndex, \"scroll\");\n\t\t\t\t\n\t}\n\t\n\t\n\t/**\n\t * set the options of the strip\n\t */\n\tfunction setOptions(objOptions){\n\t\t\n\t\tg_options = jQuery.extend(g_options, objOptions);\n\t\t\n\t\tg_thumbs.setOptions(objOptions);\n\t\t\n\t\t//set vertical or horizon\n\t\tg_temp.isNavigationVertical = (g_options.grid_panes_direction == \"top\" || g_options.grid_panes_direction == \"bottom\")\n\t\t\n\t\tg_temp.spaceBetweenCols = g_options.grid_space_between_cols;\n\t\tg_temp.spaceBetweenRows = g_options.grid_space_between_rows;\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * position the thumbs and init panes horizontally\n\t */\n\tfunction positionThumb_hor(){\n\t\t\t\t\n\t\tvar arrThumbs = g_objInner.children(\".ug-thumb-wrapper\");\n\t\t\n\t\tvar posx = 0;\n\t\tvar posy = 0;\n\t\tvar counter = 0;\n\t\tvar baseX = 0;\n\t\tvar maxx = 0, maxy = 0;\n\t\tg_temp.innerWidth = 0;\n\t\tg_temp.numPanes = 1;\n\t\tg_temp.arrPanes = [];\n\t\tg_temp.numThumbsInPane = 0;\n\t\t\n\t\t//set first pane position\n\t\tg_temp.arrPanes.push(baseX);\t\n\t\t\n\t\tvar numThumbs = arrThumbs.length;\n\t\t\t\n\t\tfor(i=0;i < numThumbs; i++){\n\t\t\tvar objThumb = jQuery(arrThumbs[i]);\n\t\t\tg_functions.placeElement(objThumb, posx, posy);\n\t\t\t\n\t\t\tvar thumbWidth = objThumb.outerWidth();\n\t\t\tvar thumbHeight = objThumb.outerHeight();\n\t\t\t\n\t\t\t//count maxx\n\t\t\tif(posx > maxx)\n\t\t\t\tmaxx = posx;\n\t\t\t\n\t\t\t//count maxy\n\t\t\tvar endY = posy + thumbHeight;\n\t\t\tif(endY > maxy)\n\t\t\t\tmaxy = endY;\n\t\t\t\n\t\t\t//count maxx end\n\t\t\tvar endX = maxx + thumbWidth;\n\t\t\tif(endX > g_temp.innerWidth)\n\t\t\t\tg_temp.innerWidth = endX;\n\t\t\t\t\t\t\n\t\t\tposx += thumbWidth + g_temp.spaceBetweenCols;\n\t\t\t\n\t\t\t//next row\n\t\t\tcounter++;\n\t\t\tif(counter >= g_options.grid_num_cols){\n\t\t\t\tposy += thumbHeight + g_temp.spaceBetweenRows;\n\t\t\t\tposx = baseX;\n\t\t\t\tcounter = 0;\n\t\t\t}\n\t\t\t\n\t\t\t//count number thumbs in pane\n\t\t\tif(g_temp.numPanes == 1)\n\t\t\t\tg_temp.numThumbsInPane++;\n\t\t\t\n\t\t\t//prepare next pane\n\t\t\tif((posy + thumbHeight) > g_temp.gridHeight){\n\t\t\t\tposy = 0;\n\t\t\t\tbaseX = g_temp.innerWidth + g_temp.spaceBetweenCols;\n\t\t\t\tposx = baseX;\n\t\t\t\tcounter = 0;\n\t\t\t\t\t\t\t\t\n\t\t\t\t//correct max height size (do it once only)\n\t\t\t\tif(g_temp.isMaxHeight == true && g_temp.numPanes == 1){\n\t\t\t\t\tg_temp.gridHeight = maxy;\n\t\t\t\t\tg_objGrid.height(g_temp.gridHeight);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t//save next pane props (if exists)\n\t\t\t\tif(i < (numThumbs - 1)){\n\t\t\t\t\tg_temp.numPanes++;\n\t\t\t\t\t\n\t\t\t\t\t//set next pane position\n\t\t\t\t\tg_temp.arrPanes.push(baseX);\t\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t\n\t\t//set inner strip width and height\n\t\tg_objInner.width(g_temp.innerWidth);\n\t\t\n\t\t//set grid height\n\t\tif(g_temp.isMaxHeight == true && g_temp.numPanes == 1){\n\t\t\tg_temp.gridHeight = maxy;\n\t\t\tg_objGrid.height(maxy);\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * position the thumbs and init panes vertically\n\t */\n\tfunction positionThumb_vert(){\n\t\tvar arrThumbs = g_objInner.children(\".ug-thumb-wrapper\");\n\t\t\n\t\tvar posx = 0;\n\t\tvar posy = 0;\n\t\tvar maxy = 0;\n\t\tvar counter = 0;\n\t\tvar baseX = 0;\n\t\tvar paneStartY = 0;\n\t\t\n\t\tg_temp.innerWidth = 0;\n\t\tg_temp.numPanes = 1;\n\t\tg_temp.arrPanes = [];\n\t\tg_temp.numThumbsInPane = 0;\n\t\t\n\t\t//set first pane position\n\t\tg_temp.arrPanes.push(baseX);\n\t\t\n\t\tvar numThumbs = arrThumbs.length;\n\t\t\t\n\t\tfor(i=0;i < numThumbs; i++){\n\t\t\tvar objThumb = jQuery(arrThumbs[i]);\n\t\t\tg_functions.placeElement(objThumb, posx, posy);\n\t\t\t\n\t\t\tvar thumbWidth = objThumb.outerWidth();\n\t\t\tvar thumbHeight = objThumb.outerHeight();\n\t\t\t\t\t\t\t\t\t\n\t\t\tposx += thumbWidth + g_temp.spaceBetweenCols;\n\t\t\t\n\t\t\tvar endy = (posy + thumbHeight);\n\t\t\tif(endy > maxy)\n\t\t\t\tmaxy = endy;\n\t\t\t\n\t\t\t//next row\n\t\t\tcounter++;\n\t\t\tif(counter >= g_options.grid_num_cols){\n\t\t\t\tposy += thumbHeight + g_temp.spaceBetweenRows;\n\t\t\t\tposx = baseX;\n\t\t\t\tcounter = 0;\n\t\t\t}\n\t\t\t\n\t\t\t//count number thumbs in pane\n\t\t\tif(g_temp.numPanes == 1)\n\t\t\t\tg_temp.numThumbsInPane++;\n\t\t\t\t\t\t\n\t\t\t//prepare next pane\n\t\t\tendy = (posy + thumbHeight);\n\t\t\tvar paneMaxY = paneStartY + g_temp.gridHeight;\n\t\t\t\n\t\t\t//advance next pane\n\t\t\tif(endy > paneMaxY){\n\t\t\t\t\n\t\t\t\t//correct max height size (do it once only)\n\t\t\t\tif(g_temp.isMaxHeight == true && g_temp.numPanes == 1){\n\t\t\t\t\tg_temp.gridHeight = maxy;\n\t\t\t\t\tg_objGrid.height(g_temp.gridHeight);\n\t\t\t\t\tpaneMaxY = g_temp.gridHeight;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tposy = paneMaxY + g_temp.spaceBetweenRows;\t\t\t\t\t\n\t\t\t\tpaneStartY = posy;\n\t\t\t\tbaseX = 0;\n\t\t\t\tposx = baseX;\n\t\t\t\tcounter = 0;\n\t\t\t\t\n\t\t\t\t//save next pane props (if exists)\n\t\t\t\tif(i < (numThumbs - 1)){\n\t\t\t\t\tg_temp.numPanes++;\n\t\t\t\t\t\n\t\t\t\t\t//set next pane position\n\t\t\t\t\tg_temp.arrPanes.push(posy);\t\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t}//for\n\t\t\t\t\n\t\t//set inner height \n\t\tg_objInner.height(maxy);\n\t\tg_temp.innerHeight = maxy;\n\t\t\n\t\t//set grid height\n\t\tif(g_temp.isMaxHeight == true && g_temp.numPanes == 1){\n\t\t\tg_temp.gridHeight = maxy;\n\t\t\tg_objGrid.height(maxy);\n\t\t}\n\t\t\n\t}\n\n\t\n\t/**\n\t * position the thumbs horizontal type\n\t */\t\n\tfunction positionThumb_hortype(){\n\t\t\t\t\n\t\tvar arrThumbs = g_objInner.children(\".ug-thumb-wrapper\");\n\t\t\n\t\tvar baseX = g_options.grid_padding;\n\t\tvar baseY = g_options.grid_padding;\n\t\tvar posy = baseY;\n\t\tvar posx = baseX;\n\t\tvar maxx = 0, maxy = 0, paneMaxY = 0, gridMaxY = 0;\n\t\tvar rowsCounter = 0;\n\t\t\n\t\tg_temp.innerWidth = 0;\n\t\tg_temp.numPanes = 1;\n\t\tg_temp.arrPanes = [];\n\t\tg_temp.numThumbsInPane = 0;\n\t\t\n\t\t//set first pane position\n\t\tg_temp.arrPanes.push(baseX-g_options.grid_padding);\t\n\t\t\n\t\tvar numThumbs = arrThumbs.length;\n\t\t\t\t\n\t\tfor(i=0;i < numThumbs; i++){\n\t\t\tvar objThumb = jQuery(arrThumbs[i]);\n\t\t\t\n\t\t\tvar thumbWidth = objThumb.outerWidth();\n\t\t\tvar thumbHeight = objThumb.outerHeight();\n\t\t\t\n\t\t\t//check end of the size, start a new row\n\t\t\tif((posx - baseX + thumbWidth) > g_temp.gridWidth){\n\t\t\t\trowsCounter++;\n\t\t\t\tposy = 0;\n\t\t\t\t\n\t\t\t\tif(rowsCounter >= g_options.grid_num_rows){\n\t\t\t\t\t\n\t\t\t\t\t//change to a new pane\t\t\t\t\t\n\t\t\t\t\trowsCounter = 0;\n\t\t\t\t\tbaseX = posx;\n\t\t\t\t\tposy = baseY;\n\t\t\t\t\tpaneMaxY = 0;\n\t\t\t\t\t\n\t\t\t\t\t//change grid width to max width\n\t\t\t\t\tif(g_temp.numPanes == 1){\n\t\t\t\t\t\tg_temp.gridWidth = maxx+g_options.grid_padding;\n\t\t\t\t\t\tg_objGrid.width(g_temp.gridWidth);\n\t\t\t\t\t\t\n\t\t\t\t\t\tg_temp.gridHeight = gridMaxY + g_options.grid_padding;\n\t\t\t\t\t\tg_objGrid.height(g_temp.gridHeight);\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tg_temp.numPanes++;\n\t\t\t\t\tg_temp.arrPanes.push(baseX-g_options.grid_padding);\n\t\t\t\t\t\n\t\t\t\t}else{\t\t\t//start new line in existing pane\n\t\t\t\t\tposx = baseX;\n\t\t\t\t\tposy = paneMaxY + g_temp.spaceBetweenRows;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t//place the thumb\n\t\t\tg_functions.placeElement(objThumb, posx, posy);\n\t\t\t\n\t\t\t//count maxx\n\t\t\tvar endX = posx + thumbWidth;\n\t\t\tif(endX > maxx)\n\t\t\t\tmaxx = endX;\n\t\t\t\n\t\t\t//count maxy\n\t\t\tvar endY = posy + thumbHeight;\n\t\t\t\n\t\t\tif(endY > paneMaxY)\t\t//pane height\n\t\t\t\tpaneMaxY = endY;\n\t\t\t\n\t\t\tif(endY > gridMaxY)\t\t//total height\n\t\t\t\tgridMaxY = endY;\n\t\t\t\n\t\t\tif(endY > maxy)\n\t\t\t\tmaxy = endY;\n\t\t\t\n\t\t\t//count maxx end\n\t\t\tvar endX = maxx + thumbWidth;\n\t\t\tif(endX > g_temp.innerWidth)\n\t\t\t\tg_temp.innerWidth = endX;\n\t\t\t\t\t\t\n\t\t\tposx += thumbWidth + g_temp.spaceBetweenCols;\n\t\t\t\t\t\t\n\t\t\t//count number thumbs in pane\n\t\t\tif(g_temp.numPanes == 1)\n\t\t\t\tg_temp.numThumbsInPane++;\n\t\t\t\n\t\t\t\n\t\t}//end for\n\t\t\n\t\t//set inner strip width and height\n\t\tg_temp.innerWidth = maxx + g_options.grid_padding;\n\t\tg_temp.innerHeight = gridMaxY + g_options.grid_padding;\n\t\t\n\t\tg_objInner.width(g_temp.innerWidth);\n\t\tg_objInner.height(g_temp.innerHeight);\n\n\n\t\t//set grid height\n\t\tif(g_temp.numPanes == 1){\n\t\t\tg_temp.gridWidth = maxx + g_options.grid_padding;\n\t\t\tg_temp.gridHeight = gridMaxY + g_options.grid_padding;\n\t\t\t\n\t\t\tg_objGrid.width(g_temp.gridWidth);\n\t\t\tg_objGrid.height(g_temp.gridHeight);\n\t\t\t\t\t\t\n\t\t}\n\t\t\n\t\t\t\n\t}\n\t\n\t\n\t/**\n\t * position the thumbs and init panes related and width related vars\n\t */\n\tfunction positionThumbs(){\n\t\t\n\t\tif(g_temp.isHorizontal == false){\t\t//position vertical type\n\t\t\t\n\t\t\tif(g_temp.isNavigationVertical)\n\t\t\t\tpositionThumb_vert();\n\t\t\telse\n\t\t\t\tpositionThumb_hor();\n\t\t\t\n\t\t}else{\n\t\t\tpositionThumb_hortype();\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * validate thumb index\n\t */\n\tfunction validateThumbIndex(thumbIndex){\n\t\t\n\t\tif(thumbIndex < 0 || thumbIndex >= g_temp.numThumbs){\n\t\t\tthrow new Error(\"Thumb not exists: \" + thumbIndex);\n\t\t\treturn(false);\n\t\t}\n\t\t\n\t\treturn(true);\n\t}\n\t\n\t\n\t/**\n\t * \n\t * validate that the pane index exists\n\t */\n\tfunction validatePaneIndex(paneIndex){\n\t\t\n\t\tif(paneIndex >= g_temp.numPanes || paneIndex < 0){\n\t\t\tthrow new Error(\"Pane \" + index + \" doesn't exists.\");\n\t\t\treturn(false);\n\t\t}\n\t\t\n\t\treturn(true);\n\t}\n\t\n\t/**\n\t * validate inner position\n\t */\n\tfunction validateInnerPos(pos){\n\t\t\t\t\n\t\tvar absPos = Math.abs(pos);\n\t\t\n\t\tif(g_temp.isNavigationVertical == false){\n\t\t\t\n\t\t\tif(absPos < 0 || absPos >= g_temp.innerWidth){\n\t\t\t\tthrow new Error(\"wrong inner x position: \" + pos);\n\t\t\t\treturn(false);\n\t\t\t}\n\t\t\t\n\t\t}else{\n\t\t\t\n\t\t\tif(absPos < 0 || absPos >= g_temp.innerHeight){\n\t\t\t\tthrow new Error(\"wrong inner y position: \" + pos);\n\t\t\t\treturn(false);\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\treturn(true);\n\t}\n\t\n\t\n\t\n\t\n\t/**\n\t * \n\t * set inner strip position\n\t */\n\tfunction setInnerPos(pos){\n\t\t\n\t\tvar objCss = getInnerPosObj(pos);\n\t\tif(objCss == false)\n\t\t\treturn(false);\n\t\t\n\t\tg_objInner.css(objCss);\n\t}\n\t\n\t\n\t/**\n\t * animate inner to some position\n\t */\n\tfunction animateInnerTo(pos){\n\t\t\n\t\tvar objCss = getInnerPosObj(pos);\n\t\tif(objCss == false)\n\t\t\treturn(false);\n\t\t\n\t\tg_objInner.stop(true).animate(objCss ,{\n\t\t\tduration: g_options.grid_transition_duration,\n\t\t\teasing: g_options.grid_transition_easing,\n\t\t\tqueue: false\n\t\t});\n\t\t\n\t}\n\t\n\t/**\n\t * animate back to current pane\n\t */\n\tfunction animateToCurrentPane(){\n\t\t\n\t\tvar innerPos = -g_temp.arrPanes[g_temp.currentPane];\n\t\tanimateInnerTo(innerPos);\n\t}\n\t\n\t\t\n\t\n\tfunction __________GETTERS_________(){};\n\t\n\t/**\n\t * get inner object size according the orientation\n\t */\n\tfunction getInnerSize(){\n\t\t\n\t\tif(g_temp.isNavigationVertical == true)\n\t\t\treturn(g_temp.innerHeight);\n\t\telse\n\t\t\treturn(g_temp.innerWidth);\n\t}\n\t\n\t\n\t/**\n\t * get pane width or height according the orientation\n\t */\n\tfunction getPaneSize(){\n\t\t\n\t\tif(g_temp.isNavigationVertical == true)\n\t\t\treturn(g_temp.gridHeight);\n\t\telse\n\t\t\treturn(g_temp.gridWidth);\n\t}\n\t\n\t\n\t/**\n\t * get object of iner position move\n\t */\n\tfunction getInnerPosObj(pos){\n\t\t\t\t\n\t\tvar obj = {};\n\t\tif(g_temp.isNavigationVertical == true)\n\t\t\tobj.top = pos + \"px\";\n\t\telse\n\t\t\tobj.left = pos + \"px\";\n\t\n\t\treturn(obj);\n\t}\n\t\n\t\n\t/**\n\t * get mouse position according the orientation\n\t */\n\tfunction getMousePos(event){\n\t\t\n\t\tvar mousePos = g_functions.getMousePosition(event);\n\t\t\n\t\tif(g_temp.isNavigationVertical == true)\n\t\t\treturn(mousePos.pageY);\n\t\telse\n\t\t\treturn(mousePos.pageX);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * get inner position according the orientation\n\t */\n\tfunction getInnerPos(){\n\t\t\n\t\tvar objSize = g_functions.getElementSize(g_objInner);\n\t\t\n\t\tif(g_temp.isNavigationVertical == true)\n\t\t\treturn(objSize.top);\n\t\telse\n\t\t\treturn(objSize.left);\n\t\n\t}\n\t\n\t/**\n\t * get pane by thumb index\n\t */\n\tfunction getPaneIndexByThumbIndex(thumbIndex){\n\t\t\n\t\t//validate thumb index\n\t\tif(validateThumbIndex(thumbIndex) == false)\n\t\t\treturn(-1);\n\t\t\n\t\tvar numPane = Math.floor(thumbIndex / g_temp.numThumbsInPane);\n\t\t\n\t\treturn(numPane);\n\t}\n\t\n\t/**\n\t * get position of some pane\n\t */\n\tfunction getPanePosition(index){\n\t\t\t\t\t\t\t\t\n\t\tvar pos = g_temp.arrPanes[index];\n\t\treturn(pos);\n\t}\n\t\n\t\n\t/**\n\t * return if passed some significant movement, for thumb click\n\t */\n\tfunction isSignificantPassed(){\n\t\t\n\t\tif(g_temp.numPanes == 1)\n\t\t\treturn(false);\n\t\t\n\t\tvar objData = g_functions.getStoredEventData(g_temp.storedEventID);\n\t\t\n\t\tvar passedTime = objData.diffTime;\n\t\t\n\t\tvar currentInnerPos = getInnerPos();\n\t\tvar passedDistanceAbs = Math.abs(currentInnerPos - objData.startInnerPos);\n\t\t\n\t\tif(passedDistanceAbs > 30)\n\t\t\treturn(true);\n\t\t\n\t\tif(passedDistanceAbs > 5 && passedTime > 300)\n\t\t\treturn(true);\n\t\t\t\t\n\t\treturn(false);\n\t}\n\t\n\t\n\t\n\t/**\n\t * check if the movement that was held is valid for pane change\n\t */\n\tfunction isMovementValidForChange(){\n\t\t\n\t\tvar objData = g_functions.getStoredEventData(g_temp.storedEventID);\n\t\t\n\t\t//check position, if more then half, move\n\t\tvar currentInnerPos = getInnerPos();\n\t\tdiffPos = Math.abs(objData.startInnerPos - currentInnerPos);\n\t\t\t\t\n\t\tvar paneSize = getPaneSize();\n\t\tvar breakSize = Math.round(paneSize * 3 / 8);\n\t\t\n\t\tif(diffPos >= breakSize)\n\t\t\treturn(true);\n\t\t\n\t\tif(objData.diffTime < 300 && diffPos > 25)\n\t\t\treturn(true);\n\t\t\t\t\t\t\n\t\treturn(false);\n\t}\n\t\n\t\n\t/**\n\t * return if passed some significant movement\n\t */\n\tfunction isApproveTileClick(){\n\t\t\n\t\tif(g_temp.numPanes == 1)\n\t\t\treturn(true);\n\t\t\t\n\t\tvar isApprove = g_functions.isApproveStoredEventClick(g_temp.storedEventID, g_temp.isNavigationVertical);\n\t\t\n\t\treturn(isApprove);\n\t}\n\t\n\t\n\tfunction __________EVENTS_______(){};\n\t\n\t\n\t/**\n\t * on thumb click event\n\t */\n\tfunction onThumbClick(event){\n\t\t\n\t\t//event.preventDefault();\n\t\tif(isSignificantPassed() == true)\n\t\t\treturn(true);\n\t\t\n\t\t//run select item operation\n\t\tvar objThumb = jQuery(this);\n\t\tvar objItem = g_thumbs.getItemByThumb(objThumb);\n\t\t\n\t\tg_gallery.selectItem(objItem);\n\t}\n\t\n\t\n\t/**\n\t * on touch start\n\t */\n\tfunction onTouchStart(event){\n\t\t\t\t\n\t\tif(g_temp.numPanes == 1)\n\t\t\treturn(true);\n\t\t\n\t\tif(g_temp.touchActive == true)\n\t\t\treturn(true);\n\t\t\n\t\tif(g_temp.isTilesMode == false)\n\t\t\tevent.preventDefault();\n\t\t\n\t\tg_temp.touchActive = true;\n\t\t\n\t\tvar addData = {\n\t\t\t\tstartInnerPos: getInnerPos()\n\t\t};\n\t\t\n\t\tg_functions.storeEventData(event, g_temp.storedEventID, addData);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * handle scroll top, return if scroll mode or not\n\t */\n\tfunction handleScrollTop(){\n\t\t\n\t\tif(g_options.grid_vertical_scroll_ondrag == false)\n\t\t\treturn(false);\n\t\t\n\t\tif(g_temp.isNavigationVertical == true)\n\t\t\treturn(false);\n\t\t\n\t\tvar scrollDir = g_functions.handleScrollTop(g_temp.storedEventID);\n\t\t\n\t\tif(scrollDir === \"vert\")\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\t\n\t\n\t/**\n\t * on touch move\n\t */\n\tfunction onTouchMove(event){\n\t\t\t\t\n\t\tif(g_temp.touchActive == false)\n\t\t\treturn(true);\n\t\t\n\t\tevent.preventDefault();\n\t\t\n\t\tg_functions.updateStoredEventData(event, g_temp.storedEventID);\n\t\t\n\t\tvar objData = g_functions.getStoredEventData(g_temp.storedEventID, g_temp.isNavigationVertical);\n\t\t\n\t\t//check if was vertical scroll\n\t\tvar isScroll = handleScrollTop();\n\t\tif(isScroll)\n\t\t\treturn(true);\n\t\t\n\t\t\n\t\tvar diff = objData.diffMousePos;\n\t\tvar innerPos = objData.startInnerPos + diff;\n\t\tvar direction = (diff > 0) ? \"prev\":\"next\";\n\t\tvar lastPaneSize = g_temp.arrPanes[g_temp.numPanes-1];\n\t\t\n\t\t//slow down when off limits\n\t\tif(g_options.grid_carousel == false && innerPos > 0 && direction == \"prev\"){\n\t\t\tinnerPos = innerPos / 3;\n\t\t}\n\t\t\n\t\t//debugLine({lastSize:lastPaneSize,innerPos: innerPos});\n\t\t\n\t\tif(g_options.grid_carousel == false && innerPos < -lastPaneSize && direction == \"next\"){\n\t\t\tinnerPos = objData.startInnerPos + diff / 3;\n\t\t}\n\t\t\n\t\tsetInnerPos(innerPos);\n\t\t\t\n\t}\n\t\n\t\n\t/**\n\t * on touch end\n\t * change panes or return to current pane\n\t */\n\tfunction onTouchEnd(event){\n\t\t\n\t\tif(g_temp.touchActive == false)\n\t\t\treturn(true);\n\t\t\n\t\tg_functions.updateStoredEventData(event, g_temp.storedEventID);\n\t\tvar objData = g_functions.getStoredEventData(g_temp.storedEventID, g_temp.isNavigationVertical);\n\t\t\n\t\t//event.preventDefault();\n\t\tg_temp.touchActive = false;\n\t\t\n\t\tif(isMovementValidForChange() == false){\n\t\t\tanimateToCurrentPane();\n\t\t\treturn(true);\n\t\t}\n\t\t\n\t\t//move pane or return back\n\t\tvar innerPos = getInnerPos();\n\t\tvar diff = innerPos - objData.startInnerPos;\n\t\tvar direction = (diff > 0) ? \"prev\":\"next\";\n\t\t\n\t\tif(direction == \"next\"){\n\t\t\t\t\t\t\n\t\t\tif(g_options.grid_carousel == false && t.isLastPane())\n\t\t\t\tanimateToCurrentPane();\n\t\t\telse\n\t\t\t\tt.nextPane();\t\t\t\n\t\t}\n\t\telse{\n\t\t\t\t\t\t\n\t\t\tif(g_options.grid_carousel == false && t.isFirstPane()){\n\t\t\t\tanimateToCurrentPane();\n\t\t\t}\n\t\t\telse\n\t\t\t\tt.prevPane();\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * on item change\n\t */\n\tfunction onItemChange(){\n\t\t\t\n\t\tvar objItem = g_gallery.getSelectedItem();\n\t\tg_thumbs.setThumbSelected(objItem.objThumbWrapper);\n\t\t\n\t\tscrollToThumb(objItem.index);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * init panel events\n\t */\n\tfunction initEvents(){\n\t\t\n\t\tif(g_temp.isTilesMode == false){\n\t\t\t\n\t\t\tg_thumbs.initEvents();\t\t\n\t\t\tvar objThumbs = g_objGrid.find(\".ug-thumb-wrapper\");\n\t\t\tobjThumbs.on(\"click touchend\",onThumbClick);\n\t\t\t\n\t\t\tg_objGallery.on(g_gallery.events.ITEM_CHANGE, onItemChange);\n\t\t\t\n\t\t}else{\n\t\t\tg_tilesDesign.initEvents();\n\t\t}\n\t\t\n\t\t//touch drag events\n\t\t\n\t\t//slider mouse down - drag start\n\t\tg_objGrid.bind(\"mousedown touchstart\",onTouchStart);\n\t\t\n\t\t//on body move\n\t\tjQuery(\"body\").bind(\"mousemove touchmove\",onTouchMove);\n\t\t\n\t\t//on body mouse up - drag end\n\t\tjQuery(window).add(\"body\").bind(\"mouseup touchend\", onTouchEnd);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * destroy the events\n\t */\n\tthis.destroy = function(){\n\t\t\n\t\tif(g_temp.isTilesMode == false){\n\t\t\t\n\t\t\tvar objThumbs = g_objGrid.find(\".ug-thumb-wrapper\");\n\t\t\tobjThumbs.off(\"click\");\n\t\t\tobjThumbs.off(\"touchend\");\n\t\t\tg_objGallery.on(g_gallery.events.ITEM_CHANGE);\n\t\t\tg_thumbs.destroy();\t\t\n\t\t\t\t\t\t\n\t\t}else{\n\t\t\tg_tilesDesign.destroy();\n\t\t}\n\t\t\n\t\tg_objGrid.unbind(\"mousedown\");\n\t\tg_objGrid.unbind(\"touchstart\");\n\t\tjQuery(\"body\").unbind(\"mousemove\");\n\t\tjQuery(\"body\").unbind(\"touchmove\");\n\t\t\n\t\tjQuery(window).add(\"body\").unbind(\"touchend\");\n\t\tjQuery(window).add(\"body\").unbind(\"mouseup\");\n\t\t\n\t\tg_objThis.off(t.events.PANE_CHANGE);\n\t\t\n\t}\n\t\n\t\n\t\n\tthis.__________EXTERNAL_GENERAL_________ = function(){};\n\t\n\t/**\n\t * set the thumb unselected state\n\t */\n\tthis.setThumbUnselected = function(objThumbWrapper){\n\t\t\n\t\tg_thumbs.setThumbUnselected(objThumbWrapper);\n\t\t\n\t}\n\t\n\t/**\n\t * check if thmb item visible, means inside the visible part of the inner strip\n\t */\n\tthis.isItemThumbVisible = function(objItem){\n\t\tvar itemIndex = objItem.index;\n\t\tvar paneIndex = getPaneIndexByThumbIndex(itemIndex);\n\t\t\n\t\tif(paneIndex == g_temp.currentPane)\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\t\n\t\n\tthis.__________EXTERNAL_API_________ = function(){};\n\t\n\t/**\n\t * get estimation of number of panes by the height of the grid.\n\t */\n\tthis.getNumPanesEstimationByHeight = function(gridHeight){\n\t\t\n\t\tif(g_temp.isTilesMode == true){\n\t\t\t\n\t\t\tvar thumbHeight = g_options.tile_height;\n\t\t\t\n\t\t}else{\n\t\t\tvar thumbsOptions = g_thumbs.getOptions();\t\t\n\t\t\tvar thumbHeight = thumbsOptions.thumb_height;\n\t\t}\n\t\t\n\t\tvar numThumbs = g_thumbs.getNumThumbs();\n\t\tvar numRows = Math.ceil(numThumbs / g_options.grid_num_cols);\n\t\t\n\t\tvar totalHeight = numRows * thumbHeight + (numRows-1) * g_temp.spaceBetweenRows;\n\t\t\t\n\t\tvar numPanes = Math.ceil(totalHeight / gridHeight);\n\t\t\n\t\treturn(numPanes);\n\t}\n\t\n\t/**\n\t * get estimation of number of panes by the width of the grid.\n\t */\n\tthis.getNumPanesEstimationByWidth = function(gridWidth){\n\t\t\n\t\tif(g_temp.isTilesMode){\n\t\t\tvar thumbWidth = g_options.tile_width;\t\t\t\n\t\t}else{\n\t\t\tvar thumbsOptions = g_thumbs.getOptions();\t\t\n\t\t\tvar thumbWidth = thumbsOptions.thumb_width;\n\t\t}\n\t\t\n\t\tvar numThumbs = g_thumbs.getNumThumbs();\n\t\tvar numCols = Math.ceil(numThumbs / g_options.grid_num_rows);\n\t\t\n\t\tvar totalWidth = numCols * thumbWidth + (numCols-1) * g_temp.spaceBetweenCols;\n\t\t\n\t\tvar numPanes = Math.ceil(totalWidth / gridWidth);\n\t\t\t\t\n\t\treturn(numPanes);\n\t}\n\t\n\t\n\t/**\n\t * get height estimation by width, works only in tiles mode\n\t */\n\tthis.getHeightEstimationByWidth = function(width){\n\t\t\n\t\tif(g_temp.isTilesMode == false)\n\t\t\tthrow new Error(\"This function works only with tiles mode\");\n\t\t\n\t\tvar numThumbs = g_thumbs.getNumThumbs();\n\t\tvar numCols = g_functions.getNumItemsInSpace(width, g_options.tile_width, g_temp.spaceBetweenCols);\n\t\tvar numRows = Math.ceil(numThumbs / numCols);\n\t\t\n\t\tif(numRows > g_options.grid_num_rows)\n\t\t\tnumRows = g_options.grid_num_rows;\n\t\t\n\t\tvar gridHeight = g_functions.getSpaceByNumItems(numRows, g_options.tile_height, g_temp.spaceBetweenRows);\n\t\tgridHeight += g_options.grid_padding * 2;\n\t\t\n\t\treturn(gridHeight);\n\t}\n\t\n\t/**\n\t * get the grid element\n\t */\n\tthis.getElement = function(){\n\t\treturn(g_objGrid);\n\t}\n\t\n\t/**\n\t * get element size and position\n\t */\n\tthis.getSize = function(){\n\t\t\n\t\tvar objSize = g_functions.getElementSize(g_objGrid);\n\t\treturn(objSize);\n\t\t\n\t}\n\t\n\t/**\n\t * get number of panes\n\t */\n\tthis.getNumPanes = function(){\n\t\t\n\t\treturn(g_temp.numPanes);\n\t}\n\t\n\t/**\n\t * get if the current pane is first\n\t */\n\tthis.isFirstPane = function(){\n\t\t\n\t\tif(g_temp.currentPane == 0)\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\t\n\t\n\t/**\n\t * get if the current pane is last\n\t */\n\tthis.isLastPane = function(){\n\t\t\n\t\tif(g_temp.currentPane == (g_temp.numPanes -1) )\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\t\n\t\n\t/**\n\t * get pane number, and num panes\n\t */\n\tthis.getPaneInfo = function(){\n\t\t\n\t\tvar obj = {\n\t\t\tpane: g_temp.currentPane,\n\t\t\ttotal: g_temp.numPanes\n\t\t};\n\t\t\n\t\treturn(obj);\n\t}\n\t\n\t\n\t/**\n\t * get current pane\n\t */\n\tthis.getPane = function(){\n\t\t\n\t\treturn(g_temp.currentPane);\n\t}\n\t\n\t\n\t/**\n\t * set grid width (horizontal type)\n\t */\n\tthis.setWidth = function(gridWidth){\n\t\tg_temp.gridWidth = gridWidth;\n\t\tg_temp.isHorizontal = true;\n\t}\n\t\n\t/**\n\t * set max width, the width will be corrected by the number of items\n\t * set vertical type\n\t */\n\tthis.setMaxWidth = function(maxWidth){\n\t\tg_temp.gridWidth = maxWidth;\n\t\tg_temp.isMaxWidth = true;\n\t\tg_temp.isHorizontal = true;\n\t}\n\t\n\t\n\t/**\n\t * set grid height (vertical type)\n\t */\n\tthis.setHeight = function(gridHeight){\n\t\tg_temp.gridHeight = gridHeight;\n\t\tg_temp.isHorizontal = false;\n\t\t\n\t}\n\t\n\t/**\n\t * set max height, the height will be corrected by the number of items\n\t * set the vertical type\n\t */\n\tthis.setMaxHeight = function(maxHeight){\n\t\tg_temp.gridHeight = maxHeight;\n\t\tg_temp.isMaxHeight = true;\n\t\tg_temp.isHorizontal = false;\n\t}\n\t\n\t\n\t/**\n\t * goto some pane\n\t * force skip current pane checks\n\t */\n\tthis.gotoPane = function(index, fromWhere){\n\t\t\n\t\tif(validatePaneIndex(index) == false)\n\t\t\treturn(false);\n\t\t\n\t\tif(index == g_temp.currentPane)\n\t\t\treturn(false);\n\t\t\n\t\tvar innerPos = -g_temp.arrPanes[index];\n\t\t\n\t\tg_temp.currentPane = index;\n\t\tanimateInnerTo(innerPos);\n\t\t\n\t\t//trigger pane change event\n\t\tg_objThis.trigger(t.events.PANE_CHANGE, index);\n\t}\n\t\n\t\n\t/**\n\t * foreward to the next pane\n\t */\n\tthis.nextPane = function(){\n\t\t\t\t\n\t\tvar nextPaneIndex = g_temp.currentPane+1;\n\t\t\n\t\tif(nextPaneIndex >= g_temp.numPanes){\n\t\t\t\n\t\t\tif(g_options.grid_carousel == false)\n\t\t\t\treturn(true);\n\t\t\t\n\t\t\tnextPaneIndex = 0;\n\t\t}\n\t\t\n\t\tt.gotoPane(nextPaneIndex, \"next\");\n\t}\n\t\n\t\n\t/**\n\t * foreward to the next pane\n\t */\n\tthis.prevPane = function(){\n\t\t\n\t\tvar prevPaneIndex = g_temp.currentPane-1;\n\t\tif(prevPaneIndex < 0){\n\t\t\tprevPaneIndex = g_temp.numPanes-1;\n\t\t\t\n\t\t\tif(g_options.grid_carousel == false)\n\t\t\t\treturn(false);\n\t\t}\n\t\t\n\t\tt.gotoPane(prevPaneIndex, \"prev\");\n\t}\n\t\n\t\n\t/**\n\t * set next pane button\n\t */\n\tthis.attachNextPaneButton = function(objButton){\n\t\t\n\t\tg_functions.setButtonOnClick(objButton, t.nextPane);\n\n\t\tif(g_options.grid_carousel == true)\t\t\n\t\t\treturn(true);\n\t\t\n\t\tif(t.isLastPane())\n\t\t\tobjButton.addClass(\"ug-button-disabled\");\n\t\t\n\t\t//set disabled button class if first pane\n\t\tg_objThis.on(t.events.PANE_CHANGE, function(){\n\t\t\t\n\t\t\tif(t.isLastPane())\n\t\t\t\tobjButton.addClass(\"ug-button-disabled\");\n\t\t\telse\n\t\t\t\tobjButton.removeClass(\"ug-button-disabled\");\n\t\n\t\t});\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * set prev pane button\n\t */\n\tthis.attachPrevPaneButton = function(objButton){\n\t\t\t\t\n\t\tg_functions.setButtonOnClick(objButton, t.prevPane);\n\t\t\n\t\tif(g_options.grid_carousel == true)\t\t\n\t\t\treturn(true);\n\t\t\n\t\tif(t.isFirstPane())\n\t\t\tobjButton.addClass(\"ug-button-disabled\");\n\t\t\n\t\t//set disabled button class if first pane\n\t\tg_objThis.on(t.events.PANE_CHANGE, function(){\n\t\t\t\n\t\t\tif(t.isFirstPane())\n\t\t\t\tobjButton.addClass(\"ug-button-disabled\");\n\t\t\telse\n\t\t\t\tobjButton.removeClass(\"ug-button-disabled\");\n\t\n\t\t});\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * attach bullets object\n\t */\n\tthis.attachBullets = function(objBullets){\n\t\t\n\t\tobjBullets.setActive(g_temp.currentPane);\n\t\t\n\t\tjQuery(objBullets).on(objBullets.events.BULLET_CLICK, function(data, numBullet){\n\t\t\tt.gotoPane(numBullet, \"theme\");\n\t\t\tobjBullets.setActive(numBullet);\t\t\t\t\n\t\t});\n\t\t\n\t\tjQuery(t).on(t.events.PANE_CHANGE, function(data, numPane){\n\t\t\tobjBullets.setActive(numPane);\n\t\t});\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * get tile design object\n\t */\n\tthis.getObjTileDesign = function(){\n\t\treturn g_tilesDesign;\n\t}\n\t\n\t\n\t/**\n\t * init function \n\t */\n\tthis.init = function(gallery, customOptions, isTilesMode){\n\t\t\n\t\tinit(gallery, customOptions, isTilesMode);\n\t}\n\t\n\t\t\n\t\n\t/**\n\t * set html and properties\n\t */\t\n\tthis.run = function(){\n\t\trun();\n\t}\n\n\t\n\t/**\n\t * set html \n\t */\n\tthis.setHtml = function(parentContainer){\n\t\t\n\t\tsetHtml(parentContainer);\n\t}\n\t\n}\n\n\n\n/**\n * tiles class\n */\nfunction UGTiles(){\n\n\tvar t = this, g_objThis = jQuery(this);\n\tvar g_gallery = new UniteGalleryMain(), g_objGallery, g_objWrapper, g_objParent;\t\n\tvar g_functions = new UGFunctions(), g_arrItems, g_objTileDesign = new UGTileDesign();\n\tvar g_thumbs = new UGThumbsGeneral(), g_vars = {};\n    var g_arrNestedGridRow, g_arrNestedItems;\n\t\n\t\n\tvar g_options = {\n\t\t tiles_type: \"columns\",\t\t\t\t\t//columns / justified - tiles layout type\n\t\t tiles_col_width: 250,\t\t\t\t\t//column width - exact or base according the settings\n\t\t tiles_align:\"center\",\t\t\t\t\t//align of the tiles in the space\n\t\t tiles_exact_width: false,\t\t\t\t//exact width of column - disables the min and max columns\n\t\t tiles_space_between_cols: 3,\t\t\t//space between images\n\t\t tiles_space_between_cols_mobile: 3,    //space between cols for mobile type\n\t\t tiles_include_padding: true,\t\t\t//include padding at the sides of the columns, equal to current space between cols\n\t\t tiles_min_columns: 2,\t\t\t\t\t//min columns\n\t\t tiles_max_columns: 0,\t\t\t\t\t//max columns (0 for unlimited)\n\t\t tiles_keep_order: false,\t\t\t\t//keep order - slower algorytm\n\t\t tiles_set_initial_height: true,\t\t//set some estimated height before images show\n\t\t \n\t\t tiles_justified_row_height: 150,\t\t//base row height of the justified type\n\t\t tiles_justified_space_between: 3,\t\t//space between the tiles justified type\n\n\t\t tiles_nested_optimal_tile_width: 250,\t// tiles optimal width\n\t     tiles_nested_col_width: null,\t\t\t// nested tiles column width\n\t     tiles_nested_debug: false,\n\t     \n\t\t tiles_enable_transition: true\t\t\t//enable transition when screen width change\n\t};\n\t\n\tthis.events = {\n\t\t\tTHUMB_SIZE_CHANGE: \"thumb_size_change\",\n\t\t\tTILES_FIRST_PLACED: \"tiles_first_placed\",\t\t//only in case of justified\n\t\t\tALL_TILES_LOADED: \"all_tiles_loaded\"\n\t};\n\t\n\tvar g_temp = {\n\t\t\tisFixedMode: false,   //is tiles is custom sized, not related to the images that inside\n\t\t\tisFirstTimeRun:true,   //if run once\n\t\t\thandle:null,\t\t   //interval handle\n\t\t\tisTransActive: false,  //is transition active\n\t\t\tisTransInited: false,  //if the transition function is set\n\t\t\tisAllLoaded: false\n\t};\n\t\n    var g_nestedWork = {\n    \t\tcolWidth: null,\n            nestedOptimalCols: 5,\n            gridY: 0,\n            maxColumns: 0,\t\t\t\t\t\t //maxColumns\n            columnsValueToEnableHeightResize: 3, //columns Value To Enable Height Resize\n            resizeLeftRightToColumn: true,\n            currentItem: 0,\n\t        currentGap: null,\n\t        optimalTileWidth: null,\n\t        maxGridY:0\n    }\n\t\n\t\n\tfunction __________GENERAL_________(){};\n\t\n\t\n\t/**\n\t * init the gallery\n\t */\n\tfunction init(gallery, customOptions){\n\t\t\n\t\tg_objects = gallery.getObjects();\n\t\tg_gallery = gallery;\n\t\tg_objGallery = jQuery(gallery);\n\t\tg_objWrapper = g_objects.g_objWrapper;\n\t\tg_arrItems = g_objects.g_arrItems;\n\t\t\n\t\tg_options = jQuery.extend(g_options, customOptions);\n\n\t\tmodifyOptions();\n\t\t\n\t\tg_objTileDesign.init(gallery, g_options);\n\t\t\n\t\tg_thumbs = g_objTileDesign.getObjThumbs();\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * modify options\n\t */\n\tfunction modifyOptions(){\n\t\t\n\t\tif(g_options.tiles_min_columns < 1)\n\t\t\tg_options.tiles_min_columns = 1;\n\t\t\n\t\t//protection of max columns, can't be more then min columns\n\t\tif(g_options.tiles_max_columns != 0 && g_options.tiles_max_columns < g_options.tiles_min_columns){\n\t\t\tg_options.tiles_max_columns = g_options.tiles_min_columns;\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * set the grid panel html\n\t */\n\tfunction setHtml(objParent){\n\t\t\n\t\tif(!objParent)\n\t\t\tvar objParent = g_objWrapper;\n\t\t\n\t\tg_objParent = objParent;\n\t\t\n\t\tvar tilesType = g_options.tiles_type;\n\t\tobjParent.addClass(\"ug-tiletype-\"+tilesType);\n\t\t\n\t\tg_objTileDesign.setHtml(objParent);\n\t\t\n\t\tobjParent.children(\".ug-thumb-wrapper\").hide();\n\t}\n\t\n\t\n\t/**\n\t * set class that enables transition\n\t */\n\tfunction setTransition(){\n\t\t\n\t\t//set the tiles in resting mode, to activate their own transitions\n\t\tg_objParent.addClass(\"ug-tiles-rest-mode\");\n\t\t\n\t\tg_temp.isTransInited = true;\n\t\t\n\t\t//add css tansition\n\t\tif(g_options.tiles_enable_transition == true){\n\t\t\tg_objParent.addClass(\"ug-tiles-transit\");\n\t\t\t\n\t\t\t//add image overlay transition\n\t\t\tvar optionsTile = g_objTileDesign.getOptions();\n\t\t\t\n\t\t\tif(optionsTile.tile_enable_image_effect == true && optionsTile.tile_image_effect_reverse == false)\n\t\t\t\tg_objParent.addClass(\"ug-tiles-transit-overlays\");\n\t\t\t\n\t\t\tg_temp.isTransActive = true;\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * get parent width\n\t */\n\tfunction getParentWidth(){\n\t\treturn g_functions.getElementSize(g_objParent).width;\n\t}\n\t\n\t\n\t/**\n\t * do some actions before transition\n\t */\n\tfunction doBeforeTransition(){\n\t\t\n\t\tif(g_temp.isTransInited == false)\n\t\t\treturn(false);\n\t\t\t\n\t\tg_objParent.addClass(\"ug-tiles-transition-active\");\n\t\tg_objParent.removeClass(\"ug-tiles-rest-mode\");\n\t\t\n\t\t//prepare for transition\n\t\tif(g_temp.isTransActive == false)\n\t\t\treturn(false);\n\t\t\t\t\n\t\tg_objTileDesign.disableEvents();\n\t}\n\t\n\t\n\t/**\n\t * set after transition classes\n\t */\n\tfunction doAfterTransition_setClasses(){\n\t\t\n\t\tif(g_temp.isTransInited == false)\n\t\t\treturn(false);\n\t\t\n\t\tg_objParent.removeClass(\"ug-tiles-transition-active\");\n\t\tg_objParent.addClass(\"ug-tiles-rest-mode\");\n\t}\n\t\n\t\n\t/**\n\t * do some actions after transition\n\t */\n\tfunction doAfterTransition(){\n\n\t\t\n\t\tif(g_temp.isTransActive == true){\n\t\t\t\t\t\t\n\t\t\t//trigger size change after transition\n\t\t\tsetTimeout(function(){\n\t\t\t\t\n\t\t\t\tg_objTileDesign.enableEvents();\n\t\t\t\tg_objTileDesign.triggerSizeChangeEventAllTiles();\n\t\t\t\t\n\t\t\t\tdoAfterTransition_setClasses();\n\t\t\t\t\n\n\t\t\t}, 800);\n\t\t\t\n\t\t\t//control size change \n\t\t\tif(g_temp.handle)\n\t\t\t\tclearTimeout(g_temp.handle);\n\t\t\t\t\n\t\t\tg_temp.handle = setTimeout(function(){\n\t\t\t\t\n\t\t\t\tdoAfterTransition_setClasses();\n\t\t\t\t\n\t\t\t\tg_objTileDesign.triggerSizeChangeEventAllTiles();\n\t\t\t\tg_temp.handle = null;\n\t\t\t\t\t\t\t\t\n\t\t\t}, 2000);\n\t\t\t\n\t\t\t\n\t\t}else{\n\t\t\t\t\t\t\n\t\t\tg_objTileDesign.triggerSizeChangeEventAllTiles();\n\n\t\t\tdoAfterTransition_setClasses();\n\n\t\t}\n\n\t}\n\n\t\n\tfunction __________COLUMN_TYPE_RELATED_________(){};\n\t\n\t/**\n\t * count width by number of columns\n\t */\n\tfunction fillTilesVars_countWidthByCols(){\n\n\t\tg_vars.colWidth = (g_vars.availWidth - g_vars.colGap * (g_vars.numCols-1)) / g_vars.numCols;\n\t\tg_vars.colWidth = Math.floor(g_vars.colWidth);\n\n\t\tg_vars.totalWidth = g_functions.getSpaceByNumItems(g_vars.numCols, g_vars.colWidth, g_vars.colGap);\n\t\t\n\t}\n\t\n\t\n\t\n\t/**\n\t * fill common tiles vars\n\t */\n\tfunction fillTilesVars(){\n\n\t\tg_vars.colWidth = g_options.tiles_col_width;\n\t\tg_vars.minCols = g_options.tiles_min_columns;\n\t\tg_vars.maxCols = g_options.tiles_max_columns;\n\t\t\n\t\tif(g_gallery.isMobileMode() == false){\n\t\t\tg_vars.colGap = g_options.tiles_space_between_cols;\n\t\t} else {\n\t\t\tg_vars.colGap = g_options.tiles_space_between_cols_mobile;\n\t\t}\n\t\t\n\t\t//set gallery width\n\t\tg_vars.galleryWidth = getParentWidth();\n\t\t\n\t\tg_vars.availWidth = g_vars.galleryWidth;\n\t\t\n\t\tif(g_options.tiles_include_padding == true)\n\t\t\tg_vars.availWidth = g_vars.galleryWidth - g_vars.colGap*2;\n\t\t\n\t\t//set the column number by exact width\n\t\tif(g_options.tiles_exact_width == true){\n\t\t\t\n\t\t\tg_vars.numCols = g_functions.getNumItemsInSpace(g_vars.availWidth, g_vars.colWidth, g_vars.colGap);\n\n\t\t\tif(g_vars.maxCols > 0 && g_vars.numCols > g_vars.maxCols)\n\t\t\t\tg_vars.numCols = g_vars.maxCols;\n\n\t\t\t//if less then min cols count width by cols\n\t\t\tif(g_vars.numCols < g_vars.minCols){\n\t\t\t\tg_vars.numCols = g_vars.minCols;\n\n\t\t\t\tfillTilesVars_countWidthByCols();\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\tg_vars.totalWidth = g_vars.numCols * (g_vars.colWidth + g_vars.colGap) - g_vars.colGap;\n\t\t\t}\n\t\t\t\n\t\t} else {\n\t\t\t\n\t\t\t//set dynamic column number\n\t\t\t\n\t\t\tvar numCols = g_functions.getNumItemsInSpaceRound(g_vars.availWidth, g_vars.colWidth, g_vars.colGap);\n\t\t\t\t\t\t\n\t\t\tif(numCols < g_vars.minCols)\n\t\t\t\tnumCols = g_vars.minCols;\n\t\t\telse\n\t\t\t\tif(g_vars.maxCols != 0 && numCols > g_vars.maxCols)\n\t\t\t\t\tnumCols = g_vars.maxCols;\n\n\t\t\tg_vars.numCols = numCols;\n\t\t\t\n\t\t\tfillTilesVars_countWidthByCols();\n\t\t\t\n\t\t}\n\n\t\tswitch(g_options.tiles_align){\n\t\t\tcase \"center\":\n\t\t\tdefault:\n\t\t\t\t//add x to center point\n\t\t\t\tg_vars.addX = Math.round( (g_vars.galleryWidth - g_vars.totalWidth) / 2 );\n\t\t\tbreak;\n\t\t\tcase \"left\":\n\t\t\t\tg_vars.addX = 0;\n\t\t\tbreak;\n\t\t\tcase \"right\":\n\t\t\t\tg_vars.addX = g_vars.galleryWidth - g_vars.totalWidth;\n\t\t\tbreak;\n\t\t}\n\t\t\n\t\tg_vars.maxColHeight = 0;\n\t\t\n\t\t//get posx array (constact to all columns)\n\t\tg_vars.arrPosx = [];\t\t\n\t\tfor(col = 0; col < g_vars.numCols; col++){\n\t\t\tvar colX = g_functions.getColX(col, g_vars.colWidth, g_vars.colGap);\n\t\t\tg_vars.arrPosx[col] = colX + g_vars.addX;\n\t\t}\n\t\t\n\t\t//empty heights array\n\t\tg_vars.colHeights = [0];\n\n\t}\n\t\n\t\n\t\n\t\n\t\n\t/**\n\t * get column with minimal height\n\t */\n\tfunction getTilesMinCol(){\n\t\tvar numCol = 0;\n\t\t\n\t\tvar minHeight = 999999999;\n\t\t\n\t\tfor(col = 0; col < g_vars.numCols; col++){\n\t\t\t\n\t\t\tif(g_vars.colHeights[col] == undefined || g_vars.colHeights[col] == 0)\n\t\t\t\treturn col;\n\t\t\t\n\t\t\tif(g_vars.colHeights[col] < minHeight){\n\t\t\t\tnumCol = col;\n\t\t\t\tminHeight = g_vars.colHeights[col];\n\t\t\t}\n\t\t\n\t\t}\n\t\t\n\t\treturn(numCol);\n\t}\n\t\n\t\n\t/**\n\t * place tile as it loads\n\t */\n\tfunction placeTile(objTile, toShow, setGalleryHeight, numCol){\n\t\t\n\t\tif(numCol === null || typeof numCol == \"undefined\")\n\t\t\tvar numCol = getTilesMinCol();\n\t\t\n\t\t//set posy\n\t\tvar posy = 0;\n\t\tif(g_vars.colHeights[numCol] !== undefined)\n\t\t\tposy = g_vars.colHeights[numCol];\n\t\t\n\t\tvar itemHeight = g_objTileDesign.getTileHeightByWidth(g_vars.colWidth, objTile, \"placeTile\");\n\t\t\n\t\tif(itemHeight === null){\t//for custom html tile\n\t\t\tif(g_options.tiles_enable_transition == true)\n\t\t\t\tthrow new Error(\"Can't know tile height, please turn off transition\");\n\t\t\t\n\t\t\tvar itemSize = g_functions.getElementSize(objTile);\n\t\t\titemHeight = itemSize.height;\n\t\t}\n\t\t\n\t\tvar posx = g_vars.arrPosx[numCol];\n\t\t\n\t\tg_functions.placeElement(objTile, posx, posy);\n\t\t\n\t\tvar realHeight = posy + itemHeight;\n\t\t\t\t\n\t\tg_vars.colHeights[numCol] = realHeight + g_vars.colGap;\n\t\t\n\t\t//set max height\n\t\tif(g_vars.maxColHeight < realHeight)\n\t\t\tg_vars.maxColHeight = realHeight;\n\n\t\tif(toShow == true)\n\t\t\tobjTile.show().fadeTo(0,1);\n\t\t\n\t\tif(setGalleryHeight == true){\n\t\t\tg_objParent.height(g_vars.maxColHeight);\t\t\t\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * place the tiles\n\t */\n\tfunction placeTiles(toShow){\n\t\t\n\t\tif(!toShow)\n\t\t\ttoShow = false;\n\t\t\n\t\tfillTilesVars();\n\t\t\n\t\tvar objThumbs = g_thumbs.getThumbs();\n\t\t\n\t\t//do some operation before the transition\n\t\tdoBeforeTransition();\n\t\t\n\t\t//resize all thumbs\n\t\tg_objTileDesign.resizeAllTiles(g_vars.colWidth, g_objTileDesign.resizemode.VISIBLE_ELEMENTS);\n\t\t\n\t\t//place elements\n\t\tfor(var index = 0; index < objThumbs.length; index++){\n\t\t\tvar objTile = jQuery(objThumbs[index]);\n\t\t\tvar col = undefined;\n\t\t\tif(g_options.tiles_keep_order == true)\n\t\t\t\tcol = g_functions.getColByIndex(g_vars.numCols, index);\n\t\t\t\n\t\t\tplaceTile(objTile, toShow, false, col);\n\t\t}\n\t\t\n\t\t//bring back the state after transition\n\t\tdoAfterTransition();\n\t\t\n\t\t//set gallery height, according the transition\n\t\tvar galleryHeight = g_objParent.height();\n\t\t\n\t\tif(g_temp.isTransActive == true && galleryHeight > g_vars.maxColHeight)\n\t\t\tsetTimeout(function(){\n\t\t\t\tg_objParent.height(g_vars.maxColHeight);\n\t\t\t},700);\n\t\telse\n\t\t\tg_objParent.height(g_vars.maxColHeight);\n\t}\n\t\n\t\n\t/**\n\t * check if alowed to place ordered tile\n\t */\n\tfunction isOrderedTilePlaceAlowed(objTile){\n\t\t\n\t\tvar index = objTile.index();\n\n\t\t//don't allow double put items\n\t\tvar currentItem = g_gallery.getItem(index);\n\t\tif(currentItem.ordered_placed === true)\n\t\t\treturn(false);\n\n\t\t\n\t\tvar prevIndex = g_functions.getPrevRowSameColIndex(index, g_vars.numCols);\n\n\t\t//put first item in the column\n\t\tif(prevIndex < 0)\n\t\t\treturn(true);\n\t\t\t\t\n\t\t//check if previous tile in column is placed\n\t\tvar objPrevItem = g_gallery.getItem(prevIndex);\n\t\tif(objPrevItem.ordered_placed === true)\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\t\n\t\n\t/**\n\t * place ordered tile\n\t */\n\tfunction placeOrderedTile(objTile, isForce){\n\t\t\n\t\tif(isForce !== true){\n\n\t\t\tvar isAlowed = isOrderedTilePlaceAlowed(objTile);\n\t\t\t\n\t\t\tif(isAlowed == false)\n\t\t\t\treturn(false);\n\t\t}\n\t\t\t\n\t\tvar index = objTile.index();\n\t\t\t\t\n\t\tvar col = g_functions.getColByIndex(g_vars.numCols, index);\n\n\t\tvar objItem = g_gallery.getItem(index);\n\t\t\t\t\n\t\tg_objTileDesign.resizeTile(objTile, g_vars.colWidth);\n\t\t\n\t\tplaceTile(objTile, true, true, col);\n\t\t\n\t\tobjItem.ordered_placed = true;\n\t\t\n\t\t//check by recursion and place next items in column\n\t\tvar numItems = g_gallery.getNumItems();\n\t\tvar nextIndex = g_functions.getNextRowSameColIndex(index, g_vars.numCols);\n\t\tif(nextIndex >= numItems)\n\t\t\treturn(false);\n\t\t\n\t\tvar nextTile = g_thumbs.getThumbByIndex(nextIndex);\n\t\tvar nextItem = g_gallery.getItem(nextIndex);\n\t\t\n\t\tvar isLoaded = g_thumbs.isThumbLoaded(nextTile);\n\t\t\n\t\tif(g_thumbs.isThumbLoaded(nextTile) && !nextItem.ordered_placed)\n\t\t\tplaceOrderedTile(nextTile, true);\n\t}\n\t\n\t\n\t/**\n\t * on single image load\n\t */\n\tfunction onSingleImageLoad(objImage, isError){\n\t\t\n\t\tif(isError == true)\n\t\t\treturn(false);\n\t\t\n\t\tobjImage = jQuery(objImage);\n\t\tvar objTile = jQuery(objImage).parent();\n\t\t\n\t\tg_thumbs.triggerImageLoadedEvent(objTile, objImage);\n\t\t\n\t\tif(g_options.tiles_keep_order == true){\n\n\t\t\tplaceOrderedTile(objTile);\n\t\t\n\t\t}else{\n\t\t\t\n\t\t\tg_objTileDesign.resizeTile(objTile, g_vars.colWidth);\n\t\t\tplaceTile(objTile, true, true);\n\t\t}\n\t\n\t}\n\t\n\t\n\t\n\t/**\n\t * run columns type\n\t */\n\tfunction runColumnsType(){\n\t\t\n\t\tvar objThumbs = g_thumbs.getThumbs();\n\t\t\n\t\tg_temp.isAllLoaded = false;\n\t\t\n\t\tfillTilesVars();\n\t\t\n\t\tvar diffWidth = Math.abs(g_vars.galleryWidth - g_vars.totalWidth);\n\n\t\t//set initial height of the parent by estimation\n\t\tif(g_options.tiles_set_initial_height == true && g_functions.isScrollbarExists() == false && diffWidth < 25){\n\t\t\t\n\t\t\tvar numThumbs = objThumbs.length;\n\t\t\tvar numRows = Math.ceil(objThumbs.length / g_vars.numCols);\n\t\t\tvar estimateHeight = numRows * g_options.tiles_col_width * 0.75;\n\t\t\t\n\t\t\tg_objParent.height(estimateHeight);\n\t\t\tfillTilesVars();\n\t\t}\n\t\t\n\t\t\n\t\tobjThumbs.fadeTo(0,0);\n\t\tvar objImages = jQuery(g_objParent).find(\"img.ug-thumb-image\");\n\n\t\t\n\t\tif(g_temp.isFixedMode == true){\t\t//fixed mode type - just place tiles before images loaded\n\t\t\t\n\t\t\tg_objThis.trigger(t.events.TILES_FIRST_PLACED);\n\t\t\t\n\t\t\tplaceTiles(true);\n\t\t\t\n\t\t\tg_functions.checkImagesLoaded(objImages, function(){\n\t\t\t\tsetTransition();\n\t\t\t\tg_objThis.trigger(t.events.ALL_TILES_LOADED);\n\t\t\t});\n\t\t\t\n\t\t}else{\t//dynamic size type\n\t\t\t\n\t\t\tvar initNumCols = g_vars.numCols;\n\t\t\tvar initWidth = g_vars.galleryWidth;\n\t\t\tvar isFirstPlace = false;\n\t\t\t\n\t\t\t//on place the tile as it loads. After all tiles loaded,check position again.\n\t\t\tg_functions.checkImagesLoaded(objImages, function(){\n\t\t\t\t\t\t\t\t\n\t\t\t\tfillTilesVars();\n\t\t\t\t\n\t\t\t\tif(initNumCols != g_vars.numCols || initWidth != g_vars.galleryWidth){\n\t\t\t\t\tplaceTiles(false);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tsetTransition();\n\t\t\t\t\n\t\t\t\tg_objThis.trigger(t.events.ALL_TILES_LOADED);\n\t\t\t\t\n\t\t\t} ,function(objImage, isError){\n\t\t\t\t\n\t\t\t\tif(isFirstPlace == false)\n\t\t\t\t\tg_objThis.trigger(t.events.TILES_FIRST_PLACED);\n\t\t\t\t\n\t\t\t\tisFirstPlace = true;\n\t\t\t\t\n\t\t\t\tonSingleImageLoad(objImage, isError);\n\t\t\t\n\t\t\t});\n\t\t\t\n\t\t}//end dynamic mode type\n\t\t\n\t\t\n\t}\n\t\n\t\n\tfunction __________JUSTIFIED_TYPE_RELATED_________(){};\n\n\t/**\n\t * ------------ JUSTIFIED TYPE RELATED FUNCTIONS ----------------\n\t */\n\t\n\tfunction getJustifiedData(){\n\t\t\n\t\tvar galleryWidth = getParentWidth();\n\t\t\n\t\tvar objTiles = g_thumbs.getThumbs();\n\t\tvar rowHeightOpt = g_options.tiles_justified_row_height;\n\t\tvar arrWidths = [];\n\t\tvar totalWidth = 0;\n\t\tvar gap = g_options.tiles_justified_space_between;\n\t\tvar numTiles = objTiles.length;\n\t\t\n\t\t//get arr widths and total width\n\t\tjQuery.each(objTiles, function(index, objTile){\n\t\t\tobjTile = jQuery(objTile);\n\t\t\t\n\t\t\tvar objItem = g_thumbs.getItemByThumb(objTile);\n\t\t\t\n\t\t\tvar tileWidth = objItem.thumbWidth;\n\t\t\tvar tileHeight = objItem.thumbHeight;\n\t\t\t\n\t\t\tif (tileHeight !== rowHeightOpt) \n\t\t\t\ttileWidth = Math.floor(objItem.thumbRatioByWidth * rowHeightOpt);\n\t\t\t\n\t\t\tarrWidths[index] = tileWidth;\n\t\t\t\n\t\t\ttotalWidth += tileWidth;\n\t\t});\n\n\t\t\n\t\tvar numRows = Math.ceil(totalWidth / galleryWidth);\n\t\t\n\t\tif(numRows > numTiles)\n\t\t\tnumRows = numTiles;\n\t\t\n\t\tvar finalRowWidth = totalWidth / numRows;\n\t\t\n\t\t//fill rows array, break tiles to rows\n\t\tvar arrRows = [], eachRowWidth = 0;\n\t\tvar rowsWidths = [], rowsTiles = [], row = [];\n\t\tvar progressWidth = 0, numRow = 0;\n\t\t\n\t\tjQuery.each(objTiles, function(index, objTile){\n\t\t\tvar tileWidth = arrWidths[index];\n\t\t\t\t\t\t\n\t\t\tif( (progressWidth + tileWidth / 2) > (numRow+1) * finalRowWidth){\n\t\t\t\t\n\t\t\t\trowsWidths[arrRows.length] = eachRowWidth;\t\t\t\t\n\t\t\t\tarrRows.push(row);\n\t\t\t\trow = [];\n\t\t\t\teachRowWidth = 0;\n\t\t\t\tnumRow++;\n\t\t\t}\n\t\t\t\n\t\t\tprogressWidth += tileWidth;\n\t\t\teachRowWidth += tileWidth;\n\t\t\t\n\t\t\trow.push(objTile);\n\t\t});\n\t\t\n\t\trowsWidths[arrRows.length] = eachRowWidth;\n\t\tarrRows.push(row);\n\t\t\t\t\n\t\t\n\t\t//set heights and position images:\t\n\t\tvar arrRowWidths = [];\n\t\tvar arrRowHeights = [];\n\t\tvar totalHeight = 0;\n\t\t\n\t\tjQuery.each(arrRows, function(index, row){\n\t\t\t\n\t\t\tvar numTiles = row.length;\n\t\t\tvar rowWidth = rowsWidths[index];\n\t\t\t\n\t\t\tvar gapWidth = (row.length-1) * gap;\n\n\t\t\tvar ratio = (galleryWidth - gapWidth) / rowWidth;\n\t\t\tvar rowHeight = Math.round(rowHeightOpt * ratio);\n\t\t\t\n\t\t\t//count total height\n\t\t\ttotalHeight += rowHeight;\n\t\t\tif(index > 0)\n\t\t\t\ttotalHeight += gap;\n\t\t\t\n\t\t\tarrRowHeights.push(rowHeight);\n\t\t\t\n\t\t\t//ratio between 2 heights for fixing image width:\n            var ratioHeights = rowHeight / rowHeightOpt;\n\t\t\t\n            //set tiles sizes:\n            var arrRowTileWidths = [];\n            var actualRowWidth = gapWidth;\n            \n            jQuery.each(row, function(indexInRow, tile){\n            \tvar objTile = jQuery(tile);\n            \tvar tileIndex = objTile.index();\n            \tvar tileWidth = arrWidths[tileIndex];\n            \tvar newWidth = Math.round(tileWidth * ratioHeights);\n            \t\n            \tarrRowTileWidths[indexInRow] = newWidth;\n            \tactualRowWidth += newWidth;            \t\n            });\n        \t\n            //fix images widths by adding or reducing 1 pixel\n            var diff = actualRowWidth - galleryWidth;\n            \n            var newTotal = 0;\n            jQuery.each(arrRowTileWidths, function(indexInRow, width){\n            \t\n            \tif(diff == 0)            \t\t\n            \t\treturn(false);\n            \t\n            \tif(diff < 0){\n            \t\tarrRowTileWidths[indexInRow] = width + 1;\n            \t\tdiff++;\n            \t}else{\n            \t\tarrRowTileWidths[indexInRow] = width - 1;\n            \t\tdiff--;\n            \t}\n            \t\n            \t//if at last item diff stays, add all diff\n            \tif(indexInRow == (arrRowTileWidths.length-1) && diff != 0)\n            \t\tarrRowTileWidths[indexInRow] -= diff;\n            });\n            \n            arrRowWidths[index] = arrRowTileWidths;\n\t\t});\n\t\t\n\t\t\n\t\tvar objData = {\n\t\t\t\tarrRows: arrRows,\n\t\t\t\tarrRowWidths: arrRowWidths,\n\t\t\t\tarrRowHeights: arrRowHeights,\n\t\t\t\tgap: gap,\n\t\t\t\ttotalHeight: totalHeight\n\t\t};\n\t\t\n\t\treturn(objData);\n\t}\n\n\t\n\t/**\n\t * put justified images\n\t */\n\tfunction placeJustified(toShow){\n\t\t\n\t\tif(!toShow)\n\t\t\tvar toShow = false;\n\t\t\n\t\tvar parentWidth = getParentWidth();\n\n\t\tvar objData = getJustifiedData();\n\t\t\n\t\t//if the width changed after height change (because of scrollbar), recalculate\n\t\tg_objParent.height(objData.totalHeight);\n\t\n\t\tvar parentWidthAfter = getParentWidth();\n\t\tif(parentWidthAfter != parentWidth)\n\t\t\tobjData = getJustifiedData();\n\t\t\n\t\tdoBeforeTransition();\n\t\t\n\t\tvar posy = 0;\n\t\tvar totalWidth = 0;\t\t//just count total widht for check / print\n\t\tjQuery.each(objData.arrRows, function(index, row){\n        \t\n\t\t\tvar arrRowTileWidths = objData.arrRowWidths[index];\n\t\t\tvar rowHeight = objData.arrRowHeights[index];\n\t\t\t\n\t\t\t//resize and place tiles\n            var posx = 0;\n            jQuery.each(row, function(indexInRow, tile){\n            \t            \t            \t\n            \tvar objTile = jQuery(tile);\n            \tvar tileHeight = rowHeight;\n            \tvar tileWidth = arrRowTileWidths[indexInRow];\n            \t\n            \tg_objTileDesign.resizeTile(objTile, tileWidth, tileHeight, g_objTileDesign.resizemode.VISIBLE_ELEMENTS);\n            \tg_functions.placeElement(objTile, posx, posy);\n            \t\n            \tposx += tileWidth;\n            \t\n            \tif(posx > totalWidth)\n            \t\ttotalWidth = posx;\n            \t\n            \tposx += objData.gap;\n            \t\n            \tif(toShow == true)\n            \t\tjQuery(tile).show();\n            \n            });\n            \n            posy += (rowHeight + objData.gap);\n            \n\t\t});\n\t\t\n\t\tdoAfterTransition();\n\t\t\n\t}\n\t\n\t\n\t\n\t/**\n\t * run justified type gallery\n\t */\n\tfunction runJustifiedType(){\n\t\t\n\t\tvar objImages = jQuery(g_objWrapper).find(\"img.ug-thumb-image\");\n\t\tvar objTiles = g_thumbs.getThumbs();\n\n\t\tg_temp.isAllLoaded = false;\n\t\t\n\t\tobjTiles.fadeTo(0,0);\t\t\t\t\n\t\t\n\t\tg_functions.checkImagesLoaded(objImages, function(){\n\t\t\t\n\t\t\tsetTimeout(function(){\n\t\t\t\tplaceJustified(true);\n\t\t\t\tobjTiles.fadeTo(0,1);\n\t\t\t\tg_objThis.trigger(t.events.TILES_FIRST_PLACED);\n\t\t\t\tsetTransition();\n\t\t\t\t\n\t\t\t\tg_objThis.trigger(t.events.ALL_TILES_LOADED);\n\t\t\t\t\n\t\t\t});\n\t\t\t\t\t\t\n\t\t}, function(objImage, isError){\n\n\t\t\tobjImage = jQuery(objImage);\n\t\t\tvar objTile = jQuery(objImage).parent();\n\t\t\tg_thumbs.triggerImageLoadedEvent(objTile, objImage);\n\t\t\n\t\t});\n\t\t\t\t\n\t}\n\t\n\n\t\n\t\t\n    function __________NESTED_TYPE_RELATED_________() {    };\n    \n    \n    /**\n     * ------------ NESTED TYPE RELATED FUNCTIONS ----------------\n     */\n    function runNestedType() {\n\n        var objImages = jQuery(g_objWrapper).find(\"img.ug-thumb-image\");\n        var objTiles = g_thumbs.getThumbs();\n\n        g_temp.isAllLoaded = false;\n        \n        objTiles.fadeTo(0, 0);\n\n        g_functions.checkImagesLoaded(objImages, function () {\n        \t\n        \tif(g_gallery.isMobileMode() == true){\n        \t\tplaceTiles(true);\n        \t}\n        \telse\n        \t\tplaceNestedImages(true);\n            \n            g_objThis.trigger(t.events.TILES_FIRST_PLACED);\n            setTransition();\n\t\t\t\n            g_objThis.trigger(t.events.ALL_TILES_LOADED);\n\n        }, function (objImage, isError) {\n\n            objImage = jQuery(objImage);\n            var objTile = jQuery(objImage).parent();\n            g_thumbs.triggerImageLoadedEvent(objTile, objImage);\n\n        });\n\n    }\n\n    \n    /**\n     * fill nested vars\n     */\n    function fillNestedVars(){\n\n    \tvar galleryWidth = getParentWidth();\n    \tg_nestedWork.galleryWidth = galleryWidth;\n        \n        g_arrNestedGridRow = {};\n    \tg_nestedWork.colWidth = g_options.tiles_nested_col_width;\n    \tg_nestedWork.optimalTileWidth = g_options.tiles_nested_optimal_tile_width;\n    \t\n    \tg_nestedWork.currentGap = g_options.tiles_space_between_cols;\n\n    \tif(g_gallery.isMobileMode() == true)\n            g_nestedWork.currentGap = g_options.tiles_space_between_cols_mobile;\n    \t\n        if(g_nestedWork.colWidth == null){\n\t\t\tg_nestedWork.colWidth = Math.floor(g_nestedWork.optimalTileWidth/g_nestedWork.nestedOptimalCols);\n\t\t} else if (g_nestedWork.optimalTileWidth > g_nestedWork.colWidth) {\n            g_nestedWork.nestedOptimalCols = Math.ceil(g_nestedWork.optimalTileWidth / g_nestedWork.colWidth);\n        } else {\n            g_nestedWork.nestedOptimalCols = 1;\n        }\n    \t\n    \tg_nestedWork.maxColumns = g_functions.getNumItemsInSpace(galleryWidth, g_nestedWork.colWidth, g_nestedWork.currentGap);\n    \t\n        //fix col width - justify tiles\n        g_nestedWork.colWidth = g_functions.getItemSizeInSpace(galleryWidth, g_nestedWork.maxColumns, g_nestedWork.currentGap);\n        \n        g_nestedWork.gridY = 0;\n        g_arrNestedItems = []\n        \n        //trace(g_nestedWork);\n        \n    \tvar objTiles = g_thumbs.getThumbs();\n\t\tobjTiles.each(function(){\n\t\t\tvar objTile = jQuery(this);\n\t\t    var sizes = setNestedSize(objTile);\n\t\t    g_arrNestedItems.push(sizes);\n\t\t });\n        \n        if (g_nestedWork.optimalTileWidth > g_nestedWork.colWidth) {\n            g_nestedWork.nestedOptimalCols = Math.ceil(g_nestedWork.optimalTileWidth / g_nestedWork.colWidth);\n        } else {\n            g_nestedWork.nestedOptimalCols = 1;\n        }\n        \n        g_nestedWork.totalWidth = g_nestedWork.maxColumns*(g_nestedWork.colWidth+g_nestedWork.currentGap)-g_nestedWork.currentGap;\n\n        switch(g_options.tiles_align){\n\t\t\tcase \"center\":\n\t\t\tdefault:\n\t\t\t\t//add x to center point\n\t\t\t\tg_nestedWork.addX = Math.round( (g_nestedWork.galleryWidth - g_nestedWork.totalWidth) / 2 );\n\t\t\tbreak;\n\t\t\tcase \"left\":\n\t\t\t\tg_nestedWork.addX = 0;\n\t\t\tbreak;\n\t\t\tcase \"right\":\n\t\t\t\tg_nestedWork.addX = g_nestedWork.galleryWidth - g_nestedWork.totalWidth;\n\t\t\tbreak;\n\t\t}\n        \n        \n        g_nestedWork.maxGridY = 0;\n    }\n    \n    \n    /**\n     * place Nested type images\n     */\n    function placeNestedImages(toShow){\n    \t\n    \tvar parentWidth = getParentWidth();\n    \t\n    \tfillNestedVars();\n        placeNestedImagesCycle();\n    \t\n        var totalHeight = g_nestedWork.maxGridY * (g_nestedWork.colWidth + g_nestedWork.currentGap) - g_nestedWork.currentGap;\n\n    \t//if the width changed after height change (because of scrollbar), recalculate\n\t\tg_objParent.height(totalHeight);\n\t\t\n\t\tvar parentWidthAfter = getParentWidth();\n\t\t\n\t\tif(parentWidthAfter != parentWidth){\n    \t\tfillNestedVars();\n        \tplaceNestedImagesCycle();\n        }\n        \n        if(g_options.tiles_nested_debug == false)\n        \tdrawNestedImages(toShow);\n\n    }\n\n    \n    /**\n     * set Nested size\n     */\n    function setNestedSize(objTile){\n\n        var dimWidth, dimHeight;\n        var output = {};\n        \n        var colWidth = g_nestedWork.colWidth;\n        var gapWidth = g_nestedWork.currentGap;\n        \n        var objImageSize = g_objTileDesign.getTileImageSize(objTile);\n        var index = objTile.index();\n        \n        var maxDim = Math.ceil(getPresettedRandomByWidth(index)*(g_nestedWork.nestedOptimalCols*1/3) + g_nestedWork.nestedOptimalCols * 2/3);\n        \n        var imgWidth = objImageSize.width;\n        var imgHeight = objImageSize.height;\n        \n        var ratio = imgWidth/imgHeight;\n        \n        if(imgWidth>imgHeight){\n            dimWidth = maxDim;\n            dimHeight = Math.round(dimWidth/ratio);\n            if(dimHeight == 0){\n                dimHeight = 1;\n            }\n        } else {\n            dimHeight = maxDim;\n            dimWidth = Math.round(dimHeight*ratio);\n            if(dimWidth == 0){\n                dimWidth = 1;\n            }\n        }\n\n        output.dimWidth = dimWidth;\n        output.dimHeight = dimHeight;\n        output.width = dimWidth * colWidth + gapWidth*(dimWidth-1);\n        output.height = dimHeight * colWidth + gapWidth*(dimHeight-1);\n        output.imgWidth =  imgWidth;\n        output.imgHeight = imgHeight;\n        output.left = 0;\n        output.top = 0;\n        return output;\n    }\n\n    \n    /**\n     *  get presetted random [0,1] from int\n     */\n    function getPresettedRandomByWidth(index){\n        return Math.abs(Math.sin(Math.abs(Math.sin(index)*1000)));\n    }\n\n    \n    /**\n     * place nested images debug\n     */\n    function placeNestedImagesDebug(toShow, placeOne){\n        \n    \tif(placeOne == false){\n            for(var i = g_nestedWork.currentItem; i<g_arrNestedItems.length; i++){\n                placeNestedImage(i, true);\n            }\n            g_nestedWork.currentItem = g_arrNestedItems.length-1;\n        } else {\n            placeNestedImage(g_nestedWork.currentItem, true);\n        }\n        \n    \tfor(var i = 0; i<=g_nestedWork.currentItem; i++){\n            drawNestedImage(i, true);\n        }\n\n        g_nestedWork.currentItem++;\n    \t\n    }\n    \n    \n    /**\n     * start cycle of placing imgaes\n     */\n    function placeNestedImagesCycle(placeOne){\n                \n        if(g_options.tiles_nested_debug == true){\n\n        \tif(typeof placeOne === 'undefined')\n                placeOne = true;\n        \t\n        \tplaceNestedImagesDebug(true, placeOne);\n        \t\n        \treturn(false);\n        } \n                \n        for(var i = 0; i < g_arrNestedItems.length; i++)\n                placeNestedImage(i, true);\n    \n    }\n\n\n    /**\n     * place Nested Image\n     */\n    function placeNestedImage(tileID, toShow){\n\n        if(!toShow)\n            var toShow = false;\n                \n        g_nestedWork.maxColHeight = 0;\n\n        var rowsValue = g_functions.getObjectLength(g_arrNestedGridRow);\n\n        for(var row = g_nestedWork.gridY; row<=rowsValue+1; row++){\n            for (var column = 0; column < g_nestedWork.maxColumns; column++) {\n                if (isGridRowExists(g_nestedWork.gridY) == false || isGridCellTaken(g_nestedWork.gridY, column) == false) {\n                    var totalFree = getTotalFreeFromPosition(column);\n                    calculateOptimalStretchAndPosition(tileID, totalFree, column);\n                                        \n                    return;\n                }\n            }\n            g_nestedWork.gridY++;\n        }\n        \n    }\n\n    \n    /**\n     * calculate optimal stretch of tile\n     */\n    function calculateOptimalStretchAndPosition(tileID, totalFree, column){\n\n        var sizes = jQuery.extend(true, {}, g_arrNestedItems[tileID]);\n        var currentWidth = sizes.dimWidth;\n        var placeForNextImage = totalFree - sizes.dimWidth;\n        var optimalWidth = g_nestedWork.nestedOptimalCols;\n        var onlyCurrentImage = (totalFree<=sizes.dimWidth || placeForNextImage<=0.33*optimalWidth || totalFree<=optimalWidth);\n\n        //Width stretching if needed\n        if(onlyCurrentImage){\t// if free space is smaller than image width - place to this space anyway\n            resizeToNewWidth(tileID, totalFree);\n        } else if (placeForNextImage<=optimalWidth){ // if there are place for 2 images\n            if(optimalWidth>=4){\n                if(isGridImageAligned(Math.floor(totalFree/2), column) == true){\n                    resizeToNewWidth(tileID, Math.floor(totalFree/2)+1);\n                } else {\n                    resizeToNewWidth(tileID, Math.floor(totalFree/2));\n                }\n            } else {\n                resizeToNewWidth(objImage, totalFree);\n            }\n        } else {\n            if(isGridImageAligned(currentWidth, column) == true){\n                switch(currentWidth>=optimalWidth){\n                    case true:\n                        resizeToNewWidth(tileID, currentWidth-1);\n                        break\n                    case false:\n                        resizeToNewWidth(tileID, currentWidth+1);\n                        break\n\n                }\n            }\n        }\n\n        //Height stretching if needed\n        sizes = jQuery.extend(true, {}, g_arrNestedItems[tileID]);\n        var columnInfo = getGridColumnHeight(tileID, sizes.dimWidth, column); \t// [columnHeight, imagesIDs]\n\n        if(g_nestedWork.columnsValueToEnableHeightResize <= columnInfo[0] && g_nestedWork.maxColumns>=2*g_nestedWork.nestedOptimalCols){\n\n            var sideHelper = getGridImageVerticalDifference(column, sizes);\n            var columnSizes = resizeToNewHeight(tileID, sideHelper.newHeight, true);\n            g_arrNestedItems[tileID].dimHeight = columnSizes.dimHeight;\n            var columnResizes = redistributeColumnItems(columnInfo, columnSizes.dimWidth, column);\n            var columnCrosshairs = getColumnCrosshairsCount(columnResizes);\n            var disableColumnResizes = false;\n\n            if(columnCrosshairs >= 2){\n                disableColumnResizes = true;\n            }\n\n            if(sideHelper.newHeight>=sizes.dimHeight){\n                sizes = resizeToNewHeight(tileID, sideHelper.newHeight, true);\n            }\n            var sideResizes = getSideResizeInfo(sideHelper.idToResize, sideHelper.newHeight, sizes.dimHeight);\n            sizes.top = g_nestedWork.gridY;\n            sizes.left = column;\n            sideResizes.push({\"tileID\": tileID, \"sizes\": sizes});\n\n            var sideResizesVal = calcResizeRatio(sideResizes);\n            var columnResizesVal = calcResizeRatio(columnResizes);\n\n            if(sideResizesVal<columnResizesVal || disableColumnResizes == true) {\n                applyResizes(sideResizes);\n                return;\n            } else {\n                applyResizes(columnResizes);\n                return;\n            }\n\n\n        }\n        sizes.left = column;\n        sizes.top = g_nestedWork.gridY;\n        g_arrNestedItems[tileID] = sizes;\n        putImageToGridRow(tileID, sizes, column, g_nestedWork.gridY);\n        \n        g_nestedWork.maxGridY = sizes.top + sizes.dimHeight;\n        \n    }\n\n    /**\n     * check columns crosshairs\n     */\n    function getColumnCrosshairsCount(tilesAndSizes){\n\n        var crosshairsCountR = 0;\n        var crosshairsCountL = 0;\n\n        for(var i = 0; i<tilesAndSizes.length-1; i++){\n\n            var sizes = tilesAndSizes[i].sizes;\n            var topItem = -1;\n            var bottomItem = -1;\n            if(isGridRowExists(sizes.top+sizes.dimHeight) && g_nestedWork.maxColumns>sizes.left+sizes.dimWidth){\n                topItem = g_arrNestedGridRow[sizes.top+sizes.dimHeight-1][sizes.left+sizes.dimWidth];\n                bottomItem = g_arrNestedGridRow[sizes.top+sizes.dimHeight][sizes.left+sizes.dimWidth];\n            }\n            if(topItem != bottomItem){\n                crosshairsCountR++;\n            }\n        }\n\n        for(var i = 0; i<tilesAndSizes.length-1; i++){\n\n            var sizes = tilesAndSizes[i].sizes;\n            var topItem = -1;\n            var bottomItem = -1;\n            if(isGridRowExists(sizes.top+sizes.dimHeight) && sizes.left-1>=0){\n                topItem = g_arrNestedGridRow[sizes.top+sizes.dimHeight-1][sizes.left-1];\n                bottomItem = g_arrNestedGridRow[sizes.top+sizes.dimHeight][sizes.left-1];\n            }\n            if(topItem != bottomItem){\n                crosshairsCountL++;\n            }\n        }\n        return Math.max(crosshairsCountL, crosshairsCountR);\n    }\n\n    /**\n     * get size resize info\n     */\n    function getSideResizeInfo(idToResize, newHeight, dimHeight){\n\n        var currentTile = g_arrNestedItems[idToResize];\n        var\ttileHeight = currentTile.dimHeight;\n        var tileWidth = currentTile.dimWidth;\n        var tileLeft = currentTile.left;\n        var tileTop = currentTile.top;\n        var tileDimTop = parseInt(tileTop / (g_nestedWork.colWidth + g_nestedWork.currentGap));\n        var tileDimLeft = parseInt(tileLeft / (g_nestedWork.colWidth + g_nestedWork.currentGap));\n        var newSideHeight = tileHeight - newHeight + dimHeight;\n\n        var sideSizes = resizeToNewHeight(idToResize, newSideHeight, true);\n        var output = [];\n        output.push({\"tileID\": idToResize, \"sizes\": sideSizes});\n        return output;\n    }\n\n    /**\n     * apply resizes to fix column\n     */\n    function applyResizes(resizeTilesAndSizes){\n\n        for(var i = 0; i<resizeTilesAndSizes.length; i++){\n            var sizes = resizeTilesAndSizes[i].sizes;\n            var tileID = resizeTilesAndSizes[i].tileID;\n            g_arrNestedItems[tileID]=jQuery.extend(true, {}, sizes);\n            putImageToGridRow(tileID, sizes, sizes.left, sizes.top);\n        }\n\n    }\n\n    /**\n     * redistribute heights in column\n     * returns current item sizes\n     */\n    function redistributeColumnItems(columnInfo, columnWidth){\n\n        var originalHeight = 0;\n        var columnHeight = 0;\n        var objTiles = [];\n        var cordX = 0, cordY = 0;\n\n        for(var i = 0; i<columnInfo[1].length; i++){\n            var tileID = columnInfo[1][i];\n            var currentTile = g_arrNestedItems[columnInfo[1][i]];\n            columnHeight += currentTile.dimHeight;\n            if(i==0){\n                var sizes = resizeToNewWidth(tileID, columnWidth, true);\n                originalHeight += sizes.dimHeight;\n                objTiles.push([columnInfo[1][i], sizes.dimHeight]);\n                continue;\n            }\n            originalHeight += currentTile.dimHeight;\n            objTiles.push([tileID, currentTile.dimHeight]);\n        }\n\n        cordX = currentTile.left;\n        cordY = currentTile.top;\n\n        var tempHeight = columnHeight;\n        var output = [];\n\n        for(var i = objTiles.length-1; i>=0; i--){\n            var tileID = objTiles[i][0];\n            var newHeight;\n            if(i != 0) {\n                newHeight = Math.max(Math.round(columnHeight*1/3),Math.floor(objTiles[i][1] * (columnHeight / originalHeight)));\n                tempHeight = tempHeight - newHeight;\n                sizes = resizeToNewHeight(tileID, newHeight, true);\n                sizes.left = cordX;\n                sizes.top = cordY;\n                output.push({\"tileID\": tileID, \"sizes\": sizes});\n                cordY += sizes.dimHeight;\n            } else {\n                newHeight = tempHeight;\n                sizes = resizeToNewHeight(tileID, newHeight, true);\n                sizes.left = cordX;\n                sizes.top = cordY;\n                output.push({\"tileID\": tileID, \"sizes\": sizes});\n            }\n        }\n        return output;\n    }\n\n    /**\n     * Calculate num of objects in current column and return they are ID's\n     */\n    function getGridColumnHeight(tileID, dimWidth, column){\n        var tempY = g_nestedWork.gridY-1;\n        var curImage = 0;\n        var prevImage = 0;\n        var columnHeight = 1;\n        var imagesIDs = [];\n        var toReturn = [];\n        imagesIDs.push(tileID);\n        if(tempY>=0){\n            prevImage = 0;\n            while(tempY>=0){\n                curImage = g_arrNestedGridRow[tempY][column];\n                if( (typeof g_arrNestedGridRow[tempY][column-1] === 'undefined' || g_arrNestedGridRow[tempY][column-1] != g_arrNestedGridRow[tempY][column])\n                    &&(typeof g_arrNestedGridRow[tempY][column+dimWidth] === 'undefined' || g_arrNestedGridRow[tempY][column+dimWidth-1] != g_arrNestedGridRow[tempY][column+dimWidth])\n                    &&(g_arrNestedGridRow[tempY][column]==g_arrNestedGridRow[tempY][column+dimWidth-1])){\n                    if(prevImage != curImage){\n                        columnHeight++;\n                        imagesIDs.push(curImage);\n                    }\n                } else {\n                    toReturn.push(columnHeight);\n                    toReturn.push(imagesIDs);\n                    return toReturn;\n                }\n                tempY--;\n                prevImage = curImage;\n            }\n            toReturn.push(columnHeight);\n            toReturn.push(imagesIDs);\n            return toReturn;\n        }\n        return [0, []];\n    }\n\n    /**\n     * get new height based on left and right difference\n     */\n    function getGridImageVerticalDifference(column, sizes){\n        var newHeightR = 0;\n        var newHeightL = 0;\n        var dimWidth = sizes.dimWidth;\n        var dimHeight = sizes.dimHeight;\n        var leftID = 0;\n        var rightID = 0;\n        var array = jQuery.map(g_arrNestedGridRow, function(value, index) {\n            return [value];\n        });\n\n        if(typeof array[g_nestedWork.gridY] === 'undefined' || typeof array[g_nestedWork.gridY][column-1]=== 'undefined'){\n            newHeightL = 0;\n        } else {\n            var tempY=0;\n            while(true){\n                if(typeof g_arrNestedGridRow[g_nestedWork.gridY+tempY] !== 'undefined' && g_arrNestedGridRow[g_nestedWork.gridY+tempY][column-1] != -1 ){\n                    leftID = g_arrNestedGridRow[g_nestedWork.gridY+tempY][column-2];\n                    tempY++;\n                    newHeightL++;\n                } else {\n                    break;\n                }\n            }\n        }\n\n        if(typeof array[g_nestedWork.gridY] === 'undefined' || typeof array[g_nestedWork.gridY][column+dimWidth]=== 'undefined'){\n            newHeightR = 0;\n        } else {\n            tempY=0;\n            while(true){\n                if(typeof g_arrNestedGridRow[g_nestedWork.gridY+tempY] !== 'undefined' && g_arrNestedGridRow[g_nestedWork.gridY+tempY][column+dimWidth] != -1 ){\n                    rightID = g_arrNestedGridRow[g_nestedWork.gridY+tempY][column+dimWidth+1];\n                    tempY++;\n                    newHeightR++;\n                } else {\n                    break;\n                }\n            }\n        }\n\n        var newHeight = 0;\n        var idToResize = 0;\n        if(Math.abs(dimHeight - newHeightL) < Math.abs(dimHeight - newHeightR) && newHeightL != 0) {\n            newHeight = newHeightL;\n            idToResize = leftID;\n        } else if (newHeightR !=0) {\n            newHeight = newHeightR;\n            idToResize = rightID;\n        } else {\n            newHeight = dimHeight; //malo li\n        }\n\n        var output = {\"newHeight\": newHeight, \"idToResize\": idToResize};\n\n        return output;\n    }\n\n    /**\n     * resize to new Dim width\n     */\n    function resizeToNewWidth(tileID, newDimWidth, toReturn) {\n        if(!toReturn){\n            toReturn = false;\n        }\n        \n        var colWidth = g_nestedWork.colWidth;\n        var gapWidth = g_nestedWork.currentGap;\n        var currentTile = g_arrNestedItems[tileID];\n        var imgWidth = currentTile.imgWidth;\n        var imgHeight = currentTile.imgHeight;\n        var ratio = imgWidth / imgHeight;\n        dimWidth = newDimWidth;\n        dimHeight = Math.round(dimWidth / ratio);\n        if(toReturn == true){\n            var sizes = jQuery.extend(true, {}, currentTile);\n            sizes.dimWidth = dimWidth;\n            sizes.dimHeight = dimHeight;\n            sizes.width = dimWidth * colWidth + gapWidth * (dimWidth - 1);\n            sizes.height = dimHeight * colWidth + gapWidth * (dimHeight - 1);\n            return sizes;\n        }\n        currentTile.dimWidth = dimWidth;\n        currentTile.dimHeight = dimHeight;\n        currentTile.width = dimWidth * colWidth + gapWidth * (dimWidth - 1);\n        currentTile.height = dimHeight * colWidth + gapWidth * (dimHeight - 1);\n    }\n\n    /**\n     * resize to new height without width changing\n     */\n    function resizeToNewHeight(tileID, newDimHeight, toReturn) {\n\n        if(!toReturn){\n            toReturn = false;\n        }\n\n        var currentTile = g_arrNestedItems[tileID];\n        var dimWidth = currentTile.dimWidth;\n        var colWidth = g_nestedWork.colWidth;\n        var gapWidth = g_nestedWork.currentGap;\n\n        if(toReturn == true){\n            var sizes = jQuery.extend(true, {}, currentTile);\n\n            sizes.dimHeight = newDimHeight;\n            sizes.width = dimWidth * colWidth + gapWidth * (dimWidth - 1);\n            sizes.height = newDimHeight * colWidth + gapWidth * (newDimHeight - 1);\n            \n            return sizes;\n        }\n\n        currentTile.dimHeight = newDimHeight;\n        currentTile.width = dimWidth * colWidth + gapWidth * (dimWidth - 1);\n        currentTile.height = newDimHeight * colWidth + gapWidth * (newDimHeight - 1);\n    }\n\n    /**\n     * calc resize koef\n     */\n    function calcResizeRatio(objTilesAndSizes){\n        var tempResizes = 0;\n        var tempNum = 0;\n\n        for(var i = 0; i<objTilesAndSizes.length; i++){\n            var sizes = g_arrNestedItems[objTilesAndSizes[i].tileID];\n            if((sizes.dimHeight != 0) && (sizes.height != 0)){\n                resizeVal = (sizes.dimWidth/sizes.dimHeight)/(sizes.imgWidth/sizes.imgHeight);\n            } else {\n                return;\n            }\n            if(resizeVal < 1){\n                resizeVal = 1/resizeVal;\n            }\n            tempResizes += resizeVal;\n            tempNum++;\n        }\n        return tempResizes/tempNum;\n    }\n\n    /**\n     * check for column break\n     */\n    function isGridImageAligned(dimWidth, column){\n        var y = g_nestedWork.gridY-1;\n        if(y<=0 || isGridRowExists(y) == false){\n            return false;\n        }\n        if(g_arrNestedGridRow[y][column+dimWidth-1]!=g_arrNestedGridRow[y][column+dimWidth]) {\n            return true;\n        }\n\n        return false;\n    }\n\n    /**\n     * get free line length in GridRow\n     */\n    function getTotalFreeFromPosition(column){\n        var x = column;\n        var totalFree = 0;\n        if(isGridRowExists(g_nestedWork.gridY) == true){\n            while(isGridCellTaken(g_nestedWork.gridY, x) == false){\n                totalFree ++;\n                x++;\n            }\n        } else {\n            totalFree = g_nestedWork.maxColumns;\n        }\n        return totalFree;\n    }\n\n    /**\n     * is nestedGridRow row exists\n     */\n    function isGridRowExists(y){\n        if(typeof g_arrNestedGridRow[y] === 'undefined'){\n            return false;\n        }\n        return true;\n    }\n\n    \n    /**\n     * put image to grid row\n     */\n    function putImageToGridRow(id, sizes, gridX, gridY){\n        \n    \tfor (var y = 0; y < sizes.dimHeight; y++) {\n            for (var x = 0; x < sizes.dimWidth; x++) {\n                if (isGridRowExists(gridY+y) == 0) {\n                    addGridRow(gridY+y);\n                }\n                \n                setGridCellValue(gridY+y, gridX+x, id);\n            }\n        }\n    }\n\n    /**\n     * add grid with Y index\n     */\n    function addGridRow(y){\n        g_arrNestedGridRow[y] = new Object;\n        for (var t = 0; t < g_nestedWork.maxColumns; t++) {\n            g_arrNestedGridRow[y][t] = -1;\n        }\n    }\n\n    /**\n     * isGridRowCellTaken\n     */\n    function isGridCellTaken(y,x){\n        return (g_arrNestedGridRow[y][x] != -1);\n    }\n\n    /**\n     * set nestedGridRow cell value\n     */\n    function setGridCellValue(y,x,value){\n        g_arrNestedGridRow[y][x]=value;\n    }\n\n\n    /**\n     * draw nested images\n     */\n    function drawNestedImages(toShow){\n    \t\n        if(!toShow)\n            var toShow = false;\n        \n        doBeforeTransition();\n        \n        for(var i = 0; i<g_arrNestedItems.length; i++){\n            drawNestedImage(i, toShow);\n        }\n\n        g_objParent.height(g_nestedWork.maxColHeight);\n        \n        doAfterTransition();\n    }\n\n    \n    /**\n     * draw nested image\n     */\n    function drawNestedImage(i, toShow){\n    \t\n        var objTile = g_thumbs.getThumbByIndex(i);\n\n        var sizes = g_arrNestedItems[i];\n        var newY = sizes.top * (g_nestedWork.colWidth + g_nestedWork.currentGap);\n        var newX = g_nestedWork.addX + sizes.left * (g_nestedWork.colWidth + g_nestedWork.currentGap);\n        \n        g_objTileDesign.resizeTile(objTile, sizes.width, sizes.height, g_objTileDesign.resizemode.VISIBLE_ELEMENTS);\n        \n        g_functions.placeElement(objTile, newX, newY);\n                \n        if(newY + sizes.height > g_nestedWork.maxColHeight){\n            g_nestedWork.maxColHeight = newY + sizes.height;\n        };\n        \n        if(toShow == true){\n            objTile.fadeTo(0, 1);\n        }\n        \n    }\n\t\n\t\n\tfunction __________COMMON_AND_EVENTS_______(){};\n\t\n\t\n\t/**\n\t * on resize event\n\t */\n\tfunction onResize(){\n\t\t\n\t\tif(g_temp.isFirstTimeRun == true)\n\t\t\treturn(true);\n\t\t\n\t\tif(g_temp.isAllLoaded == false)\n\t\t\treturn(false);\n\t\t\n\t\tswitch(g_options.tiles_type){\n\t\t\tcase \"columns\":\n\t\t\t\tplaceTiles(false);\n\t\t\tbreak;\n\t\t\tcase \"justified\":\n\t\t\t\tplaceJustified(false);\n\t\t\tbreak;\n            case \"nested\":\n            \t\n            \tvar isMobileMode = g_gallery.isMobileMode();\n            \tif(isMobileMode == true){\n            \t\tplaceTiles(false);\n            \t}\n            \telse\n            \t\tplaceNestedImages(false);\n            \n            break;\n\t\t}\n\t\t\n\t}\n\n\t\n\t/**\n\t * init panel events\n\t */\n\tfunction initEvents(){\n\t\t\n\t\t//only on first placed start size change event\n\t\tg_objThis.on(t.events.ALL_TILES_LOADED, function(){\n\t\t\t\t\t\t\n\t\t\tif(g_temp.isAllLoaded == true)\n\t\t\t\treturn(true);\n\t\t\t\n\t\t\tg_temp.isAllLoaded = true;\n\t\t\t\n\t\t});\n\t\t\n\t\tg_objGallery.on(g_gallery.events.SIZE_CHANGE, onResize);\n\t\t\t\t\n\t\tg_objTileDesign.initEvents();\n\t\t\t\t\n\t}\n\n\t\n\t/**\n\t * run the gallery after init and set html\n\t */\n\tfunction run(){\n\t\t\t\t\n\t\t//show tiles\n\t\tg_objWrapper.children(\".ug-tile\").show();\n\n\t\tif(g_temp.isFirstTimeRun == true){\n\t\t\tinitEvents();\n\t\t}\n\t\t\n\t\tg_objTileDesign.run();\n\t\t\t\t\n\t\tswitch(g_options.tiles_type){\n\t\t\tdefault:\n\t\t\tcase \"columns\":\n\t\t\t\trunColumnsType();\n\t\t\tbreak;\n\t\t\tcase \"justified\":\n\t\t\t\trunJustifiedType();\n\t\t\tbreak;\n\t\t\tcase \"nested\":\n\t\t\t\trunNestedType();\n\t\t\tbreak;\n\t\t}\n\t\t\n\t\t\n\t\tg_temp.isFirstTimeRun = false;\n\t}\n\t\n\t\n\t/**\n\t * destroy the events\n\t */\n\tthis.destroy = function(){\n\t\t\n\t\tg_objGallery.off(g_gallery.events.SIZE_CHANGE);\n\t\tg_objTileDesign.destroy();\n\t}\n\t\n\t/**\n\t * set the custom size mode.\n\t * set it before the init\n\t */\n\tthis.setFixedSizeMode = function(){\n\t\tg_temp.isFixedMode = true;\n\t\tg_objTileDesign.setFixedMode();\n\t}\n\t\n\t\n\t/**\n\t * init function for avia controls\n\t */\n\tthis.init = function(gallery, customOptions){\n\t\t\n\t\tinit(gallery, customOptions);\n\t}\n\n\t\n\t/**\n\t * set html\n\t */\n\tthis.setHtml = function(objParent){\n\t\tsetHtml(objParent);\n\t}\n\t\n\t/**\n\t * get tile design object\n\t */\n\tthis.getObjTileDesign = function(){\n\t\treturn(g_objTileDesign);\n\t}\n\t\n\t/**\n\t * set html and properties\n\t */\t\n\tthis.run = function(){\n\t\trun();\n\t}\n\t\n\t\n}\n\n\n\n/**\n * tiles design class\n */\nfunction UGTileDesign(){\n\t\n\tvar t = this, g_objThis = jQuery(this);\t\n\tvar g_gallery = new UniteGalleryMain(), g_objGallery;\n\tvar g_functions = new UGFunctions(), g_objParentWrapper, g_objWrapper;\n\tvar g_thumbs = new UGThumbsGeneral(), g_items;\n\t\n\tthis.resizemode = {\t\t\t//modes constants for resize tile\n\t\tFULL: \"full\",\n\t\tWRAPPER_ONLY: \"wrapper_only\",\n\t\tVISIBLE_ELEMENTS: \"visible_elements\"\n\t};\n\t\n\tthis.sizeby = {\t\t\t\t//sizeby option constants\n\t\tGLOBAL_RATIO: \"global_ratio\",\n\t\tTILE_RATIO: \"tile_ratio\",\n\t\tIMAGE_RATIO: \"image_ratio\",\n\t\tCUSTOM: \"custom\"\n\t};\n\t\n\tthis.events = {\n\t\t\tTILE_CLICK: \"tile_click\"\n\t};\n\t\n\tvar g_options = {\n\t\t\t\t\t\t\n\t\t\ttile_width: 250,\t\t\t\t\t\t//in case of fixed size: tile width\n\t\t\ttile_height: 200,\t\t\t\t\t\t//in case of fixed size: tile height\n\t\t\ttile_size_by:t.sizeby.IMAGE_RATIO,\t\t//image ratio, tile ratio , global_ratio - decide by what parameter resize the tile\n\t\t\ttile_visible_before_image:false,\t\t//tile visible before image load\n\t\t\t\n\t\t\ttile_enable_background:true,\t\t\t//enable backgruond of the tile\n\t\t\ttile_background_color: \"#F0F0F0\",\t\t//tile background color\n\t\t\t\n\t\t\ttile_enable_border:false,\t\t\t\t//enable border of the tile\n\t\t\ttile_border_width:3,\t\t\t\t\t//tile border width\n\t\t\ttile_border_color:\"#F0F0F0\",\t\t\t//tile border color\n\t\t\ttile_border_radius:0,\t\t\t\t\t//tile border radius (applied to border only, not to outline)\n\t\t\t\n\t\t\ttile_enable_outline: false,\t\t\t\t//enable outline of the tile (works only together with the border)\n\t\t\ttile_outline_color: \"#8B8B8B\",\t\t\t//tile outline color\n\t\t\t\n\t\t\ttile_enable_shadow:false,\t\t\t\t//enable shadow of the tile\n\t\t\ttile_shadow_h:1,\t\t\t\t\t\t//position of horizontal shadow\n\t\t\ttile_shadow_v:1,\t\t\t\t\t\t//position of vertical shadow\n\t\t\ttile_shadow_blur:3,\t\t\t\t\t\t//shadow blur\n\t\t\ttile_shadow_spread:2,\t\t\t\t\t//shadow spread\n\t\t\ttile_shadow_color:\"#8B8B8B\",\t\t\t//shadow color\n\t\t\t\n\t\t\ttile_enable_action:\ttrue,\t\t\t\t//enable tile action on click like lightbox\n\t\t\ttile_as_link: false,\t\t\t\t\t//act the tile as link, no lightbox will appear\n\t\t\ttile_link_newpage: true,\t\t\t\t//open the tile link in new page\n\n\t\t\ttile_enable_overlay: true,\t\t\t\t//enable tile color overlay (on mouseover)\n\t\t\ttile_overlay_opacity: 0.4,\t\t\t\t//tile overlay opacity\n\t\t\ttile_overlay_color: \"#000000\",\t\t\t//tile overlay color\n\t\t\t\n\t\t\ttile_enable_icons: true,\t\t\t\t//enable icons in mouseover mode\n\t\t\ttile_show_link_icon: false,\t\t\t\t//show link icon (if the tile has a link). In case of tile_as_link this option not enabled\n\t\t\ttile_videoplay_icon_always_on: 'never',\t//'always', 'never', 'mobile_only', 'desktop_only' always show video play icon\n\t\t\ttile_space_between_icons: 26,\t\t\t//initial space between icons, (on small tiles it may change)\n\t\t\t\n\t\t\ttile_enable_image_effect:false,\t\t\t//enable tile image effect\n\t\t\ttile_image_effect_type: \"bw\",\t\t\t//bw, blur, sepia - tile effect type\n\t\t\ttile_image_effect_reverse: false,\t\t//reverce the image, set only on mouseover state\n\t\t\t\n\t\t\ttile_enable_textpanel: false,\t\t\t //enable textpanel\n\t\t\ttile_textpanel_source: \"title\",\t\t\t //title,desc,desc_title,title_and_desc. source of the textpanel. desc_title - if description empty, put title\n\t\t\ttile_textpanel_always_on: false,\t\t //textpanel always visible - for inside type\n\t\t\ttile_textpanel_appear_type: \"slide\",\t //slide, fade - appear type of the textpanel on mouseover\n\t\t\ttile_textpanel_position:\"inside_bottom\", //inside_bottom, inside_top, inside_center, top, bottom the position of the textpanel\n\t\t\ttile_textpanel_offset:0\t\t\t\t\t //vertical offset of the textpanel\n\t};\n\t\n\t\n\tvar g_defaults = {\n\t\t\tthumb_color_overlay_effect: true,\n\t\t\tthumb_overlay_reverse: true,\n\t\t\tthumb_image_overlay_effect: false,\n\t\t\ttile_textpanel_enable_description: false,\n\t\t\ttile_textpanel_bg_opacity: 0.6,\n\t\t\ttile_textpanel_padding_top:8,\n\t\t\ttile_textpanel_padding_bottom: 8\n\t};\n\t\n\tvar g_temp = {\n\t\tratioByHeight:0,\n\t\tratioByWidth:0,\n\t\teventSizeChange: \"thumb_size_change\",\n\t\tfuncCustomTileHtml: null,\n\t\tfuncCustomPositionElements: null,\n\t\tfuncParentApproveClick: null,\n\t\tisSaparateIcons: false,\n\t\ttileInnerReduce: 0,\t\t//how much reduce from the tile inner elements from border mostly\n\t\tisTextpanelOutside: false,\t//is the textpanel is out of tile image border\n\t\thasImageContainer:false,\n\t\tisVideoplayIconAlwaysOn:false,\n\t\tisTextPanelHidden:false\n\t};\n\t\n\t\n\t/**\n\t * init the tile object\n\t */\n\tfunction init(gallery, customOptions){\n\t\t\n\t\tg_gallery = gallery;\n\t\t\n\t\tg_objGallery = jQuery(gallery);\t\t\n\t\t\n\t\tvar objects = g_gallery.getObjects();\n\t\tg_objWrapper = objects.g_objWrapper;\n\t\t\n\t\tg_items = g_gallery.getArrItems();\n\t\t\t\t\n\t\tg_options = jQuery.extend(g_options, g_defaults);\n\t\t\n\t\tg_options = jQuery.extend(g_options, customOptions);\n\t\t\t\t\n\t\tmodifyOptions();\n\t\t\t\t\n\t\tg_thumbs.init(gallery, g_options);\t\n\t\t\n\t\tvar objCustomOptions = {allow_onresize:false};\n\t\t\n\t\tvar customThumbsAdd = [\"overlay\"];\n\t\t\n\t\tif(g_temp.funcCustomTileHtml)\n\t\t\tcustomThumbsAdd = [];\n\t\t\n\t\tg_thumbs.setCustomThumbs(setHtmlThumb, customThumbsAdd, objCustomOptions);\n\t\t\n\t\t//get thumb default options too:\n\t\tvar thumbOptions = g_thumbs.getOptions();\n\t\tg_options = jQuery.extend(g_options, thumbOptions);\n\t\t\n\t\t//set ratios of fixed mode\n\t\tg_temp.ratioByWidth = g_options.tile_width / g_options.tile_height;\n\t\tg_temp.ratioByHeight = g_options.tile_height / g_options.tile_width;\n\t\t\n\t\t\n\t\t//set if tile has image container\n\t\tif(g_options.tile_size_by == t.sizeby.GLOBAL_RATIO && g_temp.isTextpanelOutside)\n\t\t\tg_temp.hasImageContainer = true;\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * set thumb and textpanel options according tile options\n\t */\n\tfunction modifyOptions(){\n\n\t\t//set overlay related options\n\t\tif(g_options.tile_enable_overlay == true){\n\t\t\t\n\t\t\tg_options.thumb_overlay_opacity = g_options.tile_overlay_opacity;\n\t\t\tg_options.thumb_overlay_color = g_options.tile_overlay_color;\n\t\t\n\t\t}else if(g_options.tile_enable_icons == false){\t\t//if nothing on overlay - turn it off\n\t\t\tg_options.thumb_color_overlay_effect = false;\t\t\n\t\t}else{\t\t\t\t\t\t\t\t\t\t\t//if icons enabled - make it transparent\n\t\t\tg_options.thumb_overlay_opacity = 0;\n\t\t}\n\t\t\n\t\t//set item as link\n\t\tif(g_options.tile_as_link){\n\t\t\tg_options.thumb_wrapper_as_link = true;\n\t\t\tg_options.thumb_link_newpage = g_options.tile_link_newpage;\n\t\t}\n\t\t\n\t\t//outline cannot appear without border\n\t\tif(g_options.tile_enable_outline == true && g_options.tile_enable_border == false)\n\t\t\tg_options.tile_enable_outline = false;\n\t\t\n\t\t//set inner reduce value - in case of the border\n\t\tg_temp.tileInnerReduce = 0;\n\t\tif(g_options.tile_enable_border){\n\t\t\tg_temp.tileInnerReduce = g_options.tile_border_width * 2;\n\t\t\tg_thumbs.setThumbInnerReduce(g_temp.tileInnerReduce);\n\t\t}\n\n\t\t//check if saparate icons\n\t\tg_temp.isSaparateIcons = !g_functions.isRgbaSupported();\n\t\t\n\t\t//set if the textpanel is enabled and outside\n\t\tif(g_options.tile_enable_textpanel == true){\n\t\t\t\n\t\t\t//optimize for touch device\n\t\t\tswitch(g_options.tile_textpanel_position){\n\t\t\t\tcase \"top\":\n\t\t\t\t\tg_options.tile_textpanel_align = \"top\";\n\t\t\t\tcase \"bottom\":\n\t\t\t\t\tg_temp.isTextpanelOutside = true;\n\t\t\t\t\tg_options.tile_textpanel_always_on = true;\n\t\t\t\t\tg_options.tile_textpanel_offset = 0;\n\t\t\t\tbreak;\n\t\t\t\tcase \"inside_top\":\n\t\t\t\t\tg_options.tile_textpanel_align = \"top\";\n\t\t\t\tbreak;\n\t\t\t\tcase \"middle\":\n\t\t\t\t\tg_options.tile_textpanel_align = \"middle\";\n\t\t\t\t\tg_options.tile_textpanel_appear_type = \"fade\";\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t\t//if text panel oppearing with the overlay, icons should be saparated\n\t\t\tif(g_options.tile_textpanel_always_on == false)\n\t\t\t\tg_temp.isSaparateIcons = true;\n\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\t//if the textpanel offset is not from the border, it's always fade.\n\t\tif(g_options.tile_textpanel_offset != 0){\n\t\t\tg_options.tile_textpanel_appear_type = \"fade\";\n\t\t\tg_options.tile_textpanel_margin = g_options.tile_textpanel_offset;\n\t\t}\n\t\t\n\t\t//enable description if needed\n\t\tif(g_options.tile_textpanel_source == \"title_and_desc\"){\n\t\t\tg_options.tile_textpanel_enable_description = true;\n\t\t\tg_options.tile_textpanel_desc_style_as_title = true;\n\t\t}\n\t\t\n\t}\n\t\n\n\t/**\n\t * set options before render\n\t */\n\tfunction modifyOptionsBeforeRender(){\n\t\t\n\t\tvar isMobile = g_gallery.isMobileMode();\n\t\t\n\t\t//set text panel show / hide\n\t\t\n\t\tg_temp.isTextPanelHidden = false;\n\t\tif(isMobile == true && g_options.tile_textpanel_always_on == false)\n\t\t\tg_temp.isTextPanelHidden = true;\n\t\t\n\t\t\n\t\t//set video icon always on true / false\n\t\t\n\t\tg_temp.isVideoplayIconAlwaysOn = g_options.tile_videoplay_icon_always_on;\n\t\t\n\t\tswitch(g_options.tile_videoplay_icon_always_on){\n\t\t\tcase \"always\":\n\t\t\t\tg_temp.isVideoplayIconAlwaysOn = true;\n\t\t\tbreak;\n\t\t\tcase \"never\":\n\t\t\t\tg_temp.isVideoplayIconAlwaysOn = false;\n\t\t\tbreak;\n\t\t\tcase \"mobile_only\":\n\t\t\t\tg_temp.isVideoplayIconAlwaysOn = (isMobile == true)?true:false;\n\t\t\tbreak;\n\t\t\tcase \"desktop_only\":\n\t\t\t\tg_temp.isVideoplayIconAlwaysOn = (isMobile == false)?true:false;\n\t\t\tbreak;\n\t\t}\n\t\t\n\t\t\n\t}\n\n\t\n\t/**\n\t * set thumb html\n\t */\n\tfunction setHtmlThumb(objThumbWrapper, objItem){\n\t\t\n\t\tobjThumbWrapper.addClass(\"ug-tile\");\n\t\t\n\t\tif(g_temp.funcCustomTileHtml){\n\t\t\tg_temp.funcCustomTileHtml(objThumbWrapper, objItem);\n\t\t\treturn(false);\n\t\t}\n\t\t\n\t\tvar html = \"\";\n\t\t\t\n\t\t//add image container\n\t\tif(g_temp.hasImageContainer == true){\n\t\t\thtml += \"<div class='ug-image-container ug-trans-enabled'>\";\n\t\t}\n\t\t\n\t\t//add thumb image:\n\t\tvar classImage = \"ug-thumb-image\";\n\n\t\tif(g_options.tile_enable_image_effect == false || g_options.tile_image_effect_reverse == true)\n\t\t\tclassImage += \" ug-trans-enabled\";\n\t\t\n\t\tvar imageAlt = g_functions.stripTags(objItem.title);\n\t\timageAlt = g_functions.htmlentitles(imageAlt);\n\t\t\n\t\thtml += \"<img src=\\\"\"+g_functions.escapeDoubleSlash(objItem.urlThumb)+\"\\\" alt='\"+imageAlt+\"' class='\"+classImage+\"'>\";\n\n\t\tif(g_temp.hasImageContainer == true){\n\t\t\thtml += \"</div>\";\n\t\t}\t\n\t\t\n\t\tobjThumbWrapper.append(html);\n\t\t\n\t\t\n\t\tif(g_options.tile_size_by == t.sizeby.GLOBAL_RATIO){\n\t\t\tobjThumbWrapper.fadeTo(0,0);\t\t//turn on in thumbsGeneral\n\t\t}\n\t\t\n\t\t//---- set thumb styles ---- \n\t\t\n\t\t//set border:\n\t\tvar objCss = {};\n\t\t\n\t\tif(g_options.tile_enable_background == true){\n\t\t\tobjCss[\"background-color\"] = g_options.tile_background_color;\n\t\t}\n\t\t\n\t\tif(g_options.tile_enable_border == true){\n\t\t\tobjCss[\"border-width\"] = g_options.tile_border_width+\"px\";\n\t\t\tobjCss[\"border-style\"] = \"solid\";\n\t\t\tobjCss[\"border-color\"] = g_options.tile_border_color;\n\t\t\t\n\t\t\tif(g_options.tile_border_radius)\n\t\t\t\tobjCss[\"border-radius\"] = g_options.tile_border_radius+\"px\";\n\t\t}\n\t\t\n\t\t//set outline:\n\t\tif(g_options.tile_enable_outline == true){\n\t\t\tobjCss[\"outline\"] = \"1px solid \" + g_options.tile_outline_color;\n\t\t}\n\t\t\n\t\t//set shadow\n\t\tif(g_options.tile_enable_shadow == true){\n\t\t\tvar htmlShadow = g_options.tile_shadow_h+\"px \";\n\t\t\thtmlShadow += g_options.tile_shadow_v+\"px \";\n\t\t\thtmlShadow += g_options.tile_shadow_blur+\"px \";\n\t\t\thtmlShadow += g_options.tile_shadow_spread+\"px \";\n\t\t\thtmlShadow += g_options.tile_shadow_color;\n\t\t\t\n\t\t\tobjCss[\"box-shadow\"] = htmlShadow;\n\t\t}\n\t\t\n\t\tobjThumbWrapper.css(objCss);\n\t\t\n\t\t\n\t\t//----- add icons\n\t\t\n\t\tvar htmlAdd = \"\";\n\t\t\n\t\tif(g_options.tile_enable_icons){\n\t\t\t\n\t\t\t//add zoom icon\n\t\t\tif(g_options.tile_as_link == false && g_options.tile_enable_action == true){\n\t\t\t\tvar iconPlayClass = \"ug-button-play ug-icon-zoom\";\n\t\t\t\tif(objItem.type != \"image\")\n\t\t\t\t\ticonPlayClass = \"ug-button-play ug-icon-play\";\n\t\t\t\t\n\t\t\t\thtmlAdd += \"<div class='ug-tile-icon \" + iconPlayClass + \"' style='display:none'></div>\";\n\t\t\t}\n\t\t\t\n\t\t\t//add link icon\n\t\t\tif(objItem.link && g_options.tile_show_link_icon == true || g_options.tile_as_link == true){\n\t\t\t\t\n\t\t\t\tif(g_options.tile_as_link == false){\n\t\t\t\t\tvar linkTarget = \"\";\n\t\t\t\t\tif(g_options.tile_link_newpage == true)\n\t\t\t\t\t\tlinkTarget = \" target='_blank'\";\n\t\t\t\t\t\n\t\t\t\t\thtmlAdd += \"<a href='\"+objItem.link+\"'\"+linkTarget+\" class='ug-tile-icon ug-icon-link'></a>\";\t\t\t\t\t\n\t\t\t\t}else{\n\t\t\t\t\thtmlAdd += \"<div class='ug-tile-icon ug-icon-link' style='display:none'></div>\";\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t\n\t\tvar toSaparateIcon = g_temp.isSaparateIcons;\n\t\tif(toSaparateIcon == false && objItem.type != \"image\" && g_temp.isVideoplayIconAlwaysOn == true)\n\t\t\ttoSaparateIcon = true;\n\t\t\n\t\tif(toSaparateIcon)\t\t//put the icons on the thumb\n\t\t\tvar objOverlay = objThumbWrapper;\n\t\telse\n\t\t\tvar objOverlay = objThumbWrapper.children(\".ug-thumb-overlay\");\n\t\t\n\t\tobjOverlay.append(htmlAdd);\t\t\n\t\t\n\t\tvar objButtonZoom = objOverlay.children(\".\" + iconPlayClass);\n\t\t\n\t\tif(objButtonZoom.length == 0)\n\t\t\tobjButtonZoom = null;\n\t\telse\n\t\t\tobjButtonZoom.hide();\n\t\t\n\t\tvar objButtonLink = objOverlay.children(\".ug-icon-link\");\n\t\t\n\t\tif(objButtonLink.length == 0)\n\t\t\tobjButtonLink = null;\n\t\telse\n\t\t\tobjButtonLink.hide();\n\t\t\n\t\t//if only zoom icon, make the tile clickable for lightbox open\n\t\tif(!objButtonLink && g_options.tile_enable_action == true)\n\t\t\tobjThumbWrapper.addClass(\"ug-tile-clickable\");\n\t\t\n\t\t}  //if icons enabled\n\t\telse{\t\t//if the icons don't enabled, set the tile clickable\n\t\t\t\n\t\t\tif(g_options.tile_enable_action == true)\n\t\t\t\tobjThumbWrapper.addClass(\"ug-tile-clickable\");\n\t\t\n\t\t}\n\t\t\n\t\t//add image overlay\n\t\tif(g_options.tile_enable_image_effect == true){\n\t\t\t\n\t\t\tvar imageEffectClassAdd = \"\";\n\t\t\tif(g_options.tile_image_effect_reverse == false)\n\t\t\t\timageEffectClassAdd = \" ug-trans-enabled\";\n\t\t\t\n\t\t\tvar imageOverlayHtml = \"<div class='ug-tile-image-overlay\"+imageEffectClassAdd+\"' >\";\n\t\t\tvar imageEffectClass = \" ug-\"+g_options.tile_image_effect_type+\"-effect\";\n\t\t\t\n\t\t\timageOverlayHtml += \"<img src=\\\"\"+g_functions.escapeDoubleSlash(objItem.urlThumb)+\"\\\" alt='\"+objItem.title+\"' class='\"+imageEffectClass + imageEffectClassAdd+\"'>\";\n\t\t\timageOverlayHtml += \"</div>\";\n\t\t\t\n\t\t\tobjThumbWrapper.append(imageOverlayHtml);\n\n\t\t\t//hide the image overlay if reversed\n\t\t\tif(g_options.tile_image_effect_reverse == true){\n\t\t\t\tobjThumbWrapper.children(\".ug-tile-image-overlay\").fadeTo(0,0);\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\t//add text panel\n\t\tif(g_options.tile_enable_textpanel == true){\n\t\t\t\n\t\t\tvar objTextPanel = new UGTextPanel();\t\t\t \n\t\t\tobjTextPanel.init(g_gallery, g_options, \"tile\");\n\t\t\t\n\t\t\t//set transition class\n\t\t\tvar textpanelAddClass = \"\";\n\t\t\tif(g_options.tile_textpanel_always_on == true || g_temp.isTextpanelOutside == true)\n\t\t\t\ttextpanelAddClass = \"ug-trans-enabled\";\n\t\t\t\n\t\t\tobjTextPanel.appendHTML(objThumbWrapper, textpanelAddClass);\n\t\t\t\n\t\t\tvar panelTitle = objItem.title;\n\t\t\tvar panelDesc = \"\";\n\t\t\t\n\t\t\tswitch(g_options.tile_textpanel_source){\n\t\t\t\tcase \"desc\":\n\t\t\t\tcase \"description\":\n\t\t\t\t\tpanelTitle = objItem.description;\n\t\t\t\tbreak;\n\t\t\t\tcase \"desc_title\":\n\t\t\t\t\tif(objItem.description != \"\")\n\t\t\t\t\t\tpanelTitle = objItem.description;\n\t\t\t\tbreak;\n\t\t\t\tcase \"title_and_desc\":\n\t\t\t\t\tpanelTitle = objItem.title;\n\t\t\t\t\tpanelDesc = objItem.description;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t\tobjTextPanel.setTextPlain(panelTitle, panelDesc);\n\t\t\t\n\t\t\tif(g_options.tile_textpanel_always_on == false)\n\t\t\t\tobjTextPanel.getElement().fadeTo(0,0);\n\t\t\t\n\t\t\tobjThumbWrapper.data(\"objTextPanel\", objTextPanel);\n\n\t\t\t//if textpanel always on, it has to be under the overlay\n\t\t\tif(g_options.tile_textpanel_always_on == true){\n\t\t\t\tvar textPanelElement = getTextPanelElement(objThumbWrapper);\n\t\t\t\ttextPanelElement.css(\"z-index\",2);\n\t\t\t}\n\t\t\t\n\t\t\t//if text panel is outside, clone textpanel\n\t\t\tif(g_temp.isTextpanelOutside == true){\n\t\t\t\t\n\t\t\t\tvar htmlClone = \"<div class='ug-tile-cloneswrapper'></div>\";\n\t\t\t\tobjThumbWrapper.append(htmlClone);\n\t\t\t\tvar objCloneWrapper = objThumbWrapper.children(\".ug-tile-cloneswrapper\");\n\t\t\t\t\n\t\t\t\tvar objTextPanelClone = new UGTextPanel(); \n\t\t\t\tobjTextPanelClone.init(g_gallery, g_options, \"tile\");\t\t\t\t\n\t\t\t\tobjTextPanelClone.appendHTML(objCloneWrapper);\n\t\t\t\tobjTextPanelClone.setTextPlain(panelTitle, panelDesc);\n\t\t\t\tobjThumbWrapper.data(\"objTextPanelClone\", objTextPanelClone);\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\t//add additional html\n\t\tif(objItem.addHtml !== null)\n\t\t\tobjThumbWrapper.append(objItem.addHtml);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * load tile image, place the image on load\n\t */\n\tthis.loadTileImage = function(objTile){\n\t\t\n\t\tvar objImage = t.getTileImage(objTile);\n\t\t\t\n\t\tg_functions.checkImagesLoaded(objImage, null, function(objImage,isError){\n\t\t\tonPlaceImage(null, objTile, jQuery(objImage));\n\t\t});\n\t\t\n\t}\n\t\n\tfunction _________________GETTERS________________(){};\n\t\n\t\n\t\n\t/**\n\t * get image overlay\n\t */\n\tfunction getTileOverlayImage(objTile){\n\t\tvar objOverlayImage = objTile.children(\".ug-tile-image-overlay\");\n\t\treturn(objOverlayImage);\n\t}\n\t\n\t/**\n\t * get tile color overlay\n\t */\n\tfunction getTileOverlay(objTile){\n\t\tvar objOverlay = objTile.children(\".ug-thumb-overlay\");\n\t\treturn(objOverlay);\t\t\n\t}\n\t\n\t\n\t/**\n\t * get image container\n\t */\n\tfunction getTileImageContainer(objTile){\n\t\tif(g_temp.hasImageContainer == false)\n\t\t\treturn(null);\n\t\t\n\t\tvar objImageContainer = objTile.children(\".ug-image-container\");\n\t\t\n\t\treturn(objImageContainer);\n\t}\n\t\n\t\n\t/**\n\t * get image effect\n\t */\n\tfunction getTileImageEffect(objTile){\t\t\n\t\tvar objImageEffect = objTile.find(\".ug-tile-image-overlay img\");\t\t\t\n\t\treturn(objImageEffect);\n\t}\n\t\n\t\n\t/**\n\t * get text panel\n\t */\n\tfunction getTextPanel(objTile){\n\t\tvar objTextPanel = objTile.data(\"objTextPanel\");\n\t\t\n\t\treturn(objTextPanel);\n\t}\n\t\n\t\n\t/**\n\t * get cloned text panel\n\t */\n\tfunction getTextPanelClone(objTile){\n\t\tvar objTextPanelClone = objTile.data(\"objTextPanelClone\");\n\t\t\n\t\treturn(objTextPanelClone);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * get text panel element from the tile\n\t */\n\tfunction getTextPanelElement(objTile){\n\t\tvar objTextPanel = objTile.children(\".ug-textpanel\");\n\t\t\n\t\treturn(objTextPanel);\n\t}\n\t\n\t\n\t/**\n\t * get text panel element cloned\n\t */\n\tfunction getTextPanelCloneElement(objTile){\n\t\tvar objTextPanel = objTile.find(\".ug-tile-cloneswrapper .ug-textpanel\");\n\t\t\n\t\tif(objTextPanel.length == 0)\n\t\t\tthrow new Error(\"text panel cloned element not found\");\n\t\t\n\t\treturn(objTextPanel);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * get text panel height\n\t */\n\tfunction getTextPanelHeight(objTile){\n\t\t\n\t\tif(g_temp.isTextpanelOutside == true)\n\t\t\tvar objTextPanel = getTextPanelCloneElement(objTile);\n\t\telse\n\t\t\tvar objTextPanel = getTextPanelElement(objTile);\n\t\t\n\t\t\n\t\tif(!objTextPanel)\n\t\t\treturn(0);\n\t\t\n\t\tvar objSize = g_functions.getElementSize(objTextPanel);\n\t\treturn(objSize.height);\n\t}\n\t\n\t\n\t/**\n\t * get button link\n\t */\n\tfunction getButtonLink(objTile){\n\t\tvar objButton = objTile.find(\".ug-icon-link\");\n\t\tif(objButton.length == 0)\n\t\t\treturn(null);\n\t\t\n\t\treturn objButton;\n\t}\n\n\t\n\t/**\n\t * get tile ratio\n\t */\n\tfunction getTileRatio(objTile, fromWhere){\n\t\t\n\t\t//global ratio\n\t\tvar ratio = g_temp.ratioByHeight;\n\t\t\n\t\tswitch(g_options.tile_size_by){\n\t\t\tdefault:\t\t//global ratio\n\t\t\t\tratio = g_temp.ratioByHeight;\n\t\t\tbreak;\n\t\t\tcase t.sizeby.IMAGE_RATIO:\n\n\t\t\t\tif(!objTile)\n\t\t\t\t\tthrow new Error(\"tile should be given for tile ratio\");\n\t\t\t\t\n\t\t\t\tvar item = t.getItemByTile(objTile);\n\t\t\t\t\t\t\t\t\n\t\t\t\tif(typeof item.thumbRatioByHeight != \"undefined\"){\n\t\t\t\t\t\n\t\t\t\t\tif(item.thumbRatioByHeight == 0){\n\t\t\t\t\t\ttrace(item);\n\t\t\t\t\t\tthrow new Error(\"the item ratio not inited yet\");\n\t\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\tratio = item.thumbRatioByHeight;\n\t\t\t\t}\n\t\t\t\n\t\t\tbreak;\n\t\t\tcase t.sizeby.CUSTOM:\n\t\t\t\treturn null;\n\t\t\tbreak;\n\t\t}\n\t\t\t\t\n\t\treturn(ratio);\n\t}\n\t\n\t\n\t/**\n\t * get button zoom\n\t */\n\tfunction getButtonZoom(objTile){\n\t\tvar objButton = objTile.find(\".ug-button-play\");\n\t\t\n\t\tif(objButton.length == 0)\n\t\t\treturn(null);\n\t\t\n\t\treturn objButton;\n\t}\n\t\n\t\n\t/**\n\t * tells if the tile is over style\n\t */\n\tfunction isOverStyle(objTile){\n\t\t\n\t\tif(objTile.hasClass(\"ug-thumb-over\"))\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\t\n\t\n\t/**\n\t * check if the tile is clickable\n\t */\n\tfunction isTileClickable(objTile){\n\t\t\n\t\treturn objTile.hasClass(\"ug-tile-clickable\");\n\t}\n\t\n\t\n\t/**\n\t * return if the items icon always on\n\t */\n\tfunction isItemIconAlwaysOn(objItem){\n\t\t\n\t\tif(g_options.tile_enable_icons == true && g_temp.isVideoplayIconAlwaysOn == true && objItem.type != \"image\")\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\n\t\n\tfunction _________________SETTERS________________(){};\n\t\n\t\n\t/**\n\t * position tile images elements\n\t * width, height - tile width height\n\t */\n\tfunction positionElements_images(objTile, width, height, visibleOnly){\n\t\t\n\t\tvar objImageOverlay = getTileOverlayImage(objTile);\n\t\tvar objThumbImage = t.getTileImage(objTile);\n\t\tvar objImageEffect = getTileImageEffect(objTile);\n\t\t\n\t\t//reduce borders\n\t\twidth -= g_temp.tileInnerReduce;\n\t\theight -= g_temp.tileInnerReduce;\n\t\t\n\t\tvar imagePosy = null;\n\t\t\n\t\t//reduce textpanel height\n\t\tif(g_temp.isTextpanelOutside == true){\n\n\t\t\tvar textHeight = getTextPanelHeight(objTile);\n\t\t\theight -= textHeight;\n\n\t\t\tif(g_options.tile_textpanel_position == \"top\"){\n\t\t\t\timagePosy = textHeight;\n\t\t\t}\n\t\t\t\n\t\t\t/**\n\t\t\t * if has image container\n\t\t\t */\n\t\t\tif(g_temp.hasImageContainer == true){\n\t\t\t\tvar objImageContainer = getTileImageContainer(objTile);\n\t\t\t\tg_functions.setElementSize(objImageContainer, width, height);\n\t\t\t\t\n\t\t\t\tif(imagePosy !== null)\n\t\t\t\t\tg_functions.placeElement(objImageContainer, 0, imagePosy);\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\t//scale image\n\t\tif(g_options.tile_enable_image_effect == false){\n\n\t\t\tg_functions.scaleImageCoverParent(objThumbImage, width, height);\n\t\t\t\n\t\t\tif(g_temp.hasImageContainer == false && imagePosy !== null)\n\t\t\t\tg_functions.placeElement(objThumbImage, 0, imagePosy);\n\n\t\t}else{\t//width the effect\n\t\t\t\n\t\t\t//set what to resize\n\t\t\tvar dontResize = \"nothing\";\n\t\t\tif(visibleOnly === true && g_temp.isTextpanelOutside == false){\n\t\t\t\tif(g_options.tile_image_effect_reverse == true){\n\t\t\t\t\tdontResize = \"effect\";\n\t\t\t\t}else{\n\t\t\t\t\tdontResize = \"image\";\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//resize image effect\n\t\t\tif(dontResize != \"effect\"){\n\t\t\t\tg_functions.setElementSize(objImageOverlay, width, height);\n\t\t\t\t\n\t\t\t\tif(imagePosy !== null)\n\t\t\t\t\tg_functions.placeElement(objImageOverlay, 0, imagePosy);\n\t\t\t\t\n\t\t\t\tg_functions.scaleImageCoverParent(objImageEffect, width, height);\n\t\t\t}\n\t\t\t\n\n\t\t\t//resize image\n\t\t\tif(dontResize != \"image\"){\n\t\t\t\t\n\t\t\t\tif(g_temp.hasImageContainer == true){\n\t\t\t\t\tg_functions.scaleImageCoverParent(objThumbImage, width, height);\n\t\t\t\t}else{\n\t\t\t\t\t\n\t\t\t\t\t//if can't clone, resize\n\t\t\t\t\tif(dontResize == \"effect\"){\n\t\t\t\t\t\tg_functions.scaleImageCoverParent(objThumbImage, width, height);\n\t\t\t\t\t\tif(imagePosy !== null)\n\t\t\t\t\t\t\tg_functions.placeElement(objThumbImage, 0, imagePosy);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tg_functions.cloneElementSizeAndPos(objImageEffect, objThumbImage, false, null, imagePosy);\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\n\t\t\t\n\t\t\t\n\t\t}\n\n\t}\n\t\n\t\n\t/**\n\t * position text panel\n\t * panelType - default or clone\n\t */\n\tfunction positionElements_textpanel(objTile, panelType, tileWidth, tileHeight){\n\t\t\n\t\tvar panelWidth = null;\n\t\tif(tileWidth)\n\t\t\tpanelWidth = tileWidth - g_temp.tileInnerReduce;\n\n\t\tif(tileHeight)\n\t\t\ttileHeight -= g_temp.tileInnerReduce;\n\t\t\n\t\tif(panelType == \"clone\"){\n\t\t\tvar objTextPanelClone = getTextPanelClone(objTile);\n\t\t\tobjTextPanelClone.refresh(true, true, panelWidth);\n\t\t\tvar objItem = t.getItemByTile(objTile);\n\t\t\tobjItem.textPanelCloneSizeSet = true;\n\t\t\t\n\t\t\treturn(false);\n\t\t}\n\t\t\n\t\tvar objTextPanel = getTextPanel(objTile);\n\t\t\n\t\tif(!objTextPanel)\n\t\t\treturn(false);\n\t\t\n\t\tvar panelHeight = null;\n\t\t\t\t\n\t\t//set panel height also\n\t\tif(g_temp.isTextpanelOutside == true)\n\t\t\tpanelHeight = getTextPanelHeight(objTile);\n\t\t\n\t\tobjTextPanel.refresh(false, true, panelWidth, panelHeight);\n\t\t\n\t\tvar isPosition = (g_options.tile_textpanel_always_on == true || g_options.tile_textpanel_appear_type == \"fade\");\n\t\t\n\t\tif(isPosition){\n\t\t\t\n\t\t\tif(g_temp.isTextpanelOutside == true && tileHeight && g_options.tile_textpanel_position == \"bottom\"){\n\t\t\t\n\t\t\t\tvar posy = tileHeight - panelHeight;\n\t\t\t\tobjTextPanel.positionPanel(posy);\n\t\t\t}else\n\t\t\t\tobjTextPanel.positionPanel();\n\t\t}\n\t\t\n\t}\n\t\t\n\t\n\t/**\n\t * position the elements\n\t */\n\tfunction positionElements(objTile){\n\t\t\n\t\tvar objItem = t.getItemByTile(objTile);\n\t\tvar objButtonZoom = getButtonZoom(objTile);\n\t\tvar objButtonLink = getButtonLink(objTile);\n\t\tvar sizeTile = g_functions.getElementSize(objTile);\n\t\t\t\t\n\t\tpositionElements_images(objTile, sizeTile.width, sizeTile.height);\n\t\t\n\t\t//position text panel:\n\t\tif(g_options.tile_enable_textpanel == true)\n\t\t\tpositionElements_textpanel(objTile, \"regular\", sizeTile.width, sizeTile.height);\n\t\t\n\t\t\n\t\t//position overlay:\n\t\tvar overlayWidth = sizeTile.width - g_temp.tileInnerReduce;\n\t\tvar overlayHeight = sizeTile.height - g_temp.tileInnerReduce;\n\t\tvar overlayY = 0;\n\t\tif(g_temp.isTextpanelOutside == true){\n\t\t\tvar textHeight = getTextPanelHeight(objTile);\n\t\t\toverlayHeight -= textHeight;\n\t\t\tif(g_options.tile_textpanel_position == \"top\")\n\t\t\t\toverlayY = textHeight;\n\t\t}\n\t\t\n\t\tvar objOverlay = getTileOverlay(objTile);\n\t\tg_functions.setElementSizeAndPosition(objOverlay, 0, overlayY, overlayWidth, overlayHeight);\n\t\t\n\t\t//set vertical gap for icons\n\t\tif(objButtonZoom || objButtonLink){\n\n\t\t\tvar gapVert = 0;\n\t\t\tif( g_options.tile_enable_textpanel == true && g_temp.isTextPanelHidden == false && g_temp.isTextpanelOutside == false){\n\t\t\t\tvar objTextPanelElement = getTextPanelElement(objTile);\n\t\t\t\tvar texPanelSize = g_functions.getElementSize(objTextPanelElement);\n\t\t\t\tif(texPanelSize.height > 0)\n\t\t\t\t\tgapVert = Math.floor((texPanelSize.height / 2) * -1);\n\t\t\t}\n\n\t\t}\n\t\t\n\t\tif(objButtonZoom && objButtonLink){\n\t\t\tvar sizeZoom = g_functions.getElementSize(objButtonZoom);\n\t\t\tvar sizeLink = g_functions.getElementSize(objButtonLink);\n\t\t\tvar spaceBetween = g_options.tile_space_between_icons;\n\t\t\t\n\t\t\tvar buttonsWidth = sizeZoom.width + spaceBetween + sizeLink.width;\n\t\t\tvar buttonsX = Math.floor((sizeTile.width - buttonsWidth) / 2);\n\t\t\t\n\t\t\t//trace(\"X: \"+buttonsX+\" \"+\"space: \" + spaceBetween);\n\t\t\t\n\t\t\t//if space more then padding, calc even space.\n\t\t\tif(buttonsX < spaceBetween){\n\t\t\t\tspaceBetween = Math.floor((sizeTile.width - sizeZoom.width - sizeLink.width) / 3);\n\t\t\t\tbuttonsWidth = sizeZoom.width + spaceBetween + sizeLink.width;\n\t\t\t\tbuttonsX = Math.floor((sizeTile.width - buttonsWidth) / 2);\n\t\t\t}\n\n\t\t\tg_functions.placeElement(objButtonZoom, buttonsX, \"middle\", 0 ,gapVert);\n\t\t\tg_functions.placeElement(objButtonLink, buttonsX + sizeZoom.width + spaceBetween, \"middle\", 0, gapVert);\n\t\t\t\t\t\t\n\t\t}else{\n\t\t\t\n\t\t\tif(objButtonZoom)\n\t\t\t\tg_functions.placeElement(objButtonZoom, \"center\", \"middle\", 0, gapVert);\n\t\t\t\n\t\t\tif(objButtonLink)\n\t\t\t\tg_functions.placeElement(objButtonLink, \"center\", \"middle\", 0, gapVert);\n\t\t\t\t\n\t\t}\n\t\t\n\t\tif(objButtonZoom)\n\t\t\tobjButtonZoom.show();\n\t\t\n\t\tif(objButtonLink)\n\t\t\tobjButtonLink.show();\n\t}\n\n\t\n\t/**\n\t * set tiles htmls\n\t */\n\tthis.setHtml = function(objParent){\n\t\tg_objParentWrapper = objParent;\n\t\t\n\t\tmodifyOptionsBeforeRender();\n\t\t\n\t\tg_thumbs.setHtmlThumbs(objParent);\n\t}\n\t\n\t\n\t/**\n\t * set the overlay effect\n\t */\n\tfunction setImageOverlayEffect(objTile, isActive){\n\t\t\n\t\tvar objItem = t.getItemByTile(objTile);\n\t\tvar objOverlayImage = getTileOverlayImage(objTile);\n\t\t\n\t\tvar animationDuration = g_options.thumb_transition_duration;\n\t\t\n\t\tif(g_options.tile_image_effect_reverse == false){\n\t\t\t\n\t\t\tvar objThumbImage = t.getTileImage(objTile);\n\t\t\t\n\t\t\tif(isActive){\n\t\t\t\tobjThumbImage.fadeTo(0,1);\t\t\t\n\t\t\t\tobjOverlayImage.stop(true).fadeTo(animationDuration, 0);\n\t\t\t}\n\t\t\telse\n\t\t\t\tobjOverlayImage.stop(true).fadeTo(animationDuration, 1);\n\t\t\t\n\t\t}else{\n\t\t\t\n\t\t\tif(isActive){\n\t\t\t\tobjOverlayImage.stop(true).fadeTo(animationDuration, 1);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tobjOverlayImage.stop(true).fadeTo(animationDuration, 0);\n\t\t\t}\n\t\t}\n\n\t}\n\t\n\t\n\t/**\n\t * set textpanel effect\n\t */\n\tfunction setTextpanelEffect(objTile, isActive){\n\t\t\n\t\tvar animationDuration = g_options.thumb_transition_duration;\n\t\t\n\t\tvar objTextPanel = getTextPanelElement(objTile);\n\t\tif(!objTextPanel)\n\t\t\treturn(true);\n\t\t\t\t\n\t\tif(g_options.tile_textpanel_appear_type == \"slide\"){\n\t\t\t\n\t\t\tvar panelSize = g_functions.getElementSize(objTextPanel);\n\t\t\tif(panelSize.width == 0)\n\t\t\t\treturn(false);\n\t\t\t\n\t\t\tvar startPos = -panelSize.height;\n\t\t\tvar endPos = 0;\n\t\t\tvar startClass = {}, endClass = {};\n\t\t\t\n\t\t\tvar posName = \"bottom\";\n\t\t\tif(g_options.tile_textpanel_position == \"inside_top\")\n\t\t\t\tposName = \"top\";\n\t\t\t\n\t\t\tstartClass[posName] = startPos+\"px\";\n\t\t\tendClass[posName] = endPos+\"px\";\n\t\t\t\t\t\t\n\t\t\tif(isActive == true){\n\t\t\t\t\t\t\t\t\n\t\t\t\tobjTextPanel.fadeTo(0,1);\n\t\t\t\t\n\t\t\t\tif(objTextPanel.is(\":animated\") == false)\n\t\t\t\t\tobjTextPanel.css(startClass);\n\t\t\t\t\n\t\t\t\tendClass[\"opacity\"] = 1;\n\t\t\t\t\t\n\t\t\t\tobjTextPanel.stop(true).animate(endClass, animationDuration);\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\t\n\t\t\t\tobjTextPanel.stop(true).animate(startClass, animationDuration);\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t}else{\t\t//fade effect\n\t\t\t\n\t\t\tif(isActive == true){\n\t\t\t\tobjTextPanel.stop(true).fadeTo(animationDuration, 1);\n\t\t\t}else{\n\t\t\t\tobjTextPanel.stop(true).fadeTo(animationDuration, 0);\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t}\n\t\n\n\t/**\n\t * set thumb border effect\n\t */\n\tfunction setIconsEffect(objTile, isActive, noAnimation){\n\t\t\n\t\tvar animationDuration = g_options.thumb_transition_duration;\n\t\tif(noAnimation && noAnimation === true)\n\t\t\tanimationDuration = 0;\n\t\t\n\t\tvar g_objIconZoom = getButtonZoom(objTile);\n\t\tvar g_objIconLink = getButtonLink(objTile);\n\t\tvar opacity = isActive?1:0;\n\t\t\n\t\tif(g_objIconZoom)\n\t\t\tg_objIconZoom.stop(true).fadeTo(animationDuration, opacity);\n\t\t\n\t\tif(g_objIconLink)\n\t\t\tg_objIconLink.stop(true).fadeTo(animationDuration, opacity);\n\t\t\n\t}\n\t\n\t\n\t\n\t/**\n\t * set tile over style\n\t */\n\tfunction setOverStyle(data, objTile){\n\t\t\t\t\n\t\tobjTile = jQuery(objTile);\n\t\t\t\t\n\t\tif(g_options.tile_enable_image_effect)\n\t\t\tsetImageOverlayEffect(objTile, true);\n\n\t\tif(g_options.tile_enable_textpanel == true && g_options.tile_textpanel_always_on == false && g_temp.isTextPanelHidden == false)\n\t\t\tsetTextpanelEffect(objTile, true);\n\t\t\n\t\t//show/hide icons - if saparate (if not, they are part of the overlay)\n\t\t//if the type is video and icon always on - the icon should stay\n\t\tif(g_temp.isSaparateIcons && g_options.tile_enable_icons == true){\n\t\t\tvar isSet = (g_options.thumb_overlay_reverse == true);\n\t\t\t\n\t\t\tvar objItem = t.getItemByTile(objTile);\n\t\t\tif(isItemIconAlwaysOn(objItem) == false)\n\t\t\t\tsetIconsEffect(objTile, isSet, false);\n\t\t\t\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * set normal style\n\t */\n\tfunction setNormalStyle(data, objTile){\n\t\t\n\t\tobjTile = jQuery(objTile);\n\t\t\n\t\tif(g_options.tile_enable_image_effect)\n\t\t\tsetImageOverlayEffect(objTile, false);\n\t\t\n\t\tif(g_options.tile_enable_textpanel == true && g_options.tile_textpanel_always_on == false)\n\t\t\tsetTextpanelEffect(objTile, false);\n\t\t\n\t\t//show/hide icons - if saparate (if not, they are part of the overlay)\n\t\tif(g_temp.isSaparateIcons == true && g_options.tile_enable_icons == true){\n\t\t\t\n\t\t\tvar isSet = (g_options.thumb_overlay_reverse == true)?false:true;\n\t\t\t\n\t\t\tvar objItem = t.getItemByTile(objTile);\n\t\t\tif(isItemIconAlwaysOn(objItem) == false)\n\t\t\t\tsetIconsEffect(objTile, isSet, false);\n\t\t\telse{\t//make icon always appear\n\t\t\t\tsetIconsEffect(objTile, true, true);\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * set all tiles normal style\n\t */\n\tfunction setAllTilesNormalStyle(objTileExcept){\n\t\t\n\t\tvar objTiles = g_thumbs.getThumbs().not(objTileExcept);\n\t\tobjTiles.each(function(index, objTile){\n\t\t\tg_thumbs.setThumbNormalStyle(jQuery(objTile));\n\t\t});\n\t\t\n\t}\n\t\n\t\n\tfunction _________________EVENTS________________(){};\n\t\n\t\n\t/**\n\t * on tile size change, place elements\n\t */\n\tfunction onSizeChange(data, objTile, forcePosition){\n\n\t\tobjTile = jQuery(objTile);\n\t\t\n\t\t//position elements only if the image loaded (placed)\n\t\tif(g_options.tile_visible_before_image == true && objTile.data(\"image_placed\") !== true && forcePosition !== true)\n\t\t\treturn(true);\n\n\t\tpositionElements(objTile);\n\t\t\n\t\tg_thumbs.setThumbNormalStyle(objTile);\n\t}\n\t\n\t\n\t/**\n\t * on place image event after images loaded\n\t */\n\tfunction onPlaceImage(data, objTile, objImage){\n\t\t\n\t\tpositionElements(objTile);\n\t\tobjImage.fadeTo(0,1);\n\t\t\n\t\tobjTile.data(\"image_placed\", true);\n\t}\n\t\n\t\n\t/**\n\t * on tile click on mobile devices on normal state\n\t * set the tile over state\n\t */\n\tfunction onMobileClick(objTile){\n\n\t\tif(isTileClickable(objTile) == true){\n\t\t\tg_objThis.trigger(t.events.TILE_CLICK, objTile);\n\t\t\treturn(true);\n\t\t}\n\t\t\n\t\tif(isOverStyle(objTile) == false){\n\t\t\tsetAllTilesNormalStyle(objTile);\t\t\t\n\t\t\tg_thumbs.setThumbOverStyle(objTile);\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * on tile click event\n\t */\n\tfunction onTileClick(event){\n\t\t\t\t\n\t\tvar objTile = jQuery(this);\n\t\t\n\t\tvar tagname = objTile.prop(\"tagName\").toLowerCase();\n\t\tvar isApproved = true;\n\t\tif(g_temp.funcParentApproveClick && g_temp.funcParentApproveClick() == false)\n\t\t\tisApproved = false;\n\t\t\t\t\n\t\tif(tagname == \"a\"){\n\t\t\t\n\t\t\tif(isApproved == false)\n\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\t\n\t\t}else{\t\t//in case of div\n\t\t\t\n\t\t\tif(isOverStyle(objTile) == false){\t//mobile click version\n\t\t\t\t\n\t\t\t\tif(isApproved == true)\n\t\t\t\t\tonMobileClick(objTile);\n\t\t\t\t\t\t\t\t\n\t\t\t}else{\n\t\t\t\tif(isTileClickable(objTile) == false)\n\t\t\t\t\treturn(true);\n\t\t\t\t\n\t\t\t\tif(isApproved == true)\n\t\t\t\t\tg_objThis.trigger(t.events.TILE_CLICK, objTile);\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * click on zoom button (as tile click)\n\t */\n\tfunction onZoomButtonClick(event){\n\t\t\t\t\n\t\tevent.stopPropagation();\n\t\t\n\t\tvar objTile = jQuery(this).parents(\".ug-tile\");\n\t\t\n\t\tvar isApproved = true;\n\t\t\n\t\tif(g_temp.funcParentApproveClick && g_temp.funcParentApproveClick() == false)\n\t\t\tisApproved = false;\n\t\t\n\t\tif(isOverStyle(objTile) == false){\n\t\t\tonMobileClick(objTile);\n\t\t\treturn(true);\n\t\t}\n\t\t\t\n\t\tif(isApproved == true){\n\t\t\tg_objThis.trigger(t.events.TILE_CLICK, objTile);\n\t\t\treturn(false);\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * on link icon click\n\t */\n\tfunction onLinkButtonClick(event){\n\t\tvar objTile = jQuery(this).parents(\".ug-tile\");\n\t\t\t\t\n\t\tif(g_temp.funcParentApproveClick && g_temp.funcParentApproveClick() == false)\n\t\t\tevent.preventDefault();\n\t\t\n\t\t//allow click only from over style\n\t\tif(isOverStyle(objTile) == false && g_options.tile_as_link == false){\n\t\t\tevent.preventDefault();\n\t\t\tonMobileClick(objTile);\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * init events\n\t */\n\tthis.initEvents = function(){\n\t\t\t\t\n\t\tg_thumbs.initEvents();\n\t\t\n\t\t//connect the over and normal style of the regular thumbs\n\t\tjQuery(g_thumbs).on(g_thumbs.events.SETOVERSTYLE, setOverStyle);\n\t\tjQuery(g_thumbs).on(g_thumbs.events.SETNORMALSTYLE, setNormalStyle);\n\t\tjQuery(g_thumbs).on(g_thumbs.events.PLACEIMAGE, onPlaceImage);\n\t\t\n\t\tg_objWrapper.on(g_temp.eventSizeChange, onSizeChange);\n\t\t\n\t\tg_objParentWrapper.delegate(\".ug-tile .ug-button-play\", \"click\", onZoomButtonClick);\n\t\t\n\t\tg_objParentWrapper.delegate(\".ug-tile\", \"click\", onTileClick);\n\t\t\n\t\tg_objParentWrapper.delegate(\".ug-tile .ug-icon-link\", \"click\", onLinkButtonClick);\n\t}\n\t\n\t\n\t/**\n\t * destroy the element events\n\t */\n\tthis.destroy = function(){\n\t\t\t\t\n\t\tjQuery(g_thumbs).off(g_thumbs.events.SETOVERSTYLE);\n\t\tjQuery(g_thumbs).off(g_thumbs.events.SETNORMALSTYLE);\n\t\tjQuery(g_thumbs).off(g_thumbs.events.PLACEIMAGE);\n\t\tg_objWrapper.off(g_temp.eventSizeChange);\n\t\t\n\t\tif(g_options.tile_enable_textpanel == true){\n\t\t\tvar objThumbs = g_thumbs.getThumbs();\n\t\t\tjQuery.each(objThumbs, function(index, thumb){\t\t\t\t\n\t\t\t\tvar textPanel = getTextPanel(jQuery(thumb));\n\t\t\t\tif(textPanel)\n\t\t\t\t\ttextPanel.destroy();\n\t\t\t});\n\t\t}\n\t\t\n\t\tg_thumbs.destroy();\n\n\t}\n\n\t\n\t/**\n\t * external init\n\t */\n\tthis.init = function(gallery, g_thumbs, customOptions){\n\t\t\n\t\tinit(gallery, g_thumbs, customOptions);\n\t}\n\t\n\t/**\n\t * set fixed mode\n\t */\n\tthis.setFixedMode = function(){\n\t\t\n\t\tg_options.tile_size_by = t.sizeby.GLOBAL_RATIO;\n\t\tg_options.tile_visible_before_image = true;\n\t}\n\t\n\t\n\t/**\n\t * set parent approve click function\n\t */\n\tthis.setApproveClickFunction = function(funcApprove){\n\t\tg_temp.funcParentApproveClick = funcApprove;\n\t}\n\t\n\t\n\t\n\t/**\n\t * resize tile. If no size given, resize to original size\n\t * the resize mode taken from resize modes constants, default is full\n\t */\n\tthis.resizeTile = function(objTile, newWidth, newHeight, resizeMode){\n\t\t\n\t\t\t//if textpanel outside - refresh the textpanel first\n\t\t\tif(g_temp.isTextpanelOutside == true)\n\t\t\t\tpositionElements_textpanel(objTile, \"clone\", newWidth);\n\t\t\t\n\t\t\tif(!newWidth){\n\t\t\t\t\n\t\t\t\tvar newWidth = g_options.tile_width;\n\t\t\t\tvar newHeight = g_options.tile_height;\n\t\t\t\t\n\t\t\t}else{\t\t//only height is missing\n\t\t\t\tif(!newHeight){\n\t\t\t\t\t\n\t\t\t\t\tvar newHeight = t.getTileHeightByWidth(newWidth, objTile, \"resizeTile\");\n\t\t\t\t}\n\t\t\t}\n\t\t\t\t\t\t\n\t\t\tg_functions.setElementSize(objTile, newWidth, newHeight);\n\t\t\t\n\t\t\tswitch(resizeMode){\n\t\t\t\tdefault:\n\t\t\t\tcase t.resizemode.FULL:\n\t\t\t\t\tt.triggerSizeChangeEvent(objTile, true);\n\t\t\t\tbreak;\n\t\t\t\tcase t.resizemode.WRAPPER_ONLY:\n\t\t\t\t\treturn(true);\n\t\t\t\tbreak;\n\t\t\t\tcase t.resizemode.VISIBLE_ELEMENTS:\n\t\t\t\t\t\n\t\t\t\t\tif(g_temp.funcCustomTileHtml){\n\t\t\t\t\t\tt.triggerSizeChangeEvent(objTile, true);\n\t\t\t\t\t\treturn(true);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t//resize images\n\t\t\t\t\tpositionElements_images(objTile, newWidth, newHeight, true);\n\t\t\t\t\t\n\t\t\t\t\t//resize text panel, if visible\n\t\t\t\t\tif(g_options.tile_enable_textpanel == true && g_options.tile_textpanel_always_on == true && newWidth){\n\t\t\t\t\t\tpositionElements_textpanel(objTile, \"regular\", newWidth, newHeight);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\n\t}\n\n\t\n\t/**\n\t * resize all tiles \n\t */\n\tthis.resizeAllTiles = function(newWidth, resizeMode){\n\t\t\n\t\tmodifyOptionsBeforeRender();\n\t\t\n\t\tvar newHeight = null;\n\t\t\n\t\tif(g_options.tile_size_by == t.sizeby.GLOBAL_RATIO)\n\t\t\tnewHeight = t.getTileHeightByWidth(newWidth,null,\"resizeAllTiles\");\n\t\t\n\t\tvar objTiles = g_thumbs.getThumbs();\n\t\tobjTiles.each(function(index, objTile){\n\t\t\tt.resizeTile(jQuery(objTile), newWidth, newHeight, resizeMode);\n\t\t});\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * trigger size change events\n\t * the force is only for fixed size mode\n\t */\n\tthis.triggerSizeChangeEvent = function(objTile, isForce){\n\t\t\n\t\tif(!objTile)\n\t\t\treturn(false);\n\t\t\n\t\tif(!isForce)\n\t\t\tvar isForce = false;\n\t\t\n\t\tg_objWrapper.trigger(g_temp.eventSizeChange, [objTile, isForce]);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * trigger size change event to all tiles\n\t * the force is only for fixed mode\n\t */\n\tthis.triggerSizeChangeEventAllTiles = function(isForce){\n\t\t\n\t\tvar objThumbs = g_thumbs.getThumbs();\n\n\t\tobjThumbs.each(function(){\n\t\t\tvar objTile = jQuery(this);\n\t\t\t\n\t\t\tt.triggerSizeChangeEvent(objTile, isForce);\n\t\t\t\n\t\t});\n\t\t\n\t}\n\t\n\t\n\t\n\t\n\t\n\t/**\n\t * disable all events\n\t */\n\tthis.disableEvents = function(){\n\t\tvar objThumbs = g_thumbs.getThumbs();\n\t\tobjThumbs.css(\"pointer-events\", \"none\");\n\t}\n\t\n\t\n\t/**\n\t * enable all events\n\t */\n\tthis.enableEvents = function(){\n\t\tvar objThumbs = g_thumbs.getThumbs();\n\t\tobjThumbs.css(\"pointer-events\", \"auto\");\n\t}\n\t\n\t/**\n\t * set new options\n\t */\n\tthis.setOptions = function(newOptions){\n\t\tg_options = jQuery.extend(g_options, newOptions);\n\t\tg_thumbs.setOptions(newOptions);\n\t}\n\t\n\t\n\t/**\n\t * set new tile size, this function will not resize, and keep ratio\n\t */\n\tthis.setTileSizeOptions = function(newTileWidth){\n\t\t\n\t\tif(g_options.tile_size_by !== t.sizeby.GLOBAL_RATIO)\n\t\t\tthrow new Error(\"setNewTileOptions works with global ration only\");\n\t\t\n\t\tg_options.tile_width = newTileWidth;\n\t\tg_options.tile_height = Math.floor(newTileWidth * g_temp.ratioByHeight);\n\t\t\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * set custom tile html function\n\t */\n\tthis.setCustomFunctions = function(funcCustomHtml, funcPositionElements){\n\t\tg_temp.funcCustomTileHtml = funcCustomHtml;\n\t\tg_temp.funcCustomPositionElements = funcPositionElements;\n\t}\n\t\n\t\n\t/**\n\t * run the tile design\n\t */\n\tthis.run = function(){\n\t\t\n\t\t//resize all tiles\n\t\tvar objThumbs = g_thumbs.getThumbs();\n\t\t\n\t\tif(g_options.tile_size_by == t.sizeby.GLOBAL_RATIO){\n\t\t\tt.resizeAllTiles(g_options.tile_width, t.resizemode.WRAPPER_ONLY);\n\t\t}\n\t\t\t\n\t\t//hide original image if image effect active\n\t\tif(g_options.tile_enable_image_effect == true && g_options.tile_image_effect_reverse == false)\n\t\t\tobjThumbs.children(\".ug-thumb-image\").fadeTo(0,0);\n\t\t\n\t\tg_thumbs.setHtmlProperties();\n\t\t\n\t\tif(g_options.tile_visible_before_image == true){\n\t\t\t\n\t\t\t//if textpanel outside - refresh the textpanel first\t\t\t\n\t\t\tobjThumbs.children(\".ug-thumb-image\").fadeTo(0,0);\n\t\t\tg_thumbs.loadThumbsImages();\n\t\t}\n\t\t\n\t}\n\n\t\n\tthis._____________EXTERNAL_GETTERS____________=function(){};\n\t\n\t\n\t/**\n\t * get thumbs general option\n\t */\n\tthis.getObjThumbs = function(){\n\t\treturn g_thumbs;\n\t}\n\t\n\t/**\n\t * get options\n\t */\n\tthis.getOptions = function(){\n\t\treturn g_options;\n\t}\n\n\t/**\n\t * get tile image\n\t */\n\tthis.getTileImage = function(objTile){\n\t\tvar objImage = objTile.find(\"img.ug-thumb-image\");\n\t\treturn(objImage);\n\t}\n\n\t\n\t/**\n\t * get item from tile\n\t */\n\tthis.getItemByTile = function(objTile){\n\t\treturn g_thumbs.getItemByThumb(objTile);\n\t}\n\t\n\t\n\t/**\n\t * get tile height by width\n\t */\n\tthis.getTileHeightByWidth = function(newWidth, objTile, fromWhere){\n\t\t\n\t\tvar ratio = getTileRatio(objTile, fromWhere);\n\t\t\n\t\tif(ratio === null)\n\t\t\treturn(null);\n\t\t\n\t\tvar height = Math.floor( (newWidth - g_temp.tileInnerReduce) * ratio) + g_temp.tileInnerReduce;\n\t\t\n\t\tif(objTile && g_temp.isTextpanelOutside == true && g_options.tile_size_by == t.sizeby.IMAGE_RATIO)\n\t\t\theight += getTextPanelHeight(objTile);\n\t\t\n\t\treturn(height);\n\t}\n\t\n\t\n\t/**\n\t * get tile original size\n\t */\n\tthis.getTileImageSize = function(objTile){\n        var objItem = t.getItemByTile(objTile);\n        if(!objItem.thumbWidth || !objItem.thumbHeight)\n        \tthrow new Error(\"Can't get image size - image not inited.\");\n        \n        var objSize = {\n        \t\twidth: objItem.thumbWidth,\n        \t\theight: objItem.thumbHeight\n        };\n        \n        return(objSize);\n\t}\n\t\n\t\n\t/**\n\t * get tile size\n\t */\n\tthis.getGlobalTileSize = function(){\n\t\t\n\t\tif(g_options.tile_size_by != t.sizeby.GLOBAL_RATIO)\n\t\t\tthrow new Error(\"The size has to be global ratio\");\n\t\t\n\t\tvar objSize = {\n\t\t\t\twidth: g_options.tile_width,\n\t\t\t\theight: g_options.tile_height\n\t\t};\n\t\t\n\t\treturn(objSize);\n\t}\n\t\n\t\n}\n\n/**\n * avia control class\n * addon to strip gallery\n */\nfunction UGAviaControl(){\n\n\tvar g_parent, g_gallery, g_objects, g_objStrip, g_objStripInner, g_options;\n\tvar g_isVertical;\n\t\n\tvar g_temp = {\n\t\ttouchEnabled:false,\t\t\t//variable that tells if touch event was before move event\n\t\tisMouseInsideStrip: false,\n\t\tstrip_finalPos:0,\n\t\thandle_timeout:\"\",\n\t\tisStripMoving:false,\n\t\tisControlEnabled: true\n\t};\n\t\n\t\n\t/**\n\t * enable the control\n\t */\n\tthis.enable = function(){\n\t\tg_temp.isControlEnabled = true;\n\t}\n\t\n\t/**\n\t * disable the control\n\t */\n\tthis.disable = function(){\n\t\tg_temp.isControlEnabled = false;\t\t\n\t}\n\t\n\t/**\n\t * init function for avia controls\n\t */\n\tthis.init = function(objParent){\n\t\tg_parent = objParent;\n\t\t\n\t\tg_objects = objParent.getObjects();\n\t\t\t\t\n\t\tg_gallery = g_objects.g_gallery;\n\t\t\n\t\tg_objStrip = g_objects.g_objStrip;\n\t\tg_objStripInner = g_objects.g_objStripInner;\n\t\tg_options = g_objects.g_options;\n\t\tg_isVertical = g_objects.isVertical;\t\t\n\t\t\t\t\n\t\tinitEvents();\n\t}\n\t\n\t/**\n\t * get mouse position from event according the orientation\n\t */\n\tfunction getMousePos(event){\n\t\t\n\t\tif(g_isVertical == false)\n\t\t\treturn(event.pageX);\n\t\t\n\t\treturn(event.pageY);\n\t}\n\t\n\t/**\n\t * handle avia strip control event on body mouse move\n\t */\n\tfunction initEvents(event){\n\t\t\n\t\t//make sure that the avia control will not work on touch devices\n\t\tjQuery(\"body\").on(\"touchstart\", function(event){\n\t\t\t\n\t\t\tif(g_temp.isControlEnabled == false)\n\t\t\t\treturn(true);\n\t\t\t\n\t\t\tg_temp.touchEnabled = true;\n\t\t\t\n\t\t});\n\t\t\n\t\t//on body move\n\t\tjQuery(\"body\").mousemove(function(event){\n\t\t\t\n\t\t\tif(g_temp.isControlEnabled == false)\n\t\t\t\treturn(true);\n\t\t\t\t\t\t\t\t\t\n\t\t\t//protection for touch devices, disable the avia events\n\t\t\tif(g_temp.touchEnabled == true){\n\t\t\t\tjQuery(\"body\").off(\"mousemove\");\n\t\t\t\treturn(true);\n\t\t\t}\n\t\t\t\n\t\t\tg_temp.isMouseInsideStrip = g_objStrip.ismouseover();\n\t\t\tvar strip_touch_active = g_parent.isTouchMotionActive();\n\t\t\t\n\t\t\tif(g_temp.isMouseInsideStrip == true && strip_touch_active == false){\n\t\t\t\t\n\t\t\t\tvar mousePos = getMousePos(event);\n\t\t\t\t\n\t\t\t\tmoveStripToMousePosition(mousePos);\n\t\t\t}else{\n\t\t\t\tstopStripMovingLoop();\n\t\t\t}\n\t\t\t\n\t\t});\n\t\t\t\t\t\t\n\t}\n\t\n\t\n\t/**\n\t * destroy the avia control events\n\t */\n\tthis.destroy = function(){\n\t\t\n\t\tjQuery(\"body\").off(\"touchstart\");\n\t\tjQuery(\"body\").off(\"mousemove\");\n\n\t}\n\t\n\t\n\t/**\n\t * get inner y position according mouse y position on the strip\n\t */\n\tfunction getInnerPosY(mouseY){\n\n\t\tvar innerOffsetTop = g_options.strip_padding_top;\n\t\tvar innerOffsetBottom = g_options.strip_padding_bottom;\n\n\t\tvar stripHeight = g_objStrip.height();\n\t\tvar innerHeight = g_objStripInner.height();\t\t\n\t\t\n\t\t//if all thumbs visible, no need to move\n\t\tif(stripHeight > innerHeight)\n\t\t\treturn(null);\n\t\t\n\t\t//find y position inside the strip\n\t\tvar stripOffset = g_objStrip.offset();\t\t\n\t\tvar offsetY = stripOffset.top;\n\t\tvar posy = mouseY - offsetY - innerOffsetTop;\n\t\tif(posy < 0)\n\t\t\treturn(null);\n\t\t\n\t\t//set measure line parameters\n\t\tvar mlineStart = g_options.thumb_height;\n\t\tvar mlineEnd = stripHeight - g_options.thumb_height;\n\t\tvar mLineSize = mlineEnd - mlineStart;\n\t\t\t\t\n\t\t//fix position borders on the measure line\n\t\tif(posy < mlineStart)\n\t\t\tposy = mlineStart;\n\t\t\n\t\tif(posy > mlineEnd)\n\t\t\tposy = mlineEnd;\n\t\t\n\t\t//count the ratio of the position on the measure line\n\t\tvar ratio = (posy - mlineStart) / mLineSize;\n\t\tvar innerPosY = (innerHeight - stripHeight) * ratio;\n\t\tinnerPosY = Math.round(innerPosY) * -1 + innerOffsetTop;\n\t\t\n\t\treturn(innerPosY);\n\t}\n\n\t\n\t/**\n\t * get inner x position according mouse x position on the strip\n\t */\n\tfunction getInnerPosX(mouseX){\n\t\t\n\t\tvar innerOffsetLeft = g_options.strip_padding_left;\n\t\tvar innerOffsetRight = g_options.strip_padding_right;\n\t\t\n\t\tvar stripWidth = g_objStrip.width() - innerOffsetLeft - innerOffsetRight;\n\t\tvar innerWidth = g_objStripInner.width();\n\t\t\n\t\t//if all thumbs visible, no need to move\n\t\tif(stripWidth > innerWidth)\n\t\t\treturn(null);\n\t\t\n\t\tvar stripOffset = g_objStrip.offset();\n\t\tvar offsetX = stripOffset.left;\n\t\tvar posx = mouseX - offsetX - innerOffsetLeft;\n\t\t\n\t\t//set measure line parameters\n\t\tvar mlineStart = g_options.thumb_width;\n\t\tvar mlineEnd = stripWidth - g_options.thumb_width;\n\t\tvar mLineSize = mlineEnd - mlineStart;\n\t\t\n\t\t//fix position borders on the measure line\n\t\tif(posx < mlineStart)\n\t\t\tposx = mlineStart;\n\t\t\n\t\tif(posx > mlineEnd)\n\t\t\tposx = mlineEnd;\n\t\t\n\t\t//count the ratio of the position on the measure line\n\t\tvar ratio = (posx - mlineStart) / mLineSize;\n\t\tvar innerPosX = (innerWidth - stripWidth) * ratio;\n\t\tinnerPosX = Math.round(innerPosX) * -1 + innerOffsetLeft;\n\t\t\n\t\t\n\t\treturn(innerPosX);\n\t}\n\t\t\n\t\t\n\t/**\n\t * move strip stap to final position\n\t */\n\tfunction moveStripStep(){\n\t\t\n\t\tif(g_temp.is_strip_moving == false){\n\t\t\treturn(false);\n\t\t}\n\t\t\n\t\tvar innerPos = g_parent.getInnerStripPos();\n\t\t\t\t\n\t\tif(Math.floor(innerPos) == Math.floor(g_temp.strip_finalPos)){\n\t\t\tstopStripMovingLoop();\n\t\t}\n\t\t\n\t\t//calc step\n\t\tvar diff = Math.abs(g_temp.strip_finalPos - innerPos);\n\t\t\n\t\tvar dpos;\n\t\tif(diff < 1){\n\t\t\tdpos = diff;\n\t\t}\n\t\telse{\n\t\t\n\t\t\tdpos = diff / 4;\n\t\t\tif(dpos > 0 && dpos < 1)\n\t\t\t\tdpos = 1;\n\t\t}\t\t\n\t\t\n\t\tif(g_temp.strip_finalPos < innerPos)\n\t\t\tdpos = dpos * -1;\n\t\t\t\t\n\t\tvar newPos = innerPos + dpos;\n\t\t\n\t\tg_parent.positionInnerStrip(newPos);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * start loop of strip moving\n\t */\n\tfunction startStripMovingLoop(){\n\t\t\n\t\tif(g_temp.isStripMoving == true)\n\t\t\treturn(false);\n\t\t\t\n\t\tg_temp.isStripMoving = true;\n\t\tg_temp.handle_timeout = setInterval(moveStripStep,10);\n\t}\n\t\n\t/**\n\t * stop loop of strip moving\n\t */\n\tfunction stopStripMovingLoop(){\n\t\t\n\t\tif(g_temp.isStripMoving == false)\n\t\t\treturn(false);\n\t\t\t\n\t\tg_temp.isStripMoving = false;\n\t\tg_temp.handle_timeout = clearInterval(g_temp.handle_timeout);\n\t}\n\n\t/**\n\t * get inner position according the orientation\n\t * taken by the mouse position\n\t */\n\tfunction getInnerPos(mousePos){\n\t\t\n\t\tif(g_isVertical == false)\n\t\t\treturn getInnerPosX(mousePos);\n\t\telse\n\t\t\treturn getInnerPosY(mousePos);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * move the strip to mouse position on it\n\t * mousex - mouse position relative to the document\n\t */\n\tfunction moveStripToMousePosition(mousePos){\t\t\n\t\t\n\t\tvar innerPos = getInnerPos(mousePos);\n\t\t\n\t\tif(innerPos === null)\n\t\t\treturn(false);\n\t\t\n\t\tg_temp.is_strip_moving = true;\n\t\tg_temp.strip_finalPos = innerPos;\n\t\t\t\t\n\t\tstartStripMovingLoop();\n\t}\n\t\n}\n\n/**\n * slider class\n * addon to strip gallery\n */\nfunction UGSlider(){\n\t\n\tvar t = this, g_objThis = jQuery(t);\n\tvar g_gallery = new UniteGalleryMain(), g_objGallery, g_objWrapper, g_objThumbs;\t\n\t//the video arrows is independent arrows that is not sitting on the controls\n\tvar g_objSlider, g_objInner, g_objSlide1, g_objSlide2, g_objSlide3, g_objArrowLeft, g_objArrowRight;\n\tvar g_objTouchSlider, g_objZoomSlider, g_objZoomPanel, g_objButtonPlay = null, g_objButtonFullscreen = null, g_objBullets = null;\n\tvar g_objVideoPlayer = new UGVideoPlayer(), g_optionsPrefix;\n\tvar g_functions = new UGFunctions(), g_objProgress = null, g_objTextPanel = null;\n\t\n\t\n\tthis.events = {\t\t\n\t\tITEM_CHANGED: \"item_changed\",\t\t\t\t//on item changed\n\t\tBEFORE_SWITCH_SLIDES: \"before_switch\",\t\t//before slides switching\n\t\tBEFORE_RETURN: \"before_return\",\t\t\t\t//before return from pan or from zoom\n\t\tAFTER_RETURN: \"after_return\",\t\t\t\t//after return from pan or from zoom\n\t\tZOOM_START: \"slider_zoom_start\",\t\t\t//on zoom start \n\t\tZOOM_END: \"slider_zoom_end\",\t\t\t\t//on zoom move \n\t\tZOOMING: \"slider_zooming\",\t\t\t\t\t//on zooming\n\t\tZOOM_CHANGE: \"slider_zoom_change\",\t\t\t//on slide image image zoom change\t\n\t\tSTART_DRAG: \"start_drag\",\t\t\t\t\t//on slider drag start\n\t\tAFTER_DRAG_CHANGE: \"after_drag_change\",\t\t//after finish drag chagne transition\n\t\tACTION_START: \"action_start\",\t\t\t\t//on slide action start\n\t\tACTION_END: \"action_end\",\t\t\t\t\t//on slide action stop\n\t\tCLICK: \"slider_click\",\t\t\t\t\t\t//on click event\n\t\tTRANSITION_START:\"slider_transition_start\",\t//before transition start event\n\t\tTRANSITION_END:\"slider_transition_end\",\t\t//on transition end event\n\t\tAFTER_PUT_IMAGE: \"after_put_image\",\t\t\t//after put slide image\n\t\tIMAGE_MOUSEENTER: \"slider_image_mouseenter\", //on slide image mouseonter\n\t\tIMAGE_MOUSELEAVE: \"slider_image_mouseleave\",\t \t\t//on slide image mouseleave\n\t\tCURRENTSLIDE_LOAD_START: \"slider_current_loadstart\",\t//on current slide load image start\n\t\tCURRENTSLIDE_LOAD_END: \"slider_current_loadend\"\t\t//on finish load current slide image\n\t}\n\t\n\tvar g_options = {\n\t\t  slider_scale_mode: \"fill\",\t\t\t\t\t//fit: scale down and up the image to always fit the slider\n\t\t  \t\t\t\t\t\t\t\t\t\t\t\t//down: scale down only, smaller images will be shown, don't enlarge images (scale up)\n\t\t  \t\t\t\t\t\t\t\t\t\t\t\t//fill: fill the entire slider space by scaling, cropping and centering the image\n\t\t  \t\t\t\t\t\t\t\t\t\t\t\t//fitvert: make the image always fill the vertical slider area\n\t\t  slider_scale_mode_media: \"fill\",\t\t\t\t//fill, fit, down, fitvert - scale mode on media items\n\t\t  slider_scale_mode_fullscreen: \"down\",\t\t\t//fill, fit, down, fitvert - scale mode on fullscreen.\n\t\t  \t\t  \n\t\t  slider_item_padding_top: 0,\t\t\t\t\t//padding top of the slider item\n\t\t  slider_item_padding_bottom: 0,\t\t\t\t//padding bottom of the slider item\n\t\t  slider_item_padding_left: 0,\t\t\t\t\t//padding left of the slider item\n\t\t  slider_item_padding_right: 0,\t\t\t\t\t//padding right of the slider item\n\t\t  \n\t\t  slider_background_color: \"\",\t\t\t\t\t//slider background color, set if you want to change default\n\t\t  slider_background_opacity: 1,\t\t\t\t\t//slider background opacity\n\t\t  \n\t\t  slider_image_padding_top: 0,\t\t\t\t\t//padding top of the image inside the item\n\t\t  slider_image_padding_bottom: 0,\t\t\t\t//padding bottom of the image inside the item\n\t\t  slider_image_padding_left: 0,\t\t\t\t\t//padding left of the image inside the item\n\t\t  slider_image_padding_right: 0,\t\t\t\t//padding right of the image inside the item\n\n\t\t  slider_image_border: false,\t\t\t\t\t//enable border around the image\n\t\t  slider_image_border_width: 10,\t\t\t\t//image border width\n\t\t  slider_image_border_color: \"#ffffff\",\t\t\t//image border color\n\t\t  slider_image_border_radius: 0,\t\t\t\t//image border radius\n\t\t  slider_image_border_maxratio: 0.35,\t\t\t//max ratio that the border can take from the image\n\t\t  slider_image_shadow: false,\t\t\t\t\t//enable border shadow the image\n\t\t  \n\t\t  slider_video_constantsize: false, \t\t\t//constant video size mode for video items\n\t\t  slider_video_constantsize_scalemode: \"fit\", \t//fit,down: constant video size scale mode\n\t\t  slider_video_constantsize_width: 854,\t\t\t//constant video size width\n\t\t  slider_video_constantsize_height: 480,\t\t//constant video size height\n\t\t  \n\t\t  slider_video_padding_top: 0,\t\t\t\t\t//padding top of the video player inside the item\n\t\t  slider_video_padding_bottom: 0,\t\t\t\t//padding bottom of the video player inside the item\n\t\t  slider_video_padding_left: 0,\t\t\t\t\t//padding left of the video player inside the item\n\t\t  slider_video_padding_right: 0,\t\t\t\t//padding right of the video player inside the item\n\t\t  \n\t\t  slider_video_enable_closebutton: true,\t\t//enable video close button\n\t\t  \n\t\t  slider_transition: \"slide\",\t\t\t\t\t//fade, slide - the transition of the slide change\n\t\t  slider_transition_speed:300,\t\t\t\t \t//transition duration of slide change\n\t\t  slider_transition_easing: \"easeInOutQuad\",\t//transition easing function of slide change\n\t\t  \n\t\t  slider_control_swipe:true,\t\t\t\t\t//true,false - enable swiping control\n\t\t  slider_control_zoom:true,\t\t\t\t\t\t//true, false - enable zooming control\n\t\t  slider_zoom_mousewheel: true,\t\t\t\t\t//enable zoom on mousewheel\n\t\t  slider_vertical_scroll_ondrag: false,\t\t\t//vertical scroll on slider area drag\t\t\t\t\t  \n\t\t  slider_loader_type: 1,\t\t\t\t\t\t//shape of the loader (1-7)\n\t\t  slider_loader_color:\"white\",\t\t\t\t\t//color of the loader: (black , white)\n\t\t  slider_enable_links: true,\t\t\t\t\t//enable slide as link functionality\n\t\t  slider_links_newpage: false,\t\t\t\t\t//open the slide link in new page\n\t\t  \n\t\t  slider_enable_bullets: false,\t\t\t\t\t//enable the bullets onslider element\n\t\t  slider_bullets_skin: \"\",\t\t\t\t\t\t//skin of the bullets, if empty inherit from gallery skin\n\t\t  slider_bullets_space_between: -1,\t\t\t\t//set the space between bullets. If -1 then will be set default space from the skins\n\t\t  slider_bullets_align_hor:\"center\",\t\t\t//left, center, right - bullets horizontal align\n\t\t  slider_bullets_align_vert:\"bottom\",\t\t\t//top, middle, bottom - bullets vertical algin\n\t\t  slider_bullets_offset_hor:0,\t\t\t\t\t//bullets horizontal offset \n\t\t  slider_bullets_offset_vert:10,\t\t\t\t//bullets vertical offset\n\t\t  \n\t\t  slider_enable_arrows: true,\t\t\t\t\t//enable arrows onslider element\n\t\t  slider_arrows_skin: \"\",\t\t\t\t\t\t//skin of the slider arrows, if empty inherit from gallery skin\n\t\t  \n\t\t  slider_arrow_left_align_hor:\"left\",\t  \t\t//left, center, right - left arrow horizonal align\n\t\t  slider_arrow_left_align_vert:\"middle\", \t\t//top, middle, bottom - left arrow vertical align\n\t\t  slider_arrow_left_offset_hor:20,\t\t  \t\t//left arrow horizontal offset\n\t\t  slider_arrow_left_offset_vert:0,\t\t  \t\t//left arrow vertical offset\n\t\t  \n\t\t  slider_arrow_right_align_hor:\"right\",   \t\t//left, center, right - right arrow horizontal algin\n\t\t  slider_arrow_right_align_vert:\"middle\", \t\t//top, middle, bottom - right arrow vertical align\n\t\t  slider_arrow_right_offset_hor:20,\t   \t\t\t//right arrow horizontal offset \n\t\t  slider_arrow_right_offset_vert:0,\t   \t\t\t//right arrow vertical offset\n\t\t  \n\t\t  slider_enable_progress_indicator: true,\t\t //enable progress indicator element\n\t\t  slider_progress_indicator_type: \"pie\",\t\t //pie, pie2, bar (if pie not supported, it will switch to bar automatically)\n\t\t  slider_progress_indicator_align_hor:\"right\",   //left, center, right - progress indicator horizontal align\n\t\t  slider_progress_indicator_align_vert:\"top\",    //top, middle, bottom - progress indicator vertical align\n\t\t  slider_progress_indicator_offset_hor:10,\t     //progress indicator horizontal offset \n\t\t  slider_progress_indicator_offset_vert:10,\t     //progress indicator vertical offset\n\t\t  \n\t\t  slider_enable_play_button: true,\t\t\t\t //true,false - enable play / pause button onslider element\n\t\t  slider_play_button_skin: \"\",\t\t\t\t\t //skin of the slider play button, if empty inherit from gallery skin\n\t\t  slider_play_button_align_hor:\"left\",    \t\t //left, center, right - play button horizontal align\n\t\t  slider_play_button_align_vert:\"top\",     \t\t //top, middle, bottom - play button vertical align\n\t\t  slider_play_button_offset_hor:40,\t       \t\t //play button horizontal offset \n\t\t  slider_play_button_offset_vert:8,\t   \t\t\t //play button vertical offset\n\t\t  slider_play_button_mobilehide:false,\t\t \t //hide the play button on mobile\n\t\t  \n\t\t  slider_enable_fullscreen_button: true,\t\t //true,false - enable fullscreen button onslider element\n\t\t  slider_fullscreen_button_skin: \"\",\t\t\t //skin of the slider fullscreen button, if empty inherit from gallery skin\n\t\t  slider_fullscreen_button_align_hor:\"left\",     //left, center, right\t- fullscreen button horizonatal align\n\t\t  slider_fullscreen_button_align_vert:\"top\",     //top, middle, bottom - fullscreen button vertical align\n\t\t  slider_fullscreen_button_offset_hor:11,\t     //fullscreen button horizontal offset \n\t\t  slider_fullscreen_button_offset_vert:9,\t   \t //fullscreen button vertical offset\n\t\t  slider_fullscreen_button_mobilehide:false,\t //hide the button on mobile\n\t\t  \n\t\t  slider_enable_zoom_panel: true,\t\t\t\t //true,false - enable the zoom buttons, works together with zoom control.\n\t\t  slider_zoompanel_skin: \"\",\t\t\t\t\t //skin of the slider zoom panel, if empty inherit from gallery skin\t\t  \n\t\t  slider_zoompanel_align_hor:\"left\",    \t\t //left, center, right - zoom panel horizontal align\n\t\t  slider_zoompanel_align_vert:\"top\",     \t \t //top, middle, bottom - zoom panel vertical align\n\t\t  slider_zoompanel_offset_hor:12,\t       \t\t //zoom panel horizontal offset \n\t\t  slider_zoompanel_offset_vert:92,\t   \t\t\t //zoom panel vertical offset\n\t\t  slider_zoompanel_mobilehide:false,\t\t     //hide the zoom panel on mobile\n\t\t  \n\t\t  slider_controls_always_on: false,\t\t\t\t//true,false - controls are always on, false - show only on mouseover\n\t\t  slider_controls_appear_ontap: true,\t\t\t//true,false - appear controls on tap event on touch devices\n\t\t  slider_controls_appear_duration: 300,\t\t\t//the duration of appearing controls\n\t\t  \n\t\t  slider_enable_text_panel: true,\t\t\t\t//true,false - enable the text panel\n\t\t  slider_textpanel_always_on: true,\t\t\t\t//true,false - text panel are always on, false - show only on mouseover\n\t\t  \n\t\t  slider_videoplay_button_type: \"square\"\t\t//square, round - the videoplay button type, square or round\t\n\t};\n\t\n\t\n\t//default options for bar progress incicator\n\tvar g_defaultsProgressBar = {\n\t\t  slider_progress_indicator_align_hor:\"left\",    \t//left, center, right\n\t\t  slider_progress_indicator_align_vert:\"bottom\",    //top, middle, bottom\n\t\t  slider_progress_indicator_offset_hor:0,\t       \t//horizontal offset \n\t\t  slider_progress_indicator_offset_vert:0\t   \t\t//vertical offset\n\t};\n\t\n\tvar g_temp = {\n\t\tisRunOnce: false,\n\t\tisTextPanelSaparateHover: false,\t\t\t\t\t//if the panel need to be appeared without the controls object on mouseover\n\t\tnumPrev:1,\n\t\tnumCurrent:2,\n\t\tnumNext: 3,\n\t\tisControlsVisible: true,\n\t\tcurrentControlsMode: \"image\"\n\t};\n\t\n\tfunction __________GENERAL___________(){};\n\t\n\t\n\t/**\n\t * init the slider\n\t */\n\tfunction initSlider(objGallery, objOptions, optionsPrefix){\n\t\tg_gallery = objGallery;\n\t\t\t\t\n\t\t//change options by prefix\n\t\tif(optionsPrefix){\n\t\t\tg_optionsPrefix = optionsPrefix;\n\t\t\tobjOptions = g_functions.convertCustomPrefixOptions(objOptions, g_optionsPrefix, \"slider\");\n\t\t}\n\t\t\n\t\tg_objGallery = jQuery(objGallery);\n\t\t\n\t\tvar objects = g_gallery.getObjects();\t\t\n\t\tg_objWrapper = objects.g_objWrapper;\n\t\tg_objThumbs = objects.g_objThumbs;\n\t\t\n\t\t//set progress indicator bar defaults if type bar\n\t\tif(objOptions.hasOwnProperty(\"slider_progress_indicator_type\"))\n\t\t\tg_options.slider_progress_indicator_type = objOptions.slider_progress_indicator_type;\n\t\t\n\t\tif(g_options.slider_progress_indicator_type == \"bar\"){\n\t\t\tg_options = jQuery.extend(g_options, g_defaultsProgressBar);\n\t\t}\n\t\t\t\t\n\t\tif(objOptions)\n\t\t\tt.setOptions(objOptions);\n\t\t\n\t\tprocessOptions();\n\t\t\n\t\t//init bullets:\n\t\tif(g_options.slider_enable_bullets == true){\n\t\t\tg_objBullets = new UGBullets();\n\t\t\tvar bulletsOptions = {\n\t\t\t\t\tbullets_skin: g_options.slider_bullets_skin,\n\t\t\t\t\tbullets_space_between: g_options.slider_bullets_space_between\n\t\t\t}\n\t\t\tg_objBullets.init(g_gallery, bulletsOptions);\n\t\t}\n\t\t\n\t\t//init text panel\n\t\tif(g_options.slider_enable_text_panel){\n\t\t\tg_objTextPanel = new UGTextPanel();\n\t\t\tg_objTextPanel.init(g_gallery, g_options, \"slider\");\n\t\t}\n\t\t\n\t\tif(g_options.slider_enable_zoom_panel){\n\t\t\tg_objZoomPanel = new UGZoomButtonsPanel();\n\t\t\tg_objZoomPanel.init(t, g_options);\n\t\t}\n\t\t\n\t\tvar galleryID = g_gallery.getGalleryID();\n\t\t\n\t\t//init video player\n\t\tg_objVideoPlayer.init(g_options, false, galleryID);\t\t\n\t}\n\t\n\t\n\t/**\n\t * run the slider functionality\n\t */\n\tfunction runSlider(){\n\t\t\n\t\tif(g_temp.isRunOnce == true)\n\t\t\treturn(false);\n\t\t\n\t\tg_temp.isRunOnce = true;\n\t\t\n\t\t//set background color\n\t   if(g_options.slider_background_color){\t   \t\t\n\t\t   var bgColor = g_options.slider_background_color;\n\t\t   \n\t\t   if(g_options.slider_background_opacity != 1)\n\t\t\t   bgColor = g_functions.convertHexToRGB(bgColor, g_options.slider_background_opacity);\n\t\t   \n\t\t   g_objSlider.css(\"background-color\", bgColor);\n\t   \n\t   }else if(g_options.slider_background_opacity != 1){\t//set opacity with default color\n\t\t\n\t\t   bgColor = g_functions.convertHexToRGB(\"#000000\", g_options.slider_background_opacity);\n\t\t   g_objSlider.css(\"background-color\", bgColor);\n\t  \n\t   }\n\t   \n\t\t//init touch slider control\n\t\tif(g_options.slider_control_swipe == true){\n\t\t\tg_objTouchSlider = new UGTouchSliderControl();\n\t\t\tg_objTouchSlider.init(t, g_options);\n\t\t}\n\n\t\t//init zoom slider control\n\t\tif(g_options.slider_control_zoom == true){\n\t\t\tg_objZoomSlider = new UGZoomSliderControl();\n\t\t\tg_objZoomSlider.init(t, g_options);\n\t\t}\n\t\t\n\t\t//run the text panel\n\t\tif(g_objTextPanel)\n\t\t\tg_objTextPanel.run();\n\t\t\n\t\tinitEvents();\t\t\n\t}\n\t\n\t\n\t/**\n\t * process the options\n\t */\n\tfunction processOptions(){\n\t\tvar galleryOptions = g_gallery.getOptions();\n\t\t\n\t\t//set skins:\n\t\tvar globalSkin = galleryOptions.gallery_skin;\n\t\t\n\t\tif(g_options.slider_bullets_skin == \"\")\n\t\t\tg_options.slider_bullets_skin = globalSkin;\n\t\t\n\t\tif(g_options.slider_arrows_skin == \"\")\n\t\t\tg_options.slider_arrows_skin = globalSkin;\n\t\t\n\t\tif(g_options.slider_zoompanel_skin == \"\")\n\t\t\tg_options.slider_zoompanel_skin = globalSkin;\n\t\t\n\t\tif(g_options.slider_play_button_skin == \"\")\n\t\t\tg_options.slider_play_button_skin = globalSkin;\n\t\t\n\t\tif(g_options.slider_fullscreen_button_skin == \"\")\n\t\t\tg_options.slider_fullscreen_button_skin = globalSkin;\n\t\t\n\t\tg_options.video_enable_closebutton = g_options.slider_video_enable_closebutton;\n\t\t\n\t\t//set mousewheel option depends on the gallery option\n\t\tif(galleryOptions.gallery_mousewheel_role != \"zoom\")\n\t\t\tg_options.slider_zoom_mousewheel = false;\n\t\n\t}\n\t\n\t\n\t/**\n\t * \n\t * get html slide\n\t */\n\tfunction getHtmlSlide(loaderClass, numSlide){\n\t\t\n\t\tvar classVideoplay = \"ug-type-square\";\n\t\tif(g_options.slider_videoplay_button_type == \"round\")\n\t\t\tclassVideoplay = \"ug-type-round\";\n\t\t\n\t\tvar html = \"\";\n\t\thtml += \"<div class='ug-slide-wrapper ug-slide\"+numSlide+\"'>\";\n\t\thtml += \"<div class='ug-item-wrapper'></div>\";\n\t\thtml += \"<div class='ug-slider-preloader \"+loaderClass+\"'></div>\";\n\t\thtml += \"<div class='ug-button-videoplay \"+classVideoplay+\"' style='display:none'></div>\";\n\t\thtml += \"</div>\";\n\t\t\n\t\treturn(html);\n\t}\n\t\n\t\n\t/**\n\t * set the slider html\n\t */\n\tfunction setHtmlSlider(objParent){\n\t\t\n\t\tif(objParent)\n\t\t\tg_objWrapper = objParent;\n\t\t\n\t\t//get if the slide has controls\n\t\tvar loaderClass = getLoaderClass();\n\t\tvar galleryOptions = g_gallery.getOptions();\n\t\t\n\t\tvar html = \"<div class='ug-slider-wrapper'>\";\n\t\t\n\t\thtml += \"<div class='ug-slider-inner'>\";\n\t\thtml += getHtmlSlide(loaderClass,1);\n\t\thtml += getHtmlSlide(loaderClass,2);\n\t\thtml += getHtmlSlide(loaderClass,3);\n\t\t\t\t\n\t\thtml += \"</div>\";\t//end inner\n\t\t\n\t\t//----------------\n\t\t\t\t\n\t\t//add arrows\n\t\tif(g_options.slider_enable_arrows == true){\n\t\t\thtml += \"<div class='ug-slider-control ug-arrow-left ug-skin-\"+g_options.slider_arrows_skin+\"'></div>\";\n\t\t\thtml += \"<div class='ug-slider-control ug-arrow-right ug-skin-\"+g_options.slider_arrows_skin+\"'></div>\";\n\t\t}\n\t\t\n\t\t//add play button\n\t\tif(g_options.slider_enable_play_button == true){\n\t\t\thtml += \"<div class='ug-slider-control ug-button-play ug-skin-\"+g_options.slider_play_button_skin+\"'></div>\";\n\t\t}\n\t\t\n\t\t//add fullscreen button\n\t\tif(g_options.slider_enable_fullscreen_button == true){\n\t\t\thtml += \"<div class='ug-slider-control ug-button-fullscreen ug-skin-\"+g_options.slider_fullscreen_button_skin+\"'></div>\";\n\t\t}\n\t\t\n\t\t\n\t\thtml +=\t\"</div>\";\t//end slider\n\t\t\n\t\t\n\t\tg_objWrapper.append(html);\n\t\t\n\t\t//----------------\n\t\t\n\t\t//set objects\n\t\tg_objSlider = g_objWrapper.children(\".ug-slider-wrapper\");\n\t\tg_objInner = g_objSlider.children(\".ug-slider-inner\");\n\t\t\n\t\t\n\t\tg_objSlide1 = g_objInner.children(\".ug-slide1\");\n\t\tg_objSlide2 = g_objInner.children(\".ug-slide2\");\n\t\tg_objSlide3 = g_objInner.children(\".ug-slide3\");\n\t\t\n\t\t//set slides data\n\t\tg_objSlide1.data(\"slidenum\",1);\n\t\tg_objSlide2.data(\"slidenum\",2);\n\t\tg_objSlide3.data(\"slidenum\",3);\n\t\t\t\t\n\t\t//add bullets\n\t\tif(g_objBullets)\n\t\t\tg_objBullets.appendHTML(g_objSlider);\n\t\t\n\t\t//----------------\n\t\t\n\t\t//get arrows object\n\t\tif(g_options.slider_enable_arrows == true){\n\t\t\tg_objArrowLeft = g_objSlider.children(\".ug-arrow-left\");\n\t\t\tg_objArrowRight = g_objSlider.children(\".ug-arrow-right\");\n\t\t}\n\t\t\t\t\n\t\t//get play button\n\t\tif(g_options.slider_enable_play_button == true){\n\t\t\tg_objButtonPlay = g_objSlider.children(\".ug-button-play\");\n\t\t}\n\t\t\n\t\t//get fullscreen button\n\t\tif(g_options.slider_enable_fullscreen_button == true){\n\t\t\tg_objButtonFullscreen = g_objSlider.children(\".ug-button-fullscreen\");\n\t\t}\n\t\t\n\t\t\n\t\t//----------------\n\t\t\n\t\t//add progress indicator\n\t\tif(g_options.slider_enable_progress_indicator == true){\n\t\t\t\n\t\t\tg_objProgress = g_functions.initProgressIndicator(g_options.slider_progress_indicator_type, g_options, g_objSlider);\n\t\t\t\n\t\t\tvar finalType = g_objProgress.getType();\n\t\t\t\n\t\t\t//change options in case of type change\n\t\t\tif(finalType == \"bar\" && g_options.slider_progress_indicator_type == \"pie\"){\n\t\t\t\tg_options.slider_progress_indicator_type = \"bar\";\n\t\t\t\tg_options = jQuery.extend(g_options, g_defaultsProgressBar);\n\t\t\t}\t\n\t\t\t\n\t\t\tg_gallery.setProgressIndicator(g_objProgress);\n\t\t}\n\t\t\n\t\t//----------------\n\t\t\n\t\t//add text panel (hidden)\n\t\tif(g_options.slider_enable_text_panel == true){\n\t\t\t\n\t\t\t\tg_objTextPanel.appendHTML(g_objSlider);\n\t\t\t\t\t\t\t\t\n\t\t\t\t//hide panel saparatelly from the controls object\n\t\t\t\tif(g_options.slider_textpanel_always_on == false){\n\t\t\t\t\t\n\t\t\t\t\t//hide the panel\n\t\t\t\t\tvar panelElement = g_objTextPanel.getElement();\n\t\t\t\t\tpanelElement.hide().data(\"isHidden\", true);\n\t\n\t\t\t\t\tg_temp.isTextPanelSaparateHover = true;\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\n\t\t}\n\t\t\t\n\t\t//----------------\n\t\t\n\t\t//add zoom buttons panel:\n\t\tif(g_options.slider_enable_zoom_panel == true){\n\t\t\tg_objZoomPanel.appendHTML(g_objSlider);\n\t\t}\n\t\n\t\t\n\t\t//add video player\n\t\tg_objVideoPlayer.setHtml(g_objInner);\n\t}\n\t\n\t\n\t/**\n\t * position elements that related to slide\n\t */\n\tfunction positionSlideElements(objSlide){\n\t\t\n\t\t//position preloader\n\t\tvar objPreloader = getSlidePreloader(objSlide);\n\t\tg_functions.placeElementInParentCenter(objPreloader);\n\t\t\n\t\t//position video play button\n\t\tvar objVideoPlayButton = getSlideVideoPlayButton(objSlide);\n\t\tg_functions.placeElementInParentCenter(objVideoPlayButton);\t\t\n\t}\n\t\n\t\n\t/**\n\t * position elements\n\t */\n\tfunction positionElements(){\n\t\t\n\t\t//place bullets\n\t\tif(g_objBullets){\n\t\t\tobjBullets = g_objBullets.getElement();\n\t\t\t\n\t\t\t//strange bug fix (bullets width: 20) by double placing\n\t\t\tg_functions.placeElement(objBullets, g_options.slider_bullets_align_hor, g_options.slider_bullets_align_vert, g_options.slider_bullets_offset_hor, g_options.slider_bullets_offset_vert);\n\t\t\tg_functions.placeElement(objBullets, g_options.slider_bullets_align_hor, g_options.slider_bullets_align_vert, g_options.slider_bullets_offset_hor, g_options.slider_bullets_offset_vert);\n\t\t\t\n\t\t}\n\t\t\n\t\t//place arrows\n\t\tif(g_options.slider_enable_arrows == true){\n\t\t\tg_functions.placeElement(g_objArrowLeft, g_options.slider_arrow_left_align_hor, g_options.slider_arrow_left_align_vert, g_options.slider_arrow_left_offset_hor, g_options.slider_arrow_left_offset_vert);\n\t\t\tg_functions.placeElement(g_objArrowRight, g_options.slider_arrow_right_align_hor, g_options.slider_arrow_left_align_vert, g_options.slider_arrow_right_offset_hor, g_options.slider_arrow_right_offset_vert);\n\t\t}\n\t\t\n\t\t//hide controls\n\t\tif(g_options.slider_controls_always_on == false)\n\t\t\thideControls(true);\n\t\t\n\t\t//place progress indicator\n\t\tif(g_objProgress){\n\t\t\t\n\t\t\tvar objProgressElement = g_objProgress.getElement();\n\t\t\t\n\t\t\tif(g_options.slider_progress_indicator_type == \"bar\"){\n\t\t\t\tvar sliderWidth = g_objSlider.width();\t\t\t\t\n\t\t\t\tg_objProgress.setSize(sliderWidth);\n\t\t\t\tg_functions.placeElement(objProgressElement, \"left\", g_options.slider_progress_indicator_align_vert, 0, g_options.slider_progress_indicator_offset_vert);\t\t\t\t\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\tg_functions.placeElement(objProgressElement, g_options.slider_progress_indicator_align_hor, g_options.slider_progress_indicator_align_vert, g_options.slider_progress_indicator_offset_hor, g_options.slider_progress_indicator_offset_vert);\t\t\t\t\n\t\t\t\t\n\t\t\t}\t\t\t\n\t\t}\n\t\t\t\t\n\t\t//position text panel\n\t\tif(g_objTextPanel)\n\t\t\tg_objTextPanel.positionPanel();\n\t\t\n\t\t//position controls elements\n\t\tplaceControlsElements();\n\t\t\n\t\t//place slide elements\n\t\tpositionSlideElements(g_objSlide1);\n\t\tpositionSlideElements(g_objSlide2);\n\t\tpositionSlideElements(g_objSlide3);\n\t\t\n\t\tcheckMobileModify();\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * place elements that located on \"controls\" div\n\t */\n\tfunction placeControlsElements(){\n\t\t\n\t\tif(g_objButtonPlay)\t\t\t\n\t\t\tg_functions.placeElement(g_objButtonPlay, g_options.slider_play_button_align_hor, g_options.slider_play_button_align_vert, g_options.slider_play_button_offset_hor, g_options.slider_play_button_offset_vert);\t\t\t\n\t\t\n\t\t//position fullscreen button\n\t\tif(g_objButtonFullscreen)\t\t\t\n\t\t\tg_functions.placeElement(g_objButtonFullscreen, g_options.slider_fullscreen_button_align_hor, g_options.slider_fullscreen_button_align_vert, g_options.slider_fullscreen_button_offset_hor, g_options.slider_fullscreen_button_offset_vert);\n\t\t\n\t\t//position zoom panel\n\t\tif(g_objZoomPanel){\n\t\t\tvar zoomPanelElement = g_objZoomPanel.getElement();\n\t\t\tg_functions.placeElement(zoomPanelElement, g_options.slider_zoompanel_align_hor, g_options.slider_zoompanel_align_vert, g_options.slider_zoompanel_offset_hor, g_options.slider_zoompanel_offset_vert);\n\t\t}\n\t}\n\t\n\t\n\t\t\n\t/**\n\t * position slides by their order\n\t */\n\tfunction positionSlides(){\n\t\t\n\t\tvar slides = t.getSlidesReference();\n\t\tvar posX = 0, posY = 0, innerWidth;\n\t\tvar posXPrev=0, posXCurrent = 0, posXNext, nextHasItem, prevHasItem;\n\t\t\t\t\n\t\tnextHasItem = t.isSlideHasItem(slides.objNextSlide);\n\t\tprevHasItem = t.isSlideHasItem(slides.objPrevSlide);\n\t\t\n\t\tif(prevHasItem){\n\t\t\tposXCurrent = slides.objPrevSlide.outerWidth();\n\t\t\tslides.objPrevSlide.css(\"z-index\",1);\n\t\t}else\n\t\t\tslides.objPrevSlide.hide();\t\t\t\n\t\t\n\t\tposXNext = posXCurrent + slides.objCurrentSlide.outerWidth();\n\t\t\n\t\tinnerWidth = posXNext;\n\t\tif(nextHasItem){\n\t\t\tinnerWidth = posXNext + slides.objNextSlide.outerWidth();\n\t\t\tslides.objPrevSlide.css(\"z-index\",2);\t\t\n\t\t}else\n\t\t\tslides.objNextSlide.hide();\n\t\t\n\t\tslides.objCurrentSlide.css(\"z-index\",3);\n\t\t\n\t\t//set inner size and position\n\t\tg_functions.placeElement(slides.objCurrentSlide, posXCurrent, posY);\t\t\n\t\tg_objInner.css({\"left\":-posXCurrent+\"px\", width:innerWidth+\"px\"});\n\n\t\t//position prev\n\t\tif(prevHasItem){\n\t\t\tg_functions.placeElement(slides.objPrevSlide, posXPrev, posY);\n\t\t\tg_functions.showElement(slides.objPrevSlide);\n\t\t}\n\t\t\n\t\tif(nextHasItem){\n\t\t\tg_functions.showElement(slides.objNextSlide);\n\t\t\tg_functions.placeElement(slides.objNextSlide, posXNext, posY);\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t\n\t/**\n\t * resize the slide image inside item\n\t */\n\tfunction resizeSlideItem(objSlide){\n\t\tvar index = objSlide.data(\"index\");\n\t\tif(index === undefined || index == null)\n\t\t\treturn(false);\n\t\t\n\t\tvar objItem = g_gallery.getItem(index);\n\t\t\n\t\tif(!objItem)\n\t\t\treturn(false);\n\t\t\n\t\tsetItemToSlide(objSlide, objItem);\n\t}\n\t\n\t\n\t/**\n\t * show the preloader\n\t * show the index, so only the current index load will hide.\n\t */\t\n\tfunction showPreloader(objPreloader){\n\t\t\n\t\tobjPreloader.stop(true).show(100);\n\t\n\t}\n\t\n\t/**\n\t * hide the preloader\n\t */\n\tfunction hidePreloader(objPreloader){\n\t\t\n\t\tobjPreloader.stop(true).hide(100);\n\t}\n\t\n\t/**\n\t * get proper image border width\n\t */\n\tfunction getImageBorderWidth(objImage, imageData){\n\t\t\n\t\tvar borderWidth = g_options.slider_image_border_width;\n\t\t\n\t\tif(borderWidth <= 10)\n\t\t\treturn(borderWidth);\n\n\t\t//set image size\n\t\tvar imageSize = g_functions.getElementSize(objImage);\n\t\tvar imageWidth = imageSize.width;\n\t\tvar imageHeight = imageSize.height;\n\t\t\n\t\tif(imageData){\n\t\t\tif(imageData.hasOwnProperty(\"imageWidth\"))\n\t\t\t\timageWidth = imageData.imageWidth;\n\t\t\t\n\t\t\tif(imageData.hasOwnProperty(\"imageHeight\"))\n\t\t\t\timageHeight = imageData.imageHeight;\n\t\t\t\n\t\t}\n\t\t\n\t\tif(imageWidth <= 0)\n\t\t\treturn(borderWidth);\n\t\t\n\t\t//take the less size\n\t\tvar totalSize = (imageWidth < imageHeight)?imageWidth:imageHeight;\n\t\tvar borderSize = borderWidth * 2;\n\t\t\n\t\tvar borderRatio = borderSize / totalSize;\n\t\t\n\t\tif(borderRatio < g_options.slider_image_border_maxratio)\n\t\t\treturn(borderWidth);\n\t\t\n\t\t//change border width\t\t\n\t\tvar borderWidth = (totalSize * g_options.slider_image_border_maxratio)/2; \n\t\t\n\t\tborderWidth = Math.round(borderWidth);\n\t\t\n\t\treturn(borderWidth);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * set slider image css design according the settings\n\t */\n\tfunction setImageDesign(objImage, slideType, imageData){\n\t\t\n\t\tvar css = {};\n\t\tif(g_options.slider_image_border == true){\n\t\t\tcss[\"border-style\"] = \"solid\";\n\t\t\t\n\t\t\tvar borderWidth = getImageBorderWidth(objImage, imageData);\n\t\t\t\n\t\t\tcss[\"border-width\"] = borderWidth+\"px\";\n\t\t\tcss[\"border-color\"] = g_options.slider_image_border_color;\n\t\t\tcss[\"border-radius\"] = g_options.slider_image_border_radius;\n\t\t}\n\t\t\n\t\tif(slideType != \"image\" && g_options.slider_video_constantsize == true)\n\t\t\tcss[\"background-color\"] = \"#000000\";\n\t\t\n\t\tif(g_options.slider_image_shadow == true){\n\t\t\tcss[\"box-shadow\"] = \"3px 3px 10px 0px #353535\";\n\t\t}\n\t\t\n\t\tobjImage.css(css);\n\t}\n\t\n\t\n\t/**\n\t * scale image constant size (for video items)\n\t */\n\tfunction scaleImageConstantSize(objImage, objItem){\n\t\t\n\t\tvar constantWidth = g_options.slider_video_constantsize_width;\n\t\tvar constantHeight = g_options.slider_video_constantsize_height;\n\t\tvar scaleMode = g_options.slider_video_constantsize_scalemode;\n\t\t\n\t\tvar objSize = g_functions.scaleImageExactSizeInParent(objImage, objItem.imageWidth, objItem.imageHeight, constantWidth, constantHeight, scaleMode);\n\t\t\n\t\t\n\t\treturn(objSize);\n\t}\n\n\t\n\t/**\n\t * \n\t * set item to slide\n\t */\n\tfunction setImageToSlide(objSlide, objItem, isForce){\n\t\t\n\t\tvar objItemWrapper = objSlide.children(\".ug-item-wrapper\");\n\t\t\n\t\tvar objPreloader = getSlidePreloader(objSlide);\n\t\t\n\t\tif(typeof objItem.urlImage == \"undefined\" || objItem.urlImage == \"\")\n\t\t\tthrow new Error(\"The slide don't have big image defined ( data-image='imageurl' ). Please check gallery items.\", \"showbig\");\n\t\t\n\t\tvar urlImage = objItem.urlImage;\n\t\t\n\t\tvar currentImage = objSlide.data(\"urlImage\");\n\t\t\t\t\n\t\tobjSlide.data(\"urlImage\",urlImage);\n\t\t\n\t\tvar scaleMode = t.getScaleMode(objSlide);\n\t\t\n\t\tvar slideType = t.getSlideType(objSlide);\n\t\t\n\t\tobjPadding = t.getObjImagePadding();\n\t\t\n\t\t\n\t\tif(currentImage == urlImage && isForce !== true){\n\t\t\t\n\t\t\tvar objImage = objItemWrapper.children(\"img\");\n\t\t\t\t\t\t\n\t\t\tif(objItem.imageWidth == 0 || objItem.imageHeight == 0){\n\t\t\t\tg_gallery.checkFillImageSize(objImage, objItem);\n\t\t\t}\n\t\t\t\n\t\t\tvar objImageData = {};\n\t\t\t\n\t\t\tif(slideType != \"image\" && g_options.slider_video_constantsize == true){\n\t\t\t\tobjImageData = scaleImageConstantSize(objImage, objItem);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tobjImageData = g_functions.scaleImageFitParent(objImage, objItem.imageWidth, objItem.imageHeight, scaleMode, objPadding);\n\t\t\t}\n\t\t\t\n\t\t\tsetImageDesign(objImage, slideType, objImageData);\n\t\t\tg_objThis.trigger(t.events.AFTER_PUT_IMAGE, objSlide);\n\t\t\t\n\t\t}\n\t\telse{\t\t//place the image inside parent first time\n\t\t\t\n\t\t\tobjImage = g_functions.placeImageInsideParent(urlImage, objItemWrapper, objItem.imageWidth, objItem.imageHeight, scaleMode, objPadding);\n\t\t\t\n\t\t\t//set image loaded on load:\n\t\t\tif(objItem.isBigImageLoaded == true){\n\t\t\t\tobjImage.fadeTo(0,1);\n\t\t\t\thidePreloader(objPreloader);\n\t\t\t\t\n\t\t\t\tif(slideType != \"image\" && g_options.slider_video_constantsize == true)\n\t\t\t\t\tvar objImageData = scaleImageConstantSize(objImage, objItem);\n\t\t\t\telse\n\t\t\t\t\tvar objImageData = g_functions.getImageInsideParentData(objItemWrapper, objItem.imageWidth, objItem.imageHeight, scaleMode, objPadding);\n\t\t\t\t\n\t\t\t\t//set missing css width\n\t\t\t\tobjImage.css(\"width\",objImageData.imageWidth+\"px\");\n\t\t\t\t\t\t\n\t\t\t\tsetImageDesign(objImage, slideType, objImageData);\n\t\t\t\t\n\t\t\t\tg_objThis.trigger(t.events.AFTER_PUT_IMAGE, objSlide);\n\t\t\t}\n\t\t\telse{\t\t//if the image not loaded, load the image and show it after.\n\t\t\t\tobjImage.fadeTo(0,0);\n\t\t\t\tshowPreloader(objPreloader);\n\t\t\t\tobjSlide.data(\"isLoading\", true);\n\t\t\t\t\n\t\t\t\tif(t.isSlideCurrent(objSlide))\n\t\t\t\t\tg_objThis.trigger(t.events.CURRENTSLIDE_LOAD_START);\n\t\t\t\t\n\t\t\t\tobjImage.data(\"itemIndex\", objItem.index);\n\t\t\t\tobjImage.on(\"load\",function(){\n\t\t\t\t\t\n\t\t\t\t\t//place the image normally with coordinates\n\t\t\t\t\tvar objImage = jQuery(this);\n\t\t\t\t\tvar itemIndex = objImage.data(\"itemIndex\");\n\t\t\t\t\t\n\t\t\t\t\tobjImage.fadeTo(0,1);\n\t\t\t\t\t\n\t\t\t\t\t//get and hide preloader\n\t\t\t\t\tvar objSlide = objImage.parent().parent();\n\t\t\t\t\tvar slideType = t.getSlideType(objSlide);\n\t\t\t\t\tvar objPreloader = getSlidePreloader(objSlide);\n\t\t\t\t\tvar objPadding = t.getObjImagePadding();\n\t\t\t\t\tvar scaleMode = t.getScaleMode(objSlide);\n\t\t\t\t\t\n\t\t\t\t\thidePreloader(objPreloader);\n\t\t\t\t\tobjSlide.data(\"isLoading\", false);\n\t\t\t\t\t\n\t\t\t\t\tif(t.isSlideCurrent(objSlide))\n\t\t\t\t\t\tg_objThis.trigger(t.events.CURRENTSLIDE_LOAD_END);\n\t\t\t\t\t\n\t\t\t\t\tg_gallery.onItemBigImageLoaded(null, objImage);\n\t\t\t\t\t\n\t\t\t\t\tvar objItem = g_gallery.getItem(itemIndex);\n\t\t\t\t\t\n\t\t\t\t\tvar objImageData = {};\n\t\t\t\t\t\n\t\t\t\t\tif(slideType != \"image\" && g_options.slider_video_constantsize == true)\n\t\t\t\t\t\tscaleImageConstantSize(objImage, objItem);\n\t\t\t\t\telse{\n\t\t\t\t\t\tobjImageData = g_functions.scaleImageFitParent(objImage, objItem.imageWidth, objItem.imageHeight, scaleMode, objPadding);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tobjImage.fadeTo(0,1);\n\t\t\t\t\t\n\t\t\t\t\tsetImageDesign(objImage, slideType, objImageData);\n\t\t\t\t\t\n\t\t\t\t\tg_objThis.trigger(t.events.AFTER_PUT_IMAGE, objSlide);\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\t\n\t}\n\t\n\t\t\n\t\n\t/**\n\t * set slider image by url\n\t * if item not set, get current slide item\n\t */\n\tfunction setItemToSlide(objSlide, objItem){\n\t\t\n\t\ttry{\n\n\t\t\tvar objItemWrapper = objSlide.children(\".ug-item-wrapper\");\n\t\t\t\t\t\n\t\t\t//if the item is empty, remove the image from slide\n\t\t\tif(objItem == null){\n\t\t\t\tobjItemWrapper.html(\"\");\n\t\t\t\tobjSlide.removeData(\"index\");\n\t\t\t\tobjSlide.removeData(\"type\");\n\t\t\t\tobjSlide.removeData(\"urlImage\");\n\t\t\t\treturn(false);\n\t\t\t}\n\t\t\t\n\t\t\tvar currentIndex = objSlide.data(\"index\");\n\t\t\t\n\t\t\tobjSlide.data(\"index\",objItem.index);\n\t\t\tobjSlide.data(\"type\", objItem.type);\n\t\t\t\n\t\t\t//set link class\n\t\t\tif(g_options.slider_enable_links == true && objItem.type == \"image\"){\n\t\t\t\t\n\t\t\t\tif(objItem.link)\n\t\t\t\t\tobjSlide.addClass(\"ug-slide-clickable\");\n\t\t\t\telse\n\t\t\t\t\tobjSlide.removeClass(\"ug-slide-clickable\");\n\t\t\t}\n\t\t\t\n\t\t\tsetImageToSlide(objSlide, objItem);\n\t\t\t\n\t\t\t//show type related elements\n\t\t\tvar objVideoPlayButton = getSlideVideoPlayButton(objSlide);\n\t\t\tswitch(objItem.type){\n\t\t\t\tcase \"image\":\n\t\t\t\t\tobjVideoPlayButton.hide();\n\t\t\t\tbreak;\n\t\t\t\tdefault:\t\t//video\n\t\t\t\t\tobjVideoPlayButton.show();\t\t\t\t\t\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t}catch(error){\n\t\t\t\n\t\t\tif(typeof error.fileName != \"undefined\" && error.fileName == \"showbig\")\n\t\t\t\tg_gallery.showErrorMessageReplaceGallery(error.message);\n\t\t\t\n\t\t\tobjItemWrapper.html(\"\");\n\t\t\tthrow new Error(error);\n\t\t\treturn(true);\n\t\t}\n\t\t\n\t}\t\n\t\n\t\n\t\n\t/**\n\t * hide the panel\n\t */\n\tfunction hideTextPanel(){\n\t\t\n\t\tif(!g_objTextPanel)\n\t\t\treturn(false);\n\t\t\n\t\tif(isTextPanelHidden() == true)\n\t\t\treturn(false);\n\t\t\n\t\tvar panelElement = g_objTextPanel.getElement();\n\t\n\t\tvar animationTime = 0;\n\t\tif(g_temp.isTextPanelSaparateHover == true || g_options.slider_textpanel_always_on == true){\n\t\t\tanimationTime = g_options.slider_controls_appear_duration;\n\t\t}\n\t\t\n\t\tpanelElement.stop().fadeTo(animationTime, 0);\n\t\t\n\t\tpanelElement.data(\"isHidden\", true);\n\t}\n\t\n\t\n\t/**\n\t * show the text panel\n\t */\n\tfunction showTextPanel(){\n\t\t\n\t\tif(!g_objTextPanel)\n\t\t\treturn(false);\n\t\t\n\t\tif(isTextPanelHidden() == false)\n\t\t\treturn(false);\n\t\t\n\t\tvar panelElement = g_objTextPanel.getElement();\n\t\t\n\t\tvar animationTime = 0;\n\t\t\n\t\tif(g_temp.isTextPanelSaparateHover == true || g_options.slider_textpanel_always_on == true){\n\t\t\t\n\t\t\tpanelElement.show();\n\t\t\tg_objTextPanel.positionElements();\n\t\t\t\n\t\t\tanimationTime = g_options.slider_controls_appear_duration;\n\t\t}\n\t\t\n\t\tpanelElement.stop().show().fadeTo(animationTime,1);\n\t\t\n\t\tpanelElement.data(\"isHidden\", false);\n\t\t\t\t\n\t}\n\t\n\t\n\t/**\n\t * check if the text panel is hidden or not\n\t */\n\tfunction isTextPanelHidden(){\n\n\t\tvar panelElement = g_objTextPanel.getElement();\n\n\t\tvar isHidden = panelElement.data(\"isHidden\");\n\t\tif(isHidden === false)\n\t\t\treturn(false);\n\t\t\n\t\treturn(true);\t\t\n\t}\t\n\t\n\t\n\t/**\n\t * validate that the slide is certain type, if not, throw error\n\t */\n\tfunction validateSlideType(type, objSlide){\n\t\tif(objSlide == undefined)\n\t\t\tvar objSlide = t.getCurrentSlide();\n\t\t\n\t\tvar slideType = t.getSlideType(objSlide);\n\t\t\t\t\n\t\tif(slideType != type){\n\t\t\tthrow new Error(\"Wrong slide type: \"+ slideType +\", should be: \"+type);\n\t\t\treturn(false);\n\t\t}\n\t\t\n\t\treturn(true);\n\t}\n\t\n\tfunction __________VIDEO_PLAYER_______(){};\n\n\t\n\t\n\t/**\n\t * set video player position\n\t */\n\tfunction setVideoPlayerPosition(){\n\t\t\n\t\tvar objCurrentSlide = t.getCurrentSlide();\n\t\tvar objImage = t.getSlideImage(objCurrentSlide);\n\t\t\n\t\tvar slideSize = g_functions.getElementSize(objCurrentSlide);\n\t\tvar left = slideSize.left;\n\t\tvar top = slideSize.top;\n\t\t\t\t\n\t\t//set by image position\n\t\tif(g_options.slider_video_constantsize == true){\n\t\t\t\n\t\t\tvar imageSize = g_functions.getElementSize(objImage);\n\t\t\tleft += imageSize.left;\n\t\t\ttop += imageSize.top;\n\t\t\t\n\t\t}else{\t//set video padding\n\t\t\t\n\t\t\tleft += g_options.slider_video_padding_left;\n\t\t\ttop += g_options.slider_video_padding_top;\n\t\t\n\t\t}\n\t\t\n\t\tg_objVideoPlayer.setPosition(left, top);\n\t}\n\t\n\t\n\t/**\n\t * set video player constant size\n\t */\n\tfunction setVideoPlayerConstantSize(){\n\t\t\n\t\tvar videoWidth = g_options.slider_video_constantsize_width;\n\t\tvar videoHeight = g_options.slider_video_constantsize_height;\n\t\t\n\t\tg_objVideoPlayer.setSize(videoWidth, videoHeight);\n\t\t\n\t\t//set video design\n\t\tvar videoElement = g_objVideoPlayer.getObject();\n\t\t\n\t\tsetImageDesign(videoElement, \"video\");\n\t}\n\t\n\t\n\tfunction __________TRANSITION_______(){};\n\n\t\n\t\n\t/**\n\t * do the transition between the current and the next\n\t */\n\tfunction doTransition(direction, objItem, forceTransition){\n\t\t\n\t\tg_objThis.trigger(t.events.TRANSITION_START);\n\t\t\n\t\tvar transition = g_options.slider_transition;\n\t\tif(forceTransition)\n\t\t\ttransition = forceTransition;\n\n\t\t//stop current slide action\n\t\tt.stopSlideAction(null, true);\n\t\t\n\t\tswitch(transition){\n\t\t\tdefault:\n\t\t\tcase \"fade\":\n\t\t\t\ttransitionFade(objItem);\n\t\t\tbreak;\n\t\t\tcase \"slide\":\t\t\t\t\n\t\t\t\ttransitionSlide(direction, objItem);\n\t\t\tbreak;\n\t\t\tcase \"lightbox_open\":\t\t//fade transition without animation\n\t\t\t\ttransitionFade(objItem, false, true);\n\t\t\tbreak;\n\t\t}\n\t\t\n\t}\n\n\t\n\t/**\n\t * switch slide numbers after transition (by direction)\n\t * \n\t */\n\tthis.switchSlideNums = function(direction){\n\t\t\n\t\t//trigger item changed effect\n\t\tg_objThis.trigger(t.events.BEFORE_SWITCH_SLIDES);\n\t\t\n\t\tswitch(direction){\n\t\t\tcase \"left\":\n\t\t\t\tvar currentNum = g_temp.numCurrent;\n\t\t\t\tg_temp.numCurrent = g_temp.numNext;\n\t\t\t\tg_temp.numNext = g_temp.numPrev;\n\t\t\t\tg_temp.numPrev = currentNum;\n\t\t\tbreak;\n\t\t\tcase \"right\":\n\t\t\t\tvar currentNum = g_temp.numCurrent;\n\t\t\t\tg_temp.numCurrent = g_temp.numPrev;\n\t\t\t\tg_temp.numPrev = g_temp.numNext;\n\t\t\t\tg_temp.numNext = currentNum;\t\t\t\t\n\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow new Error(\"wrong direction: \"+ direction);\n\t\t\tbreak;\n\t\t}\n\t\t\n\t\t//trace(g_temp.numCurrent);\n\t\t\n\t\t//trigger item changed effect\n\t\tg_objThis.trigger(t.events.ITEM_CHANGED);\n\t}\n\t\n\t\n\t/**\n\t * do slide transition\n\t */\n\tfunction transitionSlide(direction, objItem){\n\t\t\n\t\tvar animating = t.isAnimating();\n\n\t\tif(animating == true){\n\t\t\tg_temp.itemWaiting = objItem;\n\t\t\treturn(true);\n\t\t}\n\t\t\n\t\t//always clear next item on transition start\n\t\t// next item can be only in the middle of the transition.\n\t\tif(g_temp.itemWaiting != null)\n\t\t\tg_temp.itemWaiting = null;\n\t\t\n\t\tvar slides = t.getSlidesReference();\n\t\t\n\t\t\n\t\tswitch(direction){\n\t\t\tcase \"right\":\t//change to prev item\n\t\t\t\tsetItemToSlide(slides.objPrevSlide, objItem);\n\t\t\t\tpositionSlides();\n\t\t\t\t\n\t\t\t\tvar posPrev = g_functions.getElementSize(slides.objPrevSlide);\n\t\t\t\tvar destX = -posPrev.left;\n\t\t\t\t\n\t\t\t\tt.switchSlideNums(\"right\");\n\t\t\t\t\n\t\t\tbreak;\t\n\t\t\tcase \"left\":\t\t//change to next item\n\t\t\t\tsetItemToSlide(slides.objNextSlide, objItem);\n\t\t\t\tpositionSlides();\n\t\t\t\t\n\t\t\t\tvar posNext = g_functions.getElementSize(slides.objNextSlide);\n\t\t\t\tvar destX = -posNext.left;\n\t\t\t\t\n\t\t\t\tt.switchSlideNums(\"left\");\n\t\t\t\t\n\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow new Error(\"wrong direction: \"+direction);\n\t\t\tbreak;\n\t\t}\n\t\t\t\t\n\t\tvar transSpeed = g_options.slider_transition_speed;\n\t\tvar transEasing = g_options.slider_transition_easing;\n\n\t\t\n\t\tvar animateParams = {\n\t\t\t\tduration: transSpeed,\n\t\t\t\teasing: transEasing,\n\t\t\t\tqueue: false,\n\t\t\t\talways:function(){\n\t\t\t\t\t\t\n\t\t\t\t\t\tt.stopSlideAction();\n\t\t\t\t\t\tg_objVideoPlayer.hide();\n\t\t\t\t\t\t\n\t\t\t\t\t\t//transit next item if waiting\n\t\t\t\t\t\tif(g_temp.itemWaiting != null){\n\t\t\t\t\t\t\tvar direction = getSlideDirection(g_temp.itemWaiting);\n\t\t\t\t\t\t\ttransitionSlide(direction, g_temp.itemWaiting);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t//if no item waiting, please neighbour items in places\n\t\t\t\t\t\t\tt.placeNabourItems();\n\t\t\t\t\t\t\tg_objThis.trigger(t.events.TRANSITION_END);\n\t\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n\t\t};\n\t\t\n\t\t\n\t\tg_objInner.animate({left:destX+\"px\"}, animateParams);\n\t\t\t\n\t}\n\t\n\t\n\t/**\n\t * \n\t * animate opacity in and out\n\t */\n\tfunction animateOpacity(objItem, opacity, completeFunction){\n\t\t\n\t\tif(completeFunction)\n\t\t\tobjItem.fadeTo(g_options.slider_transition_speed, opacity, completeFunction);\n\t\telse\n\t\t\tobjItem.fadeTo(g_options.slider_transition_speed, opacity);\n\t}\n\t\n\t\n\t/**\n\t * do fade transition\n\t */\n\tfunction transitionFade(objItem, noAnimation, noHidePlayer){\n\t\t\n\t\tif(!noAnimation)\n\t\t\tvar noAnimation = false;\n\t\t\n\t\tvar slides = t.getSlidesReference();\n\t\t \n\t\tsetItemToSlide(slides.objNextSlide, objItem);\n\t\t\n\t\tvar objCurrentPos = g_functions.getElementSize(slides.objCurrentSlide);\n\t\t\t\t\n\t\tg_functions.placeElement(slides.objNextSlide,objCurrentPos.left,objCurrentPos.top);\n\t\t\n\t\t//switch slide nums\n\t\tvar currentNum = g_temp.numCurrent;\n\t\tg_temp.numCurrent = g_temp.numNext;\n\t\tg_temp.numNext = currentNum;\n\t\t\n\t\tg_objThis.trigger(t.events.ITEM_CHANGED);\n\t\t\n\t\tslides.objNextSlide.stop(true);\t\t\n\t\tslides.objCurrentSlide.stop(true);\n\t\t\n\t\tif(noAnimation == true){\n\t\t\t\n\t\t\tslides.objCurrentSlide.fadeTo(0, 0);\n\t\t\tslides.objNextSlide.fadeTo(0, 1);\t\n\t\t\tt.placeNabourItems();\n\t\t\tg_objThis.trigger(t.events.TRANSITION_END);\n\t\t\t\n\t\t\tif(noHidePlayer !== true)\n\t\t\t\tg_objVideoPlayer.hide();\n\t\t\n\t\t}else{\n\t\t\tslides.objNextSlide.fadeTo(0,0);\t\n\t\t\t\n\t\t\tanimateOpacity(slides.objCurrentSlide,0,function(){\n\t\t\t\tt.placeNabourItems();\n\t\t\t\tg_objThis.trigger(t.events.TRANSITION_END);\n\t\t\t\tif(noHidePlayer !== true)\n\t\t\t\t\tg_objVideoPlayer.hide();\n\t\t\t});\n\t\t\t\n\t\t\tif(g_objVideoPlayer.isVisible() == true){\n\t\t\t\tvar videoElement = g_objVideoPlayer.getObject();\n\t\t\t\tanimateOpacity(videoElement, 0);\n\t\t\t}\n\t\t\t\n\t\t\t//animate to next show next\n\t\t\tanimateOpacity(slides.objNextSlide,1);\t\t\t\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t\n\t\n\tfunction __________CONTROLS_OBJECT_______(){};\n\t\n\t/**\n\t * modify the slider for mobile\n\t */\n\tfunction modifyForMobile(){\n\t\t\n\t\tif(g_options.slider_fullscreen_button_mobilehide == true && g_objButtonFullscreen)\n\t\t\tg_objButtonFullscreen.hide();\n\t\t\n\t\tif(g_options.slider_play_button_mobilehide == true && g_objButtonPlay)\n\t\t\tg_objButtonPlay.hide();\n\t\t\n\t\tif(g_options.slider_zoompanel_mobilehide == true && g_objZoomPanel)\n\t\t\tg_objZoomPanel.getElement().hide();\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * modify for no mobile\n\t */\n\tfunction modifyForDesctop(){\n\t\t\n\t\tif(g_options.slider_fullscreen_button_mobilehide == true && g_objButtonFullscreen)\n\t\t\tg_objButtonFullscreen.show();\n\n\t\tif(g_options.slider_play_button_mobilehide == true && g_objButtonPlay)\n\t\t\tg_objButtonPlay.show();\n\t\t\n\t\tif(g_options.slider_zoompanel_mobilehide == true && g_objZoomPanel)\n\t\t\tg_objZoomPanel.getElement().show();\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * check and modify for mobile or desctop\n\t */\n\tfunction checkMobileModify(){\n\t\t\n\t\tvar isMobile = g_gallery.isMobileMode();\n\t\t\n\t\tif(isMobile)\n\t\t\tmodifyForMobile();\n\t\telse\n\t\t\tmodifyForDesctop();\n\t\t\t\t\n\t}\n\t\n\t\n\t/**\n\t * get a jquery set of the controls objects\n\t */\n\tfunction getControlsObjects(){\n\t\t\n\t\tvar objControl = g_objSlider.children(\".ug-slider-control\");\n\t\t\n\t\treturn(objControl);\n\t}\n\t\n\t\n\t/**\n\t * hide the controls\n\t */\n\tfunction hideControls(noAnimation){\n\t\t\t\t\n\t\tif(g_functions.isTimePassed(\"sliderControlsToggle\") == false)\n\t\t\treturn(false);\n\t\t\n\t\tif(g_temp.isControlsVisible == false)\n\t\t\treturn(false);\n\t\t\t\t\n\t\tif(!noAnimation)\n\t\t\tvar noAnimation = false;\n\t\t\n\t\tvar objControls = getControlsObjects();\n\t\t\n\t\tif(noAnimation === true)\n\t\t\tobjControls.stop().fadeTo(0,0).hide();\n\t\telse{\n\t\t\tobjControls.stop().fadeTo(g_options.slider_controls_appear_duration, 0, function(){objControls.hide()});\n\t\t}\n\t\t\n\t\tg_temp.isControlsVisible = false;\n\t}\n\t\n\t\n\t/**\n\t * show controls only if they meaned to be shown\n\t * @param noAnimation\n\t */\n\tfunction checkAndShowControls(noAnimation){\n\t\t\n\t\tif(g_options.slider_controls_always_on == true)\n\t\t\tshowControls(noAnimation);\t\t\n\t}\n\t\n\t\n\t/**\n\t * hide the controls\n\t */\n\tfunction showControls(noAnimation){\n\t\t\t\t\n\t\t//validate for short time pass\n\t\tif(g_functions.isTimePassed(\"sliderControlsToggle\") == false)\n\t\t\treturn(false);\n\t\t\n\t\tif(g_temp.isControlsVisible == true)\n\t\t\treturn(true);\n\t\t\n\t\t\n\t\tif(!noAnimation)\n\t\t\tvar noAnimation = false;\n\t\t\n\t\tvar objControls = getControlsObjects();\n\t\t\t\t\n\t\tif(noAnimation === true)\n\t\t\tobjControls.stop().show();\n\t\telse{\n\t\t\n\t\t\tobjControls.stop().show().fadeTo(0,0);\n\t\t\tobjControls.fadeTo(g_options.slider_controls_appear_duration, 1);\n\t\t\t\n\t\t}\n\t\t\n\t\tg_temp.isControlsVisible = true;\n\t\t\n\t}\n\t\n\t\n\t\n\t/**\n\t * toggle the controls (show, hide)\n\t */\n\tfunction toggleControls(){\n\t\t\t\t\t\t\t\t\n\t\tif(g_temp.isControlsVisible == false)\n\t\t\tshowControls();\n\t\telse\n\t\t\thideControls();\n\t}\n\t\n\t\n\t/**\n\t * set controls mode\n\t * modes: image, video\n\t */\n\tfunction setControlsMode(mode){\n\t\t\t\t\n\t\tif(mode == g_temp.currentControlsMode)\n\t\t\treturn(false);\n\t\t\n\t\tswitch(mode){\n\t\t\tcase \"image\":\n\t\t\t\tif(g_objZoomPanel)\n\t\t\t\t\tg_objZoomPanel.getElement().show();\t\t\t\n\t\t\tbreak;\n\t\t\tcase \"video\":\n\t\t\t\tif(g_objZoomPanel)\n\t\t\t\t\tg_objZoomPanel.getElement().hide();\t\n\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow new Error(\"wrong controld mode: \" + mode);\n\t\t\tbreak;\n\t\t}\n\t\t\n\t\tg_temp.currentControlsMode = mode;\n\t\t\t\n\t}\n\t\n\t\n\t\n\tfunction __________EVENTS___________(){};\n\n\t/**\n\t * on item change event\n\t */\n\tfunction onItemChange(data, arg_objItem, role){\n\t\t\n\t\t//trace(\"slider on change\");\n\t\t\n\t\tvar objItem = g_gallery.getSelectedItem();\n\t\t\t\t\n\t\tt.setItem(objItem, false, role);\n\t\t\n\t\tvar itemIndex = objItem.index;\n\t\t\n\t\t//set active bullet\n\t\tif(g_objBullets)\n\t\t\tg_objBullets.setActive(itemIndex);\n\t\t\n\t\t//handle text panel\n\t\tif(g_objTextPanel){\t\t\t\n\t\t\tif(g_temp.isTextPanelSaparateHover == false)\n\t\t\t\tshowTextPanel();\n\t\t}\n\t\t\t\t\n\t\tif(objItem.type == \"image\"){\n\t\t\tsetControlsMode(\"image\");\n\t\t\t//placeControlsElements();\n\t\t}\n\t\telse{\n\t\t\tsetControlsMode(\"video\");\n\t\t}\n\t\t\t\t\n\t}\n\t\n\t\n\t/**\n\t * on bullet click - change the item to selected\n\t */\n\tfunction onBulletClick(event, bulletIndex){\n\t\tg_gallery.selectItem(bulletIndex);\t\t\n\t}\n\t\n\t\n\t/**\n\t * on touch end\n\t * toggle controls\n\t */\n\tfunction onClick(event){\n\t\t\n\t\t//double tap action\n\t\tif(g_objTouchSlider && g_objTouchSlider.isTapEventOccured(event) == false)\n\t\t\treturn(true);\n\t\t\n\t\tg_objThis.trigger(t.events.CLICK, event);\n\t\t\t\n\t\t\n\t}\n\n\t\n\t/**\n\t * on actual click event\n\t */\n\tfunction onActualClick(){\n\n\t\t//check link\n\t\tvar currentSlide = t.getCurrentSlide();\n\t\tvar isClickable = currentSlide.hasClass(\"ug-slide-clickable\");\n\t\tvar objItem = t.getCurrentItem();\n\t\t\n\t\tif(isClickable){\n\t\t\t\n\t\t\t//redirect to link\n\t\t\tif(g_options.slider_links_newpage == false){\n\t\t\t\tlocation.href = objItem.link;\n\t\t\t}else{\n\t\t\t\twindow.open(objItem.link, '_blank');\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\treturn(true);\n\t\t}\n\t\t\n\t\t//check toggle controls\n\t\tif(g_options.slider_controls_always_on == false && \n\t\t   g_options.slider_controls_appear_ontap == true && t.isCurrentSlideType(\"image\") == true){\n\t\t\t\n\t\t\ttoggleControls();\n\t\t\t\n\t\t\t//show text panel if hidden\n\t\t\tif(g_objTextPanel && g_options.slider_textpanel_always_on == true && t.isCurrentSlideType(\"image\") && t.isCurrentSlideImageFit())\n\t\t\t\tshowTextPanel();\n\t\t}\n\t\t\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * on zoom start event\n\t */\n\tfunction onZoomChange(event){\n\t\t\n\t\tif(g_objTextPanel && t.isCurrentSlideType(\"image\") && t.isCurrentSlideImageFit() == false)\n\t\t\thideTextPanel();\n\t}\n\t\n\t\n\t/**\n\t * on mouse enter\n\t */\n\tfunction onMouseEnter(){\n\t\t\n\t\tshowControls();\n\t\n\t}\n\t\n\t\n\t/**\n\t * on mouse leave\n\t */\n\tfunction onMouseLeave(){\n\n\t\thideControls();\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * on slide video play button click\n\t */\n\tfunction objVideoPlayClick(objButton){\n\t\tvar objSlide = objButton.parent();\n\t\tt.startSlideAction(objSlide);\n\t}\n\n\t/**\n\t * on video player show event\n\t */\n\tfunction onVideoPlayerShow(){\n\t\t\n\t\tif(g_gallery.isPlayMode()){\n\t\t\tg_gallery.pausePlaying();\n\t\t}\n\t\t\n\t\tg_objThis.trigger(t.events.ACTION_START);\n\t}\n\t\n\t\n\t/**\n\t * on video player hide event\n\t */\n\tfunction onVideoPlayerHide(){\n\t\t\n\t\tif(g_gallery.isPlayMode()){\n\t\t\tg_gallery.continuePlaying();\n\t\t}\n\t\t\n\t\tg_objThis.trigger(t.events.ACTION_END);\t\t\n\t}\n\t\n\t\n\t/**\n\t * on item image update, update the image inside the slider if relevant\n\t */\n\tfunction onItemImageUpdate(event, index, urlImage){\n\t\t\t\t\n\t\tif(g_objSlide1.data(\"index\") == index){\n\t\t\tobjItem = g_gallery.getItem(index);\n\t\t\tsetImageToSlide(g_objSlide1, objItem, true);\t//force\n\t\t}\n\t\t\n\t\tif(g_objSlide2.data(\"index\") == index){\n\t\t\tobjItem = g_gallery.getItem(index);\n\t\t\tsetImageToSlide(g_objSlide2, objItem, true);\n\t\t}\n\t\t\n\t\tif(g_objSlide3.data(\"index\") == index){\n\t\t\tobjItem = g_gallery.getItem(index);\n\t\t\tsetImageToSlide(g_objSlide3, objItem, true);\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * after image loaded. position video play button\n\t */\n\tfunction onSlideImageLoaded(data, objSlide){\n\t\t\n\t\tobjSlide = jQuery(objSlide);\n\t\tvar objImage = t.getSlideImage(objSlide);\n\t\tvar objButtonVideoPlay = getSlideVideoPlayButton(objSlide);\n\t\tvar objSize = g_functions.getElementSize(objImage);\n\t\t\n\t\tg_functions.placeElement(objButtonVideoPlay, \"center\", \"middle\", objSize.left, objSize.top, objImage);\n\t}\n\t\n\t\n\t/**\n\t * init event of current slide\n\t */\n\tfunction initSlideEvents(objSlide){\n\t\t\n\t\t//set video player events\n\t\tvar objVideoPlayButton = getSlideVideoPlayButton(objSlide);\n\t\tg_functions.addClassOnHover(objVideoPlayButton);\n\t\t\n\t\tg_functions.setButtonOnClick(objVideoPlayButton, objVideoPlayClick);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * init events\n\t */\n\tfunction initEvents(){\n\t\t\n\t\t//on item image update, update the image inside the slider if relevant\n\t\tg_objGallery.on(g_gallery.events.ITEM_IMAGE_UPDATED, onItemImageUpdate);\n\t\t\n\t\t\n\t\t//on item change, change the item in the slider.\n\t\tg_objGallery.on(g_gallery.events.ITEM_CHANGE, onItemChange);\n\t\t\n\t\tif(g_objBullets)\n\t\t\tjQuery(g_objBullets).on(g_objBullets.events.BULLET_CLICK,onBulletClick);\n\t\t\n\t\t//arrows events\n\t\tif(g_options.slider_enable_arrows == true){\n\t\t\t\n\t\t\tg_functions.addClassOnHover(g_objArrowRight, \"ug-arrow-hover\");\n\t\t\tg_functions.addClassOnHover(g_objArrowLeft, \"ug-arrow-hover\");\n\t\t\t\n\t\t\tg_gallery.setNextButton(g_objArrowRight);\n\t\t\tg_gallery.setPrevButton(g_objArrowLeft);\n\t\t}\n\t\t\n\t\t\n\t\t//show / hide controls\n\t\tif(g_options.slider_controls_always_on == false){\n\t\t\t\n\t\t\t//assign hover evens only if no touch device\n\t\t\tg_objSlider.hover(onMouseEnter, onMouseLeave);\n\t\t\t\n\t\t}\n\t\t\n\t\t//touch events appear on tap event\n\t\tg_objSlider.on(\"touchend click\", onClick);\n\t\t\n\t\t//actual click event\n\t\tg_objThis.on(t.events.CLICK, onActualClick);\n\t\t\n\t\t//show / hide text panel, if it's saparate from controls\n\t\tif(g_objTextPanel && g_temp.isTextPanelSaparateHover == true){\n\t\t\tg_objSlider.hover(showTextPanel, hideTextPanel);\n\t\t}\n\t\t\n\t\t//init play / pause button\n\t\tif(g_objButtonPlay){\n\t\t\tg_functions.addClassOnHover(g_objButtonPlay, \"ug-button-hover\");\n\t\t\tg_gallery.setPlayButton(g_objButtonPlay);\n\t\t}\n\t\t\n\t\t//init fullscreen button\n\t\tif(g_objButtonFullscreen){\n\t\t\tg_functions.addClassOnHover(g_objButtonFullscreen, \"ug-button-hover\");\n\t\t\tg_gallery.setFullScreenToggleButton(g_objButtonFullscreen);\n\t\t}\n\t\t\n\t\t//on zoom start / end events\n\t\tif(g_objZoomSlider){\n\t\t\tg_objThis.on(t.events.ZOOM_CHANGE, onZoomChange);\n\t\t}\n\t\t\n\t\tif(g_objZoomPanel)\n\t\t\tg_objZoomPanel.initEvents();\n\t\t\t\t\n\t\t//init video player related events\n\t\tg_objVideoPlayer.initEvents();\n\t\t\n\t\t//video API events\n\t\tjQuery(g_objVideoPlayer).on(g_objVideoPlayer.events.SHOW, onVideoPlayerShow);\t\t\n\t\tjQuery(g_objVideoPlayer).on(g_objVideoPlayer.events.HIDE, onVideoPlayerHide);\n\t\t\n\t\t//add slide events\n\t\tinitSlideEvents(g_objSlide1);\n\t\tinitSlideEvents(g_objSlide2);\n\t\tinitSlideEvents(g_objSlide3);\n\t\t\n\t\t//on image loaded\n\t\tg_objThis.on(t.events.AFTER_PUT_IMAGE, onSlideImageLoaded);\n\t\t\n\t\t//image mouseenter / mouseleave event\n\t\t\n\t\t//set mouseover events on the images\n\t\tg_objSlider.delegate(\".ug-item-wrapper img\",\"mouseenter\",function(event){\n\t\t\tg_objThis.trigger(t.events.IMAGE_MOUSEENTER);\n\t\t});\n\n\t\tg_objSlider.delegate(\".ug-item-wrapper img\",\"mouseleave\",function(event){\n\t\t\tvar isMouseOver = t.isMouseInsideSlideImage(event);\n\t\t\t\n\t\t\tif(isMouseOver == false)\n\t\t\t\tg_objThis.trigger(t.events.IMAGE_MOUSELEAVE);\n\t\t});\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * destroy slider events\n\t */\n\tthis.destroy = function(){\n\t\t\n\t\tg_objThis.off(t.events.AFTER_PUT_IMAGE);\n\t\t\t\t\n\t\tg_objGallery.off(g_gallery.events.ITEM_IMAGE_UPDATED);\n\t\tg_objGallery.off(g_gallery.events.ITEM_CHANGE);\n\t\t\n\t\tif(g_objBullets)\n\t\t\tjQuery(g_objBullets).on(g_objBullets.events.BULLET_CLICK);\n\t\t\n\t\tg_objSlider.off(\"mouseenter\");\n\t\tg_objSlider.off(\"mouseleave\");\n\t\t\n\t\tg_objSlider.off(\"touchend\");\n\t\tg_objSlider.off(\"click\");\n\t\tg_objThis.off(t.events.CLICK);\n\t\t\n\t\tif(g_objZoomSlider)\n\t\t\tg_objThis.off(t.events.ZOOM_CHANGE);\n\t\t\n\t\tg_objThis.off(t.events.BEFORE_SWITCH_SLIDES);\n\t\tjQuery(g_objVideoPlayer).off(g_objVideoPlayer.events.SHOW);\t\t\n\t\tjQuery(g_objVideoPlayer).off(g_objVideoPlayer.events.HIDE);\n\t\t\n\t\tg_objVideoPlayer.destroy();\n\t\t\n\t\tg_objSlider.undelegate(\".ug-item-wrapper img\",\"mouseenter\");\n\t\tg_objSlider.undelegate(\".ug-item-wrapper img\",\"mouseleave\");\n\t}\n\t\n\t\n\tfunction __________GETTERS___________(){};\n\t\n\t/**\n\t * get loader class by loader type\n\t */\n\tfunction getLoaderClass(){\n\t\tvar loaderClass;\n\t\tswitch(g_options.slider_loader_type){\n\t\t\tdefault:\n\t\t\tcase 1: loaderClass = \"ug-loader1\";break;\n\t\t\tcase 2: loaderClass = \"ug-loader2\";break;\n\t\t\tcase 3: loaderClass = \"ug-loader3\";break;\n\t\t\tcase 4: loaderClass = \"ug-loader4\";break;\n\t\t\tcase 5: loaderClass = \"ug-loader5\";break;\n\t\t\tcase 6: loaderClass = \"ug-loader6\";break;\n\t\t\tcase 7: loaderClass = \"ug-loader7\";break;\n\t\t\tcase 8: loaderClass = \"ug-loader8\";break;\n\t\t\tcase 9: loaderClass = \"ug-loader9\";break;\n\t\t}\n\t\t\t\t\n\t\tif(g_options.slider_loader_color == \"black\")\n\t\t\tloaderClass += \" ug-loader-black\";\n\t\t\n\t\treturn(loaderClass);\n\t}\n\t\n\t\n\t\n\t/**\n\t * \n\t * get slide by number\n\t */\n\tfunction getSlideByNum(num){\n\t\t\t\t\n\t\tswitch(num){\n\t\t\tcase 1:\n\t\t\t\treturn(g_objSlide1);\n\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\treturn(g_objSlide2);\n\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\treturn(g_objSlide3);\n\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow new Error(\"wrong num: \" + num);\n\t\t\tbreak;\n\t\t}\n\t}\n\t\n\t\n\t/**\n\t * \n\t * get slide direction of current item\n\t */\n\tfunction getSlideDirection(objItem){\n\t\t\n\t\tvar slides = t.getSlidesReference();\n\t\t\n\t\t//validate if the item is not selected already\n\t\tvar currentIndex = slides.objCurrentSlide.data(\"index\");\n\t\tvar nextIndex = objItem.index;\n\t\t\n\t\tvar direction = \"left\";\n\t\tif(currentIndex > nextIndex)\n\t\t\tdirection = \"right\";\n\t\t\t\t\n\t\treturn(direction);\n\t}\n\t\n\t\n\t/**\n\t * get slide preloader\n\t */\n\tfunction getSlidePreloader(objSlide){\n\t\t\n\t\tif(!objSlide)\n\t\t\tvar objSlide = t.getCurrentSlide();\n\t\t\n\t\tvar objPreloader = objSlide.children(\".ug-slider-preloader\");\n\t\treturn(objPreloader);\n\t}\n\t\n\t/**\n\t * get slide videoplay button\n\t */\n\tfunction getSlideVideoPlayButton(objSlide){\n\t\tvar objButton = objSlide.children(\".ug-button-videoplay\");\n\t\treturn(objButton);\n\t}\n\t\n\t\n\t\n\t/**\n\t * get slide item\n\t */\n\tfunction getSlideItem(objSlide){\n\t\tif(!objSlide)\n\t\t\tvar objSlide = t.getCurrentSlide();\n\t\t\t\n\t\tvar index = objSlide.data(\"index\");\n\t\tif(index == undefined)\n\t\t\treturn(null);\n\t\t\n\t\tvar objItem = g_gallery.getItem(index);\n\t\treturn(objItem);\n\t}\n\t\n\t\n\t/**\n\t * get slide number\n\t */\n\tfunction getNumSlide(objSlide){\n\t\tvar numSlide = objSlide.data(\"slidenum\");\n\t\treturn(numSlide);\n\t}\n\t\n\t\n\t\n\tthis.________EXTERNAL_GENERAL___________ = function(){};\n\t\n\t\n\t/**\n\t * init function for avia controls\n\t * options: width / height\n\t */\n\tthis.init = function(objGallery, objOptions, optionsPrefix){\n\t\t\t\t\n\t\tinitSlider(objGallery, objOptions, optionsPrefix);\n\t}\n\n\t/**\n\t * get slide image\n\t */\n\tthis.getSlideImage = function(objSlide){\n\t\t\n\t\tif(!objSlide)\n\t\t\tvar objSlide = t.getCurrentSlide();\n\t\t\n\t\tvar objImage = objSlide.find(\".ug-item-wrapper img\");\n\t\treturn(objImage);\n\t}\n\t\n\t\n\t/**\n\t * set slider html\n\t */\n\tthis.setHtml = function(objParent){\n\t\t\n\t\tsetHtmlSlider(objParent);\n\t}\n\t\n\t\n\t/**\n\t * run the slider\n\t */\n\tthis.run = function(){\n\t\t\n\t\trunSlider();\n\t}\n\t\n\t\n\t/**\n\t * check if the inner object in place, for panning znd zooming posibility check\n\t */\n\tthis.isInnerInPlace = function(){\n\t\t\n\t\tvar slides = t.getSlidesReference();\n\t\t\n\t\tvar posCurrent = g_functions.getElementSize(slides.objCurrentSlide);\n\t\tvar inPlaceX = -posCurrent.left;\n\t\tvar objInnerSize = g_functions.getElementSize(g_objInner);\n\t\t\n\t\tif(inPlaceX == objInnerSize.left)\n\t\t\treturn(true);\n\t\telse\n\t\t\treturn(false);\n\t}\n\t\n\t/**\n\t * is animating\n\t */\n\tthis.isAnimating = function(){\n\t\t\n\t\tvar isAnimated = g_objInner.is(\":animated\");\n\t\t\n\t\treturn(isAnimated);\n\t}\n\t\n\t/**\n\t * check if the slide is current\n\t */\n\tthis.isSlideCurrent = function(objSlide){\n\t\tvar numSlide = objSlide.data(\"slidenum\");\n\t\tif(g_temp.numCurrent == numSlide)\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\t\n\t\n\t/**\n\t * \n\t * tells if the slide has item\n\t */\n\tthis.isSlideHasItem = function(objSlide){\n\t\tvar index = objSlide.data(\"index\");\n\t\tif(index === undefined || index === null)\n\t\t\treturn(false);\n\t\t\n\t\treturn(true);\n\t}\n\t\n\t\n\t/**\n\t * get image padding object for scaling the image\n\t */\n\tthis.getObjImagePadding = function(){\n\t\t\n\t\tvar objPadding = {\n\t\t\t\tpadding_top: g_options.slider_image_padding_top,\n\t\t\t\tpadding_bottom: g_options.slider_image_padding_bottom,\n\t\t\t\tpadding_left: g_options.slider_image_padding_left,\n\t\t\t\tpadding_right: g_options.slider_image_padding_right\n\t\t};\n\t\t\n\t\treturn(objPadding);\n\t}\n\t\t\t\n\t\n\t/**\n\t * get items reference by their order\n\t */\n\tthis.getSlidesReference = function(){\n\t\t\n\t\tvar obj = {\n\t\t\t\tobjPrevSlide: getSlideByNum(g_temp.numPrev),\n\t\t\t\tobjNextSlide: getSlideByNum(g_temp.numNext),\n\t\t\t\tobjCurrentSlide: getSlideByNum(g_temp.numCurrent)\n\t\t};\n\t\t\n\t\treturn(obj);\n\t}\n\t\n\t\n\t/**\n\t * get current slide\n\t */\n\tthis.getCurrentSlide = function(){\n\t\t\n\t\tvar slides = t.getSlidesReference();\n\t\t\n\t\treturn(slides.objCurrentSlide);\n\t}\n\t\n\t\n\t/**\n\t * get index of current item\n\t */\n\tthis.getCurrentItemIndex = function(){\n\t\t\n\t\tvar slides = t.getSlidesReference();\n\t\t\n\t\tvar currentIndex = slides.objCurrentSlide.data(\"index\");\n\t\tif(currentIndex === null || currentIndex === undefined)\n\t\t\tcurrentIndex = -1;\n\t\t\n\t\treturn(currentIndex);\n\t}\n\t\n\t\n\t/**\n\t * get current slide item\n\t */\n\tthis.getCurrentItem = function(){\n\t\tvar currentIndex = t.getCurrentItemIndex();\n\t\tif(currentIndex == -1)\n\t\t\treturn(null);\n\t\t\n\t\tvar objItem = g_gallery.getItem(currentIndex);\n\t\t\n\t\treturn(objItem);\n\t}\n\t\t\n\t\n\t/**\n\t * get type of some slide\n\t */\n\tthis.getSlideType = function(objSlide){\n\t\t\n\t\tif(objSlide == undefined)\n\t\t\tobjSlide = t.getCurrentSlide();\n\t\t\t\n\t\tvar type = objSlide.data(\"type\");\n\t\treturn(type);\t\t\n\t}\n\n\t\n\t/**\n\t * is mouse inside slide image\n\t * get mouse position from event\n\t */\n\tthis.isMouseInsideSlideImage = function(event){\n\t\t\n\t\tvar objImage = t.getSlideImage();\n\t\t\n\t\tvar point = g_functions.getMousePosition(event);\n\t\tif(point.pageX === undefined)\n\t\t\tpoint = g_objTouchSlider.getLastMousePos();\n\t\t\n\t\tvar pointImg = g_functions.getMouseElementPoint(point, objImage);\n\t\tvar objSize = g_functions.getElementSize(objImage);\n\t\tisMouseInside = g_functions.isPointInsideElement(pointImg, objSize);\n\t\t\n\t\treturn(isMouseInside);\n\t}\n\t\n\t\n\t/**\n\t * check if current slide type is certain type\n\t */\n\tthis.isCurrentSlideType = function(type){\n\t\tvar currentSlideType = t.getSlideType();\n\t\tif(currentSlideType == type)\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\t\n\t\n\t/**\n\t * check if current slide is loading image\n\t */\n\tthis.isCurrentSlideLoadingImage = function(){\n\t\tvar currentSlide = t.getCurrentSlide();\n\t\tvar isLoading = currentSlide.data(\"isLoading\");\n\t\tif(isLoading === true)\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\t\n\t\n\t/**\n\t * change the slider to some item content\n\t */\n\tthis.setItem = function(objItem, forseTransition, role){\n\t\t\n\t\tvar slides = t.getSlidesReference();\n\t\t\n\t\t//validate if the item is not selected already\n\t\tvar currentIndex = slides.objCurrentSlide.data(\"index\");\n\t\tvar nextIndex = objItem.index;\n\t\t\n\t\tif(nextIndex == currentIndex){\n\t\t\treturn(true);\n\t\t}\n\t\t\n\t\tvar isFirstSlide = (currentIndex == undefined);\n\t\t\n\t\tif(isFirstSlide){\t\t\t\n\t\t\tsetItemToSlide(slides.objCurrentSlide, objItem);\n\t\t\tt.placeNabourItems();\n\t\t\t\n\t\t}else{\n\t\t\t\n\t\t\tvar direction = \"left\";\t\t//move foreward\n\t\t\t\n\t\t\tvar numItems = g_gallery.getNumItems();\n\t\t\t\n\t\t\tif(role == \"next\")\n\t\t\t\tdirection = \"left\";\n\t\t\telse if(role == \"prev\" || currentIndex > nextIndex)\n\t\t\t\tdirection = \"right\";\n\t\t\telse if(currentIndex > nextIndex)\n\t\t\t\t\tdirection = \"right\";\n\t\t\t\t\t\t\n\t\t\tdoTransition(direction, objItem, forseTransition);\n\t\t}\n\t\t\t\t\t\n\t}\n\t\n\t\n\t/**\n\t * when the transition complete, put the next / prev items at their place\n\t */\n\tthis.placeNabourItems = function(){\n\t\t\t\t\n\t\tvar slides = t.getSlidesReference();\n\t\tvar currentIndex = slides.objCurrentSlide.data(\"index\");\n\t\t\t\t\n\t\tvar itemPrev = g_gallery.getPrevItem(currentIndex);\n\t\tvar itemNext = g_gallery.getNextItem(currentIndex);\n\t\t\n\t\t//trace(itemPrev);\n\t\t//trace(itemNext);\n\t\t\n\t\t//trace(\"place \" + currentIndex, \"next: \"+);\n\t\t\n\t\tsetItemToSlide(slides.objNextSlide, itemNext);\n\t\tsetItemToSlide(slides.objPrevSlide, itemPrev);\n\t\t\n\t\tpositionSlides();\n\t}\n\t\n\t\n\t\n\tthis.________EXTERNAL_API___________ = function(){};\n\t\n\t\n\t/**\n\t * stop some slide action if active\n\t */\n\tthis.stopSlideAction = function(objSlide, isPause){\n\t\t\n\t\tif(!objSlide)\n\t\t\tobjSlide = t.getCurrentSlide();\n\t\t\n\t\tif(isPause === true)\n\t\t\tg_objVideoPlayer.pause();\n\t\telse\n\t\t\tg_objVideoPlayer.hide();\n\t\t\n\t//\ttrace(\"stop action\");\n\t\t\n\t}\n\t\n\t\n\t\n\t/**\n\t * start some slide action if exists\n\t */\n\tthis.startSlideAction = function(objSlide){\n\t\t\n\t//\ttrace(\"start action\");\n\t\t\n\t\tif(!objSlide)\n\t\t\tobjSlide = t.getCurrentSlide();\n\t\t\n\t\tvar objItem = getSlideItem(objSlide);\n\t\t\n\t\tif(objItem.type == \"image\")\n\t\t\treturn(true)\n\t\t\n\t\tif(g_options.slider_video_constantsize == true)\n\t\t\tsetVideoPlayerConstantSize();\n\t\t\n\t\tsetVideoPlayerPosition();\n\t\t\n\t\tg_objVideoPlayer.show();\n\t\t\n\t\tswitch(objItem.type){\n\t\t\tcase \"youtube\":\n\t\t\t\tg_objVideoPlayer.playYoutube(objItem.videoid);\n\t\t\tbreak;\n\t\t\tcase \"vimeo\":\n\t\t\t\tg_objVideoPlayer.playVimeo(objItem.videoid);\n\t\t\tbreak;\n\t\t\tcase \"html5video\":\n\t\t\t\tg_objVideoPlayer.playHtml5Video(objItem.videoogv, objItem.videowebm, objItem.videomp4, objItem.urlImage);\n\t\t\tbreak;\n\t\t\tcase \"soundcloud\":\n\t\t\t\tg_objVideoPlayer.playSoundCloud(objItem.trackid);\n\t\t\tbreak;\t\t\t\n\t\t\tcase \"wistia\":\n\t\t\t\tg_objVideoPlayer.playWistia(objItem.videoid);\n\t\t\tbreak;\t\t\t\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * get the scale mode according the state (normal, fullscreen).\n\t */\n\tthis.getScaleMode = function(objSlide){\n\t\t\n\t\tif(!objSlide)\n\t\t\tvar objSlide = t.getCurrentSlide();\n\t\t\n\t\tvar slideType = t.getSlideType(objSlide);\n\t\t\t\t\n\t\t//return media scale mode\n\t\tif(slideType != \"image\")\n\t\t\treturn(g_options.slider_scale_mode_media);\n\t\t\n\t\tif(g_options.slider_scale_mode == g_options.slider_scale_mode_fullscreen)\n\t\t\treturn(g_options.slider_scale_mode);\n\t\t\n\t\tif(g_gallery.isFullScreen() == true)\n\t\t\treturn(g_options.slider_scale_mode_fullscreen);\n\t\telse\n\t\t\treturn(g_options.slider_scale_mode);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * get slider objects\n\t */\n\tthis.getObjects = function(){\n\t\t\n\t\tvar obj = {\n\t\t\t\tg_objSlider: g_objSlider,\n\t\t\t\tg_objInner: g_objInner,\n\t\t\t\tg_options: g_options,\n\t\t\t\tg_objZoomSlider: g_objZoomSlider\n\t\t};\n\t\t\t\t\n\t\treturn(obj);\n\t}\n\t\n\t\n\t/**\n\t * get zoom object\n\t */\n\tthis.getObjZoom = function(){\n\t\t\n\t\treturn(g_objZoomSlider);\n\t}\n\t\n\t\n\t\n\t/**\n\t * get slider options\n\t */\n\tthis.getOptions = function(){\n\t\t\n\t\treturn(g_options);\n\t}\n\t\n\t\n\t/**\n\t * get slider element\n\t */\n\tthis.getElement = function(){\n\t\t\n\t\treturn(g_objSlider);\n\t}\n\t\n\t/**\n\t * get video object\n\t */\n\tthis.getVideoObject = function(){\n\t\treturn(g_objVideoPlayer);\n\t}\n\t\n\t\n\t/**\n\t * return true if current slider image fit the slider\n\t * @returns\n\t */\n\tthis.isCurrentSlideImageFit = function(){\n\t\tvar objSlide = t.getCurrentSlide();\n\n\t\tvar slideType = t.getSlideType(objSlide);\n\t\t\n\t\tvalidateSlideType(\"image\", objSlide);\n\t\t\n\t\tvar objImage = t.getSlideImage(objSlide);\n\t\t\n\t\t//if image don't yet added to dom, return false\n\t\tif(objImage.length == 0)\n\t\t\treturn(false);\n\t\t\n\t\tvar isFit = g_functions.isImageFitParent(objImage);\n\t\t\n\t\treturn(isFit);\n\t}\n\t\n\t\n\t/**\n\t * check if current image in place\n\t */\n\tthis.isCurrentImageInPlace = function(){\n\t\t\n\t\tvar objImage = t.getSlideImage();\n\t\tif(objImage.length == 0)\n\t\t\treturn(false);\n\n\t\tvar scaleMode = t.getScaleMode();\n\t\tvar objPadding = t.getObjImagePadding();\n\t\tvar objItem = getSlideItem();\n\t\t\n\t\tvar objParent = objImage.parent();\n\t\t\n\t\tvar objFitSize = g_functions.getImageInsideParentData(objParent, objItem.imageWidth, objItem.imageHeight, scaleMode, objPadding);\n\t\tvar objSize = g_functions.getElementSize(objImage);\n\n\t\tvar output = false;\n\t\t\n\t\tif(objFitSize.imageWidth == objSize.width)\n\t\t\toutput = true;\n\t\t\t\t\n\t\treturn(output);\n\t}\n\t\n\t\n\t/**\n\t * if slide is bussy in some action\n\t */\n\tthis.isSlideActionActive = function(){\n\t\t\n\t\treturn g_objVideoPlayer.isVisible();\n\t}\n\t\n\t/**\n\t * return if swipe action active\n\t */\n\tthis.isSwiping = function(){\n\t\tif(!g_objTouchSlider)\n\t\t\treturn(false);\n\t\t\n\t\tvar isActive = g_objTouchSlider.isTouchActive();\n\t\t\n\t\treturn(isActive);\n\t}\n\t\n\t\n\t/**\n\t * if slider preloading image (if preloader visible)\n\t */\n\tthis.isPreloading = function(){\n\t\t\n\t\tvar objPreloader = getSlidePreloader();\n\t\tif(objPreloader.is(\":visible\"))\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\t\n\t/**\n\t * set the options\n\t */\n\tthis.setOptions = function(objOptions){\n\n\t\t//change options by prefix\n\t\tif(g_optionsPrefix)\n\t\t\tobjOptions = g_functions.convertCustomPrefixOptions(objOptions, g_optionsPrefix, \"slider\");\n\t\t\n\t\tg_options = jQuery.extend(g_options, objOptions);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * set the slider size\n\t * works well on resize too.\n\t */\n\tthis.setSize = function(width, height){\n\t\t\n\t\t if(width < 0 || height < 0)\n\t\t\t return(true);\n\t\t\n\t\t var objCssSlider = {};\n\t\t objCssSlider[\"width\"] = width + \"px\";\n\t\t objCssSlider[\"height\"] = height + \"px\";\n\t\t g_objSlider.css(objCssSlider);\n\t\t \t\t \n\t\t //set inner:\n\t\t var objCssInner = {};\n\t\t objCssInner[\"height\"] = height + \"px\";\n\t\t objCssInner[\"top\"] = \"0px\";\n\t\t objCssInner[\"left\"] = \"0px\";\n\t\t g_objInner.css(objCssInner);\n\t\t \n\t\t//set slide wrapper\n\t\t var objCssSlide = {};\n\t\t objCssSlide[\"height\"] = height + \"px\";\n\t\t objCssSlide[\"width\"] = width + \"px\";\n\t\t \n\t\t g_objSlide1.css(objCssSlide);\n\t\t g_objSlide2.css(objCssSlide);\n\t\t g_objSlide3.css(objCssSlide);\n\t\t \n\t\t var itemWidth = width - g_options.slider_item_padding_left - g_options.slider_item_padding_right;\n\t\t var itemHeight = height - g_options.slider_item_padding_top - g_options.slider_item_padding_bottom;\n\t\t \t\n\t\t //set item wrapper\n\t\t var objCssItemWrapper = {};\n\t\t objCssItemWrapper[\"width\"] = itemWidth + \"px\";\n\t\t objCssItemWrapper[\"height\"] = itemHeight + \"px\";\n\t\t objCssItemWrapper[\"top\"] = g_options.slider_item_padding_top + \"px\";\n\t\t objCssItemWrapper[\"left\"] = g_options.slider_item_padding_left + \"px\";\n\t\t \n\t\t g_objSlider.find(\".ug-item-wrapper\").css(objCssItemWrapper);\t\t \n\t\t \n\t\t \n\t\t //set text panel size\n\t\t if(g_objTextPanel){\n\t\t\t g_objTextPanel.setSizeByParent();\n\t\t }\n\t\t \n\t\t positionElements();\n\t\t \n\t\t //set image to slides\n\t\t resizeSlideItem(g_objSlide1);\n\t\t resizeSlideItem(g_objSlide2);\n\t\t resizeSlideItem(g_objSlide3);\n\t\t \n\t\t positionSlides();\n\t\t \t\t \n\t\t //set video player size\n\t\t var currentSlideType = t.getSlideType();\n\t\t\n\t\t if(currentSlideType != \"image\" && g_options.slider_video_constantsize == true){\n\t\t\t \n\t\t\t setVideoPlayerConstantSize();\n\t\t }else{\t\n\t\t\t var videoWidth = width - g_options.slider_video_padding_left - g_options.slider_video_padding_right;\n\t\t\t var videoHeight = height - g_options.slider_video_padding_top - g_options.slider_video_padding_bottom;\n\t\t\t \n\t\t\t //set video player size\n\t\t\t g_objVideoPlayer.setSize(videoWidth, videoHeight);\n\t\t }\n\t\t \n\t\t setVideoPlayerPosition();\n\t\t \n\t}\n\t\n\t\n\t/**\n\t * refresh slide items after options change\n\t */\n\tthis.refreshSlideItems = function(){\n\t\t \n\t\tif(t.isAnimating() == true)\n\t\t\treturn(true);\n\t\t\n\t\t resizeSlideItem(g_objSlide1);\n\t\t resizeSlideItem(g_objSlide2);\n\t\t resizeSlideItem(g_objSlide3);\n\t\t positionSlides();\n\t\t \n\t}\n\t\n\t\n\t/**\n\t * is mouse over the slider\n\t */\n\tthis.isMouseOver = function(){\n\t\t\n\t\treturn g_objSlider.ismouseover();\n\t}\n\t\n\t/**\n\t * set slider position\n\t */\n\tthis.setPosition = function(left, top){\n\t\t\n\t\tg_functions.placeElement(g_objSlider, left, top);\n\t\t\t\n\t}\n\t\n\t\n\t/**\n\t * zoom in\n\t */\n\tthis.zoomIn = function(){\n\t\tif(!g_objZoomSlider)\n\t\t\treturn(true);\n\t\t\n\t\tg_objZoomSlider.zoomIn();\n\t}\n\t\n\t/**\n\t * zoom out\n\t */\n\tthis.zoomOut = function(){\n\t\t\n\t\tif(!g_objZoomSlider)\n\t\t\treturn(true);\n\t\t\n\t\tg_objZoomSlider.zoomOut();\n\t\t\t\n\t}\n\t\n\t/**\n\t * zoom back to original\n\t */\n\tthis.zoomBack = function(){\n\t\t\n\t\tif(!g_objZoomSlider)\n\t\t\treturn(true);\n\t\t\n\t\tg_objZoomSlider.zoomBack();\t\n\t}\n\t\n\t\n}\n\n/** -------------- TextPanel class ---------------------*/\n\nfunction UGTextPanel(){\n\t\n\tvar t = this;\n\tvar g_objPanel, g_objParent, g_objTitle, g_objDesc;\n\tvar g_objBG, g_objTextWrapper, g_gallery;\n\tvar g_functions = new UGFunctions(), g_optionsPrefix = \"\";\n\t\n\tvar g_options = {\n\t\t\ttextpanel_align:\"bottom\",\t\t\t\t\t//(top , bottom), textpanel align according the parent\n\t\t\ttextpanel_margin:0,\t\t\t\t\t\t\t//margin from the textpanel position according the textpanel_align\n\t\t\ttextpanel_text_valign:\"middle\",\t\t\t\t//middle, top, bottom - text vertical align\n\t\t\ttextpanel_padding_top:10,\t\t\t\t\t//textpanel padding top \n\t\t\ttextpanel_padding_bottom:10,\t\t\t\t//textpanel padding bottom\n\t\t\ttextpanel_height: null,\t\t\t\t\t\t//textpanel height. if null it will be set dynamically\n\t\t\ttextpanel_padding_title_description: 5,\t\t//the space between the title and the description\n\t\t\ttextpanel_padding_right: 11,\t\t\t\t//cut some space for text from right\n\t\t\ttextpanel_padding_left: 11,\t\t\t\t\t//cut some space for text from left\n\t\t\ttextpanel_fade_duration: 200,\t\t\t\t//the fade duration of textpanel appear\n\t\t\ttextpanel_enable_title: true,\t\t\t\t//enable the title text\n\t\t\ttextpanel_enable_description: true,\t\t\t//enable the description text\n\t\t\ttextpanel_enable_bg: true,\t\t\t\t\t//enable the textpanel background\n\t\t\ttextpanel_bg_color:\"#000000\",\t\t\t\t//textpanel background color\n\t\t\ttextpanel_bg_opacity: 0.4,\t\t\t\t\t//textpanel background opacity\n\t\t\t\n\t\t\ttextpanel_title_color:null,\t\t\t\t\t//textpanel title color. if null - take from css\n\t\t\ttextpanel_title_font_family:null,\t\t\t//textpanel title font family. if null - take from css\n\t\t\ttextpanel_title_text_align:null,\t\t\t//textpanel title text align. if null - take from css\n\t\t\ttextpanel_title_font_size:null,\t\t\t\t//textpanel title font size. if null - take from css\n\t\t\ttextpanel_title_bold:null,\t\t\t\t\t//textpanel title bold. if null - take from css\n\t\t\ttextpanel_css_title:{},\t\t\t\t\t\t//textpanel additional css of the title\n\n\t\t\ttextpanel_desc_color:null,\t\t\t\t\t//textpanel description font family. if null - take from css\n\t\t\ttextpanel_desc_font_family:null,\t\t\t//textpanel description font family. if null - take from css\n\t\t\ttextpanel_desc_text_align:null,\t\t\t\t//textpanel description text align. if null - take from css\n\t\t\ttextpanel_desc_font_size:null,\t\t\t\t//textpanel description font size. if null - take from css\n\t\t\ttextpanel_desc_bold:null,\t\t\t\t\t//textpanel description bold. if null - take from css\n\t\t\ttextpanel_css_description:{},\t\t\t\t//textpanel additional css of the description\n\t\t\t\n\t\t\ttextpanel_desc_style_as_title: false,\t\t//set that the description style will be as title\n\t\t\t\n\t\t\ttextpanel_bg_css:{}\t\t\t\t\t\t\t//textpanel background css\n\t};\n\t\n\tvar g_temp = {\n\t\t\tisFirstTime: true,\n\t\t\tsetInternalHeight: true\t\t//flag if set internal height or not\n\t};\n\t\n\t\n\t/**\n\t * position elements from top\n\t */\n\tfunction positionElementsTop(animateHeight, startY){\n\t\t\n\t\tif(!startY)\n\t\t\tvar startY = g_options.textpanel_padding_top;\n\t\t\n\t\t//place title\n\t\tvar maxy = startY;\n\t\t\n\t\t//place title\n\t\tif(g_objTitle){\n\t\t\tvar titleY = maxy;\n\t\t\tg_functions.placeElement(g_objTitle, 0, titleY);\n\t\t\t\n\t\t\tvar objTitleSize = g_functions.getElementSize(g_objTitle);\t\t\n\t\t\t\t\t\t\n\t\t\tvar maxy = objTitleSize.bottom;\t\t\t\n\t\t}\n\t\t\n\t\t//place description\n\t\tvar textDesc = \"\";\n\t\tif(g_objDesc)\n\t\t\ttextDesc = jQuery.trim(g_objDesc.text());\n\t\t\n\t\tif(textDesc != \"\"){\n\t\t\t\n\t\t\tvar descY = maxy;\n\t\t\t\t\t\t\n\t\t\tif(g_objTitle)\n\t\t\t\tdescY += g_options.textpanel_padding_title_description;\n\t\t\t\n\t\t\tg_functions.placeElement(g_objDesc, 0, descY);\n\t\t\tvar objDescSize = g_functions.getElementSize(g_objDesc);\t\t\n\t\t\tmaxy = objDescSize.bottom;\n\t\t}\n\t\t\n\t\t//change panel height\n\t\tif(!g_options.textpanel_height && g_temp.setInternalHeight == true){\n\t\t\t\n\t\t\tvar panelHeight = maxy + g_options.textpanel_padding_bottom;\t\t\n\t\t\t\n\t\t\tsetHeight(panelHeight, animateHeight);\n\t\t}\n\t\t\n\t}\n\t\n\t/**\n\t * get total text and description height\n\t */\n\tfunction getTotalTextHeight(){\n\t\tvar totalHeight = 0;\n\t\t\n\t\tif(g_objTitle)\n\t\t\ttotalHeight += g_objTitle.outerHeight();\n\t\t\n\t\tif(g_objDesc){\n\t\t\tvar textDesc = \"\";\n\t\t\tif(g_objDesc)\n\t\t\t\ttextDesc = jQuery.trim(g_objDesc.text());\n\t\t\t\n\t\t\tif(textDesc != \"\"){\n\t\t\t\tif(g_objTitle)\n\t\t\t\t\ttotalHeight += g_options.textpanel_padding_title_description;\n\t\t\t\t\n\t\t\t\ttotalHeight += g_objDesc.outerHeight();\n\t\t\t}\n\t\t\n\t\t}\n\t\t\n\t\t\n\t\treturn(totalHeight);\n\t}\n\t\n\t\n\t/**\n\t * position elements to center\n\t */\n\tfunction positionElementsMiddle(){\n\t\t\n\t\tvar totalTextHeight = getTotalTextHeight();\n\t\tvar startY = (g_objTextWrapper.height() - totalTextHeight) / 2;\n\t\t\n\t\tpositionElementsTop(false, startY);\n\t}\n\t\n\t\n\t/**\n\t * position elements to bottom\n\t */\n\tfunction positionElementBottom(){\n\t\t\n\t\tvar totalTextHeight = getTotalTextHeight();\n\t\tvar startY = g_objTextWrapper.height() - totalTextHeight - g_options.textpanel_padding_bottom;\n\t\t\n\t\tpositionElementsTop(false, startY);\n\t}\n\t\n\t\n\t/**\n\t * position elements inside the panel\n\t */\n\tthis.positionElements = function(animateHeight){\n\n\t\t//if(g_objPanel.is(\":visible\") == false)\n\t\t\t//trace(\"the text panel is hidden. can't position elements\")\n\t\t\n\t\t//if height not set, position only top\n\t\tif(!g_options.textpanel_height || g_options.textpanel_text_valign == \"top\"){\n\t\t\tpositionElementsTop(animateHeight);\n\t\t\treturn(false);\n\t\t}\n\t\t\n\t\tswitch(g_options.textpanel_text_valign){\n\t\t\tdefault:\n\t\t\tcase \"top\":\n\t\t\t\tpositionElementsTop(false);\t\t//no animation in this case\n\t\t\tbreak;\n\t\t\tcase \"bottom\":\n\t\t\t\tpositionElementBottom();\n\t\t\tbreak;\n\t\t\tcase \"center\":\n\t\t\tcase \"middle\":\n\t\t\t\tpositionElementsMiddle();\n\t\t\tbreak;\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * set new panel height\n\t */\n\tfunction setHeight(height, animateHeight){\n\t\t\n\t\tif(!animateHeight)\n\t\t\tvar animateHeight = false;\n\t\t\n\t\tif(animateHeight == true){\n\t\t\t\n\t\t\tif(g_objBG){\n\t\t\t\t\n\t\t\t\t//avoid background jumps\n\t\t\t\tvar currentHeight = g_objBG.height();\n\t\t\t\tif(height > currentHeight)\n\t\t\t\t\tg_objBG.height(height);\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\tvar objCss = {height: height+\"px\"};\n\t\t\tg_objPanel.add(g_objTextWrapper).animate(objCss, g_options.textpanel_fade_duration);\n\t\t\t\n\t\t}else{\n\t\t\t\n\t\t\tif(g_objBG)\n\t\t\t\tg_objBG.height(height);\t\t\n\t\t\t\n\t\t\tg_objPanel.add(g_objTextWrapper).height(height);\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t\n\t\n\t/**\n\t * init the panel\n\t */\n\tthis.init = function(objGallery, customOptions, optionsPrefix){\n\t\t\t\t\n\t\tg_gallery = objGallery;\n\t\t\n\t\t//change options by prefix\n\t\tif(optionsPrefix){\n\t\t\tg_optionsPrefix = optionsPrefix;\n\t\t\tcustomOptions = g_functions.convertCustomPrefixOptions(customOptions,g_optionsPrefix,\"textpanel\");\t\t\t\n\t\t\t\n\t\t}\n\t\t\n\t\tif(customOptions)\n\t\t\tg_options = jQuery.extend(g_options, customOptions);\n\t\t\n\t\t//validation:\n\t\tif(g_options.textpanel_enable_title == false && g_options.textpanel_enable_description == false)\n\t\t\tthrow new Error(\"Textpanel Error: The title or description must be enabled\");\n\t\t\n\t\tif(g_options.textpanel_height && g_options.textpanel_height < 0)\n\t\t\tg_options.textpanel_height = null;\n\t\t\n\t\t//copy desc style from title\n\t\tif(g_options.textpanel_desc_style_as_title == true){\n\t\t\tif(!g_options.textpanel_desc_color)\n\t\t\t\tg_options.textpanel_desc_color = g_options.textpanel_title_color;\n\t\t\t\n\t\t\tif(!g_options.textpanel_desc_bold)\n\t\t\t\tg_options.textpanel_desc_bold = g_options.textpanel_title_bold;\n\t\t\t\n\t\t\tif(!g_options.textpanel_desc_font_family)\n\t\t\t\tg_options.textpanel_desc_font_family = g_options.textpanel_title_font_family;\n\t\t\t\n\t\t\tif(!g_options.textpanel_desc_font_size)\n\t\t\t\tg_options.textpanel_desc_font_size = g_options.textpanel_title_font_size;\n\t\t\t\n\t\t\tif(!g_options.textpanel_desc_text_align)\n\t\t\t\tg_options.textpanel_desc_text_align = g_options.textpanel_title_text_align;\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * append the bullets html to some parent\n\t */\n\tthis.appendHTML = function(objParent, addClass){\n\t\tg_objParent = objParent;\n\t\t\n\t\tif(addClass){\n\t\t\taddClass = \" \"+addClass;\n\t\t}else\n\t\t\taddClass = \"\";\n\t\t\n\t\tvar html = \"<div class='ug-textpanel\"+addClass+\"'>\";\n\t\t\n\t\tif(g_options.textpanel_enable_bg == true)\n\t\t\thtml += \"<div class='ug-textpanel-bg\"+addClass+\"'></div>\";\n\t\t\n\t\thtml += \"<div class='ug-textpanel-textwrapper\"+addClass+\"'>\";\n\t\t\n\t\tif(g_options.textpanel_enable_title == true)\n\t\t\thtml += \"<div class='ug-textpanel-title\"+addClass+\"'></div>\";\n\t\t\n\t\tif(g_options.textpanel_enable_description == true)\n\t\t\thtml += \"<div class='ug-textpanel-description\"+addClass+\"'></div>\";\n\t\t\n\t\thtml += \"</div></div>\";\n\t\t\n\t\tobjParent.append(html);\n\t\t\n\t\tg_objPanel = objParent.children(\".ug-textpanel\");\n\t\tg_objTextWrapper = g_objPanel.children(\".ug-textpanel-textwrapper\");\n\t\t\n\t\tsetCss();\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * set panel css according the options\n\t */\n\tfunction setCss(){\n\t\t\t\t\n\t\t//set background css\t\t\n\t\tif(g_options.textpanel_enable_bg == true){\n\t\t\tg_objBG = g_objPanel.children(\".ug-textpanel-bg\");\n\t\t\tg_objBG.fadeTo(0,g_options.textpanel_bg_opacity);\n\t\t\t\n\t\t\tvar objCssBG = {\"background-color\":g_options.textpanel_bg_color};\n\t\t\tobjCssBG = jQuery.extend(objCssBG, g_options.textpanel_bg_css);\n\t\t\t\n\t\t\tg_objBG.css(objCssBG);\n\t\t}\n\t\t\n\t\t\n\t\t//set title css from options\n\t\tif(g_options.textpanel_enable_title == true){\n\t\t\tg_objTitle = g_objTextWrapper.children(\".ug-textpanel-title\");\n\t\t\tvar objCssTitle = {};\n\t\t\t\n\t\t\tif(g_options.textpanel_title_color !== null)\n\t\t\t\tobjCssTitle[\"color\"] = g_options.textpanel_title_color;\n\t\t\t\n\t\t\tif(g_options.textpanel_title_font_family !== null)\n\t\t\t\tobjCssTitle[\"font-family\"] = g_options.textpanel_title_font_family;\n\t\t\t\n\t\t\tif(g_options.textpanel_title_text_align !== null)\n\t\t\t\tobjCssTitle[\"text-align\"] = g_options.textpanel_title_text_align;\n\t\t\t\n\t\t\tif(g_options.textpanel_title_font_size !== null)\n\t\t\t\tobjCssTitle[\"font-size\"] = g_options.textpanel_title_font_size+\"px\";\n\t\t\t\n\t\t\tif(g_options.textpanel_title_bold !== null){\n\t\t\t\t\n\t\t\t\tif(g_options.textpanel_title_bold === true)\n\t\t\t\t\tobjCssTitle[\"font-weight\"] = \"bold\";\n\t\t\t\telse\n\t\t\t\t\tobjCssTitle[\"font-weight\"] = \"normal\";\n\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\t//set additional css\n\t\t\tif(g_options.textpanel_css_title)\n\t\t\t\tobjCssTitle = jQuery.extend(objCssTitle, g_options.textpanel_css_title);\n\t\t\t\n\t\t\tg_objTitle.css(objCssTitle);\n\t\t}\n\t\t\n\t\t//set description css\n\t\tif(g_options.textpanel_enable_description == true){\n\t\t\tg_objDesc = g_objTextWrapper.children(\".ug-textpanel-description\");\n\t\t\t\n\t\t\tvar objCssDesc = {};\n\t\t\t\n\t\t\tif(g_options.textpanel_desc_color !== null)\n\t\t\t\tobjCssDesc[\"color\"] = g_options.textpanel_desc_color;\n\t\t\t\n\t\t\tif(g_options.textpanel_desc_font_family !== null)\n\t\t\t\tobjCssDesc[\"font-family\"] = g_options.textpanel_desc_font_family;\n\t\t\t\n\t\t\tif(g_options.textpanel_desc_text_align !== null)\n\t\t\t\tobjCssDesc[\"text-align\"] = g_options.textpanel_desc_text_align;\n\t\t\t\n\t\t\tif(g_options.textpanel_desc_font_size !== null)\n\t\t\t\tobjCssDesc[\"font-size\"] = g_options.textpanel_desc_font_size+\"px\";\n\t\t\t\n\t\t\tif(g_options.textpanel_desc_bold !== null){\n\t\t\t\t\n\t\t\t\tif(g_options.textpanel_desc_bold === true)\n\t\t\t\t\tobjCssDesc[\"font-weight\"] = \"bold\";\n\t\t\t\telse\n\t\t\t\t\tobjCssDesc[\"font-weight\"] = \"normal\";\n\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\t//set additional css\n\t\t\tif(g_options.textpanel_css_title)\n\t\t\t\tobjCssDesc = jQuery.extend(objCssDesc, g_options.textpanel_css_description);\n\t\t\t\t\n\t\t\tg_objDesc.css(objCssDesc);\n\t\t}\n\t\t\n\t}\n\t\n\t/**\n\t * on item change, set the text\n\t */\n\tfunction onItemChange(){\n\t\tvar objItem = g_gallery.getSelectedItem();\n\t\tt.setText(objItem.title, objItem.description);\n\t}\n\t\n\t\n\t/**\n\t * init events\n\t */\n\tfunction initEvents(){\n\t\t\n\t\t//on item change, set the text in the slider.\n\t\tjQuery(g_gallery).on(g_gallery.events.ITEM_CHANGE, onItemChange);\n\t}\n\t\n\t\n\t/**\n\t * destroy the events\n\t */\n\tthis.destroy = function(){\n\t\tjQuery(g_gallery).off(g_gallery.events.ITEM_CHANGE);\n\t}\n\t\n\t/**\n\t * run the text panel\n\t */\n\tthis.run = function(){\n\t\t\n\t\tt.setSizeByParent();\n\t\t\n\t\tinitEvents();\n\t}\n\t\n\t/**\n\t * set panel size\n\t */\n\tthis.setPanelSize = function(panelWidth, panelHeight){\n\t\t\n\t\tg_temp.setInternalHeight = true;\n\t\t\n\t\tif(!panelHeight)\n\t\t\tvar panelHeight = 80;\t\t//some default number\n\t\telse\n\t\t\tg_temp.setInternalHeight = false;\n\t\t\n\t\tif(g_options.textpanel_height)\t\n\t\t\tpanelHeight = g_options.textpanel_height;\n\t\t\n\t\tg_objPanel.width(panelWidth);\n\t\tg_objPanel.height(panelHeight);\n\t\t\n\t\t//set background size\n\t\tif(g_objBG){\n\t\t\tg_objBG.width(panelWidth);\n\t\t\tg_objBG.height(panelHeight);\n\t\t}\n\t\t\n\t\t//set textwrapper size and position\n\t\tvar textWrapperWidth = panelWidth - g_options.textpanel_padding_left - g_options.textpanel_padding_right;\n\t\tvar textWrapperLeft = g_options.textpanel_padding_left;\n\t\t\n\t\tg_functions.setElementSizeAndPosition(g_objTextWrapper, textWrapperLeft, 0, textWrapperWidth, panelHeight);\n\t\t\n\t\t//set text width\n\t\tif(g_objTitle)\n\t\t\tg_objTitle.width(textWrapperWidth);\n\t\t\n\t\t//set description height\n\t\tif(g_objDesc)\n\t\t\tg_objDesc.width(textWrapperWidth);\n\t\t\n\t\tif(g_temp.isFirstTime == false)\n\t\t\tt.positionElements(false);\n\t}\n\t\n\t\n\t/**\n\t * set size by parent. the height is set to default meanwhile\n\t */\n\tthis.setSizeByParent = function(){\n\t\t\t\t\n\t\tvar objSize = g_functions.getElementSize(g_objParent);\n\t\tt.setPanelSize(objSize.width);\n\t}\n\t\n\t/**\n\t * set plain sext without other manipulations\n\t */\n\tthis.setTextPlain = function(title, description){\n\n\t\tif(g_objTitle)\n\t\t\tg_objTitle.html(title);\n\t\t\n\t\tif(g_objDesc)\n\t\t\tg_objDesc.html(description);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * set html text\n\t */\n\tthis.setText = function(title, description){\n\t\t\n\t\tif(g_temp.isFirstTime == true){\n\t\t\t\n\t\t\tt.setTextPlain(title, description);\n\t\t\t\n\t\t\tg_temp.isFirstTime = false;\n\t\t\t\n\t\t\tt.positionElements(false);\n\t\t\n\t\t}else{\t\t//width animation\n\t\t\t\n\t\t\tg_objTextWrapper.stop().fadeTo(g_options.textpanel_fade_duration,0,function(){\n\t\t\t\t\n\t\t\t\tt.setTextPlain(title, description);\n\t\t\t\t\n\t\t\t\tt.positionElements(true);\n\t\t\t\t\n\t\t\t\tjQuery(this).fadeTo(g_options.textpanel_fade_duration,1);\n\t\t\t});\n\t\t\t\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t\t\n\t\n\t/**\n\t * position the panel\n\t */\n\tthis.positionPanel = function(customTop, customLeft){\n\t\t\n\t\tvar objCss = {};\n\t\t\n\t\tif(customTop !== undefined && customTop !== null){\n\t\t\tobjCss.top = customTop;\n\t\t\tobjCss.bottom = \"auto\";\n\t\t}else{\n\t\t\t\n\t\t\tswitch(g_options.textpanel_align){\n\t\t\t\tcase \"top\":\n\t\t\t\t\tobjCss.top = g_options.textpanel_margin + \"px\";\n\t\t\t\tbreak;\n\t\t\t\tcase \"bottom\":\n\t\t\t\t\tobjCss.top = \"auto\";\n\t\t\t\t\tobjCss.bottom = g_options.textpanel_margin + \"px\";\n\t\t\t\tbreak;\n\t\t\t\tcase \"middle\":\n\t\t\t\t\tobjCss.top = g_functions.getElementRelativePos(g_objPanel, \"middle\", g_options.textpanel_margin);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\tif(customLeft !== undefined && customLeft !== null)\n\t\t\tobjCss.left = customLeft;\n\t\t\t\n\t\tg_objPanel.css(objCss);\n\t}\n\t\n\t\n\t/**\n\t * set custom options\n\t */\n\tthis.setOptions = function(objOptions){\n\t\t\n\t\tif(g_optionsPrefix)\n\t\t\tobjOptions = g_functions.convertCustomPrefixOptions(objOptions, g_optionsPrefix, \"textpanel\");\n\t\t\n\t\tg_options = jQuery.extend(g_options, objOptions);\n\t\t\t\t\n\t}\n\t\n\t\n\t/**\n\t * get html element\n\t */\n\tthis.getElement = function(){\n\t\t\n\t\treturn(g_objPanel);\n\t}\n\t\n\t/**\n\t * get element size\n\t */\n\tthis.getSize = function(){\n\t\t\n\t\tvar objSize = g_functions.getElementSize(g_objPanel);\n\t\treturn(objSize);\n\t}\n\t\n\t\n\t/**\n\t * refresh panel size, position and contents\n\t */\n\tthis.refresh = function(toShow, noPosition, panelWidth, panelHeight){\n\t\t\n\t\tsetCss();\n\t\t\n\t\tif(!panelWidth)\n\t\t\tt.setSizeByParent();\n\t\telse\n\t\t\tt.setPanelSize(panelWidth, panelHeight);\n\t\t\n\t\tt.positionElements(false);\n\t\t\n\t\tif(noPosition !== true)\n\t\t\tt.positionPanel();\n\t\t\n\t\tif(toShow === true)\n\t\t\tt.show();\t\t\n\t}\n\t\n\t\n\t/**\n\t * hide the panel\n\t */\n\tthis.hide = function(){\n\t\t\n\t\tg_objPanel.hide();\n\t}\n\t\n\t/**\n\t * show the panel\n\t */\n\tthis.show = function(){\n\t\tg_objPanel.show();\n\t}\n\t\n\t/**\n\t * get options\n\t */\n\tthis.getOptions = function(){\n\t\treturn(g_options);\n\t}\n\t\n\t/**\n\t * get text panel option\n\t */\n\tthis.getOption = function(optionName){\n\t\t\n\t\tif(g_options.hasOwnProperty(optionName) == false)\n\t\t\treturn(null);\n\t\t\n\t\treturn(g_options[optionName]);\n\t}\n\t\n\t\n}\n\n/** -------------- UGZoomButtonsPanel class ---------------------*/\n\n/**\n * zoom buttons panel class\n */\nfunction UGZoomButtonsPanel(){\n\t\n\tvar t = this;\n\tvar g_objPanel, g_objParent, g_objButtonPlus, g_objButtonMinus, g_objButtonReturn;\n\tvar g_slider = new UGSlider;\n\tvar g_functions = new UGFunctions();\n\t\n\tvar g_options = {\n\t\tslider_zoompanel_skin: \"\"\t\t//skin of the zoom panel, if empty inherit from gallery skin\n\t};\n\t\n\tvar g_temp = {\n\t\t\n\t};\n\t\n\t\n\t/**\n\t * init the panel\n\t */\n\tthis.init = function(objSlider, customOptions){\n\t\t\n\t\tg_slider = objSlider;\n\t\t\n\t\tif(customOptions)\n\t\t\tg_options = jQuery.extend(g_options, customOptions);\t\t\n\t}\n\t\n\t\n\t/**\n\t * append the bullets html to some parent\n\t */\n\tthis.appendHTML = function(objParent){\n\t\tg_objParent = objParent;\n\t\t\n\t\tvar html = \"<div class='ug-slider-control ug-zoompanel ug-skin-\"+g_options.slider_zoompanel_skin+\"'>\";\n\t\t\n\t\t\thtml += \"<div class='ug-zoompanel-button ug-zoompanel-plus'></div>\";\n\t\t\thtml += \"<div class='ug-zoompanel-button ug-zoompanel-minus ug-zoompanel-button-disabled'></div>\";\n\t\t\thtml += \"<div class='ug-zoompanel-button ug-zoompanel-return ug-zoompanel-button-disabled'></div>\";\n\t\t\n\t\thtml += \"</div>\";\n\t\t\n\t\tobjParent.append(html);\n\t\t\n\t\tg_objPanel = objParent.children(\".ug-zoompanel\");\n\t\tg_objButtonPlus = g_objPanel.children(\".ug-zoompanel-plus\");\n\t\tg_objButtonMinus = g_objPanel.children(\".ug-zoompanel-minus\");\n\t\tg_objButtonReturn = g_objPanel.children(\".ug-zoompanel-return\");\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * set objects - use it instead insert html\n\t */\n\tthis.setObjects = function(objButtonPlus, objButtonMinus, objButtonReturn){\n\t\t\n\t\tg_objButtonPlus = objButtonPlus;\n\t\tg_objButtonMinus = objButtonMinus;\n\t\tg_objButtonReturn = objButtonReturn;\n\t\t\n\t\tif(g_objButtonMinus)\n\t\t\tg_objButtonMinus.addClass(\"ug-zoompanel-button-disabled\");\n\t\t\n\t\tif(g_objButtonReturn)\n\t\t\tg_objButtonReturn.addClass(\"ug-zoompanel-button-disabled\");\n\t\t\t\n\t}\n\t\n\t\n\t/**\n\t * get buttons element\n\t*/\n\tthis.getElement = function(){\n\t\t\n\t\treturn(g_objPanel);\n\t}\n\t\n\t\n\t/**\n\t * check if the button disabled\n\t */\n\tfunction isButtonDisabled(objButton){\n\t\t\n\t\tif(!objButton)\n\t\t\treturn(true);\n\t\t\n\t\tif(objButton.hasClass(\"ug-zoompanel-button-disabled\"))\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\t\n\t\n\t/**\n\t * disable some button\n\t */\n\tfunction disableButton(objButton){\n\t\t\n\t\tif(objButton)\n\t\t\tobjButton.addClass(\"ug-zoompanel-button-disabled\");\n\t}\n\t\n\t/**\n\t * enable some button\n\t */\n\tfunction enableButton(objButton){\n\t\t\n\t\tif(objButton)\n\t\t\tobjButton.removeClass(\"ug-zoompanel-button-disabled\");\t\t\n\t}\n\t\n\t\n\t/**\n\t * on zoom change\n\t */\n\tfunction onZoomChange(){\n\t\t\n\t\t//skip not image types\n\t\tif(g_slider.isCurrentSlideType(\"image\") == false)\n\t\t\treturn(true);\n\t\t\n\t\tvar isFit = g_slider.isCurrentSlideImageFit();\n\t\t\n\t\tif(isFit == true){\t\t//if fit, disable buttons\n\t\t\t\n\t\t\tif(isButtonDisabled(g_objButtonMinus) == false){\t\t\t\n\t\t\t\tdisableButton(g_objButtonMinus);\n\t\t\t\tdisableButton(g_objButtonReturn);\n\t\t\t}\n\t\t\t\n\t\t}else{\t//if not fit, enable minus buttons\n\t\t\t\n\t\t\tif(isButtonDisabled(g_objButtonMinus) == true){\n\t\t\t\tenableButton(g_objButtonMinus);\n\t\t\t\tenableButton(g_objButtonReturn);\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\t\n\t}\n\t\n\t/**\n\t * init zoompanel events\n\t */\n\tt.initEvents = function(){\n\t\t\n\t\t//add hover class on buttons\n\t\tg_functions.addClassOnHover(g_objButtonPlus, \"ug-button-hover\");\n\t\tg_functions.addClassOnHover(g_objButtonMinus, \"ug-button-hover\");\n\t\tg_functions.addClassOnHover(g_objButtonReturn, \"ug-button-hover\");\n\t\t\n\t\t//set buttons click events\n\t\t\n\t\tg_functions.setButtonOnClick(g_objButtonPlus, function(){\n\t\t\t\n\t\t\tif(isButtonDisabled(g_objButtonPlus) == true)\n\t\t\t\treturn(true);\n\t\t\t\n\t\t\tg_slider.zoomIn();\n\t\t});\n\t\t\n\t\tg_functions.setButtonOnClick(g_objButtonMinus, function(){\n\t\t\t\n\t\t\tif(isButtonDisabled(g_objButtonMinus) == true)\n\t\t\t\treturn(true);\n\t\t\t\n\t\t\tg_slider.zoomOut();\n\t\t});\n\t\t\n\t\tg_functions.setButtonOnClick(g_objButtonReturn, function(){\n\t\t\t\n\t\t\tif(isButtonDisabled(g_objButtonReturn) == true)\n\t\t\t\treturn(true);\n\t\t\t\n\t\t\tg_slider.zoomBack();\n\t\t});\n\t\t\t\t\n\t\t//on zoom change event\n\t\tjQuery(g_slider).on(g_slider.events.ZOOM_CHANGE,onZoomChange);\n\t\tjQuery(g_slider).on(g_slider.events.ITEM_CHANGED,onZoomChange);\n\t\n\t}\n\t\n\t\n}\n\n\n/** -------------- UgBullets class ---------------------*/\n\nfunction UGBullets(){\n\t\n\tvar t = this, g_numBullets = 0, g_gallery = new UniteGalleryMain();\n\tvar g_objBullets, g_objParent, g_activeIndex = -1, g_bulletWidth;\n\tvar g_functions = new UGFunctions();\n\t\n\tvar g_temp = {\n\t\tisInited:false\n\t};\n\t\n\tvar g_options = {\n\t\tbullets_skin: \"\",\t\t\t\t\t//bullets_skin: \"\"\t\t//skin of the bullets, if empty inherit from gallery skin\n\t\tbullets_addclass: \"\",\t\t\t\t\t//bullets object class addition\n\t\tbullets_space_between:-1\t\t\t//set the space between bullets. If -1 then will be set default space from the skins\n\t}\n\t\n\t\n\t/**\n\t * the events\n\t */\n\tthis.events = {\n\t\tBULLET_CLICK : \"bullet_click\"\n\t};\n\t\n\t/**\n\t * init the bullets\n\t */\n\tthis.init = function(gallery, customOptions, numBullets){\n\t\tg_gallery = gallery;\n\t\t\n\t\tif(numBullets)\n\t\t\tg_numBullets = numBullets;\n\t\telse\t\n\t\t\tg_numBullets = g_gallery.getNumItems();\n\t\t\n\t\tg_temp.isInited = true;\n\t\tg_options = jQuery.extend(g_options, customOptions);\n\t\t\n\t\tif(g_options.bullets_skin == \"\")\n\t\t\tg_options.bullets_skin = g_options.gallery_skin;\n\t\t\n\t}\n\t\n\t/**\n\t * add bullets to the html\n\t */\n\tfunction setHtmlBullets(){\n\t\tvar html = \"\";\n\t\t\n\t\tvar addHtml = \"\";\n\t\tif(g_options.bullets_space_between != -1)\n\t\t\taddHtml = \" style='margin-left:\" + g_options.bullets_space_between + \"px'\";\n\t\t\n\t\tfor(var i=0; i< g_numBullets; i++){\n\t\t\tif(i == 0)\n\t\t\t\thtml += \"<div class='ug-bullet'></div>\";\n\t\t\telse\n\t\t\t\thtml += \"<div class='ug-bullet'\"+addHtml+\"></div>\";\n\t\t}\n\t\t\n\t\tg_objBullets.html(html);\n\t\t\n\t\t//set bullet width value\n\t\tif(!g_bulletWidth){\n\t\t\tvar objBullet = g_objBullets.find(\".ug-bullet:first-child\");\n\t\t\tif(objBullet.length)\n\t\t\t\tg_bulletWidth = objBullet.width();\n\t\t}\n\t}\n\n\t/**\n\t * get total bullets width\n\t */\n\tthis.getBulletsWidth = function(){\n\t\tif(g_numBullets == 0)\n\t\t\treturn(0);\n\t\t\n\t\tif(!g_bulletWidth)\n\t\t\treturn(0);\n\t\t\n\t\tvar totalWidth = g_numBullets*g_bulletWidth+(g_numBullets-1)*g_options.bullets_space_between;\n\t\treturn(totalWidth);\n\t}\n\t\n\t\n\t/**\n\t * append the bullets html to some parent\n\t */\n\tthis.appendHTML = function(objParent){\n\t\tg_objParent = objParent;\n\t\t\n\t\tvalidateInited();\n\t\tvar addClass = \"\";\n\t\tif(g_options.bullets_addclass != \"\")\n\t\t\taddClass = \" \" + g_options.bullets_addclass;\n\t\t\t\n\t\tvar html = \"<div class='ug-slider-control ug-bullets ug-skin-\"+g_options.bullets_skin + addClass+\"'>\";\n\t\t\n\t\thtml += \"</div>\";\n\t\t\n\t\tg_objBullets = jQuery(html);\n\t\t\n\t\tobjParent.append(g_objBullets);\n\t\t\n\t\tsetHtmlBullets();\n\t\t\n\t\tinitEvents();\n\t}\t\n\t\n\t\n\t/**\n\t * update number of bullets\n\t */\n\tthis.updateNumBullets = function(numBullets){\n\t\t\n\t\tg_numBullets = numBullets;\n\t\tsetHtmlBullets();\n\t\tinitEvents();\n\t}\n\t\n\t\n\t/**\n\t * \n\t * on bullet click\n\t */\n\tfunction onBulletClick(objBullet){\n\t\t\t\t\n\t\t//filter not active only\n\t\tif(t.isActive(objBullet) == true)\n\t\t\treturn(true);\n\t\t\n\t\tvar index = objBullet.index();\n\t\t\t\n\t\tjQuery(t).trigger(t.events.BULLET_CLICK, index);\n\t}\n\t\n\t\n\t/**\n\t * init the bullets events\n\t * trigger bullet click event\n\t */\n\tfunction initEvents(){\n\t\t\n\t\tvar objBullets = g_objBullets.children(\".ug-bullet\");\n\t\t\n\t\tg_functions.setButtonOnClick(objBullets, onBulletClick);\n\t\t\n\t\tobjBullets.on(\"mousedown mouseup\",function(event){\n\t\t\t//event.preventDefault();\n\t\t\treturn(false);\n\t\t});\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * get the bullets element\n\t */\n\tthis.getElement = function(){\n\t\treturn g_objBullets;\n\t}\n\t\n\t\n\t/**\n\t * set some item active\n\t */\n\tthis.setActive = function(index){\n\t\tvalidateInited();\n\t\tvalidateIndex(index);\n\t\t\n\t\tvar children = g_objBullets.children(\".ug-bullet\");\n\t\tchildren.removeClass(\"ug-bullet-active\");\n\t\t\n\t\tvar bullet = jQuery(children[index]);\n\t\tbullet.addClass(\"ug-bullet-active\");\n\t\t\n\t\tg_activeIndex = index;\n\t}\n\n\t\n\t/**\n\t * check if the bullet is active\n\t */\n\tthis.isActive = function(index){\n\t\tvalidateIndex(index);\n\t\t\n\t\tif(typeof index != \"number\")\n\t\t\tvar objBullet = index;\n\t\telse{\n\t\t\tvar objBullet = g_objBullets.children(\".ug-bullet\")[index];\t\t\t\n\t\t}\n\t\t\n\t\tif(objBullet.hasClass(\"ug-bullet-active\"))\n\t\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\t\n\t\n\t/**\n\t * get bullets number\n\t */\n\tthis.getNumBullets = function(){\n\t\treturn(g_numBullets);\n\t}\n\t\n\t/**\n\t * validate bullets index\n\t */\n\tfunction validateIndex(index){\n\t\tif(index < 0 || index >= g_numBullets)\n\t\t\tthrow new Error(\"wrong bullet index: \" + index);\n\t}\n\t\n\t\n\t/**\n\t * validate that the bullets are inited\n\t */\n\tfunction validateInited(){\n\t\t\n\t\tif(g_temp.isInited == true)\n\t\t\treturn(true);\n\t\t\n\t\tthrow new Error(\"The bullets are not inited!\");\n\t}\n\t\n\t\n\t\n}\n\n/** -------------- UgProgressBar class ---------------------*/\n\nfunction UGProgressBar(){\n\t\n\tvar t = this, g_isInited = false;\n\tvar g_percent = 0, g_objBar, g_objInner, g_functions = new UGFunctions();\n\t\n\tvar g_options = {\n\t\tslider_progressbar_color:\"#ffffff\",\t\t\t//progress bar color\n\t\tslider_progressbar_opacity: 0.6,\t\t\t//progress bar opacity\n\t\tslider_progressbar_line_width: 5\t\t\t//progress bar line width\n\t}\n\t\n\t\n\t/**\n\t * put progress pie to some wrapper\n\t */\n\tthis.put = function(g_objWrapper, userOptions){\n\t\t\n\t\tif(userOptions)\n\t\t\tg_options = jQuery.extend(g_options, userOptions);\n\t\t\n\t\tg_objWrapper.append(\"<div class='ug-progress-bar'><div class='ug-progress-bar-inner'></div></div>\");\n\t\tg_objBar = g_objWrapper.children(\".ug-progress-bar\");\n\t\tg_objInner = g_objBar.children(\".ug-progress-bar-inner\");\n\t\t\n\t\t//init the objects\n\t\tg_objInner.css(\"background-color\", g_options.slider_progressbar_color);\n\t\tg_objBar.height(g_options.slider_progressbar_line_width);\n\t\tg_objInner.height(g_options.slider_progressbar_line_width);\n\t\tg_objInner.width(\"0%\");\n\t\t\n\t\t//set opacity old way (because ie bug)\n\t\tvar opacity = g_options.slider_progressbar_opacity;\n\t\t\n\t\tvar objInnerHTML = g_objInner[0];\n\t\tobjInnerHTML.style.opacity = opacity;\n\t\tobjInnerHTML.style.filter = 'alpha(opacity=' + opacity*100 + ')';\n\t}\n\t\n\t\n\t/**\n\t * put the pie hidden\n\t */\n\tthis.putHidden = function(g_objWrapper, userOptions){\n\t\tt.put(g_objWrapper, userOptions);\n\t\tg_objBar.hide();\n\t}\n\t\n\t/**\n\t * get the bar object\n\t */\n\tthis.getElement = function(){\n\t\t\n\t\treturn(g_objBar);\n\t}\n\t\n\t/**\n\t * set progress bar size\n\t */\n\tthis.setSize = function(width){\n\t\t\n\t\tg_objBar.width(width);\n\t\tg_objInner.width(width);\n\t\tt.draw();\n\t}\n\t\n\t\n\t/**\n\t * set position\n\t */\n\tthis.setPosition = function(left, top, offsetLeft, offsetTop){\n\t\t\n\t\tg_functions.placeElement(g_objBar, left, top, offsetLeft, offsetTop);\n\t}\n\t\n\t\n\t/**\n\t * draw the progress bar\n\t */\n\tthis.draw = function(){\n\t\tvar innerWidth = g_percent * 100;\n\t\t\n\t\tg_objInner.width(innerWidth + \"%\");\n\t}\n\t\n\t\n\t/**\n\t * set and draw the progress\n\t */\n\tthis.setProgress = function(percent){\n\t\t\n\t\tg_percent = g_functions.normalizePercent(percent);\n\t\t\n\t\t//debugLine(g_percent, true);\n\t\t\n\t\tt.draw();\n\t}\n\t\n\t/**\n\t * get type string\n\t */\n\tthis.getType = function(){\n\t\treturn(\"bar\");\n\t}\n\t\n}\n\n/** -------------- UgProgressPie class ---------------------*/\n\nfunction UGProgressPie(){\n\t\n\tvar t = this, g_isInited = false;\n\tvar g_percent, g_objPie, g_functions = new UGFunctions();\n\t\n\tvar g_options = {\n\t\tslider_progresspie_type_fill: false,\t\t//false is stroke, true is fill - the progress pie type, stroke of fill\n\t\tslider_progresspie_color1: \"#B5B5B5\", \t\t//the first color of the progress pie\n\t\tslider_progresspie_color2: \"#E5E5E5\",\t\t//progress pie second color \n\t\tslider_progresspie_stroke_width: 6,\t\t\t//progress pie stroke width \n\t\tslider_progresspie_width: 30,\t\t\t\t//progess pie width\n\t\tslider_progresspie_height:30\t\t\t\t//progress pie height\n\t}\n\t\n\t\n\t/**\n\t * put progress pie to some wrapper\n\t */\n\tthis.put = function(g_objWrapper, userOptions){\n\t\t\n\t\tif(userOptions)\n\t\t\tg_options = jQuery.extend(g_options, userOptions);\n\t\t\t\n\t\tg_objWrapper.append(\"<canvas class='ug-canvas-pie' width='\"+g_options.slider_progresspie_width+\"' height='\"+g_options.slider_progresspie_height+\"'></canvas>\");\n\t\tg_objPie = g_objWrapper.children(\".ug-canvas-pie\");\n\t}\n\t\n\t\n\t/**\n\t * put the pie hidden\n\t */\n\tthis.putHidden = function(g_objWrapper, userOptions){\n\t\tt.put(g_objWrapper, userOptions);\n\t\tdraw(0.1);\n\t\tg_objPie.hide();\n\t}\n\t\n\t\n\t/**\n\t * get jquery object\n\t */\n\tthis.getElement = function(){\n\t\treturn(g_objPie);\n\t}\n\t\n\t/**\n\t * set position\n\t */\n\tthis.setPosition = function(left, top){\n\t\t\n\t\tg_functions.placeElement(g_objPie, left, top);\n\t\t\n\t}\n\t\n\t/**\n\t * get the height and width of the object\n\t */\n\tthis.getSize = function(){\n\t\t\n\t\tvar obj = {\n\t\t\twidth: g_options.slider_progresspie_width,\n\t\t\theight: g_options.slider_progresspie_height\n\t\t};\n\t\t\n\t\treturn(obj);\n\t}\t\n\t\n\t/**\n\t * draw the progress pie\n\t */\n\tfunction draw(percent){\n\t\t\n\t\tif(!percent)\n\t\t\tvar percent = 0;\n\t\t\n\t\tvar radius = Math.min(g_options.slider_progresspie_width, g_options.slider_progresspie_height) / 2;\n\t\t\n\t\tvar ctx = g_objPie[0].getContext('2d');\n\t\t\n\t\t//init the context\n\t\tif(g_isInited == false){\n\t\t\t\n\t\t\tg_isInited = true;\n\t\t\t\n\t\t\tctx.rotate(Math.PI*(3/2));\n\t\t\tctx.translate(-2 * radius,0);\n\t\t}\t\t\n\t\t\n\t\tctx.clearRect(0,0,g_options.slider_progresspie_width, g_options.slider_progresspie_height);\n\t\t\n\t\tvar centerX = g_options.slider_progresspie_width / 2;\n\t\tvar centerY = g_options.slider_progresspie_height / 2;\n\t    \n\t\t//draw main arc\n\t\tvar startPoint = 0;\n\t\tvar endPoint = percent * Math.PI * 2;\n\t\t\t\t\n\t    \n\t\tif(g_options.slider_progresspie_type_fill == true){\t\t//fill\n\t\t\t\n\t\t\tctx.beginPath();\n\t\t\t\tctx.moveTo(centerX, centerY); \n\t\t\t    ctx.arc(centerX,centerY,radius,startPoint, endPoint);\n\t\t\t    ctx.lineTo(centerX, centerY); \n\t\t\t    \n\t\t\t    ctx.fillStyle = g_options.slider_progresspie_color1;\n\t\t\t    ctx.fill();\n\t\t    ctx.closePath();\n\t\t    \n\t\t}else{\t\t//stroke\n\t\t    ctx.globalCompositeOperation = \"source-over\";\n\t\t\t\n\t\t\tctx.beginPath();\n\t\t\t\tctx.moveTo(centerX, centerY); \n\t\t\t    ctx.arc(centerX,centerY,radius,startPoint, endPoint);\n\t\t\t    ctx.lineTo(centerX, centerY); \n\t\t\t    \n\t\t\t    ctx.fillStyle = g_options.slider_progresspie_color1;\n\t\t\t    ctx.fill();\n\t\t\tctx.closePath();\n\t\t    \n\t\t    ctx.globalCompositeOperation = \"destination-out\";\n\t\t\t\n\t\t\tvar radius2 = radius - g_options.slider_progresspie_stroke_width;\n\t\t    \n\t\t\tctx.beginPath();\n\t\t\t\t\t\t\t\t\n\t\t\t\tctx.moveTo(centerX, centerY); \n\t\t\t    ctx.arc(centerX,centerY,radius2,startPoint, endPoint);\n\t\t\t    ctx.lineTo(centerX, centerY); \n\t\t\t    \n\t\t\t    ctx.fillStyle = g_options.slider_progresspie_color1;\n\t\t\t    ctx.fill();\n\t\t\t    \n\t\t\tctx.closePath();\n\t\t}\n\t    \n\t    \n\t\t//draw rest arc (only on fill type):\n\t    if(g_options.slider_progresspie_type_fill == true){\n\t\t\tstartPoint = endPoint;\n\t\t\tendPoint = Math.PI * 2;\n\t\t\tctx.beginPath();\n\t\t\t    ctx.arc(centerX,centerY,radius,startPoint, endPoint);\n\t\t\t    ctx.lineTo(centerX, centerY); \n\t\t    ctx.fillStyle = g_options.slider_progresspie_color2;\n\t\t    ctx.fill();\n\t\t    ctx.closePath();\t    \t\n\t    }\n\t    \n\t}\n\t\n\t\n\t/**\n\t * set progress (0-1)\n\t */\n\tthis.setProgress = function(percent){\n\t\t\n\t\tpercent = g_functions.normalizePercent(percent);\n\t\t\n\t\tg_percent = percent;\n\t\tdraw(percent);\n\t}\n\t\n\t/**\n\t * get type string\n\t */\n\tthis.getType = function(){\n\t\treturn(\"pie\");\n\t}\n\t\n}\n\n/**f\n * touch thumbs control class\n * addon to strip gallery\n */\nfunction UGTouchSliderControl(){\n\t\n\tvar g_objSlider, g_objInner, g_parent = new UGSlider();\n\tvar g_objParent, g_options, t=this;\n\t\n\tvar g_functions = new UGFunctions();\n\t\n\t\n\tvar g_options = {\n\t\t  slider_transition_continuedrag_speed: 250,\t\t\t\t//the duration of continue dragging after drag end\n\t\t  slider_transition_continuedrag_easing: \"linear\",\t\t//easing function of continue dragging animation\n\t\t  slider_transition_return_speed: 300,\t\t\t\t\t//the duration of the \"return to place\" animation\n\t\t  slider_transition_return_easing: \"easeInOutQuad\"\t\t//easing function of the \"return to place\" animation\n\t};\n\t\n\tvar g_temp = {\n\t\ttouch_active: false,\t\t\n\t\tstartMouseX: 0,\t\t\n\t\tstartMouseY: 0,\n\t\tlastMouseX: 0,\n\t\tlastMouseY: 0,\n\t\tstartPosx:0, \n\t\tstartTime:0,\n\t\tisInitDataValid:false,\n\t\tslides: null,\n\t\tlastNumTouches:0,\n\t\tisDragging: false,\n\t\tstoredEventID: \"touchSlider\",\n\t\tvideoStartX: 0,\n\t\tisDragVideo: false,\n\t\tvideoObject: null\n\t};\n\t\n\t\n\t/**\n\t * get diff inner object position from current item pos\n\t */\n\tfunction getDiffPosFromCurrentItem(slides){\n\t\t\n\t\tif(!slides)\n\t\t\tvar slides = g_parent.getSlidesReference();\n\t\t\n\t\tvar posCurrent = g_functions.getElementSize(slides.objCurrentSlide);\n\t\tvar inPlaceX = -posCurrent.left;\n\t\tvar objInnerSize = g_functions.getElementSize(g_objInner);\n\t\tvar diffPos = inPlaceX - objInnerSize.left;\n\t\t\n\t\treturn(diffPos);\n\t}\n\t\n\t/**\n\t * check if the movement that was held is valid for slide change\n\t */\n\tfunction isMovementValidForChange(){\n\t\t\n\t\tvar slides = g_parent.getSlidesReference();\n\n\t\t//check position, if more then half, move\n\t\tvar diffPos = getDiffPosFromCurrentItem(slides);\n\t\t\n\t\tvar breakSize = Math.round(slides.objCurrentSlide.width() * 3 / 8);\n\t\t\t\t\n\t\tif(Math.abs(diffPos) >= breakSize)\n\t\t\treturn(true);\n\t\t\t\t\n\t\t//check gesture, if vertical mostly then not move\n\t\tvar diffX = Math.abs(g_temp.lastMouseX - g_temp.startMouseX);\n\t\tvar diffY = Math.abs(g_temp.lastMouseY - g_temp.startMouseY);\n\t\t\n\t\t//debugLine(\"diffx: \" + diffX, true, true);\n\t\t\n\t\tif(diffX < 20)\n\t\t\treturn(false);\n\t\t\n\t\t//if(diffY >= diffX)\n\t\t\t//return(false);\n\t\t\t\t\n\t\t//check time. Short time always move\n\t\tvar endTime = jQuery.now();\n\t\tvar diffTime = endTime - g_temp.startTime;\n\t\t\n\t\t//debugLine(\"time: \" + diffTime, true);\n\t\t\n\t\tif(diffTime < 500)\n\t\t\treturn(true);\n\t\t\n\t\t\t\t\t\n\t\treturn(false);\n\t}\n\n\t/**\n\t * check tab event occured\n\t * invokes on touchend event on the slider object\n\t */\n\tthis.isTapEventOccured = function(event){\n\t\t\n\t\t//validate one touch\n\t\tvar arrTouches = g_functions.getArrTouches(event);\n\t\tvar numTouches = arrTouches.length;\n\t\t\t\n\t\tif(numTouches != 0 || g_temp.lastNumTouches != 0){\n\t\t\tg_temp.lastNumTouches = numTouches;\n\t\t\treturn(false);\n\t\t}\n\t\t\t\n\t\tg_temp.lastNumTouches = numTouches;\n\t\t\t\t\n\t\tvar slides = g_parent.getSlidesReference();\n\n\t\t//check position, if more then half, move\n\t\tvar diffPos = getDiffPosFromCurrentItem(slides);\n\t\t\n\t\t//check gesture, if vertical mostly then not move\n\t\tvar diffX = Math.abs(g_temp.lastMouseX - g_temp.startMouseX);\n\t\tvar diffY = Math.abs(g_temp.lastMouseY - g_temp.startMouseY);\n\t\t\n\t\t//check by time\n\t\tvar endTime = jQuery.now();\n\t\tvar diffTime = endTime - g_temp.startTime;\n\t\t\n\t\t//combine move and time\n\t\tif(diffX < 20 && diffY < 50 && diffTime < 500)\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\t\n\t/**\n\t * return the item to place\n\t */\n\tfunction returnToPlace(slides){\n\t\t\n\t\tif(g_parent.isInnerInPlace() == true)\n\t\t\treturn(false);\n\t\t\t\t\t\t\n\t\t//trigger before return event\n\t\tg_objParent.trigger(g_parent.events.BEFORE_RETURN);\n\t\t\n\t\tif(!slides)\n\t\t\tvar slides = g_parent.getSlidesReference();\n\t\t\n\t\tvar posCurrent = g_functions.getElementSize(slides.objCurrentSlide);\n\t\tvar destX = -posCurrent.left;\n\t\t\t\t\n\t\t//animate objects\t\t\n\t\tg_objInner.animate({left:destX+\"px\"},{\n\t\t\tduration: g_options.slider_transition_return_speed,\n\t\t\teasing: g_options.slider_transition_continuedrag_easing,\n\t\t\tqueue: false,\n\t\t\tprogress: function(animation, number, remainingMS){\n\t\t\t\t\t\t\t\t\n\t\t\t\t//check drag video\n\t\t\t\tif(g_temp.isDragVideo == true){\n\t\t\t\t\tvar objSize = g_functions.getElementSize(g_objInner);\n\t\t\t\t\tvar innerX = objSize.left;\n\t\t\t\t\t\n\t\t\t\t\tvar posDiff = innerX - destX;\n\t\t\t\t\t\n\t\t\t\t\tvar videoPosX = g_temp.videoStartX + posDiff;\n\t\t\t\t\tg_temp.videoObject.css(\"left\", videoPosX);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t},\n\t\t\tcomplete: function(){\n\t\t\t\tg_objParent.trigger(g_parent.events.AFTER_RETURN);\n\t\t\t}\n\t\t});\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * \n\t * change the item to given direction\n\t */\n\tfunction changeItem(direction){\n\t\t\n\t\tg_parent.getVideoObject().hide();\n\t\tg_parent.switchSlideNums(direction);\n\t\tg_parent.placeNabourItems();\n\n\t}\n\t\n\t/**\n\t * continue the dragging by changing the slides to the right place.\n\t */\n\tfunction continueSlideDragChange(){\n\t\t\n\t\t//get data\n\t\tvar slides = g_parent.getSlidesReference();\n\t\t\n\t\tvar diffPos = getDiffPosFromCurrentItem(slides);\n\t\t\n\t\tif(diffPos == 0)\n\t\t\treturn(false);\n\t\t\n\t\tvar direction = (diffPos > 0) ? \"left\" : \"right\";\n\t\t\t\n\t\tvar isReturn = false;\n\t\t\t\n\t\tswitch(direction){\n\t\t\tcase \"right\":\t//change to prev item\n\t\t\t\t\n\t\t\t\tif( g_parent.isSlideHasItem(slides.objPrevSlide) ){\n\t\t\t\t\t\n\t\t\t\t\tvar posPrev = g_functions.getElementSize(slides.objPrevSlide);\n\t\t\t\t\tvar destX = -posPrev.left;\n\t\t\t\t\t\n\t\t\t\t}else\t//return current item\n\t\t\t\t\tisReturn = true;\n\t\t\t\t\n\t\t\tbreak;\t\n\t\t\tcase \"left\":\t\t//change to next item\n\t\t\t\t\n\t\t\t\tif( g_parent.isSlideHasItem(slides.objNextSlide) ){\n\t\t\t\t\t\n\t\t\t\t\tvar posNext = g_functions.getElementSize(slides.objNextSlide);\n\t\t\t\t\tvar destX = -posNext.left;\n\t\t\t\t\t\n\t\t\t\t}else\t\t\t\t\t\n\t\t\t\t\tisReturn = true;\t\t\t\t\n\t\t\tbreak;\n\t   }\n\t\t\n\t\t\n\t\tif(isReturn == true){\n\t\t\treturnToPlace(slides);\n\t\t\t\n\t\t}else{\n\t\t\t\t\t\t\n\t\t\t//animate objects\n\t\t\tg_objInner.stop().animate({left:destX+\"px\"},{\n\t\t\t\tduration: g_options.slider_transition_continuedrag_speed,\n\t\t\t\teasing: g_options.slider_transition_continuedrag_easing,\n\t\t\t\tqueue: false,\n\t\t\t\tprogress: function(){\n\t\t\t\t\t\n\t\t\t\t\t//check drag video\n\t\t\t\t\tif(g_temp.isDragVideo == true){\n\t\t\t\t\t\tvar objSize = g_functions.getElementSize(g_objInner);\n\t\t\t\t\t\tvar innerX = objSize.left;\n\t\t\t\t\t\tvar posDiff = innerX - g_temp.startPosx;\n\t\t\t\t\t\tvar videoPosX = g_temp.videoStartX + posDiff;\n\t\t\t\t\t\tg_temp.videoObject.css(\"left\", videoPosX);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t},\n\t\t\t\talways:function(){\n\t\t\t\t\tchangeItem(direction);\n\t\t\t\t\tg_objParent.trigger(g_parent.events.AFTER_DRAG_CHANGE);\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t}\n\t\t\t\t\n\t\t\n\t}\n\n\t\n\t/**\n\t * handle slider drag on mouse drag\n\t */\n\tfunction handleSliderDrag(event){\n\t\t\n\t\tvar diff = g_temp.lastMouseX - g_temp.startMouseX;\n\t\t\n\t\tif(diff == 0)\n\t\t\treturn(true);\n\t\t\n\t\tvar direction = (diff < 0) ? \"left\":\"right\";\n\t\t\n\t\tvar objZoomSlider = g_parent.getObjZoom();\n\t\t\n\t\t//don't drag if the zoom panning enabled\n\t\t//store init position after image zoom pan end\n\t\tif(objZoomSlider){\n\t\t\t\n\t\t\tvar isPanEnabled = objZoomSlider.isPanEnabled(event,direction);\n\t\t\t\t\t\t\n\t\t\tif(isPanEnabled == true){\n\t\t\t\tg_temp.isInitDataValid = false;\n\t\t\t\treturn(true);\t\t\t\t\n\t\t\t}else{\n\t\t\t\t\n\t\t\t\tif(g_temp.isInitDataValid == false){\n\t\t\t\t\tstoreInitTouchData(event);\n\t\t\t\t\treturn(true);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t}\n\t\t\n\t\t//set inner div position\n\t\tvar currentPosx = g_temp.startPosx + diff;\n\t\t\n\t\t//check out of borders and slow down the motion:\n\t\tif(diff > 0 && currentPosx > 0)\n\t\t\tcurrentPosx = currentPosx / 3;\t\t\n\t\t\n\t\telse if(diff < 0 ){\n\t\t\t\n\t\t\tvar innerEnd = currentPosx + g_objInner.width();\n\t\t\tvar sliderWidth = g_objSlider.width();\n\t\t\t\n\t\t\tif( innerEnd <  sliderWidth ){\n\t\t\t\tcurrentPosx = g_temp.startPosx + diff/3;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(g_temp.isDragging == false){\n\t\t\tg_temp.isDragging = true;\n\t\t\tg_objParent.trigger(g_parent.events.START_DRAG);\n\t\t}\n\t\t\t\t\n\t\tg_objInner.css(\"left\", currentPosx+\"px\");\n\t\t\n\t\t//drag video\n\t\tif(g_temp.isDragVideo == true){\n\t\t\tvar posDiff = currentPosx - g_temp.startPosx;\n\t\t\tvar videoPosX = g_temp.videoStartX + posDiff;\n\t\t\t\n\t\t\tg_temp.videoObject.css(\"left\", videoPosX);\n\t\t}\n\t\t\n\t}\n\t\n\t/**\n\t * store init touch position\n\t */\n\tfunction storeInitTouchData(event){\n\t\t\n\t\tvar mousePos = g_functions.getMousePosition(event);\n\t\t\n\t\tg_temp.startMouseX = mousePos.pageX;\n\t\t\n\t\t//debugLine(\"startx:\" + g_temp.startMouseX, true, true);\n\t\t\n\t\tg_temp.startMouseY = mousePos.pageY;\n\t\t\n\t\tg_temp.lastMouseX = g_temp.startMouseX;\n\t\tg_temp.lastMouseY = g_temp.startMouseY;\n\t\tg_temp.startTime = jQuery.now();\n\t\t\n\t\tvar arrTouches = g_functions.getArrTouches(event);\t\t\n\t\tg_temp.startArrTouches = g_functions.getArrTouchPositions(arrTouches);\n\t\t\n\t\tvar objPos = g_functions.getElementSize(g_objInner);\n\t\t\n\t\tg_temp.startPosx = objPos.left;\n\t\t\n\t\tg_temp.isInitDataValid = true;\n\t\t\n\t\t//check if video object need to be dragged\n\t\tg_temp.isDragVideo = false;\n\t\t\t\t\t\n\t\t\n\t\tg_functions.storeEventData(event, g_temp.storedEventID);\n\t}\n\t\n\t/**\n\t * disable touch active\n\t */\n\tfunction disableTouchActive(who){\n\t\t\n\t\tg_temp.touch_active = false;\n\t\t\n\t\t//debugLine(\"disable: \" + who, true, true);\n\t}\n\t\n\t/**\n\t * enable the touch active\n\t */\n\tfunction enableTouchActive(who, event){\n\t\t\n\t\tg_temp.touch_active = true;\n\t\tstoreInitTouchData(event);\n\t\t\n\t\t//debugLine(\"enable: \" + who, true, true);\n\t}\n\n\t\n\t/**\n\t * on touch slide start\n\t * \n\t */\n\tfunction onTouchStart(event){\n\t\t\n\t\tevent.preventDefault();\n\t\t\n\t\tg_temp.isDragging = false;\n\t\t\n\t\t//debugLine(\"touchstart\", true, true);\n\t\t\n\t\t//check if the slides are changing from another event.\n\t\tif(g_parent.isAnimating() == true){\n\t\t\tg_objInner.stop(true, true);\n\t\t}\n\t\t\n\t\t//check num touches\n\t\tvar arrTouches = g_functions.getArrTouches(event);\n\t\tif(arrTouches.length > 1){\n\t\t\t\n\t\t\tif(g_temp.touch_active == true){\n\t\t\t\tdisableTouchActive(\"1\");\n\t\t\t}\n\t\t\t\n\t\t\treturn(true);\n\t\t}\n\t\t\t\t\t\t\n\t\tif(g_temp.touch_active == true){\n\t\t\treturn(true);\n\t\t}\n\t\t\n\t\tenableTouchActive(\"1\", event);\n\t\t\n\t}\n\t\n\n\t/**\n\t * \n\t * on touch move event\n\t */\n\tfunction onTouchMove(event){\n\t\t\n\t\tif(g_temp.touch_active == false)\n\t\t\treturn(true);\n\t\t\n\t\t//detect moving without button press\n\t\tif(event.buttons == 0){\n\t\t\tdisableTouchActive(\"2\");\n\t\t\t\n\t\t\tcontinueSlideDragChange();\n\t\t\t\t\t\t\n\t\t\treturn(true);\n\t\t}\n\n\t\tg_functions.updateStoredEventData(event, g_temp.storedEventID);\n\t\t\t\t\n\t\tevent.preventDefault();\n\t\t\n\t\tvar mousePos = g_functions.getMousePosition(event);\n\t\tg_temp.lastMouseX = mousePos.pageX;\n\t\tg_temp.lastMouseY = mousePos.pageY;\n\t\t\t\t\n\t\t//debugLine(\"lastX:\" + g_temp.lastMouseX, true, true);\n\t\t\n\t\tvar scrollDir = null;\n\t\t\n\t\tif(g_options.slider_vertical_scroll_ondrag == true)\n\t\t\tscrollDir = g_functions.handleScrollTop(g_temp.storedEventID);\n\t\t\n\t\tif(scrollDir !== \"vert\")\n\t\t\thandleSliderDrag(event);\n\t\t\t\n\t}\n\t\n\t/**\n\t * on touch end event\n\t */\n\tfunction onTouchEnd(event){\n\t\t\n\t\t//debugLine(\"touchend\", true, true);\n\t\t\n\t\tvar arrTouches = g_functions.getArrTouches(event);\n\t\tvar numTouches = arrTouches.length;\n\t\tvar isParentInPlace = g_parent.isInnerInPlace();\n\t\t\n\t\tif(isParentInPlace == true && g_temp.touch_active == false && numTouches == 0){\n\t\t\t\n\t\t\treturn(true);\n\t\t}\n\t\t\t\t\n\t\tif(numTouches == 0 && g_temp.touch_active == true){\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\tdisableTouchActive(\"3\");\n\t\t\t\n\t\t\tvar isValid = false;\n\t\t\t\n\t\t\tvar wasVerticalScroll = g_functions.wasVerticalScroll(g_temp.storedEventID);\n\t\t\t\n\t\t\tif(wasVerticalScroll == false)\n\t\t\t\tisValid = isMovementValidForChange();\n\t\t\t\t\t\t\n\t\t\tif(isValid == true)\n\t\t\t\tcontinueSlideDragChange();\t\t//change the slide\n\t\t\telse\n\t\t\t\treturnToPlace();\t//return the inner object to place (if not in place)\n\t\t\t\n\t\t}else{\n\t\t\t\n\t\t\tif(numTouches == 1 && g_temp.touch_active == false){\n\t\t\t\t\t\t\t\t\n\t\t\t\tenableTouchActive(\"2\",event);\t\t\t\t\n\t\t\t}\n\t\t\t\t\n\t\t}\n\t\t\t\t\t\n\t}\n\n\n\t/**\n\t * init touch events\n\t */\n\tfunction initEvents(){\n\t\t\n\t\t//slider mouse down - drag start\n\t\tg_objSlider.bind(\"mousedown touchstart\",onTouchStart);\n\t\t\n\t\t//on body move\n\t\tjQuery(\"body\").bind(\"mousemove touchmove\",onTouchMove);\n\t\t\n\t\t//on body mouse up - drag end\n\t\tjQuery(window).add(\"body\").bind(\"mouseup touchend\", onTouchEnd);\n\t\t\n\t}\n\t\n\t\n\t\n\t/**\n\t * init function for avia controls\n\t */\n\tthis.init = function(objSlider, customOptions){\n\t\t\n\t\tg_parent = objSlider;\n\t\tg_objParent = jQuery(g_parent);\n\t\tg_objects = objSlider.getObjects();\n\t\t\t\t\n\t\tg_objSlider = g_objects.g_objSlider;\n\t\tg_objInner = g_objects.g_objInner;\n\n\t\tg_options = jQuery.extend(g_options, customOptions);\n\t\t\t\t\n\t\tinitEvents();\n\t}\n\t\n\t\n\t/**\n\t * get last mouse position\n\t */\n\tthis.getLastMousePos = function(){\n\t\tvar obj = {\n\t\t\tpageX: g_temp.lastMouseX,\n\t\t\tpageY: g_temp.lastMouseY\n\t\t};\n\t\t\n\t\treturn(obj);\n\t}\n\t\n\t\n\t/**\n\t * is touch active\n\t */\n\tthis.isTouchActive = function(){\n\t\t\n\t\treturn(g_temp.touch_active);\n\t\t\n\t}\n\t\n\t\n}\n/**\n * touch thumbs control class\n * addon to strip gallery\n */\nfunction UGZoomSliderControl(){\n\t\n\tvar g_objSlider, g_objInner, g_parent = new UGSlider(), g_objParent;\n\t\n\tvar g_functions = new UGFunctions();\n\t\n\tvar t = this;\n\t\n\tvar g_options = {\n\t\tslider_zoom_step: 1.2,\t\t\t\t\t\t\t//the step of zooming with mouse wheel or zoom button\n\t\tslider_zoom_max_ratio: 6,\t\t\t\t\t\t//max zoom ratio\n\t\tslider_zoom_return_pan_duration: 400,\t\t\t//the return from pan animation duration \n\t\tslider_zoom_return_pan_easing: \"easeOutCubic\"\t//the return from pan wasing function\n\t};\n\t\n\tvar g_temp = {\n\t\tisPanActive:false,\n\t\tstartMouseX:0,\n\t\tstartMouseY:0,\n\t\tlastMouseX:0,\n\t\tlastMouseY:0,\n\t\tstartImageX:0,\n\t\tstartImageY:0,\n\t\tpanXActive:false,\n\t\tpanYActive:false,\n\t\tobjImage:null,\n\t\tobjImageSize:null,\n\t\tobjParent:null,\n\t\tobjParentSize:null,\n\t\tobjSlide:null,\n\t\tstoreImageLastTime:0,\n\t\t\n\t\tisZoomActive: false,\n\t\tstartDistance:0,\n\t\tstartMiddlePoint:null,\n\t\timageOrientPoint:null,\n\t\tobjFitImageSize:null,\n\t\tisZoomedOnce:false\n\t};\n\n\t\n\t/**\n\t * init the object\n\t */\n\tfunction initObject(objSlider, customOptions){\n\t\t\n\t\tg_parent = objSlider;\n\t\tg_objParent = jQuery(g_parent);\n\t\tg_objects = objSlider.getObjects();\n\t\tg_objSlider = g_objects.g_objSlider;\n\t\tg_objInner = g_objects.g_objInner;\n\t\t\n\t\tg_options = jQuery.extend(g_options, customOptions);\n\t\t\t\t\n\t\tinitEvents();\n\t}\n\t\n\t\n\t/**\n\t * get fit image to slider scale mode\n\t * the fill become fit\n\t */\n\tfunction getFitScaleMode(){\n\t\t\n\t\tvar scaleMode = g_parent.getScaleMode();\n\t\t\n\t\tif(scaleMode != \"down\")\n\t\t\tscaleMode = \"fit\";\n\t\t\n\t\treturn(scaleMode);\n\t}\n\t\n\t\n\t/**\n\t * cache current slide and image\n\t */\n\tfunction storeCurrentImage(){\t\t\n\t\t\n\t\t//prevent continious image storring\n\t\tvar currentTime = jQuery.now();\n\t\tvar diff = currentTime - g_temp.storeImageLastTime;\n\t\t\n\t\tif(diff < 20)\n\t\t\treturn(false);\n\t\t\n\t\tvar slides = g_parent.getSlidesReference();\n\t\tg_temp.objSlide = slides.objCurrentSlide;\n\t\tg_temp.objImage = slides.objCurrentSlide.find(\"img\");\n\t\t\n\t\tif(g_temp.objImage.length == 0)\n\t\t\treturn(false);\n\t\t\t\n\t\tg_temp.objImageSize = g_functions.getElementSize(g_temp.objImage);\n\t\tg_temp.objParent = g_temp.objImage.parent();\n\t\tg_temp.objParentSize = g_functions.getElementSize(g_temp.objParent);\n\t\t\n\t\tvar scaleMode = getFitScaleMode();\n\t\t\n\t\tobjPadding = g_parent.getObjImagePadding();\n\t\t\n\t\tg_temp.objFitImageSize = g_functions.getImageInsideParentDataByImage(g_temp.objImage, scaleMode, objPadding);\n\t\t\n\t\tvar currentTime = jQuery.now();\n\t\tg_temp.storeImageLastTime = currentTime;\n\t\t\n\t\treturn(true);\n\t}\n\t\n\t\n\t/**\n\t * zoom current image\n\t * mode: in, out, back\n\t */\n\tfunction zoomCurrentImage(mode, mousePos){\n\t\t\n\t\tvar slides = g_parent.getSlidesReference();\n\t\tvar objImage = slides.objCurrentSlide.find(\"img\");\n\t\tvar scaleMode = getFitScaleMode();\n\t\t\n\t\tg_objParent.trigger(g_parent.events.ZOOM_START);\n\t\t\n\t\t//flag if the images zoomed\n\t\tvar isZoomed = true;\n\t\t\n\t\tvar objPadding = g_parent.getObjImagePadding();\n\t\t\t\t\n\t\tif(mode == \"back\"){\t\n\t\t\tvar objOriginalSize = g_functions.getImageOriginalSize(objImage);\n\t\t\tg_functions.scaleImageFitParent(objImage, objOriginalSize.width, objOriginalSize.height, scaleMode, objPadding);\n\t\t}\n\t\telse{\t\t\t\n\t\t\tvar zoomIn = (mode == \"in\")?true:false;\n\t\t\t\n\t\t\tisZoomed = g_functions.zoomImageInsideParent(objImage, zoomIn, g_options.slider_zoom_step, mousePos, scaleMode, g_options.slider_zoom_max_ratio, objPadding);\n\t\t}\n\t\t\n\t\tif(isZoomed == true){\n\t\t\tg_objParent.trigger(g_parent.events.ZOOMING);\n\t\t\tg_objParent.trigger(g_parent.events.ZOOM_CHANGE);\n\t\t\tg_objParent.trigger(g_parent.events.ZOOM_END);\n\t\t}\n\t\t\n\t}\n\t\n\t\n\tfunction ____________PAN_____________(){};\n\t\n\t\n\t/**\n\t * check if pan is posible for the current image\n\t * check if the image is bigger then the parent\n\t */\n\tfunction isPanPosible(objImage, event, stictTouchesCheck){\n\t\t\n\t\t//check num touches, strict means that even if 0 - pan not posible\n\t\tvar arrTouches = g_functions.getArrTouches(event);\n\t\t\n\t\tif(stictTouchesCheck === true){\n\t\t\t\n\t\t\tif(arrTouches.length != 1)\n\t\t\t\treturn(false);\t\t\t\n\t\t}else{\n\t\t\tif(arrTouches.length > 1)\n\t\t\t\treturn(false);\t\t\t\n\t\t}\n\t\t\n\t\tif(g_functions.isElementBiggerThenParent(objImage))\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\t\n\t\n\t/**\n\t * store pan values\n\t */\n\tfunction storePanInitValues(event){\n\t\t\n\t\tvar mousePos = g_functions.getMousePosition(event);\n\t\t\n\t\tg_temp.startMouseX = mousePos.pageX;\n\t\tg_temp.startMouseY = mousePos.pageY;\n\t\t\n\t\tg_temp.lastMouseX = g_temp.startMouseX;\n\t\tg_temp.lastMouseY = g_temp.startMouseY;\n\t\t\n\t\tg_temp.startImageX = g_temp.objImageSize.left;\n\t\tg_temp.startImageY = g_temp.objImageSize.top;\n\t\t\n\t\tg_temp.panXActive = (g_temp.objImageSize.width > g_temp.objParentSize.width);\n\t\tg_temp.panYActive = (g_temp.objImageSize.height > g_temp.objParentSize.height);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * check pan start, and start if posible\n\t */\n\tfunction startPan(event){\n\t\t\t\t\n\t\tg_temp.isPanActive = true;\n\t\tstorePanInitValues(event);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * pan the image\n\t */\n\tfunction panImage(event){\n\t\t\n\t\tif(g_temp.objImage == undefined || g_temp.objImage.length == 0)\n\t\t\treturn(true);\n\t\t\n\t\tvar mousePos = g_functions.getMousePosition(event);\n\t\t\n\t\tvar diffX = mousePos.pageX - g_temp.startMouseX;\n\t\tvar diffY = mousePos.pageY - g_temp.startMouseY;\n\t\t\n\t\t//get active direction\n\t\tvar diffLastX = mousePos.pageX - g_temp.lastMouseX;\n\t\tvar diffLastY = mousePos.pageY - g_temp.lastMouseY;\n\t\t\n\t\tvar directionX = (diffLastX < 0) ? \"left\":\"right\";\n\t\tvar directionY = (diffLastY < 0) ? \"up\":\"down\";\n\t\t\n\t\tg_temp.lastMouseX = mousePos.pageX;\n\t\tg_temp.lastMouseY = mousePos.pageY;\n\t\t\n\t\tvar posImage = g_functions.getElementSize(g_temp.objImage);\n\t\t\n\t\t//var imageX = g_temp.startImageX + diffX;\n\t\t//var imageY = g_temp.startImageY + diffY;\n\t\t\t\t\n\t\t\n\t\t//slow down if no pan available in this point\n\t\t//slow down y\n\t\t\n\t\tif(g_temp.panYActive == false){\n\t\t\t\n\t\t\tdiffLastY = 0;\n\t\t\t\n\t\t}else{\t\t//zoom enabled\n\t\t\t\n\t\t\tif(directionY == \"down\" && posImage.top > 0){\t\t\t\n\t\t\t\t\n\t\t\t\tdiffLastY = diffLastY / 3;\t\t\t\t\n\t\t\t\t\n\t\t\t}else if(directionY == \"up\" && posImage.bottom < g_temp.objParentSize.height){\n\t\t\t\t\n\t\t\t\tdiffLastY = diffLastY / 3;\t\t\t\t\n\t\t\t\t\n\t\t\t}\n\t\t}\n\t\t\n\t\t//slow down x (only if the pan enabled)\n\t\tif(g_temp.panXActive == false || g_parent.isInnerInPlace() == false){\n\t\t\t\n\t\t\tdiffLastX = 0;\n\t\t\n\t\t}else{\t//zoom enabled\n\t\t\t\n\t\t\tif(directionX == \"right\" && posImage.left > 0){\t\t\t\t\n\t\t\t\tdiffLastX = diffLastX / 3;\t\t\t\t\n\t\t\t}\n\t\t\telse if(directionX == \"left\" && posImage.right < g_temp.objParentSize.width){\n\t\t\t\tdiffLastX = diffLastX / 3;\n\t\t\t}\n\t    }\n\t\t\n\t\tvar imageX = posImage.left + diffLastX;\n\t\tvar imageY = posImage.top + diffLastY;\n\t\t\n\t\t\n\t\tg_functions.placeElement(g_temp.objImage, imageX, imageY);\n\t\t\n\t}\n\t\n\t\n\t\n\t\n\t/**\n\t * return the image to place if it's out of borders\n\t */\n\tfunction checkReturnAfterPan(){\n\t\t\t\t\n\t\tvar isReturnX = false, isReturnY = false, newX = 0, newY = 0;\n\t\tvar objSize = g_functions.getElementSize(g_temp.objImage);\n\t\tvar objImagePadding = g_parent.getObjImagePadding();\n\t\t\t\t\n\t\tvar objCenterPos = g_functions.getElementCenterPosition(g_temp.objImage, objImagePadding);\n\t\t\n\t\tg_temp.panXActive = (g_temp.objImageSize.width > g_temp.objParentSize.width);\n\t\tg_temp.panYActive = (g_temp.objImageSize.height > g_temp.objParentSize.height);\n\t\t\t\t\n\t\t\n\t\tif(g_temp.panYActive == true){\n\t\t\t\n\t\t\tif(objSize.top > 0){\t\t//off limit top\n\t\t\t\t\n\t\t\t\tnewY = 0;\n\t\t\t\tisReturnY = true;\n\t\t\t\t\n\t\t\t}else if(objSize.bottom < g_temp.objParentSize.height){\t\t//off limit bottom\n\t\t\t\t\n\t\t\t\tnewY = g_temp.objParentSize.height - objSize.height;\n\t\t\t\tisReturnY = true;\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t}else{\t\t//pan not active y - return to center\n\t\t\t\n\t\t\tif(objSize.top != objCenterPos.top){\n\t\t\t\tisReturnY = true;\n\t\t\t\tnewY = objCenterPos.top;\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\t//check return x to place\n\t\tif(g_temp.panXActive == true){\n\t\t\t\n\t\t\tif(objSize.left > 0){\t\t//off limit left\n\t\t\t\t\n\t\t\t\tnewX = 0;\n\t\t\t\tisReturnX = true;\n\t\t\t\t\n\t\t\t}else if(objSize.right < g_temp.objParentSize.width){\t\t//off limit right\n\t\t\t\t\t\t\t\t\n\t\t\t\tnewX = g_temp.objParentSize.width - objSize.width;\n\t\t\t\tisReturnX = true;\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t}else{\t\t//pan not active x - return to center\n\t\t\t\n\t\t//\tdebugLine(\"not active\", true);\n\t\t\t\n\t\t\tif(objSize.left != objCenterPos.left){\n\t\t\t\tisReturnX = true;\n\t\t\t\tnewX = objCenterPos.left;\n\t\t\t}\n\t\t}\n\t\t\n\t\t\n\t\t//do the animation\n\t\tvar objCss = {};\n\t\tif(isReturnY == true)\n\t\t\tobjCss.top = newY + \"px\";\n\t\t\n\t\tif(isReturnX == true)\n\t\t\tobjCss.left = newX + \"px\";\n\t\t\n\t\t\n\t\tif(isReturnY == true || isReturnX == true){\n\t\t\t\t\t\t\n\t\t\tg_temp.objImage.animate(objCss,{\n\t\t\t\tduration: g_options.slider_zoom_return_pan_duration,\n\t\t\t\teasing: g_options.slider_zoom_return_pan_easing,\n\t\t\t\tqueue: false\n\t\t\t});\n\n\t\t}\n\t\t\n\t}\n\t\n\t/**\n\t * check if the image animating or not\n\t */\n\tfunction isImageAnimating(){\n\t\t\n\t\tif(g_temp.objImage && g_temp.objImage.is(\":animated\"))\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\t\n\tfunction ____________END_PAN_____________(){};\n\t\n\tfunction ________TOUCH_ZOOM_____________(){};\n\t\n\t/**\n\t * start touch zoom\n\t */\n\tfunction startTouchZoom(arrTouches){\n\t\t\t\t\n\t\tg_temp.isZoomActive = true;\n\t\t\n\t\t//store init diff\n\t\tg_temp.startDistance = g_functions.getDistance(arrTouches[0].pageX, arrTouches[0].pageY, arrTouches[1].pageX, arrTouches[1].pageY);\n\t\tif(g_temp.startDistance == 0)\n\t\t\tg_temp.startDistance = 1;\n\t\t\n\t\t\n\t\t//store init positions\n\t\tg_temp.startMiddlePoint = g_functions.getMiddlePoint(arrTouches[0].pageX, arrTouches[0].pageY, arrTouches[1].pageX, arrTouches[1].pageY);\n\t\t\t\t\n\t\tg_temp.objImageSize = g_functions.getElementSize(g_temp.objImage);\n\t\t\t\n\t\tg_temp.startImageX = g_temp.objImageSize.left;\n\t\tg_temp.startImageY = g_temp.objImageSize.top;\n\t\t\n\t\t//set orient point\n\t\tg_temp.imageOrientPoint = g_functions.getElementLocalPoint(g_temp.startMiddlePoint, g_temp.objImage);\n\t\t\n\t\tvar isInsideImage = g_functions.isPointInsideElement(g_temp.imageOrientPoint, g_temp.objImageSize);\n\t\tif(isInsideImage == false){\n\t\t\tg_temp.imageOrientPoint = g_functions.getElementCenterPoint(g_temp.objImage);\n\t\t}\n\t\t\n\t\t//trigger start zoom event\n\t\tg_objParent.trigger(g_parent.events.ZOOM_START);\n\t}\n\t\n\t\n\t/**\n\t * check num touches, if not 2 - end zoom\n\t */\n\tfunction checkTouchZoomEnd(event){\n\t\t\t\t\n\t\tif(g_temp.isZoomActive == false)\n\t\t\treturn(false);\n\t\t\n\t\tvar arrTouches = g_functions.getArrTouches(event);\t\t\t\n\t\tif(arrTouches.length != 2){\t\t//end touch zoom\n\t\t\t\n\t\t\tg_temp.isZoomActive = false;\n\t\t\t\n\t\t\t//trigger end zoom event\n\t\t\tg_objParent.trigger(g_parent.events.ZOOM_END);\t\t\t\n\t\t}\t\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * check start touch zoom\n\t */\n\tfunction checkTouchZoomStart(event){\n\t\t\t\t\n\t\tif(g_temp.isZoomActive == true)\n\t\t\treturn(true);\n\n\n\t\tvar arrTouches = g_functions.getArrTouches(event);\n\t\t\t\t\n\t\tif(arrTouches.length != 2)\n\t\t\treturn(true);\n\t\t\t\t\t\n\t\tstartTouchZoom(arrTouches);\t\t\n\t}\n\t\n\t\n\t/**\n\t * do touch zoom on touch devices\n\t */\n\tfunction doTouchZoom(event){\n\t\t\t\t\n\t\tvar arrTouches = g_functions.getArrTouches(event);\n\t\t\t\t\n\t\tvar distance = g_functions.getDistance(arrTouches[0].pageX, arrTouches[0].pageY, arrTouches[1].pageX, arrTouches[1].pageY);\t\t\n\t\tvar zoomRatio = distance / g_temp.startDistance;\n\t\t\n\t\tvar middlePoint = g_functions.getMiddlePoint(arrTouches[0].pageX, arrTouches[0].pageY, arrTouches[1].pageX, arrTouches[1].pageY);\n\t\t\n\t\t//set zoom data:\n\t\tvar newWidth = g_temp.objImageSize.width * zoomRatio;\n\t\tvar newHeight = g_temp.objImageSize.height * zoomRatio;\n\t\t\n\t\t//check max zoom ratio:\n\t\tvar objOriginalSize = g_functions.getImageOriginalSize(g_temp.objImage);\n\t\tvar expectedZoomRatio = 1;\t\t\n\t\tif(objOriginalSize.width > 0)\n\t\t\texpectedZoomRatio = newWidth / objOriginalSize.width;\n\t\t\n\t\tif(expectedZoomRatio > g_options.slider_zoom_max_ratio)\n\t\t\treturn(true);\n\t\t\n\t\t//set pan data:\n\t\tpanX = -(g_temp.imageOrientPoint.x * zoomRatio - g_temp.imageOrientPoint.x);\n\t\tpanY = -(g_temp.imageOrientPoint.y * zoomRatio - g_temp.imageOrientPoint.y);\n\t\t\n\t\tvar diffMiddleX = (middlePoint.x - g_temp.startMiddlePoint.x);\n\t    var diffMiddleY = (middlePoint.y - g_temp.startMiddlePoint.y);\n\t\t\n\t    var posx = g_temp.startImageX + panX + diffMiddleX;\n\t\tvar posy = g_temp.startImageY + panY + diffMiddleY;\t\t\n\t\t\t\t\n\t\t\n\t\t//resize and place:\n\t\tg_functions.setElementSizeAndPosition(g_temp.objImage, posx, posy, newWidth, newHeight);\n\t\t\n\t\t//trigger zooming event\n\t\tg_objParent.trigger(g_parent.events.ZOOMING);\t\t\t\n\t\tg_objParent.trigger(g_parent.events.ZOOM_CHANGE);\t\t\t\n\n\t\t/*\n\t\tdebugLine({\n\t\t\tmiddleStartX: g_temp.startMiddlePoint.x,\n\t\t\tmiddleX: middlePoint.x,\n\t\t\tdiffMiddleX: diffMiddleX\n\t\t});\n\t\t*/\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * check return the image from zoom\n\t */\n\tfunction checkReturnFromZoom(){\n\t\t\t\t\n\t\tif(g_temp.objImage == undefined || g_temp.objImage.length == 0)\n\t\t\treturn(true);\n\t\t\n\t\tvar objSize = g_functions.getElementSize(g_temp.objImage);\n\t\t\n\t\tif(objSize.width < g_temp.objFitImageSize.imageWidth){\n\t\t\t\n\t\t\tg_temp.objImage.css({\n\t\t\t\tposition:\"absolute\",\n\t\t\t\tmargin:\"none\"\n\t\t\t});\n\t\t\t\n\t\t\tvar objCss = {\n\t\t\t\ttop: g_temp.objFitImageSize.imageTop + \"px\",\n\t\t\t\tleft: g_temp.objFitImageSize.imageLeft + \"px\",\n\t\t\t\twidth: g_temp.objFitImageSize.imageWidth + \"px\",\n\t\t\t\theight: g_temp.objFitImageSize.imageHeight + \"px\"\n\t\t\t};\n\t\t\t\n\t\t\tg_temp.objImage.animate(objCss,{\n\t\t\t\tduration: g_options.slider_zoom_return_pan_duration,\n\t\t\t\teasing: g_options.slider_zoom_return_pan_easing,\n\t\t\t\tqueue: false\n\t\t\t});\n\t\t\t\n\t\t}else{\t\t\t\n\t\t\tcheckReturnAfterPan();\n\t\t}\n\t\t\n\t}\n\t\n\t\n\tfunction ________END_TOUCH_ZOOM_____________(){};\n\t\n\t\n\t/**\n\t * \n\t * touch start event - start pan, remember start pan data\n\t */\n\tfunction onTouchStart(event){\n\t\t\n\t\t//if no image type, exit\n\t\tif(g_parent.isCurrentSlideType(\"image\") == false)\n\t\t\treturn(true);\n\t\t\n\t\tvar isStored = storeCurrentImage();\n\t\t\n\t\tif(g_temp.objImage == undefined || g_temp.objImage.length == 0)\n\t\t\treturn(true);\n\t\t\n\t\tevent.preventDefault();\n\t\t\t\t\t\t\n\t\t//stop animation if exists\n\t\tif(isImageAnimating() == true){\t\t\t\n\t\t\tg_temp.objImage.stop(true);\n\t\t}\n\t\t\n\t\tif(g_temp.isZoomActive == true){\n\t\t\t\n\t\t\tcheckTouchZoomEnd(event);\n\t\t\t\n\t\t}else{\n\t\t\t\n\t\t\tcheckTouchZoomStart(event);\n\t\t\t\n\t\t}\n\t\t\n\t\t//if zoom started stop panning, if not, start panning\n\t\tif(g_temp.isZoomActive == true){\n\t\t\t\n\t\t\tg_temp.isPanActive = false;\n\t\t\n\t\t}else if(isPanPosible(g_temp.objImage, event) == true && g_temp.isZoomedOnce == true){\n\t\t\t\n\t\t\tstartPan(event);\n\t\t}\n\t\t\n\t\t/*\n\t\tdebugLine({\n\t\t\t\tpan: g_temp.isPanActive,\n\t\t\t\tzoom: g_temp.isZoomActive,\n\t\t\t\tevent: \"start\"\n\t\t\t}, true);\n\t\t*/\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * touch end event - bring the image to place\n\t */\n\tfunction onTouchEnd(event){\n\t\t\n\t\tif(g_parent.isCurrentSlideType(\"image\") == false)\n\t\t\treturn(true);\n\t\t\n\t\t//check if some gallery button clicked\n\t\tvar objTarget = jQuery(event.target);\n\t\tif(objTarget.data(\"ug-button\") == true){\n\t\t\t//event.preventDefault();\n\t\t\treturn(false);\n\t\t}\n\t\t\n\t\tvar isStored = storeCurrentImage();\n\n\t\tif(g_temp.objImage == undefined || g_temp.objImage.length == 0)\n\t\t\treturn(true);\n\t\t\t\t\n\t\tvar panWasActive = g_temp.isPanActive;\n\t\tvar zoomWasActive = g_temp.isZoomActive;\n\t\t\n\t\t//if the inner not in place, don't return noting, let the slide change\n\t\tif(g_parent.isInnerInPlace() == false){\n\t\t\tg_temp.isZoomActive = false;\n\t\t\tg_temp.isPanActive = false;\n\t\t\treturn(true);\n\t\t}\n\t\t\n\t\t//check end zoom\n\t\tif(g_temp.isZoomActive == true){\n\t\t\tcheckTouchZoomEnd(event);\n\t\t}else{\n\t\t\tcheckTouchZoomStart(event);\n\t\t}\n\t\t\n\t\t\n\t\tif(g_temp.isZoomActive == true){\n\t\t\t\n\t\t\tg_temp.isPanActive = false;\n\t\t\t\n\t\t}else{\n\t\t\t\n\t\t\tvar panPosible = isPanPosible(g_temp.objImage, event, true);\n\t\t\t\n\t\t\tif(g_temp.isPanActive == true ){\n\t\t\t\t\t\t\n\t\t\t\tg_temp.isPanActive = false;\n\t\t\t\t\n\t\t\t}else if(panPosible == true){\n\t\t\t\t\n\t\t\t\tstartPan(event);\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\t/*\n\t\tdebugLine({\n\t\t\tpan:g_temp.isPanActive,\n\t\t\tzoom: g_temp.isZoomActive\n\t\t}, true);\n\t\t*/\n\t\t\n\t\tif((panWasActive || zoomWasActive) && g_temp.isZoomActive == false && g_temp.isPanActive == false){\n\t\t\tcheckReturnFromZoom();\n\t\t}\n\t\t\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * \n\t * touch move event - pan\n\t */\n\tfunction onTouchMove(event){\n\t\t\n\t\tif(g_parent.isCurrentSlideType(\"image\") == false)\n\t\t\treturn(true);\n\t\t\t\t\n\t\t//check touch zoom (pinch gesture)\n\t\tif(g_temp.isZoomActive == true){\n\t\t\t\n\t\t\tdoTouchZoom(event);\n\t\t\t\n\t\t}else if(g_temp.isPanActive == true){\n\t\t\t\n\t\t\tpanImage(event);\n\t\t\t\n\t\t}\n\t\t\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * on slider mousewheel event\n\t */\n\tfunction onSliderMouseWheel(event, delta, deltaX, deltaY){\n\t\t\n\t\tif(g_options.slider_zoom_mousewheel == false)\n\t\t\treturn(true);\n\t\t\n\t\tif(g_parent.isCurrentSlideType(\"image\") == false)\n\t\t\treturn(true);\n\t\t\n\t\tevent.preventDefault();\n\t\t\n\t\t//prevent default only if needed\n\t\t//if(zoomIn == true || zoomIn == false && g_functions.isElementBiggerThenParent(objImage))\n\t\t//event.preventDefault();\n\t\t\n\t\t\n\t\tvar zoomIn = (delta > 0);\n\t\tvar mousePos = g_functions.getMousePosition(event);\n\t\tvar\tmode = (zoomIn == true) ? \"in\":\"out\";\n\t\t\n\t\tzoomCurrentImage(mode, mousePos);\n\t}\n\t\n\t\n\t/**\n\t * init touch events\n\t */\n\tfunction initEvents(){\n\t\t\n\t\t//debugLine(\"init\");\n\t\tg_objSlider.on(\"mousewheel\",onSliderMouseWheel);\n\t\t\n\t\t//slider mouse down - pan start\n\t\tg_objSlider.bind(\"mousedown touchstart\",onTouchStart);\n\t\t\n\t\t//on body move\n\t\tjQuery(\"body\").bind(\"mousemove touchmove\",onTouchMove);\n\t\t\n\t\t//on body mouse up - pan end\n\t\tjQuery(window).add(\"body\").bind(\"mouseup touchend\", onTouchEnd);\n\t\t\n\t\t//event before image returned to init position\n\t\tg_objParent.bind(g_parent.events.BEFORE_RETURN, function(){\n\t\t\t\n\t\t\tcheckReturnFromZoom();\n\t\t});\n\t\t\t\t\n\t\t//on item change update isZoomedOnce event. Allow panning only if zoomed once\n\t\tg_objParent.bind(g_parent.events.ITEM_CHANGED, function(){\n\t\t\tg_temp.isZoomedOnce = false;\n\t\t});\n\t\t\n\t\tg_objParent.bind(g_parent.events.ZOOM_CHANGE, function(){\n\t\t\tg_temp.isZoomedOnce = true;\n\t\t});\n\t\t\n\t}\n\t\n\tthis.________EXTERNAL_____________ = function(){};\n\t\n\t/**\n\t * check if the image is zoomed, and there is a place for left panning\n\t */\n\tthis.isPanEnabled = function(event, direction){\n\t\t\n\t\tstoreCurrentImage();\n\t\t\n\t\tif(g_temp.objImage == undefined || g_temp.objImage.length == 0)\n\t\t\treturn(false);\n\t\t\n\t\tif(g_temp.isZoomedOnce == false)\n\t\t\treturn(false);\n\t\t\n\t\tif(isPanPosible(g_temp.objImage, event) == false)\n\t\t\treturn(false);\n\t\t\n\t\tif(g_parent.isInnerInPlace() == false)\n\t\t\treturn(false);\n\t\t\n\t\tif(direction == \"left\"){\n\t\t\t\n\t\t\tif(g_temp.objImageSize.right <= g_temp.objParentSize.width)\n\t\t\t\treturn(false);\n\t\t\t\n\t\t}else{\t//right direction\n\t\t\t\n\t\t\tif(g_temp.objImageSize.left >= 0)\n\t\t\t\treturn(false);\n\t\t}\n\t\t\n\t\treturn(true);\n\t}\n\t\n\t\n\t/**\n\t * init function for avia controls\n\t */\n\tthis.init = function(objSlider, customOptions){\n\t\t\n\t\tinitObject(objSlider, customOptions);\n\t}\n\t\n\t/**\n\t * zoom in\n\t */\n\tthis.zoomIn = function(){\t\t\n\t\tzoomCurrentImage(\"in\");\t\n\t}\n\t\n\t/**\n\t * zoom out\n\t */\n\tthis.zoomOut = function(){\t\t\n\t\tzoomCurrentImage(\"out\");\t\t\n\t}\n\t\n\t/**\n\t * zoom back\n\t */\n\tthis.zoomBack = function(){\n\t\t\n\t\tzoomCurrentImage(\"back\");\t\t\n\t}\n}\n/** -------------- Wistia API ---------------------*/\n\nfunction UGWistiaAPI(){\n\t\n\tthis.isAPILoaded = false;\n\tvar t = this, g_objThis = jQuery(this), g_intHandle;\n\tvar g_player, g_isPlayerReady = false;\n\t\n\tthis.events = {\n\t\t\tSTART_PLAYING: \"start_playing\",\n\t\t\tSTOP_PLAYING: \"stop_playing\",\n\t\t\tVIDEO_ENDED: \"video_ended\"\n\t};\n\n\t\n\t/**\n\t * check if sound cloud active\n\t */\n\tfunction isWistiaActive(){\n\t\t\n\t\treturn(typeof Wistia != \"undefined\");\t\n\t}\n\t\n\t/**\n\t * load vimeo API\n\t */\n\tthis.loadAPI = function(){\n\t\t\n\t\tif(g_ugWistiaAPI.isAPILoaded == true)\n\t\t\treturn(true);\n\n\t\tif(isWistiaActive()){\n\t\t\tg_ugWistiaAPI.isAPILoaded = true;\n\t\t\treturn(true);\n\t\t}\n\t\t\n\t\tg_ugFunctions.loadJs(\"fast.wistia.com/assets/external/E-v1.js\", true);\n\t\t\n\t\tg_ugWistiaAPI.isAPILoaded = true;\t\t\n\t}\n\n\t\n\t/**\n\t * actually put the video\n\t */\n\tfunction putVideoActually(divID, videoID, width, height, isAutoplay){\n\t\t\n\t\tg_player = null;\n\t\tg_isPlayerReady = false;\n\t\t\n\t\tvar htmlID = divID + \"_video\";\n\t\t\n\t\tvar html = \"<div id='\"+htmlID+\"' class='wistia_embed' style='width:\"+width+\";height:\"+height+\";' data-video-width='\"+width+\"' data-video-height='\"+height+\"'>&nbsp;</div>\";\n\t\t\t\t\n\t\tjQuery(\"#\"+divID).html(html);\n\t\t\n\t\tg_player = Wistia.embed(videoID, {\n\t\t\t  version: \"v1\",\n\t\t\t  videoWidth: width,\n\t\t\t  videoHeight: height,\n\t\t\t  container: htmlID,\n\t\t\t  autoPlay: isAutoplay\n\t\t});\n\t\t\t\t\n\t\tg_isPlayerReady = true;\n\t\t\t\t\n\t\tinitEvents();\n\t}\n\t\n\t\n\t/**\n\t * init events\n\t */\n\tfunction initEvents(){\n\t\t\n\t\t//set \"play\" event\n\t\t\n\t\tg_player.bind('play', function(){\n\t\t\tg_objThis.trigger(t.events.START_PLAYING);\n\t\t});\n\t\t\n\t\t//set \"pause event\"\n\t\tg_player.bind('pause', function(){\n\t\t\tg_objThis.trigger(t.events.STOP_PLAYING);\n\t\t});\n\t\t\n\t\tg_player.bind('end', function(){\n\t\t\tg_objThis.trigger(t.events.STOP_PLAYING);\n\t\t\tg_objThis.trigger(t.events.VIDEO_ENDED);\n\t\t});\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * do some command\n\t */\n\tthis.doCommand = function(command){\n\t\t\n\t\tif(g_player == null)\n\t\t\treturn(false);\n\t\t\n\t\tif(g_isPlayerReady == false)\n\t\t\treturn(false);\n\t\t\n\t\tswitch(command){\n\t\t\tcase \"play\":\n\t\t\t\tg_player.play();\n\t\t\tbreak;\n\t\t\tcase \"pause\":\n\t\t\t\tg_player.pause();\n\t\t\tbreak;\t\t\n\t\t}\n\t\t\n\t}\n\t\n\t/**\n\t * do pause command\n\t */\n\tthis.pause = function(){\n\t\tt.doCommand(\"pause\");\n\t}\n\t\n\t/**\n\t * do play command\n\t */\n\tthis.play = function(){\n\t\tt.doCommand(\"play\");\n\t}\n\t\n\t\n\t/**\n\t * put the vimeo video\n\t */\n\tthis.putVideo = function(divID, videoID, width, height, isAutoplay){\n\t\t\n\t\tif(isWistiaActive()){\n\t\t\tputVideoActually(divID, videoID, width, height, isAutoplay);\n\t\t\treturn(true);\n\t\t}\n\t\t\n\t\t\n\t\t//if no API present, wait for the API being ready\n\t\tthis.loadAPI();\n\t\tg_intHandle = setInterval(function(){\n\t\t\t\n\t\t\tif(isWistiaActive()){\n\t\t\t\tputVideoActually(divID, videoID, width, height, isAutoplay);\n\t\t\t\tclearInterval(g_intHandle);\n\t\t\t}\n\t\t\t\n\t\t}, 500);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * get if the player is ready\n\t */\n\tthis.isPlayerReady = function(){\n\t\t\t\t\n\t\tif(g_isPlayerReady && g_player)\n\t\t\treturn(true);\n\t\n\t\treturn(false);\n\t}\t\n\t\n\t\n}\n\n/** -------------- Sound Cloud API ---------------------*/\n\nfunction UGSoundCloudAPI(){\n\t\n\tthis.isAPILoaded = false;\n\tvar t = this, g_objThis = jQuery(this), g_intHandle;\n\tvar g_player, g_lastContainerID;\n\t\n\tthis.events = {\n\t\t\tSTART_PLAYING: \"start_playing\",\n\t\t\tSTOP_PLAYING: \"stop_playing\",\n\t\t\tVIDEO_ENDED: \"video_ended\"\n\t};\n\n\t/**\n\t * check if sound cloud active\n\t */\n\tfunction isSCActive(){\n\t\t\n\t\treturn(typeof SC != \"undefined\");\t\n\t}\n\t\n\t/**\n\t * load vimeo API\n\t */\n\tthis.loadAPI = function(){\n\t\t\n\t\tif(g_ugSoundCloudAPI.isAPILoaded == true)\n\t\t\treturn(true);\n\t\t\t\t\n\t\tif(isSCActive()){\n\t\t\tg_ugSoundCloudAPI.isAPILoaded = true;\n\t\t\treturn(true);\n\t\t}\n\t\t\n\t\tg_ugFunctions.loadJs(\"w.soundcloud.com/player/api.js\", true);\n\t\t\n\t\tg_ugSoundCloudAPI.isAPILoaded = true;\t\t\n\t}\n\t\n\t/**\n\t * actually put the video\n\t */\n\tfunction putSoundActually(divID, trackID, width, height, isAutoplay){\n\t\t\n\t\tg_player = null;\n\t\tg_isPlayerReady = false;\n\t\t\n\t\tvar iframeID = divID+\"_iframe\";\n\t\t\n\t\tvar url = location.protocol+\"//w.soundcloud.com/player/?url=http://api.soundcloud.com/tracks/\"+trackID;\n\t\turl += \"&amp;buying=false&amp;liking=false&amp;download=false&amp;sharing=false&amp;show_artwork=true&show_comments=false&amp;show_playcount=true&amp;show_user=false&amp;hide_related=true&amp;visual=true&amp;start_track=0&amp;callback=true\";\n\t\t\n\t\tif(isAutoplay === true)\n\t\t\turl += \"&amp;auto_play=true\";\n\t\telse\n\t\t\turl += \"&amp;auto_play=false\";\n\t\t\n\t\tvar html = \"<iframe id='\"+iframeID+\"' src=\"+url+\" width='\"+width+\"' height='\"+height+\"' frameborder='0' scrolling='no' webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>\";\n\t\t\n\t\tjQuery(\"#\"+divID).html(html);\n\t\t\n\t\t//get the player object\n\t\tg_player = SC.Widget(iframeID);\n\t\t\n\t\tg_player.bind(SC.Widget.Events.READY, function() {\n\t\t\t\n\t\t\tif(g_player){\n\t\t\t\tg_isPlayerReady = true;\n\t\t\t\tinitEvents();\n\t\t\t}\n\t\t\t\n\t\t});\n\t\t\n\t\tg_lastContainerID = divID;\n\t}\n\n\t\n\t/**\n\t * init events\n\t */\n\tfunction initEvents(){\n\t\t\n\t\t\n\t\t//set \"play\" event\n\t\tg_player.bind(SC.Widget.Events.PLAY, function(){\n\t\t\tg_objThis.trigger(t.events.START_PLAYING);\n\t\t});\n\t\t\n\t\t//set \"pause event\"\n\t\tg_player.bind(SC.Widget.Events.PAUSE, function(){\n\t\t\tg_objThis.trigger(t.events.STOP_PLAYING);\n\t\t});\n\t\t\n\t\tg_player.bind(SC.Widget.Events.FINISH, function(){\n\t\t\tg_objThis.trigger(t.events.STOP_PLAYING);\n\t\t\tg_objThis.trigger(t.events.VIDEO_ENDED);\n\t\t});\n\t\t\n\t}\n\t\t\n\t\n\t/**\n\t * put the youtube video\n\t */\n\tthis.putSound = function(divID, trackID, width, height, isAutoplay){\n\t\t\n\t\tif(isSCActive()){\n\t\t\tputSoundActually(divID, trackID, width, height, isAutoplay);\n\t\t\treturn(true);\n\t\t}\n\t\t\n\t\t\n\t\t//if no API present, wait for the API being ready\n\t\tthis.loadAPI();\n\t\tg_intHandle = setInterval(function(){\n\t\t\t\n\t\t\tif(isSCActive()){\n\t\t\t\tputSoundActually(divID, trackID, width, height, isAutoplay);\n\t\t\t\tclearInterval(g_intHandle);\n\t\t\t}\n\t\t\t\n\t\t}, 500);\n\t\t\n\t}\n\t\n\n\t/**\n\t * do some command\n\t */\n\tthis.doCommand = function(command){\n\t\t\n\t\tif(g_player == null)\n\t\t\treturn(false);\n\t\t\n\t\tif(g_isPlayerReady == false)\n\t\t\treturn(false);\n\t\t\n\t\tswitch(command){\n\t\t\tcase \"play\":\n\t\t\t\tg_player.play();\n\t\t\tbreak;\n\t\t\tcase \"pause\":\n\t\t\t\tg_player.pause();\n\t\t\tbreak;\n\t\t}\n\t\t\n\t}\t\n\t\n\t\n\t/**\n\t * pause video\n\t */\n\tthis.pause = function(){\n\t\tt.doCommand(\"pause\");\n\t}\n\t\n\t\n\t/**\n\t * play video\n\t */\n\tthis.play = function(){\n\t\tt.doCommand(\"play\");\n\t}\n\t\n\t/**\n\t * destroy the player\n\t */\n\tthis.destroy = function(){\n\t\t\n\t\tg_isPlayerReady = false;\n\t\tg_player = null;\n\t\t\n\t\tif(g_lastContainerID){\n\t\t\tjQuery(\"#\" + g_lastContainerID).html(\"\");\n\t\t\tg_lastContainerID = null;\n\t\t}\n\t\t\n\t}\n\t\n}\n\n/** -------------- html5 Video API ---------------------*/\n\nfunction UGHtml5MediaAPI(){\n\t\n\tthis.isAPILoaded = false;\n\tvar t = this, g_objThis = jQuery(this), g_intHandle;\n\tvar g_player;\n\t\n\tthis.events = {\n\t\t\tSTART_PLAYING: \"start_playing\",\n\t\t\tSTOP_PLAYING: \"stop_playing\",\n\t\t\tVIDEO_ENDED: \"video_ended\"\n\t};\n\t\n\t/**\n\t * load vimeo API\n\t */\n\tthis.loadAPI = function(){\n\t\t\n\t\tif(g_ugHtml5MediaAPI.isAPILoaded == true)\n\t\t\treturn(true);\n\t\t\n\t\t\n\t\tif(isMediaElementActive()){\n\t\t\tg_ugHtml5MediaAPI.isAPILoaded = true;\n\t\t\treturn(true);\n\t\t}\n\t\t\n\t\tg_ugFunctions.loadJs(\"cdnjs.cloudflare.com/ajax/libs/mediaelement/2.18.1/mediaelement.min.js\", true);\n\t\tg_ugFunctions.loadCss(\"cdnjs.cloudflare.com/ajax/libs/mediaelement/2.18.1/mediaelementplayer.min.css\", true);\n\t\t\n\t\tg_ugHtml5MediaAPI.isAPILoaded = true;\t\t\n\t}\n\t\n\t/**\n\t * return true if the mediaelement is active\n\t */\n\tfunction isMediaElementActive(){\n\t\t\t\t\n\t\treturn(typeof mejs != \"undefined\");\n\t}\n\t\n\t\n\t/**\n\t * actually put the video\n\t */\n\tfunction putVideoActually(divID, data, width, height, isAutoplay){\n\t\t\n\t\tg_player = null;\n\t\tg_isPlayerReady = false;\n\t\t\n\t\tvar urlFlash = location.protocol + \"//cdnjs.cloudflare.com/ajax/libs/mediaelement/2.18.1/flashmediaelement-cdn.swf\";\n\t\tvar urlSilverlight = location.protocol + \"//cdnjs.cloudflare.com/ajax/libs/mediaelement/2.18.1/silverlightmediaelement.xap\";\n\n\t\tvar htmlID = divID + \"_video\";\n\t\tvar htmlAutoplay = \"\";\n\t\tif(isAutoplay && isAutoplay === true)\n\t\t\thtmlAutoplay = \"autoplay='autoplay'\"\n\t\t\n\t\tvar htmlPoster = \"\";\n\t\tif(data.posterImage)\n\t\t\thtmlPoster = \"poster='\"+data.posterImage+\"'\";\n\t\t\n\t\tvar html = \"<video id='\"+htmlID+\"' width='\"+width+\"' height='\"+height+\"'  controls='controls' preload='none' \"+htmlAutoplay+\" \"+htmlPoster+\">\";\n\t\t\t\t\n\t\tif(data.mp4 != \"\")\n\t\t\thtml += \"<source type='video/mp4' src='\"+data.mp4+\"' />\";\n\t\t\n\t\tif(data.webm != \"\")\n\t\t\thtml += \"<source type='video/webm' src='\"+data.webm+\"' />\";\n\n\t\tif(data.ogv != \"\")\n\t\t\thtml += \"<source type='video/ogg' src='\"+data.ogv+\"' />\";\n\t\t \n\t\thtml +=  \"<object width='\"+width+\"' height='\"+height+\"' type='application/x-shockwave-flash' data='\"+urlFlash+\"'>\";\n\t\thtml +=  \"<param name='movie' value='\"+urlFlash+\"' />\";\n\t\thtml +=  \"<param name='flashvars' value='controls=true&file=\"+data.mp4+\"' />\";\n\t\thtml +=  \"</object>\";\n\t\t\n\t\thtml += \"</video>\";\n\t\t\n\t\tjQuery(\"#\"+divID).html(html);\n\t\t\n\t\tnew MediaElement(htmlID, {\t\t\t\n\t\t    enablePluginDebug: false,\n\t\t    flashName: urlFlash,\n\t\t    silverlightName: urlSilverlight,\n\t\t    success: function (mediaElement, domObject) { \n\t\t    \tg_isPlayerReady = true;\n\t\t    \tg_player = mediaElement;\n\t\t    \t\t\t    \t\n\t\t    \tif(isAutoplay == false)\n\t\t    \t\tg_player.pause();\n\t\t    \t\n\t\t    \tinitEvents();\n\t\t    },\n\t\t    error: function (objError) { \n\t\t    \ttrace(objError);\n\t\t    }\n\t\t});\t\t\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * init player events function\n\t */\n\tfunction initEvents(){\n\t\t\n\t\tg_ugFunctions.addEvent(g_player, \"play\", function(){\n\t\t\tg_objThis.trigger(t.events.START_PLAYING);\n\t\t});\n\t\t\n\t\tg_ugFunctions.addEvent(g_player, \"pause\", function(){\n\t\t\tg_objThis.trigger(t.events.STOP_PLAYING);\n\t\t});\n\t\t\n\t\tg_ugFunctions.addEvent(g_player, \"ended\", function(){\n\t\t\tg_objThis.trigger(t.events.STOP_PLAYING);\n\t\t\tg_objThis.trigger(t.events.VIDEO_ENDED);\n\t\t});\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * put the vimeo video\n\t */\n\tthis.putVideo = function(divID, data, width, height, isAutoplay){\n\t\t\n\t\tif(isMediaElementActive()){\n\t\t\tputVideoActually(divID, data, width, height, isAutoplay);\n\t\t\treturn(true);\n\t\t}\n\t\t\n\t\t\n\t\t//if no API present, wait for the API being ready\n\t\tthis.loadAPI();\n\t\tg_intHandle = setInterval(function(){\n\t\t\t\n\t\t\tif(isMediaElementActive()){\n\t\t\t\tputVideoActually(divID, data, width, height, isAutoplay);\n\t\t\t\tclearInterval(g_intHandle);\n\t\t\t}\n\t\t\t\n\t\t}, 500);\n\t\t\n\t}\n\n\t/**\n\t * do some command\n\t */\n\tthis.doCommand = function(command){\n\t\t\t\t\n\t\tif(g_player == null)\n\t\t\treturn(false);\n\t\t\n\t\tif(g_isPlayerReady == false)\n\t\t\treturn(false);\n\t\t\n\t\tswitch(command){\n\t\t\tcase \"play\":\n\t\t\t\tg_player.play();\n\t\t\tbreak;\n\t\t\tcase \"pause\":\n\t\t\t\tg_player.pause();\n\t\t\tbreak;\n\t\t}\n\t\t\n\t}\t\n\t\n\t\n\t/**\n\t * pause video\n\t */\n\tthis.pause = function(){\n\t\tt.doCommand(\"pause\");\n\t}\n\t\n\t\n\t/**\n\t * play video\n\t */\n\tthis.play = function(){\n\t\tt.doCommand(\"play\");\n\t}\n\t\n}\n\n\n/** -------------- Vimeo API class ---------------------*/\n\nfunction UGVimeoAPI(){\n\t\n\tthis.isAPILoaded = false;\n\t\n\tvar t = this, g_objThis = jQuery(this), g_intHandle;\n\tvar g_player = null, g_isPlayerReady = false, g_lastCotnainerID, g_cueChangeAutoplay = false;\n\t\n\t\n\tthis.events = {\n\t\t\tSTART_PLAYING: \"start_playing\",\n\t\t\tSTOP_PLAYING: \"stop_playing\",\n\t\t\tVIDEO_ENDED: \"video_ended\"\n\t};\n\t\n\t/**\n\t * load vimeo API\n\t */\n\tthis.loadAPI = function(){\n\t\t\n\t\tif(g_ugVimeoAPI.isAPILoaded == true)\n\t\t\treturn(true);\n\t\t\n\t\tif(isFroogaloopActive()){\n\t\t\tg_ugVimeoAPI.isAPILoaded = true;\n\t\t\treturn(true);\n\t\t}\n\n\t\tg_ugFunctions.loadJs(\"f.vimeocdn.com/js/froogaloop2.min.js\", true);\n\t\t\n\t\tg_ugVimeoAPI.isAPILoaded = true;\t\t\n\t}\n\t\n\t\n\t\n\t/**\n\t * tells if the froogaloop library active\n\t */\n\tfunction isFroogaloopActive(){\n\t\t\n\t\treturn(typeof Froogaloop != \"undefined\");\n\t}\n\t\n\t\n\t/**\n\t * actually put the video\n\t */\n\tfunction putVideoActually(divID, videoID, width, height, isAutoplay){\n\t\t\n\t\tg_player = null;\n\t\tg_isPlayerReady = false;\n\t\t\n\t\tvar url = location.protocol+\"//player.vimeo.com/video/\"+videoID+\"?api=1\";\n\t\t\n\t\tif(isAutoplay === true)\n\t\t   url += \"&amp;byline=0&amp;autoplay=1&amp;title=0&amp;portrait=0\";\n\t\t\n\t\tvar html = \"<iframe src=\"+url+\" width='\"+width+\"' height='\"+height+\"' frameborder='0' webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>\";\n\t\t\n\t\tjQuery(\"#\"+divID).html(html);\n\t\t\n\t\t//get the player object\n\t\tvar iframe = jQuery(\"#\"+divID + \" iframe\")[0];\n\t\t\n\t\tg_player = Froogaloop(iframe);\n\n\t\tg_player.addEvent('ready', function(){\n\t\t\t\n\t\t\tif(g_player){\n\t\t\t\tg_isPlayerReady = true;\n\t\t\t\tinitEvents();\n\t\t\t}\n\t\t\t\n\t\t});\n\t\t\n\t\tg_lastCotnainerID = divID;\t\t\n\t}\n\t\n\t/**\n\t * init events\n\t */\n\tfunction initEvents(){\n\t\t\n\t\tif(!g_player)\n\t\t\treturn(false);\n\t\t\t\t\n\t\t//set \"cuechange\" event\n\t\tg_player.addEvent('cuechange', function(){\n\t\t\t\n\t\t\tif(g_cueChangeAutoplay == true)\t\t\t\n\t\t\t\tt.play();\n\t\t\t\n\t\t});\n\t\t\n\t\t//set \"play\" event\n\t\tg_player.addEvent('play', function(){\n\t\t\tg_objThis.trigger(t.events.START_PLAYING);\n\t\t});\n\t\t\n\t\t//set \"pause event\"\n\t\tg_player.addEvent('pause', function(){\n\t\t\tg_objThis.trigger(t.events.STOP_PLAYING);\n\t\t});\n\t\t\n\t\tg_player.addEvent('finish', function(){\n\t\t\tg_objThis.trigger(t.events.STOP_PLAYING);\n\t\t\tg_objThis.trigger(t.events.VIDEO_ENDED);\n\t\t});\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * do some command\n\t */\n\tthis.doCommand = function(command){\n\t\t\n\t\tif(g_player == null)\n\t\t\treturn(false);\n\t\t\n\t\tif(g_isPlayerReady == false)\n\t\t\treturn(false);\n\t\t\n\t\tswitch(command){\n\t\t\tdefault:\n\t\t\t\tg_player.api(command);\n\t\t\tbreak;\n\t\t}\n\t\t\n\t}\n\t\n\t/**\n\t * do pause command\n\t */\n\tthis.pause = function(){\n\t\tt.doCommand(\"pause\");\n\t}\n\t\n\t/**\n\t * do play command\n\t */\n\tthis.play = function(){\n\t\tt.doCommand(\"play\");\n\t}\n\t\n\t/**\n\t * desrtoy the player and empty the div\n\t */\n\tthis.destroy = function(){\n\t\t\n\t\tif(g_player){\n\t\t\tg_player.api(\"unload\");\n\t\t\tg_player = null;\n\t\t\tg_isPlayerReady = false;\n\t\t}\n\t\t\n\t\tif(g_lastCotnainerID){\n\t\t\tjQuery(\"#\" + g_lastCotnainerID).html(\"\");\t\t\t\n\t\t}\n\t\n\t}\n\t\n\t/**\n\t * put the vimeo video\n\t */\n\tthis.putVideo = function(divID, videoID, width, height, isAutoplay){\n\t\t\n\t\tif(isFroogaloopActive()){\n\t\t\tputVideoActually(divID, videoID, width, height, isAutoplay);\n\t\t\treturn(true);\n\t\t}\n\t\t\n\t\t\n\t\t//if no API present, wait for the API being ready\n\t\tthis.loadAPI();\n\t\tg_intHandle = setInterval(function(){\n\t\t\t\n\t\t\tif(isFroogaloopActive()){\n\t\t\t\tputVideoActually(divID, videoID, width, height, isAutoplay);\n\t\t\t\tclearInterval(g_intHandle);\n\t\t\t}\n\t\t\t\n\t\t}, 500);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * get if the player is ready\n\t */\n\tthis.isPlayerReady = function(){\n\t\t\n\t\tif(g_isPlayerReady && g_player)\n\t\t\treturn(true);\n\t\n\t\treturn(false);\n\t}\t\n\t\n\t/**\n\t * change the video\n\t */\n\tthis.changeVideo = function(videoID, isAutoplay){\n\t\t\n\t\tif(t.isPlayerReady() == false)\n\t\t\treturn(false);\n\t\t\n\t\tg_cueChangeAutoplay = isAutoplay;\n\t\t\n\t\tg_player.api(\"loadVideo\", videoID);\n\t}\n\t\n\t\n\t/**\n\t * get video images\n\t */\n\tthis.getVideoImages = function(videoID, itemIndex, onSuccessFunction){\n\t\t\n\t\tvar url = location.protocol+\"//vimeo.com/api/v2/video/\"+videoID+\".json\";\n\t\tjQuery.get(url, {}, function(data){\n\t\t\tvar obj = {};\n\t\t\tobj.preview = data[0].thumbnail_large;\n\t\t\tobj.thumb = data[0].thumbnail_medium;\n\t\t\tonSuccessFunction(itemIndex, obj);\n\t\t});\n\t}\n\t\n\t\n}\n\n\n/** -------------- Youtube API class ---------------------*/\n\nfunction UGYoutubeAPI(){\n\t\n\tthis.isAPILoaded = false;\t\n\tvar t = this, g_player = null, g_intHandle, g_isPlayerReady = false;\n\tvar g_objThis = jQuery(this), g_prevState = -1, g_lastContainerID;\t//unstarted\n\t\n\tvar g_options = {\n\t\t\tvideo_youtube_showinfo: true\n\t}\n\t\n\tthis.events = {\n\t\tSTART_PLAYING: \"start_playing\",\n\t\tSTOP_PLAYING: \"stop_playing\",\n\t\tVIDEO_ENDED: \"video_ended\"\n\t};\n\t\n\t\n\t/**\n\t * actually put the video\n\t */\n\tfunction putVideoActually(divID, videoID, width, height, isAutoplay){\n\t\t\t\t\n\t\tif(g_player && g_isPlayerReady){\t\t\t\n\t\t\tg_player.destroy();\n\t\t}\n\t\t\n\t\tvar playerVars = {\n\t\t\tcontrols:2,\n\t\t\tshowinfo:g_options.video_youtube_showinfo, \n\t\t\trel:0\n\t\t};\n\t\t\n\t\tif(isAutoplay === true)\n\t\t\tplayerVars.autoplay = 1;\n\t\t\t\n\t\tg_isPlayerReady = false;\n\n\t\tg_player = new YT.Player(divID, {\n\t\t      height: height,\n\t\t      width: width,\n\t\t      videoId: videoID,\n\t\t      playerVars: playerVars,\n\t\t      events: {\n\t\t        'onReady': onPlayerReady,\n\t\t        'onStateChange': onPlayerStateChange\n\t\t      }\n\t\t });\n\t\t\n\t\tg_lastContainerID = divID;\n\t}\n\t\n\t\n\t/**\n\t * check if YT active\n\t */\n\tfunction isYTActive(){\n\t\t\n\t\tif(typeof YT != \"undefined\" && typeof YT.Player != \"undefined\")\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\t\n\t\n\t/**\n\t * set options\n\t */\n\tthis.setOptions = function(objOptions){\n\t\tg_options = jQuery.extend(g_options, objOptions);\n\t}\n\t\n\t\n\t/**\n\t * put the youtube video\n\t */\n\tthis.putVideo = function(divID, videoID, width, height, isAutoplay){\n\t\t\n\t\tif(isYTActive()){\n\t\t\tputVideoActually(divID, videoID, width, height, isAutoplay);\n\t\t\treturn(true);\n\t\t}\n\t\t\n\t\t//if no API present, wait for the API being ready\n\t\tthis.loadAPI();\n\t\tg_intHandle = setInterval(function(){\n\t\t\t\n\t\t\tif(isYTActive()){\n\t\t\t\tputVideoActually(divID, videoID, width, height, isAutoplay);\n\t\t\t\tclearInterval(g_intHandle);\n\t\t\t}\n\t\t\t\n\t\t}, 500);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * on player ready event\n\t */\n\tfunction onPlayerReady(){\n\t\tg_isPlayerReady = true;\n\t}\n\t\n\t\n\t/**\n\t * on player state change event\n\t * trigger events\n\t */\n\tfunction onPlayerStateChange(){\n\t\t\n\t\tif(typeof g_player.getPlayerState != \"function\"){\n\t\t\ttrace(\"Youtube API error: can't get player state\");\n\t\t\treturn(false);\n\t\t}\n\t\t\n\t\tvar state = g_player.getPlayerState();\n\t\t\n\t\tswitch(state){\n\t\t\tcase YT.PlayerState.PLAYING:\n\t\t\t\tg_objThis.trigger(t.events.START_PLAYING);\n\t\t\tbreak;\n\t\t\tcase YT.PlayerState.ENDED:\n\t\t\t\tg_objThis.trigger(t.events.STOP_PLAYING);\t\t\t\t\t\n\t\t\t\tg_objThis.trigger(t.events.VIDEO_ENDED);\n\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tif(g_prevState == YT.PlayerState.PLAYING)\n\t\t\t\t\tg_objThis.trigger(t.events.STOP_PLAYING);\t\t\t\t\t\n\t\t\tbreak;\n\t\t}\n\t\t\n\t\tg_prevState = state;\n\t}\n\t\n\t\n\t/**\n\t * load youtube API\n\t */\n\tthis.loadAPI = function(){\n\t\t\n\t\tif(g_ugYoutubeAPI.isAPILoaded == true)\n\t\t\treturn(true);\n\t\t\n\t\tif(typeof YT != \"undefined\"){\n\t\t\tg_ugYoutubeAPI.isAPILoaded = true;\n\t\t\treturn(true);\n\t\t}\n\t\t\n\t\tg_ugFunctions.loadJs(\"https://www.youtube.com/player_api\", false);\n\t\t\n\t\tg_ugYoutubeAPI.isAPILoaded = true;\t\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * do some command\n\t */\n\tthis.doCommand = function(command, opt1){\n\t\t\n\t\tif(!g_player)\n\t\t\treturn(true);\n\t\t\n\t\tif(g_isPlayerReady == false)\n\t\t\treturn(false);\n\t\t\n\t\tswitch(command){\n\t\t\tcase \"play\":\n\t\t\t\tif(typeof g_player.playVideo != \"function\")\n\t\t\t\t\treturn(false);\n\t\t\t\t\n\t\t\t\tg_player.playVideo();\n\t\t\tbreak;\n\t\t\tcase \"pause\":\n\t\t\t\tif(typeof g_player.pauseVideo != \"function\")\n\t\t\t\t\treturn(false);\n\t\t\t\t\n\t\t\t\tg_player.pauseVideo();\n\t\t\tbreak;\n\t\t\tcase \"seek\":\n\t\t\t\tif(typeof g_player.seekTo != \"function\")\n\t\t\t\t\treturn(false);\n\n\t\t\t\tg_player.seekTo(opt1);\n\t\t\tbreak;\n\t\t\tcase \"stopToBeginning\":\n\t\t\t\tvar state = g_player.getPlayerState();\n\t\t\t\t\n\t\t\t\tg_player.pauseVideo();\n\t\t\t\t\n\t\t\t\tswitch(state){\n\t\t\t\t\tcase YT.PlayerState.PLAYING:\n\t\t\t\t\tcase YT.PlayerState.ENDED:\n\t\t\t\t\tcase YT.PlayerState.PAUSED:\n\t\t\t\t\t\tg_player.seekTo(0);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t}\n\t\n\t/**\n\t * play video\n\t */\n\tthis.play = function(){\n\t\tt.doCommand(\"play\");\t\t\n\t}\n\t\n\t/**\n\t * stop the video\n\t */\n\tthis.pause = function(){\n\t\tt.doCommand(\"pause\");\n\t}\n\t\n\t/**\n\t * destroy player\n\t */\n\tthis.destroy = function(){\n\t\ttry{\n\t\t\t\n\t\t\tif(g_player){\n\t\t\t\tg_isPlayerReady = false;\t\n\t\t\t\tg_player.clearVideo();\n\t\t\t\tg_player.destroy();\n\t\t\t}\n\t\t\t\n\t\t}catch(objError){\n\t\t\t\n\t\t\tjQuery(\"#\"+g_lastContainerID).html(\"\");\n\t\t\t\n\t\t}\n\t\t\n\t}\n\t\n\t/**\n\t * stop the video and seek to start\n\t */\n\tthis.stopToBeginning = function(){\n\t\tt.doCommand(\"stopToBeginning\");\n\t}\n\t\n\t/**\n\t * change the video\n\t */\n\tthis.changeVideo = function(videoID, isAutoplay){\n\t\t\n\t\tif(t.isPlayerReady() == false)\n\t\t\treturn(false);\n\t\t\n\t\tif(isAutoplay && isAutoplay == true)\n\t\t\tg_player.loadVideoById(videoID, 0, \"large\");\n\t\telse\n\t\t\tg_player.cueVideoById(videoID, 0, \"large\");\n\t}\n\t\n\t\n\t/**\n\t * get if the player is ready\n\t */\n\tthis.isPlayerReady = function(){\n\t\t\n\t\tif(g_isPlayerReady && g_player)\n\t\t\treturn(true);\n\t\n\t\treturn(false);\n\t}\n\t\n\t\t\n\t\n\t/**\n\t * get preview and thumbs images according the ID\n\t */\n\tthis.getVideoImages = function(videoID){\n\t\tvar obj = {};\n\t\tobj.preview = \"https://i.ytimg.com/vi/\"+videoID+\"/sddefault.jpg\";\n\t\tobj.thumb = \"https://i.ytimg.com/vi/\"+videoID+\"/default.jpg\";\n\t\treturn(obj);\n\t}\n\t\n\t\n}\n\n/** -------------- Video Player Class ---------------------*/\n\n\nfunction UGVideoPlayer(){\n\t\n\tvar t = this, g_galleryID, g_objThis = jQuery(this), g_functions = new UGFunctions();\n\tvar g_youtubeAPI = new UGYoutubeAPI(), g_vimeoAPI = new UGVimeoAPI();\n\tvar g_html5API = new UGHtml5MediaAPI(), g_soundCloudAPI = new UGSoundCloudAPI(), g_wistiaAPI = new UGWistiaAPI();\n\tvar g_objPlayer, g_objYoutube, g_objVimeo, g_objHtml5, g_objButtonClose, g_objSoundCloud, g_objWistia;\n\tvar g_activePlayerType = null;\n\t\n\tvar g_options = {\n\t\t\tvideo_enable_closebutton: true\n\t};\n\t\n\tthis.events = {\n\t\t\tSHOW: \"video_show\",\n\t\t\tHIDE: \"video_hide\",\n\t\t\tPLAY_START: \"video_play_start\",\n\t\t\tPLAY_STOP: \"video_play_stop\",\n\t\t\tVIDEO_ENDED: \"video_ended\"\n\t};\n\t\n\tvar g_temp = {\n\t\t\tstandAloneMode: false,\n\t\t\tyoutubeInnerID:\"\",\n\t\t\tvimeoPlayerID:\"\",\n\t\t\thtml5PlayerID:\"\",\n\t\t\twistiaPlayerID:\"\",\n\t\t\tsoundCloudPlayerID:\"\"\n\t};\n\t\n\t\n\t/**\n\t * init the object\n\t */\n\tthis.init = function(optOptions, isStandAloneMode, galleryID){\n\t\tg_galleryID = galleryID;\n\t\t\n\t\tif(!g_galleryID)\n\t\t\tthrow new Error(\"missing gallery ID for video player, it's a must!\");\n\t\t\t\n\t\tg_options =  jQuery.extend(g_options, optOptions);\n\t\t\n\t\tg_youtubeAPI.setOptions(g_options);\n\t\t\n\t\tif(isStandAloneMode && isStandAloneMode == true)\n\t\t\tg_temp.standAloneMode = true;\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * set the player html\n\t */\n\tthis.setHtml = function(objParent){\n\t\t\n\t\tg_temp.youtubeInnerID = g_galleryID + \"_youtube_inner\";\n\t\tg_temp.vimeoPlayerID = g_galleryID + \"_videoplayer_vimeo\";\n\t\tg_temp.html5PlayerID = g_galleryID + \"_videoplayer_html5\";\n\t\tg_temp.wistiaPlayerID = g_galleryID + \"_videoplayer_wistia\";\n\t\tg_temp.soundCloudPlayerID = g_galleryID + \"_videoplayer_soundcloud\";\n\t\t\n\t\t\n\t\tvar html = \"<div class='ug-videoplayer' style='display:none'>\";\n\t\thtml += \"<div class='ug-videoplayer-wrapper ug-videoplayer-youtube' style='display:none'><div id='\"+g_temp.youtubeInnerID+\"'></div></div>\";\n\t\thtml += \"<div id='\"+g_temp.vimeoPlayerID+\"' class='ug-videoplayer-wrapper ug-videoplayer-vimeo' style='display:none'></div>\";\n\t\thtml += \"<div id='\"+g_temp.html5PlayerID+\"' class='ug-videoplayer-wrapper ug-videoplayer-html5'></div>\";\n\t\thtml += \"<div id='\"+g_temp.soundCloudPlayerID+\"' class='ug-videoplayer-wrapper ug-videoplayer-soundcloud'></div>\";\n\t\thtml += \"<div id='\"+g_temp.wistiaPlayerID+\"' class='ug-videoplayer-wrapper ug-videoplayer-wistia'></div>\";\n\t\t\n\t\tif(g_temp.standAloneMode == false && g_options.video_enable_closebutton == true)\n\t\t\thtml += \"<div class='ug-videoplayer-button-close'></div>\";\n\t\t\n\t\thtml += \"</div>\";\n\t\t\n\t\tobjParent.append(html);\n\t\t\n\t\tg_objPlayer = objParent.children(\".ug-videoplayer\");\n\t\tg_objYoutube = g_objPlayer.children(\".ug-videoplayer-youtube\");\n\t\tg_objVimeo = g_objPlayer.children(\".ug-videoplayer-vimeo\");\n\t\tg_objHtml5 = g_objPlayer.children(\".ug-videoplayer-html5\");\n\t\tg_objSoundCloud = g_objPlayer.children(\".ug-videoplayer-soundcloud\");\n\t\tg_objWistia = g_objPlayer.children(\".ug-videoplayer-wistia\");\n\t\t\n\t\tif(g_temp.standAloneMode == false && g_options.video_enable_closebutton == true)\n\t\t\tg_objButtonClose = g_objPlayer.children(\".ug-videoplayer-button-close\")\n\t}\n\n\t\n\tfunction __________EVENTS___________(){};\t\n\t\n\t/**\n\t * on close button click event\n\t */\n\tfunction onCloseButtonClick(){\n\t\tt.hide();\n\t}\n\t\n\t/**\n\t * on some video play start\n\t */\n\tfunction onPlayStart(){\n\t\t\n\t\tg_objThis.trigger(t.events.PLAY_START);\n\t\t\n\t\tif(g_objButtonClose)\n\t\t\tg_objButtonClose.hide();\n\t}\n\t\n\t\n\t/**\n\t * on some video play stop\n\t */\n\tfunction onPlayStop(){\n\t\t\n\t\tg_objThis.trigger(t.events.PLAY_STOP);\n\t\t\n\t\tif(g_objButtonClose)\n\t\t\tg_objButtonClose.show();\n\t}\n\t\n\t/**\n\t * on video ended\n\t */\n\tfunction onVideoEnded(){\n\t\t\n\t\tg_objThis.trigger(t.events.VIDEO_ENDED);\n\t\t\n\t}\n\n\t\n\t/**\n\t * init events\n\t */\n\tfunction initEvents(){\n\t\t\n\t\t//close button events\n\t\tif(g_objButtonClose){\n\t\t\tg_functions.setButtonMobileReady(g_objButtonClose);\t\t\n\t\t\tg_functions.setButtonOnClick(g_objButtonClose, onCloseButtonClick);\t\t\t\t\t\n\t\t}\n\t\t\n\t\t//youtube events\n\t\tjQuery(g_youtubeAPI).on(g_youtubeAPI.events.START_PLAYING, onPlayStart);\n\t\tjQuery(g_youtubeAPI).on(g_youtubeAPI.events.STOP_PLAYING, onPlayStop);\n\t\tjQuery(g_youtubeAPI).on(g_youtubeAPI.events.VIDEO_ENDED, onVideoEnded);\n\t\t\n\t\t//vimeo events\n\t\tjQuery(g_vimeoAPI).on(g_vimeoAPI.events.START_PLAYING, onPlayStart);\n\t\tjQuery(g_vimeoAPI).on(g_vimeoAPI.events.STOP_PLAYING, onPlayStop);\n\t\tjQuery(g_vimeoAPI).on(g_vimeoAPI.events.VIDEO_ENDED, onVideoEnded);\n\t\t\n\t\t//html5 video events\n\t\tjQuery(g_html5API).on(g_html5API.events.START_PLAYING, onPlayStart);\n\t\tjQuery(g_html5API).on(g_html5API.events.STOP_PLAYING, onPlayStop);\n\t\tjQuery(g_html5API).on(g_html5API.events.VIDEO_ENDED, onVideoEnded);\n\t\t\n\t\tjQuery(g_soundCloudAPI).on(g_soundCloudAPI.events.START_PLAYING, onPlayStart);\n\t\tjQuery(g_soundCloudAPI).on(g_soundCloudAPI.events.STOP_PLAYING, onPlayStop);\n\t\tjQuery(g_soundCloudAPI).on(g_soundCloudAPI.events.VIDEO_ENDED, onVideoEnded);\n\t\t\n\t\tjQuery(g_wistiaAPI).on(g_wistiaAPI.events.START_PLAYING, onPlayStart);\n\t\tjQuery(g_wistiaAPI).on(g_wistiaAPI.events.STOP_PLAYING, onPlayStop);\n\t\tjQuery(g_wistiaAPI).on(g_wistiaAPI.events.VIDEO_ENDED, onVideoEnded);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * destroy the video player events\n\t */\n\tthis.destroy = function(){\n\t\t\n\t\tif(g_objButtonClose){\n\t\t\tg_objButtonClose.off(\"click\");\n\t\t\tg_objButtonClose.off(\"touchend\");\n\t\t}\n\t\t\n\t\t//youtube events\n\t\tjQuery(g_youtubeAPI).off(g_youtubeAPI.events.START_PLAYING);\n\t\tjQuery(g_youtubeAPI).off(g_youtubeAPI.events.STOP_PLAYING);\n\t\t\n\t\t//vimeo events\n\t\tjQuery(g_vimeoAPI).off(g_vimeoAPI.events.START_PLAYING);\n\t\tjQuery(g_vimeoAPI).off(g_vimeoAPI.events.STOP_PLAYING);\n\t\t\n\t\t//html5 video events\n\t\tjQuery(g_html5API).off(g_html5API.events.START_PLAYING);\n\t\tjQuery(g_html5API).off(g_html5API.events.STOP_PLAYING);\n\t\t\n\t\tjQuery(g_soundCloudAPI).off(g_soundCloudAPI.events.START_PLAYING, onPlayStart);\n\t\tjQuery(g_soundCloudAPI).off(g_soundCloudAPI.events.STOP_PLAYING, onPlayStop);\n\t\t\n\t\tjQuery(g_wistiaAPI).off(g_wistiaAPI.events.START_PLAYING, onPlayStart);\n\t\tjQuery(g_wistiaAPI).off(g_wistiaAPI.events.STOP_PLAYING, onPlayStop);\n\t\t\n\t\tg_activePlayerType = null;\n\t}\n\t\n\t\n\t/**\n\t * init events\n\t */\n\tthis.initEvents = function(){\n\t\t\n\t\tinitEvents();\n\t}\n\t\n\t\n\t/**\n\t * set element size and position the button\n\t */\n\tthis.setSize = function(width, height){\n\t\t\n\t\tg_functions.setElementSize(g_objPlayer, width, height);\n\t\t\n\t\tif(g_objButtonClose)\n\t\t\tg_functions.placeElement(g_objButtonClose, \"right\", \"top\");\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * set video player position\n\t */\n\tthis.setPosition = function(left, top){\n\t\tg_functions.placeElement(g_objPlayer, left, top);\n\t}\n\t\n\t/**\n\t * get video player object for placing\n\t */\n\tthis.getObject = function(){\n\t\treturn(g_objPlayer);\n\t}\n\t\n\t\n\t/**\n\t * show the player\n\t */\n\tthis.show = function(){\t\t\n\t\t\n\t\tif(t.isVisible() == true)\n\t\t\treturn(true);\n\t\t\n\t\tg_objPlayer.show();\n\t\t\n\t\tg_objPlayer.fadeTo(0,1);\n\t\t\n\t\tif(g_objButtonClose)\n\t\t\tg_objButtonClose.show();\n\t\t\t\t\n\t\tg_objThis.trigger(t.events.SHOW);\n\t}\n\t\t\n\t\n\t/**\n\t * hide the player\n\t */\n\tthis.hide = function(){\n\t\t\n\t\tif(t.isVisible() == false)\n\t\t\treturn(true);\n\t\t\n\t\t//pause all players\n\t\tstopAndHidePlayers();\n\t\t\n\t\tg_activePlayerType = null;\n\t\t\n\t\tg_objPlayer.hide();\n\t\t\n\t\tg_objThis.trigger(t.events.HIDE);\n\t}\n\t\n\t\n\t/**\n\t * get active player\n\t */\n\tthis.getActiveAPI = function(){\n\t\t\n\t\tswitch(g_activePlayerType){\n\t\t\tcase \"youtube\":\n\t\t\t\treturn g_youtubeAPI;\n\t\t\tbreak;\n\t\t\tcase \"vimeo\":\n\t\t\t\treturn g_vimeoAPI;\n\t\t\tbreak;\n\t\t\tcase \"wistia\":\n\t\t\t\treturn g_wistiaAPI;\n\t\t\tbreak;\n\t\t\tcase \"soundcloud\":\n\t\t\t\treturn g_soundCloudAPI;\n\t\t\tbreak;\n\t\t\tcase \"html5\":\n\t\t\t\treturn g_html5API;\n\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn null;\n\t\t\tbreak;\n\t\t}\n\t}\n\t\n\t\n\t/**\n\t * pause active player if playing\n\t */\n\tthis.pause = function(){\n\t\t\n\t\tvar activeAPI = t.getActiveAPI();\n\t\tif(activeAPI == null)\n\t\t\treturn(false);\n\t\t\n\t\tif(typeof activeAPI.pause == \"function\")\n\t\t\tactiveAPI.pause();\n\t\t\t\n\t}\n\t\n\t\n\t/**\n\t * return if the player is visible\n\t */\n\tthis.isVisible = function(){\n\t\t\n\t\treturn g_objPlayer.is(\":visible\");\n\t}\n\t\n\t\n\t/**\n\t * stop and hide other elements except some\n\t */\n\tfunction stopAndHidePlayers(except){\n\t\t\n\t\tvar arrPlayers = [\"youtube\", \"vimeo\", \"html5\", \"soundcloud\", \"wistia\"];\n\t\tfor(var index in arrPlayers){\n\t\t\tvar player = arrPlayers[index];\n\t\t\tif(player == except)\n\t\t\t\tcontinue;\n\t\t\tswitch(player){\n\t\t\t\tcase \"youtube\":\t\t\n\t\t\t\t\tg_youtubeAPI.pause();\n\t\t\t\t\tg_youtubeAPI.destroy();\t\n\t\t\t\t\tg_objYoutube.hide();\n\t\t\t\tbreak;\n\t\t\t\tcase \"vimeo\":\n\t\t\t\t\tg_vimeoAPI.pause();\n\t\t\t\t\tg_vimeoAPI.destroy();\n\t\t\t\t\tg_objVimeo.hide();\n\t\t\t\tbreak;\n\t\t\t\tcase \"html5\":\n\t\t\t\t\tg_html5API.pause();\n\t\t\t\t\tg_objHtml5.hide();\n\t\t\t\tbreak;\n\t\t\t\tcase \"soundcloud\":\n\t\t\t\t\tg_soundCloudAPI.pause();\n\t\t\t\t\tg_soundCloudAPI.destroy();\n\t\t\t\t\tg_objSoundCloud.hide();\n\t\t\t\tbreak;\n\t\t\t\tcase \"wistia\":\n\t\t\t\t\tg_wistiaAPI.pause();\n\t\t\t\t\tg_objWistia.hide();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * play youtube inside the video, isAutoplay - true by default\n\t */\n\tthis.playYoutube = function(videoID, isAutoplay){\n\t\t\t\t\n\t\tif(typeof isAutoplay == \"undefined\")\n\t\t\tvar isAutoplay = true;\n\t\t\n\t\tstopAndHidePlayers(\"youtube\");\n\t\t\n\t\tg_objYoutube.show();\n\t\t\n\t\tvar objYoutubeInner = g_objYoutube.children(\"#\"+g_temp.youtubeInnerID);\n\t\tif(objYoutubeInner.length == 0)\n\t\t\tg_objYoutube.append(\"<div id='\"+g_temp.youtubeInnerID+\"'></div>\");\n\t\t\t\n\t\t\n\t\tif(g_youtubeAPI.isPlayerReady() == true && g_temp.standAloneMode == true)\n\t\t\tg_youtubeAPI.changeVideo(videoID, isAutoplay);\n\t\telse{\n\t\t\tg_youtubeAPI.putVideo(g_temp.youtubeInnerID, videoID, \"100%\", \"100%\", isAutoplay);\n\t\t}\n\t\t\n\t\tg_activePlayerType = \"youtube\";\n\t}\n\t\n\t\n\t/**\n\t * play vimeo\n\t */\n\tthis.playVimeo = function(videoID, isAutoplay){\n\t\t\n\t\tif(typeof isAutoplay == \"undefined\")\n\t\t\tvar isAutoplay = true;\n\t\t\n\t\tstopAndHidePlayers(\"vimeo\");\n\t\t\n\t\tg_objVimeo.show();\n\n\t\tg_vimeoAPI.putVideo(g_temp.vimeoPlayerID, videoID, \"100%\", \"100%\", isAutoplay);\n\t\t\n\t\t/*\n\t\tif(g_vimeoAPI.isPlayerReady() && g_temp.standAloneMode == true){\n\t\t\tg_vimeoAPI.changeVideo(videoID, isAutoplay);\n\t\t}\n\t\telse\n\t\t\tg_vimeoAPI.putVideo(g_temp.vimeoPlayerID, videoID, \"100%\", \"100%\", isAutoplay);\n\t\t */\n\t\t\n\t\tg_activePlayerType = \"vimeo\";\n\n\t}\n\t\n\t\n\t/**\n\t * play html5 video\n\t */\n\tthis.playHtml5Video = function(ogv, webm, mp4, posterImage, isAutoplay){\n\t\t\n\t\tif(typeof isAutoplay == \"undefined\")\n\t\t\tvar isAutoplay = true;\n\t\t\t\t\n\t\tstopAndHidePlayers(\"html5\");\n\t\t\n\t\tg_objHtml5.show();\n\t\t\n\t\t//trace(posterImage);\n\t\t\n\t\tvar data = {\n\t\t\t\togv: ogv, \n\t\t\t\twebm: webm, \n\t\t\t\tmp4: mp4, \n\t\t\t\tposterImage: posterImage \n\t\t\t};\n\t\t\n\t\tg_html5API.putVideo(g_temp.html5PlayerID, data, \"100%\", \"100%\", isAutoplay);\n\t\t\n\t\tg_activePlayerType = \"html5\";\n\n\t}\n\n\t/**\n\t * play sound cloud\n\t */\n\tthis.playSoundCloud = function(trackID, isAutoplay){\n\t\t\n\t\tif(typeof isAutoplay == \"undefined\")\n\t\t\tvar isAutoplay = true;\n\t\t\n\t\tstopAndHidePlayers(\"soundcloud\");\n\t\t\n\t\tg_objSoundCloud.show();\n\t\t\n\t\tg_soundCloudAPI.putSound(g_temp.soundCloudPlayerID, trackID, \"100%\", \"100%\", isAutoplay);\n\n\t\tg_activePlayerType = \"soundcloud\";\n\t\n\t}\n\t\n\t\n\t/**\n\t * play sound cloud\n\t */\n\tthis.playWistia = function(videoID, isAutoplay){\n\t\t\n\t\tif(typeof isAutoplay == \"undefined\")\n\t\t\tvar isAutoplay = true;\n\t\t\n\t\tstopAndHidePlayers(\"wistia\");\n\t\t\n\t\tg_objWistia.show();\n\t\t\n\t\tg_wistiaAPI.putVideo(g_temp.wistiaPlayerID, videoID, \"100%\", \"100%\", isAutoplay);\n\t\n\t\tg_activePlayerType = \"wistia\";\n\n\t}\n\t\n}\n\n\nvar g_ugYoutubeAPI = new UGYoutubeAPI();\nvar g_ugVimeoAPI = new UGVimeoAPI();\nvar g_ugHtml5MediaAPI = new UGHtml5MediaAPI();\nvar g_ugSoundCloudAPI = new UGSoundCloudAPI();\nvar g_ugWistiaAPI = new UGWistiaAPI();\n\n\n\t/**\n\t * prototype gallery funciton\n\t */\n\tjQuery.fn.unitegallery = function(options){\n\t\tvar element = jQuery(this);\n\t\tvar galleryID = \"#\" + element.attr(\"id\");\n\t\t\n\t\tif(!options)\n\t\t\tvar options = {};\n\t\t\t\t\n\t\tvar objGallery = new UniteGalleryMain();\n\t\tobjGallery.run(galleryID, options);\n\t\t\n\t\tvar api = new UG_API(objGallery);\n\t\t\n\t\treturn(api);\n\t}\n\n\t\n\t/**\n\t * check for min jquery version\n\t */\n\tfunction ugCheckForMinJQueryVersion(){\n\t\t\n\t\tvar isMinJQuery = g_ugFunctions.checkMinJqueryVersion(\"1.8.0\");\n\t\t\n\t\tif(isMinJQuery == false)\n\t\t\tthrow new Error(\"The gallery can run from jquery 1.8 You have jQuery \"+jQuery.fn.jquery+\" Please update your jQuery library.\");\n\t}\n\t\n\t\n\t/**\n\t * check for errors function\n\t */\n\tfunction ugCheckForErrors(galleryID, type){\n\n\t\t/**\n\t\t * check for jquery presents\n\t\t */\n\t\tfunction checkForJqueryPresents(){\n\t\t\tif(typeof jQuery == \"undefined\")\n\t\t\t\tthrow new Error(\"jQuery library not included\");\n\t\t}\n\t\t\n\t\t/**\n\t\t * check for double jquery error\n\t\t */\n\t\tfunction checkForDoubleJQuery(){\n\n\t\t\tif(typeof jQuery.fn.unitegallery == \"function\")\n\t\t\t\treturn(true);\n\t\t\t\n\t\t\tvar errorMessage = \"You have some jquery.js library include that comes after the gallery files js include.\";\n\t\t\terrorMessage += \"<br> This include eliminates the gallery libraries, and make it not work.\";\n\t\t\t\n\t\t\tif(type == \"cms\"){\n\t\t\t\terrorMessage += \"<br><br> To fix it you can:<br>&nbsp;&nbsp;&nbsp; 1. In the Gallery Settings -> Troubleshooting set option:  <strong><b>Put JS Includes To Body</b></strong> option to true.\";\n\t\t\t\terrorMessage += \"<br>&nbsp;&nbsp;&nbsp; 2. Find the double jquery.js include and remove it.\";\n\t\t\t}else{\n\t\t\t\terrorMessage += \"<br><br> Please find and remove this jquery.js include and the gallery will work. <br> * There should be only one jquery.js include before all other js includes in the page.\";\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\tthrow new Error(errorMessage);\n\t\t}\n\t\t\n\t\ttry{\n\t\t\tif(type == \"jquery\"){\n\t\t\t\tcheckForJqueryPresents();\n\t\t\t\tugCheckForMinJQueryVersion();\n\t\t\t}else{\n\t\t\t\tugCheckForMinJQueryVersion();\n\t\t\t\tcheckForDoubleJQuery();\n\t\t\t}\n\t\t\t\n\t\t}catch(objError){\n\t\t\t\n\t\t\tvar message = objError.message;\n\t\t\tmessage = \"Unite Gallery Error: \"+ message;\n\t\t\tmessage = \"<div style='font-size:16px;color:#BC0C06;max-width:900px;border:1px solid red;padding:10px;'>\" + message + \"</div>\"\n\t\t\t\n\t\t\tif(type == \"jquery\"){\n\t\t\t\tvar objGallery = document.getElementById(galleryID);\n\t\t\t\tobjGallery.innerHTML = message;\n\t\t\t\tobjGallery.style.display = \"block\";\n\t\t\t}\n\t\t\telse\n\t\t\t\tjQuery(galleryID).show().html(message);\n\t\t\t\n\t\t\treturn(false);\n\t\t}\n\t\t\n\t\treturn(true);\n\t}\n\n\t\nfunction UniteGalleryMain(){\n\t\n\tvar t = this;\n\tvar g_galleryID;\n\tvar g_objGallery = jQuery(t), g_objWrapper, g_objParent;\n\tvar g_objThumbs, g_objSlider, g_functions = new UGFunctions(), g_objTabs;\n\tvar g_arrItems = [], g_numItems, g_selectedItem = null, g_selectedItemIndex = -1;\n\tvar g_objTheme, g_objCache = {};\n\t\n\tthis.events = {\n\t\t\tITEM_CHANGE: \"item_change\",\n\t\t\tSIZE_CHANGE: \"size_change\",\n\t\t\tENTER_FULLSCREEN: \"enter_fullscreen\",\n\t\t\tEXIT_FULLSCREEN: \"exit_fullscreen\",\n\t\t\tSTART_PLAY: \"start_play\",\n\t\t\tSTOP_PLAY: \"stop_play\",\n\t\t\tPAUSE_PLAYING: \"pause_playing\",\n\t\t\tCONTINUE_PLAYING: \"continue_playing\",\n\t\t\tSLIDER_ACTION_START: \"slider_action_start\",\n\t\t\tSLIDER_ACTION_END: \"slider_action_end\",\n\t\t\tITEM_IMAGE_UPDATED: \"item_image_updated\",\n\t\t\tGALLERY_KEYPRESS: \"gallery_keypress\",\n\t\t\tGALLERY_BEFORE_REQUEST_ITEMS: \"gallery_before_request_items\",\t//before ajax load items\n\t\t\tOPEN_LIGHTBOX:\"open_lightbox\",\n\t\t\tCLOSE_LIGHTBOX:\"close_lightbox\"\t\t\t\n\t};\n\t\n\t\n\t//set the default gallery options\n\tvar g_options = {\t\t\t\t\n\t\t\tgallery_width:900,\t\t\t\t\t\t\t//gallery width\t\t\n\t\t\tgallery_height:500,\t\t\t\t\t\t\t//gallery height\n\t\t\t\n\t\t\tgallery_min_width: 150,\t\t\t\t\t\t//gallery minimal width when resizing\n\t\t\tgallery_min_height: 100,\t\t\t\t\t//gallery minimal height when resizing\n\t\t\t\n\t\t\tgallery_theme:\"default\",\t\t\t\t\t//default,compact,grid,slider - select your desired theme from the list of themes.\n\t\t\tgallery_skin:\"default\",\t\t\t\t\t\t//default, alexis etc... - the global skin of the gallery. Will change all gallery items by default.\n\t\t\t\n\t\t\tgallery_images_preload_type:\"minimal\",\t\t//all , minimal , visible - preload type of the images.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//minimal - only image nabours will be loaded each time.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//visible - visible thumbs images will be loaded each time.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//all - load all the images first time.\n\t\t\t\n\t\t\tgallery_autoplay:false,\t\t\t\t\t\t//true / false - begin slideshow autoplay on start\n\t\t\tgallery_play_interval: 3000,\t\t\t\t//play interval of the slideshow\n\t\t\tgallery_pause_on_mouseover: true,\t\t\t//true,false - pause on mouseover when playing slideshow true/false\n\t\t\t\n\t\t\tgallery_mousewheel_role:\"zoom\",\t\t\t\t//none, zoom, advance\n\t\t\tgallery_control_keyboard: true,\t\t\t\t//true,false - enable / disble keyboard controls\n\t\t\tgallery_carousel:true,\t\t\t\t\t\t//true,false - next button on last image goes to first image.\n\t\t\t\n\t\t\tgallery_preserve_ratio: true,\t\t\t\t//true, false - preserver ratio when on window resize\n\t\t\tgallery_background_color: \"\",\t\t\t\t//set custom background color. If not set it will be taken from css.\n\t\t\tgallery_debug_errors:false,\t\t\t\t\t//show error message when there is some error on the gallery area.\n\t\t\tgallery_shuffle:false,\t\t\t\t\t\t//randomise position of items at start.\n\t\t\tgallery_urlajax:null,\t\t\t\t\t\t//ajax url for requesting new items etc.\n\t\t\tgallery_enable_tabs: false,\t\t\t\t\t//enable/disable category tabs\n\t\t\tgallery_enable_cache: true,\t\t\t\t\t//enable caching items\n\t\t\tgallery_initial_catid: \"\"\t\t\t\t\t//initial category id (for caching)\n\t};\n\t\n\t//gallery_control_thumbs_mousewheel\n\t\n\tvar g_temp = {\t\t\t\t\t//temp variables\n\t\tobjCustomOptions:{},\n\t\tisAllItemsPreloaded:false,\t//flag that tells that all items started preloading\n\t\tisFreestyleMode:false,\t\t//no special html additions\n\t\tlastWidth:0,\n\t\tlastHeigh:0,\n\t\thandleResize: null,\n\t\tisInited: false,\n\t\tisPlayMode: false,\n\t\tisPlayModePaused: false,\n\t\tplayTimePassed: 0,\n\t\tplayTimeLastStep: 0,\n\t\tplayHandle: \"\",\n\t\tplayStepInterval: 33,\n\t\tobjProgress: null,\n\t\tisFakeFullscreen: false,\n\t\tthumbsType:null,\n\t\tisYoutubePresent:false,\t\t\t//flag if present youtube items\n\t\tisVimeoPresent:false,\t\t\t//flag if present vimeo items\n\t\tisHtml5VideoPresent:false,\t\t//flag if present html5 video items\n\t\tisSoundCloudPresent:false,\t\t//flag if present soundcloud items\n\t\tisWistiaPresent: false,\t\t\t//flag if some wistia movie present\n\t\tresizeDelay: 100,\n\t\tisRunFirstTime: true,\n\t\toriginalOptions: {},\n\t\tfuncCustomHeight: null\t\t\t//custom height function, set by the theme if needed\n\t};\n\t\n\t\n\t\n\tfunction __________INIT_GALLERY_______(){};\n\t\n\t/**\n\t * get theme function from theme name\n\t */\n\tfunction getThemeFunction(themeName){\n\t\t var themeFunction = themeName;\n\t\tif(themeFunction.indexOf(\"UGTheme_\") == -1)\n\t\t\t themeFunction = \"UGTheme_\" + themeFunction;\n\t\t\n\t\treturn(themeFunction);\n\t}\n\n\t/**\n\t * init the theme\n\t */\n\tfunction initTheme(objCustomOptions){\n\t\t \n\t\t//set theme function:\n\t\t if(objCustomOptions.hasOwnProperty(\"gallery_theme\"))\n\t\t\t g_options.gallery_theme = objCustomOptions.gallery_theme;\n\t\t else{\n\t\t\t var defaultTheme = g_options.gallery_theme;\n\t\t\t if(g_ugFunctions.isThemeRegistered(defaultTheme) == false)\n\t\t\t\t g_options.gallery_theme = g_ugFunctions.getFirstRegisteredTheme();\n\t\t }\n\t\t \n\t\t var themeFunction = getThemeFunction(g_options.gallery_theme);\n\t\t \n\t\t try{\n\t\t\t g_options.gallery_theme = eval(themeFunction);\n\t\t }catch(e){\n\t\t\t //check registered themes\n\t\t };\n\t\t \n\t\t g_options.gallery_theme = eval(themeFunction);\n\t\t \n\t\t //init the theme\n\t\t g_objTheme = new g_options.gallery_theme();\n\t\t g_objTheme.init(t, objCustomOptions);\n\t}\n\t\n\t\n\t/**\n\t * reset all the options for the second time run\n\t */\n\tfunction resetOptions(){\n\t   \t \n\t\t g_options = jQuery.extend({}, g_temp.originalOptions);\n\t\t \n\t\t g_selectedItemIndex = -1;\n\t\t g_selectedItem = null;\n\t\t g_objSlider = undefined;\n\t\t g_objThumbs = undefined;\n\t\t g_objSlider = undefined; \n\t}\n\t\n\t\n\t/**\n\t * check for some errors and fire error if needed\n\t */\n\tfunction checkForStartupErrors(){\n\t\t\n\t\t//protection agains old jquery version\n\t\ttry{\n\t\t\tugCheckForMinJQueryVersion();\n\t\t}catch(e){\n\t\t\tthrowErrorShowMessage(e.message);\n\t\t}\n\t\t\n\t\t//protection against some jquery ui function change\n\t     if(typeof g_objWrapper.outerWidth() == \"object\")\n\t    \t throwErrorShowMessage(\"You have some buggy script. most chances jquery-ui.js that destroy jquery outerWidth, outerHeight functions. The gallery can't run. Please update jquery-ui.js to latest version.\");\n\t     \n\t     //check for late jquery include\n\t     setTimeout(function(){ugCheckForErrors(g_galleryID, \"cms\")} , 5000);\n\t     \n\t}\n\t\n\t\n\t\n\t/**\n\t *  the gallery\n\t */\n\tfunction runGallery(galleryID, objCustomOptions, htmlItems, cacheID){\n\t\t\t\n\t\t\tvar isCustomOptions = (typeof objCustomOptions == \"object\");\n\t\t\t\n\t\t\tif(isCustomOptions)\n\t\t      g_temp.objCustomOptions = objCustomOptions;\n\t\t\t \t\t\t \n\t\t     if(g_temp.isRunFirstTime == true){\n\t\t\t\t\n\t\t    \t g_galleryID = galleryID;\n\t\t\t\t g_objWrapper = jQuery(g_galleryID);\n\t\t\t\t if(g_objWrapper.length == 0){\n\t\t\t\t\t trace(\"div with id: \"+g_galleryID+\" not found\");\n\t\t\t\t\t return(false);\n\t\t\t\t }\n\n\t\t\t\t g_objParent = g_objWrapper.parent();\n\t\t\t\t \n\t\t\t\t checkForStartupErrors();\n\t\t\t\t \n\t\t\t\t g_temp.originalOptions = jQuery.extend({}, g_options);\n\t\t\t\t \n\t\t\t\t //merge options\n\t\t\t\t if(isCustomOptions)\n\t\t\t\t\t g_options = jQuery.extend(g_options, objCustomOptions);\n\t\t\t\t \n\t\t\t\t //cache items\n\t\t\t\t if(g_options.gallery_enable_cache == true && g_options.gallery_initial_catid)\n\t\t\t\t\t cacheItems(g_options.gallery_initial_catid);\n\t\t\t\t\n\t\t\t\t //set size class\n\t\t\t\t t.setSizeClass();\n\t\t\t\t \n\t\t\t\t //fill arrItems\n\t\t\t\t var objItems = g_objWrapper.children();\n\t\t\t\t \n\t\t\t\t fillItemsArray(objItems);\n\t\t\t\t loadAPIs();\n\t\t\t\t \n\t\t\t\t //hide images:\n\t\t\t\t g_objWrapper.find(\"img\").fadeTo(0,0).hide();\n\t\t\t\t g_objWrapper.show();\n\t\t\n\t\t\t\t clearInitData();\n\t\t    \t \n\t\t     }else{\t\t//reset options - not first time run\n\t\t    \t \n\t\t    \t t.destroy();\n\t\t    \t \n\t\t    \t resetOptions();\n\n\t\t    \t g_options = jQuery.extend(g_options, g_temp.objCustomOptions);\n\t    \t\t \n\t\t    \t if(htmlItems){\n\t\t    \t\t \n\t\t    \t\t //cache items\n\t\t    \t\t if(cacheID && g_options.gallery_enable_cache == true)\n\t\t    \t\t\t cacheItems(cacheID, htmlItems);\n\t\t    \t\t \n\t\t    \t\t if(htmlItems == \"noitems\"){\n\t\t    \t\t\t showErrorMessage(\"No items in this category\",\"\");\n\t\t    \t\t\t return(false);\n\t\t\t    \t }\n\t\t    \t\t \n\t\t    \t\t g_objWrapper.html(htmlItems);\n\t\t    \t\t \n\t\t    \t\t var objItems = g_objWrapper.children();\n\t\t    \t\t fillItemsArray(objItems);\n\t\t\t\t\t \n\t\t    \t\t loadAPIs();\n\t\t\t\t\t \n\t\t\t\t\t g_objWrapper.children().fadeTo(0,0).hide();\n\t\t\t\t\t \n\t\t\t\t\t g_objWrapper.show();\n\t\t\t\t\t clearInitData();\n\t\t    \t }\n\t\t     \n\t\t     }\n\t\t     \n\t\t\t //init tabs\n\t\t\t if(g_temp.isRunFirstTime == true && g_options.gallery_enable_tabs == true){\n\t\t\t\t g_objTabs = new UGTabs();\n\t\t\t\t g_objTabs.init(t, g_options);\n\t\t\t }\n\t\t\t \n\t\t\t //modify and verify the params\n\t\t\t if(isCustomOptions)\n\t\t\t\t modifyInitParams(g_temp.objCustomOptions);\n\t\t\t \t\t\t \n\t\t\t validateParams();\n\t\t\t \n\t\t\t //shuffle items\n\t\t\t if(g_options.gallery_shuffle == true)\n\t\t\t\t t.shuffleItems();\n\t\t\t \t\t\t \n\t\t\t //init the theme\n\t\t\t initTheme(g_temp.objCustomOptions);\n\t\t\t \t\t\t \t\t\t\t \n\t\t\t //set gallery html elements\n\t\t\t setGalleryHtml();\n\n\t\t\t //set html properties to all elements\n\t\t\t setHtmlObjectsProperties();\n\t\t\t \n\t\t\t var galleryWidth = g_objWrapper.width();\n\t\t\t \n\t\t\t if(galleryWidth == 0){\n\t\t\t\t g_functions.waitForWidth(g_objWrapper, runGalleryActually);\n\t\t\t }else\n\t\t\t\t runGalleryActually();\n\t\t\t \n\t}\n\t\n\t\n\t/**\n\t * actually run the gallery\n\t */\n\tfunction runGalleryActually(){\n\t\t \n\t\tt.setSizeClass();\n\t\t\n\t\tif(g_temp.isFreestyleMode == false){\n\t\t\t \t\n\t\t\t if(g_options.gallery_preserve_ratio == true)\n\t\t\t\t setHeightByOriginalRatio();\n\t\t }\n\t\t \n\t\t g_objTheme.run();\n\t\t \n\t\t if(g_objTabs && g_temp.isRunFirstTime)\n\t\t\t g_objTabs.run();\n\t\t \n\t\t preloadBigImages();\n\t\t \n\t\t initEvents();\n\t\t \n\t\t //select first item\n\t\t if(g_numItems > 0) \n\t\t\t t.selectItem(0);\n\t\t \n\t\t \n\t\t //set autoplay\n\t\t if(g_options.gallery_autoplay == true)\n\t\t\t t.startPlayMode();\n\t\t \n\t\t g_temp.isRunFirstTime = false;\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * \n\t * show error message\n\t */\n\tfunction showErrorMessage(message, prefix){\n\n\t\tif(typeof prefix == \"undefined\")\n\t\t\tvar prefix = \"<b>Unite Gallery Error: </b>\";\n\t\t\t\t\n\t\tmessage = prefix + message;\n\t\t\n\t\tvar html = \"<div class='ug-error-message-wrapper'><div class='ug-error-message'>\" + message + \"</div></div>\";\n\t\t\n\t\tg_objWrapper.children().remove();\n\t\t\n\t\tg_objWrapper.html(html);\n\t\tg_objWrapper.show();\t\t\n\t}\n\t\n\t/**\n\t * show error message and throw error\n\t */\n\tfunction throwErrorShowMessage(message){\n\t\tshowErrorMessage(message);\n\t\tthrow new Error(message);\n\t}\n\t\n\t\n\t/**\n\t * \n\t * @param objParams\n\t */\n\t function modifyInitParams(){\n\t\t \n\t\t //set default for preloading\n\t\t if(!g_options.gallery_images_preload_type)\n\t\t\t g_options.gallery_images_preload_type = \"minimal\";\n\t\t \n\t\t //normalize gallery min height and width\n\t\t if(g_options.gallery_min_height == undefined || g_options.gallery_height < g_options.gallery_min_height){\n\t\t\t g_options.gallery_min_height = 0;\n\t\t }\n\t\t \n\t\t if(g_options.gallery_min_width == undefined || g_options.gallery_width < g_options.gallery_min_width){\n\t\t\t g_options.gallery_min_width = 0;\n\t\t }\n\t\t \n\t }\n\n\t\n\t/**\n\t * validate the init parameters\n\t */\n\t function validateParams(){\n\t\t \n\t\t //validate theme:\n\t\t if(!g_options.gallery_theme)\n\t\t\t throw new Error(\"The gallery can't run without theme\");\n\t\t \t\t \n\t\t //if(typeof g_options.theme != \"function\")\n\t\t\t //throw new Error(\"Wrong theme function: \" + g_options.theme.toString());\n\t\t \n\t\t //validate height and width\n\t\t if(jQuery.isNumeric(g_options.gallery_height) && g_options.gallery_height < g_options.gallery_min_height)\n\t\t\t throw new Error(\"The <b>gallery_height</b> option must be bigger then <b>gallery_min_height option</b>\");\n\t\t \n\t\t if(g_options.gallery_width < g_options.gallery_min_width)\n\t\t\t throw new Error(\"The <b>gallery_width</b> option must be bigger then <b>gallery_min_width option</b>\");\n\t\t \n\t\t \n\t }\n\t \n\t \n\t /**\n\t * set gallery html\n\t */\n\tfunction setGalleryHtml(){\n\t\t\n\t\t //add classes and divs\n\t\t g_objWrapper.addClass(\"ug-gallery-wrapper\");\n\t\t \n\t\t g_objWrapper.append(\"<div class='ug-overlay-disabled' style='display:none'></div>\");\n\t\t \n\t\t t.setSizeClass();\n\t}\n\t\n\t\n\t/**\n\t * if the thumbs panel don't exists, delete initial images from dom\n\t */\n\tfunction clearInitData(){\n\t\t\n\t\tvar objItems = g_objWrapper.children().remove();\n\t}\n\t\n\t\n\t/**\n\t * store last gallery size\n\t */\n\tfunction storeLastSize(){\n\t\tvar objSize = t.getSize();\n\t\t\n\t\tg_temp.lastWidth = objSize.width;\n\t\tg_temp.lastHeight = objSize.height;\n\t}\n\t\n\t\n\t/**\n\t * set gallery height by original ratio\n\t */\n\tfunction setHeightByOriginalRatio(){\n\t\t\n\t\tvar objSize = t.getSize();\n\t\t\t\t\n\t\tvar ratio = objSize.width / objSize.height;\n\t\t\n\t\tif(ratio != objSize.orig_ratio){\n\t\t\t\n\t\t\tvar newHeight = objSize.width / objSize.orig_ratio;\n\t\t\tnewHeight = Math.round(newHeight);\n\t\t\t\n\t\t\tif(newHeight < g_options.gallery_min_height)\n\t\t\t\tnewHeight = g_options.gallery_min_height;\n\t\t\t\n\t\t\tg_objWrapper.height(newHeight);\n\t\t}\n\t\n\t}\n\n\t\n\t/**\n\t * set properties of the html objects\n\t */\n\tfunction setHtmlObjectsProperties(){\n\t\t   \n\t\t\tvar optionWidth = g_functions.getCssSizeParam(g_options.gallery_width);\n\t\t\t\n\t\t   //set size\t\t\n\t\t   var objCss = {\n\t\t\t\t    //\"width\":optionWidth,\t\t//make it work within tabs\n\t\t\t\t    \"max-width\":optionWidth,\n\t\t\t\t\t\"min-width\":g_functions.getCssSizeParam(g_options.gallery_min_width)\n\t\t\t};\n\t\t   \n\t\t   if(g_temp.isFreestyleMode == false){\n\t\t\t   \n\t\t\t   var galleryHeight = g_functions.getCssSizeParam(g_options.gallery_height);\n\t\t\t   objCss[\"height\"] = galleryHeight;\n\t\t   \n\t\t   }else{\n\t\t\t   objCss[\"overflow\"] = \"visible\";\t\t\t   \n\t\t   }\n\t\t   \n\t\t   //set background color\n\t\t   if(g_options.gallery_background_color)\n\t\t\t   objCss[\"background-color\"] = g_options.gallery_background_color;\n\t\t   \n\t\t   \n\t\t   g_objWrapper.css(objCss);\n\t\t   \n\t}\n\n\t\n\t/**\n\t * fill items array from images object\n\t */\n\tfunction fillItemsArray(arrChildren){\n\t\t\n\t\tg_arrItems = [];\n\t\t\n\t\tvar isMobile = t.isMobileMode();\n\t\t\n\t\t var numIndex = 0;\n\t\t \n\t\t for(var i=0;i<arrChildren.length;i++){\n\t\t\t var objChild = jQuery(arrChildren[i]);\n\t\t\t \n\t\t\t var tagname = objChild.prop(\"tagName\").toLowerCase();\n\t\t\t \n\t\t\t //handle link wrapper\n\t\t\t var itemLink = \"\";\n\t\t\t if(tagname == \"a\"){\n\t\t\t\t itemLink = objChild.attr(\"href\");\n\t\t\t\t objChild = objChild.children();\n\t\t\t\t var tagname = objChild.prop(\"tagName\").toLowerCase();\t\t\t\t \n\t\t\t }\n\t\t\t \n\t\t\t var itemType = objChild.data(\"type\");\n\t\t\t if(itemType == undefined)\n\t\t\t\t itemType = \"image\";\n\t\t\t \n\t\t\t var objItem = {};\n\t\t\t objItem.type = itemType;\n\t\t\t \n\t\t\t if(tagname == \"img\"){\n\t\t\t\t \n\t\t\t\t //protection agains lasy load\n\t\t\t\t var lasyLoadSrc = objChild.data(\"lazyload-src\");\n\t\t\t\t if(lasyLoadSrc && lasyLoadSrc != \"\"){\n\t\t\t\t\t objChild.attr(\"src\", lasyLoadSrc);\n\t\t\t\t\t jQuery.removeData(objChild, \"lazyload-src\");\n\t\t\t\t }\n\t\t\t\t \n\t\t\t\t //src is thumb\n\t\t\t\t var urlImage = objChild.data(\"image\");\n\t\t\t\t var urlThumb = objChild.data(\"thumb\");\n\t\t\t\t \n\t\t\t\t if(typeof(urlImage) == \"undefined\")\n\t\t\t\t\t urlImage = null;\n\t\t\t\t \n\t\t\t\t if(typeof(urlThumb) == \"undefined\")\n\t\t\t\t\t urlThumb = null;\n\t\t\t\t \n\t\t\t\t var imageSrc = objChild.attr(\"src\");\n\t\t\t\t \n\t\t\t\t if(!urlImage)\n\t\t\t\t\t urlImage = imageSrc;\n\t\t\t\t\t \n\t\t\t\t if(!urlThumb)\n\t\t\t\t\t urlThumb = imageSrc;\n\t\t\t\t \n\t\t\t\t if(!urlThumb)\n\t\t\t\t\t urlThumb = urlImage;\n\t\t\t\t \n\t\t\t\t if(!urlImage)\n\t\t\t\t\t urlImage = urlThumb;\n\t\t\t\t \n\t\t\t\t \n\t\t\t\t objItem.urlThumb = urlThumb;\n\t\t\t\t objItem.urlImage = urlImage;\n\t\t\t\t \t\t\t\t \n\t\t\t\t objItem.title = objChild.attr(\"alt\");\n\t\t\t\t \n\t\t\t\t //always set thumb image to object\n\t\t\t\t objItem.objThumbImage = objChild;\n\t\t\t\t \n\t\t\t\t objItem.objThumbImage.attr(\"src\", objItem.urlThumb);\n\t\t\t\t \n\t\t\t }else{\n\t\t\t\t \n\t\t\t\t if(itemType == \"image\"){\n\t\t\t\t\t trace(\"Problematic gallery item found:\");\n\t\t\t\t\t trace(objChild);\n\t\t\t\t\t trace(\"Please look for some third party js script that could add this item to the gallery\");\n\t\t\t\t\t throw new Error(\"The item should not be image type\");\n\t\t\t\t }\n\t\t\t\t \n\t\t\t\t objItem.urlThumb = objChild.data(\"thumb\");\n\t\t\t\t objItem.title = objChild.data(\"title\");\n\t\t\t\t objItem.objThumbImage = null;\n\t\t\t\t objItem.urlImage = objChild.data(\"image\");\n\t\t\t }\n\t\t\t \n\t\t\t \n\t\t\t //check mobile version images\n\t\t\t if(isMobile == true){\n\t\t\t\t \n\t\t\t\t var urlThumbMobile = objChild.data(\"thumb-mobile\");\n\t\t\t\t if(typeof urlThumbMobile != \"undefined\" && urlThumbMobile != \"\"){\n\t\t\t\t\t objItem.urlThumb = urlThumbMobile;\n\t \t\t\t \t \n\t\t\t\t\t if(tagname == \"img\")\n\t \t\t\t\t\t objChild.attr(\"src\",objItem.urlThumb);\n\t\t\t\t }\n\t\t\t\t \n\t\t\t\t var urlImageMobile = objChild.data(\"image-mobile\");\n\t\t\t\t if(typeof urlImageMobile != \"undefined\" && urlImageMobile != \"\")\n\t\t\t\t\t objItem.urlImage = urlImageMobile;\n\t\t\t }\n\t\t\t \n\t\t\t objItem.link = itemLink;\n\t\t\t \n\t\t\t //get description:\n\t\t\t objItem.description = objChild.attr(\"title\");\n\t\t\t if(!objItem.description)\t\t\t\t \n\t\t\t\t objItem.description = objChild.data(\"description\");\n\t\t\t \n\t\t\t if(!objItem.description)\n\t\t\t\t objItem.description = \"\";\n\t\t\t \n\t\t\t objItem.isLoaded = false;\n\t\t\t objItem.isThumbImageLoaded = false;\t//if the image loaded or error load\n\t\t\t objItem.objPreloadImage = null;\n\t\t\t objItem.isBigImageLoadStarted = false;\n\t\t\t objItem.isBigImageLoaded = false;\n\t\t\t objItem.isBigImageLoadError = false;\t\t\t \n\t\t\t objItem.imageWidth = 0;\n\t\t\t objItem.imageHeight = 0;\n\t\t\t \n\t\t\t //set thumb size\n\t\t\t objItem.thumbWidth = 0;\n\t\t\t objItem.thumbHeight = 0;\n\t\t\t objItem.thumbRatioByWidth = 0;\n\t\t\t objItem.thumbRatioByHeight = 0;\n\t\t\t \n\t\t\t var dataWidth = objChild.data(\"width\");\n\t\t\t var dataHeight = objChild.data(\"height\");\n\t\t\t if(dataWidth && typeof dataWidth == \"number\" && dataHeight && typeof dataHeight == \"number\"){\n\t\t\t\t objItem.thumbWidth = dataWidth;\n\t\t\t\t objItem.thumbHeight = dataHeight;\n\t\t\t\t objItem.thumbRatioByWidth = dataWidth / dataHeight;\n\t\t\t\t objItem.thumbRatioByHeight = dataHeight / dataWidth;\n\t\t\t }\n\t\t\t \n\t\t\t objItem.addHtml = null;\n\t\t\t \n\t\t\t var isImageMissing = (objItem.urlImage == undefined || objItem.urlImage == \"\");\n\t\t\t var isThumbMissing = (objItem.urlThumb == undefined || objItem.urlThumb == \"\");\n\t\t\t \n\t\t\t switch(objItem.type){\n\t\t\t \tcase \"youtube\":\t\t\t \t\t\n\t\t\t\t\t objItem.videoid = objChild.data(\"videoid\");\n\t\t\t \t\t \n\t\t\t\t\t if(isImageMissing || isThumbMissing){\n\t\t\t\t\t\t \n\t\t\t\t\t\t var objImages = g_ugYoutubeAPI.getVideoImages(objItem.videoid);\n\t\t\t\t\t \t\t\n\t\t\t\t \t\t //set preview image\n\t\t\t\t \t\t if(isImageMissing)\n\t\t\t\t \t\t\tobjItem.urlImage = objImages.preview;\n\t\t\t\t \t\t\n\t\t\t\t \t\t //set thumb image\n\t\t\t\t \t\t if(isThumbMissing){\n\t\t\t\t \t\t\t \tobjItem.urlThumb = objImages.thumb;\n\t\t\t\t \t\t\t\t\n\t\t\t\t \t\t\t \t if(tagname == \"img\")\n\t\t\t\t \t\t\t\t\t objChild.attr(\"src\",objItem.urlThumb);\n\t\t\t\t \t\t }\n\t\t\t\t\t\t \n\t\t\t\t\t }\n\t\t\t\t\t \n\t\t\t\t\t g_temp.isYoutubePresent = true;\n\t\t\t\tbreak;\n\t\t\t \tcase \"vimeo\":\n\t\t\t \t\t\n\t\t\t\t\tobjItem.videoid = objChild.data(\"videoid\");\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\tg_temp.isVimeoPresent = true;\n\t\t\t \tbreak;\n\t\t\t \tcase \"html5video\":\n\t\t\t \t\tobjItem.videoogv = objChild.data(\"videoogv\");\n\t\t\t \t\tobjItem.videowebm = objChild.data(\"videowebm\");\n\t\t\t \t\tobjItem.videomp4 = objChild.data(\"videomp4\");\n\t\t\t \t\t\n\t\t\t \t\tg_temp.isHtml5VideoPresent = true;\n\t\t\t \tbreak;\n\t\t\t \tcase \"soundcloud\":\n\t\t\t \t\tobjItem.trackid = objChild.data(\"trackid\");\n\t\t\t \t\tg_temp.isSoundCloudPresent = true;\n\t\t\t \tbreak;\n\t\t\t \tcase \"wistia\":\n\t\t\t\t\t objItem.videoid = objChild.data(\"videoid\");\n\t\t\t\t\t g_temp.isWistiaPresent = true;\n\t\t\t \tbreak;\n\t\t\t \tcase \"custom\":\n\t\t\t\t\tvar objChildImage = objChild.children(\"img\");\n\t\t\t \t\t\n\t\t\t\t\tif(objChildImage.length){\n\t\t\t\t\t\tobjChildImage = jQuery(objChildImage[0]);\n\t\t\t\t\t\t\n\t\t\t\t\t    objItem.urlThumb = objChildImage.attr(\"src\");\n\t\t\t\t\t    objItem.title = objChildImage.attr(\"alt\");\n\t\t\t\t\t    objItem.objThumbImage = objChildImage;\n\t\t\t \t\t}\n\t\t\t \t\t\n\t\t\t\t\t//add additional html\n\t\t\t\t\tvar objChildren = objChild.children().not(\"img:first-child\");\n\t\t\t \t\t\n\t\t\t\t\tif(objChildren.length)\n\t\t\t\t\t\tobjItem.addHtml = objChildren.clone();\n\t\t\t \t\t\n\t\t\t \tbreak;\n\t\t\t }\n\t\t\t\n\t\t\t //clear not needed attributes\n\t\t\t if(objItem.objThumbImage){\n\t\t\t\t objItem.objThumbImage.removeAttr(\"data-description\", \"\");\n\t\t\t\t objItem.objThumbImage.removeAttr(\"data-image\", \"\");\t\t\t\t \n\t\t\t\t objItem.objThumbImage.removeAttr(\"data-thumb\", \"\");\t\t\t\t \n\t\t\t\t objItem.objThumbImage.removeAttr(\"title\", \"\");\t\t\t\t \n\t\t\t }\n\t\t\t \n\t\t\t objItem.index = numIndex;\n\t\t\t g_arrItems.push(objItem);\n\t\t\t numIndex++;\n\t\t\t \n\t\t }\n\t\t \n\t\t \n\t\t g_numItems = g_arrItems.length;\n\t\t \n\t}\n\t\n\t\n\t/**\n\t * load api's according presented item types\n\t */\n\tfunction loadAPIs(){\n\t\t\n\t\t//load youtube api\n\t\tif(g_temp.isYoutubePresent)\n\t\t\tg_ugYoutubeAPI.loadAPI();\n\t\t\n\t\tif(g_temp.isVimeoPresent)\n\t\t\tg_ugVimeoAPI.loadAPI();\n\t\t\n\t\tif(g_temp.isHtml5VideoPresent)\n\t\t\tg_ugHtml5MediaAPI.loadAPI();\n\t\t\n\t\tif(g_temp.isSoundCloudPresent)\n\t\t\tg_ugSoundCloudAPI.loadAPI();\n\t\t\n\t\tif(g_temp.isWistiaPresent)\n\t\t\tg_ugWistiaAPI.loadAPI();\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * preload big images\n\t */\n\tfunction preloadBigImages(){\n\t\t\n\t\t//check and fix preload type\n\t\tif(g_options.gallery_images_preload_type == \"visible\" && !g_objThumbs)\n\t\t\tg_options.gallery_images_preload_type = \"minimal\";\n\t\t\n\t\tif(g_temp.isAllItemsPreloaded == true)\n\t\t\treturn(true);\n\t\t\n\t\tswitch(g_options.gallery_images_preload_type){\n\t\t\tdefault:\n\t\t\tcase \"minimal\":\n\t\t\tbreak;\n\t\t\tcase \"all\":\n\t\t\t\t\n\t\t\t\tjQuery(g_arrItems).each(function(){\t\n\t\t\t\t\tpreloadItemImage(this);\t\t\t\n\t\t\t\t});\t\t\t\n\t\t\t\t\n\t\t\tbreak;\n\t\t\tcase \"visible\":\n\t\t\t\tjQuery(g_arrItems).each(function(){\t\t\n\t\t\t\t\tvar objItem = this;\n\t\t\t\t\tvar isVisible = g_objThumbs.isItemThumbVisible(objItem);\n\t\t\t\t\t\n\t\t\t\t\tif(isVisible == true)\n\t\t\t\t\t\tpreloadItemImage(objItem);\n\t\t\t\t});\n\t\t\t\t\n\t\t\tbreak;\n\t\t}\n\t\t\t\t\n\t}\n\t\n\t/**\n\t * check if item needed to preload and preload it\n\t */\n\tfunction checkPreloadItemImage(objItem){\n\t\t\n\t\tif(objItem.isBigImageLoadStarted == true ||\n\t\t\t\t   objItem.isBigImageLoaded == true || \n\t\t\t\t   objItem.isBigImageLoadError == true){\n\t\t\t\t\treturn(false);\t\t\t\n\t\t}\n\t\t\n\t\tswitch(g_options.gallery_images_preload_type){\n\t\t\tdefault:\n\t\t\tcase \"minimal\":\n\t\t\tbreak;\n\t\t\tcase \"all\":\t\t\t\n\t\t\t\t\tpreloadItemImage(objItem);\t\t\t\t\t\t\t\n\t\t\tbreak;\n\t\t\tcase \"visible\":\n\t\t\t\tvar isVisible = g_objThumbs.isItemThumbVisible(objItem);\t\t\t\t\t\n\t\t\t\t\tif(isVisible == true)\n\t\t\t\t\t\tpreloadItemImage(objItem);\t\t\t\t\n\t\t\tbreak;\n\t\t}\n\t\t\n\t}\n\t\n\t/**\n\t * preload item image\n\t */\n\tfunction preloadItemImage(objItem){\n\t\t\n\t\tif(objItem.isBigImageLoadStarted == true ||\n\t\t   objItem.isBigImageLoaded == true || \n\t\t   objItem.isBigImageLoadError == true){\n\t\t\treturn(true);\t\t\t\n\t\t}\n\t\t\n\t\tvar imageUrl = objItem.urlImage;\n\t\tif(imageUrl == \"\" || imageUrl == undefined){\n\t\t\tobjItem.isBigImageLoadError = true;\n\t\t\treturn(false);\n\t\t}\n\t\t\n\t\tobjItem.isBigImageLoadStarted = true;\n\t\t\t\t\n\t\tobjItem.objPreloadImage = jQuery('<img/>').attr(\"src\", imageUrl);\n\t\tobjItem.objPreloadImage.data(\"itemIndex\", objItem.index);\n\t\t\n\t\t//set image load event (not that reliable)\n\t\tobjItem.objPreloadImage.on(\"load\", t.onItemBigImageLoaded);\n\t\t\n\t\t//set load error event\n\t\tobjItem.objPreloadImage.on( \"error\", function(){\n\t\t\tvar objImage = jQuery(this);\n\t\t\tvar itemIndex = objImage.data(\"itemIndex\");\n\t\t\tvar objItem = g_arrItems[itemIndex];\n\t\t\t\n\t\t\t//update error:\n\t\t\tobjItem.isBigImageLoadError = true;\n\t\t\tobjItem.isBigImageLoaded = false;\n\t\t\t\n\t\t\t//print error\n\t\t\tvar imageUrl = jQuery(this).attr(\"src\");\n\t\t\tconsole.log(\"Can't load image: \"+ imageUrl);\n\t\t\t\n\t\t\t//try to load the image again\n\t\t\tg_objGallery.trigger(t.events.ITEM_IMAGE_UPDATED, [itemIndex, objItem.urlImage]);\n\t\t\tobjItem.objThumbImage.attr(\"src\", objItem.urlThumb);\n\t\t\t\n\t\t});\n\t\t\n\t\t//check the all items started preloading flag\n\t\tcheckAllItemsStartedPreloading();\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * on item big image loaded event function. \n\t * Update image size and that the image has been preloaded\n\t * can be called from another objects like the slider\n\t */\n\tthis.onItemBigImageLoaded = function(event, objImage){\n\t\t\t\t\n\t\tif(!objImage)\n\t\t\tvar objImage = jQuery(this);\n\t\t\n\t\tvar itemIndex = objImage.data(\"itemIndex\");\n\t\t\n\t\tvar objItem = g_arrItems[itemIndex];\n\t\t\n\t\tobjItem.isBigImageLoaded = true;\n\t\t\n\t\t//get size with fallback function\n\t\tvar objSize = g_functions.getImageOriginalSize(objImage);\n\t\t\n\t\tobjItem.imageWidth = objSize.width;\n\t\tobjItem.imageHeight = objSize.height;\t\t\n\t}\n\t\n\t/**\n\t * check and fill image size in item object\n\t */\n\tthis.checkFillImageSize = function(objImage, objItem){\n\t\t\n\t\tif(!objItem){\n\t\t\tvar itemIndex = objImage.data(\"itemIndex\");\n\t\t\tif(itemIndex === undefined)\n\t\t\t\tthrow new Error(\"Wrong image given to gallery.checkFillImageSize\");\n\t\t\t\n\t\t\tvar objItem = g_arrItems[itemIndex];\n\t\t}\n\t\t\n\t\tvar objSize = g_functions.getImageOriginalSize(objImage);\n\t\t\n\t\tobjItem.imageWidth = objSize.width;\n\t\tobjItem.imageHeight = objSize.height;\t\t\n\t}\n\t\n\t\n\t/**\n\t * preload next images near current item\n\t */\n\tfunction preloadNearBigImages(objItem){\n\t\t\n\t\tif(g_temp.isAllItemsPreloaded == true)\n\t\t\treturn(false);\n\t\t\n\t\tif(!objItem)\n\t\t\tvar objItem = g_selectedItem;\n\t\t\n\t\tif(!objItem)\n\t\t\treturn(true);\n\t\t\t\n\t\tvar currentIndex = objItem.index;\n\t\tvar lastItemIndex = currentIndex - 1;\n\t\tvar nextItemIndex = currentIndex + 1;\n\t\t\n\t\tif(lastItemIndex > 0)\n\t\t\tpreloadItemImage(g_arrItems[lastItemIndex]);\n\t\t\n\t\tif(nextItemIndex < g_numItems)\n\t\t\tpreloadItemImage(g_arrItems[nextItemIndex]);\n\t\t\t\n\t}\n\t\n\t\n\t/**\n\t * check that all items started preloading, if do, set \n\t * flag g_temp.isAllItemsPreloaded to true\n\t */\n\tfunction checkAllItemsStartedPreloading(){\n\t\t\n\t\tif(g_temp.isAllItemsPreloaded == true)\n\t\t\treturn(false);\n\t\t\n\t\t//if some of the items not started, exit function:\n\t\tfor(var index in g_arrItems){\n\t\t\tif(g_arrItems[index].isBigImageLoadStarted == false)\n\t\t\t\treturn(false);\n\t\t}\n\t\t\n\t\t//if all started, set flag to true\n\t\tg_temp.isAllItemsPreloaded = true;\t\n\t}\n\t\n\t\n\t/**\n\t * set freestyle mode\n\t */\n\tthis.setFreestyleMode = function(){\n\t\t\n\t\tg_temp.isFreestyleMode = true;\n\t\n\t}\n\t\n\t\n\t/**\n\t * attach thumbs panel to the gallery\n\t */\n\tthis.attachThumbsPanel = function(type, objThumbs){\n\t\tg_temp.thumbsType = type;\n\t\tg_objThumbs = objThumbs;\n\t}\n\t\n\t\n\t/**\n\t * init the slider\n\t */\t\n\tthis.initSlider = function(customOptions, optionsPrefix){\n\t\t \n\t\t //mix options with user options\n\t\t if(!customOptions)\n\t\t\t var customOptions = {};\n\t\t \t\t \n\t\t customOptions = jQuery.extend(g_temp.objCustomOptions, customOptions);\n\t\t \n\t\t g_objSlider = new UGSlider();\t\t \n\t\t g_objSlider.init(t, customOptions, optionsPrefix);\n\t}\n\t\n\t\n\tfunction __________END_INIT_GALLERY_______(){};\n\t\n\tfunction __________EVENTS_____________(){};\n\n\t\n\t/**\n\t * on gallery mousewheel event handler, advance the thumbs\n\t */\n\tthis.onGalleryMouseWheel = function(event, delta, deltaX, deltaY){\n\t\t\n\t\tevent.preventDefault();\n\t\t\n\t\tif(delta > 0)\n\t\t\tt.prevItem();\n\t\telse\n\t\t\tt.nextItem();\n\t}\n\t\n\t\n\t/**\n\t * on mouse enter event\n\t */\n\tfunction onSliderMouseEnter(event){\n\t\t\n\t\tif(g_options.gallery_pause_on_mouseover == true && t.isFullScreen() == false && g_temp.isPlayMode == true && g_objSlider && g_objSlider.isSlideActionActive() == false)\n\t\t\tt.pausePlaying();\n\t}\n\t\n\t\n\t/**\n\t * on mouse move event\n\t */\n\tfunction onSliderMouseLeave(event){\n\t\t\n\t\tif(g_options.gallery_pause_on_mouseover == true && g_temp.isPlayMode == true && g_objSlider && g_objSlider.isSlideActionActive() == false){\n\t\t\t\n\t\t\tvar isStillLoading = g_objSlider.isCurrentSlideLoadingImage();\n\t\t\t\n\t\t\tif(isStillLoading == false)\n\t\t\t\tt.continuePlaying();\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * on keypress - keyboard control\n\t */\n\tfunction onKeyPress(event){\n\t\t \n\t\tvar obj = jQuery(event.target);\n\t\tif(obj.is(\"textarea\") || obj.is(\"select\") || obj.is(\"input\"))\n\t\t\treturn(true);\n\t\t\t\t\t\t\n\t\t var keyCode = (event.charCode) ? event.charCode :((event.keyCode) ? event.keyCode :((event.which) ? event.which : 0));\n\t\t \n\t\t var wasAction = true;\n\t\t \n\t\t switch(keyCode){\n\t\t\t case 39:\t//right key\n\t\t\t\t t.nextItem();\n\t\t\t break;\n\t\t\t case 37:\t//left key\n\t\t\t\t t.prevItem();\n\t\t\t break;\n\t\t\t default:\n\t\t\t\t wasAction = false;\n\t\t\t break; \n\t\t }\n\t\t \n\t\t //only first page gallery affected\n\t\t \n\t\t if(wasAction == true){\n\t\t\t event.preventDefault();\n\t\t\t event.stopPropagation();\n\t\t\t event.stopImmediatePropagation();\n\t\t }\n\t\t \n\t\tg_objGallery.trigger(t.events.GALLERY_KEYPRESS, [keyCode,event]);\n\t}\n\t\n\t\n\t/**\n\t * check that the gallery resized, if do, trigger onresize event\n\t */\n\tfunction onGalleryResized(){\n\t\t\n\t\tvar objSize = t.getSize();\n\t\t\n\t\tif(objSize.width == 0)\t//fix hidden gallery change\n\t\t\treturn(true);\n\t\t\n\t\tt.setSizeClass();\n\t\t\n\t\tvar objSize = t.getSize();\n\t\t\t\t\n\t\tif(objSize.width != g_temp.lastWidth || objSize.height != g_temp.lastHeight){\n\t\t\t\n\t\t\tvar heightWasSet = false;\n\t\t\t\n\t\t\t//set height with custom function (if exists)\n\t\t\tif(g_temp.funcCustomHeight){\n\t\t\t\tvar newHeight = g_temp.funcCustomHeight(objSize);\n\t\t\t\tif(newHeight){\n\t\t\t\t\tg_objWrapper.height(newHeight);\n\t\t\t\t\theightWasSet = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(heightWasSet == false && g_options.gallery_preserve_ratio == true && g_temp.isFreestyleMode == false)\n\t\t\t\tsetHeightByOriginalRatio();\n\t\t\t\n\t\t\tstoreLastSize();\n\t\t\tg_objGallery.trigger(t.events.SIZE_CHANGE);\n\t\t\t\n\t\t}\n\t\t\n\t}\n\n\t\n\t/**\n\t * on strip move event\n\t * preload visible images if that option selected\n\t */\n\tfunction onThumbsChange(event){\n\t\t\n\t\t//preload visible images \n\t\tif(g_options.gallery_images_preload_type == \"visible\" && g_temp.isAllItemsPreloaded == false){\n\t\t\tpreloadBigImages();\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * on full screen change event\n\t */\n\tfunction onFullScreenChange(){\n\t\t\n\t\t\n\t\tvar isFullscreen = g_functions.isFullScreen();\n\t\tvar event = isFullscreen ? t.events.ENTER_FULLSCREEN:t.events.EXIT_FULLSCREEN; \n\n\t\t var fullscreenID = g_functions.getGlobalData(\"fullscreenID\");\n\t\t \n\t\t //check if this gallery was affected\n\t\t if(g_galleryID !== fullscreenID)\n\t\t\t return(true);\n\t\t \t\t \n\t\t //add classes for the gallery\n\t\t if(isFullscreen){\n\t\t\t g_objWrapper.addClass(\"ug-fullscreen\");\n\t\t }else{\n\t\t\t g_objWrapper.removeClass(\"ug-fullscreen\");\n\t\t }\n\n\t\t g_objGallery.trigger(event);\n\t\t \n\t\t onGalleryResized();\n\t}\n\t\n\t/**\n\t * on big image updated, if needed - preload this item image\n\t */\n\tfunction onItemImageUpdated(event, index){\n\t\t\n\t\tvar objItem = t.getItem(index);\t\t\n\t\tcheckPreloadItemImage(objItem);\t\t\n\t}\n\t\n\t/**\n\t * on current slide image load end. If playing mode, begin playing again\n\t */\n\tfunction onCurrentSlideImageLoadEnd(){\n\t\t\n\t\tif(t.isPlayMode() == true)\n\t\t\tt.continuePlaying();\n\t}\n\t\n\t\n\t/**\n\t * init all events\n\t */\n\tfunction initEvents(){\n\t\t\n\t\t//avoid annoyong firefox image dragging\n\t\tg_objWrapper.on(\"dragstart\",function(event){\n\t\t\tevent.preventDefault();\n\t\t});\n\t\t\n\t\t//on big image updated, if needed - preload this item image\n\t\tg_objGallery.on(t.events.ITEM_IMAGE_UPDATED, onItemImageUpdated);\n\t\t\n\t\t//init custom event on strip moving\n\t\tif(g_objThumbs){\n\t\t\tswitch(g_temp.thumbsType){\n\t\t\t\tcase \"strip\":\n\t\t\t\t\tjQuery(g_objThumbs).on(g_objThumbs.events.STRIP_MOVE, onThumbsChange);\n\t\t\t\tbreak;\n\t\t\t\tcase \"grid\":\n\t\t\t\t\tjQuery(g_objThumbs).on(g_objThumbs.events.PANE_CHANGE, onThumbsChange);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t\n\t\t//init mouse wheel\n\t\tif(g_options.gallery_mousewheel_role == \"advance\" && g_temp.isFreestyleMode == false)\n\t\t\tg_objWrapper.on(\"mousewheel\", t.onGalleryMouseWheel);\n\t\t\n\t\t //on resize event\n\t\t storeLastSize();\n\t\t \n\t\t jQuery(window).resize(function(){\n\t\t\t g_objWrapper.css(\"width\",\"auto\");\n\t\t\t g_functions.whenContiniousEventOver(\"gallery_resize\", onGalleryResized, g_temp.resizeDelay);\n\t\t });\n\t\t \n\t\t //check resize once in a time, start from 10 seconds\n\t\t setTimeout(function(){\n\t\t\t setInterval(onGalleryResized, 2000);\t\t\t \n\t\t }, 10000);\n\t\t \n\t\t \n\t\t //fullscreen:\n\t\t g_functions.addFullScreenChangeEvent(onFullScreenChange);\n\t\t \n\t\t //on slider item changed event\n\t\t if(g_objSlider){\n\t\t\t \n\t\t\t jQuery(g_objSlider).on(g_objSlider.events.ITEM_CHANGED, function(){\n\t\t\t\t var sliderIndex = g_objSlider.getCurrentItemIndex();\n\t\t\t\t \t\t\t\t \n\t\t\t\t if(sliderIndex != -1)\n\t\t\t\t\t t.selectItem(sliderIndex);\n\t\t\t });\n\t\t\t \n\t\t\t //add slider onmousemove event\n\t\t\t if(g_options.gallery_pause_on_mouseover == true){\n\t\t\t\t var sliderElement = g_objSlider.getElement();\n\t\t\t\t sliderElement.hover(onSliderMouseEnter, onSliderMouseLeave);\n\t\t\t\t \n\t\t\t\t //on full screen, run on mouse leave\n\t\t\t\t g_objGallery.on(t.events.ENTER_FULLSCREEN, function(){\n\t\t\t\t\t\t onSliderMouseLeave();\n\t\t\t\t });\n\t\t\t\t \n\t\t\t }\n\t\t\t \n\t\t\t //retrigger slider events\n\t\t\t retriggerEvent(g_objSlider, g_objSlider.events.ACTION_START, t.events.SLIDER_ACTION_START);\n\t\t\t retriggerEvent(g_objSlider, g_objSlider.events.ACTION_END, t.events.SLIDER_ACTION_END);\n\t\t\t \n\t\t\t jQuery(g_objSlider).on(g_objSlider.events.CURRENTSLIDE_LOAD_END, onCurrentSlideImageLoadEnd);\n\t\t \n\t\t }\n\t\t  \n\t\t //add keyboard events\n\t\t if(g_options.gallery_control_keyboard == true)\n\t\t\t jQuery(document).keydown(onKeyPress);\n\t\t \t\t \n\t}\n\t\n\t\n\t/**\n\t * destroy all gallery events\n\t */\n\tthis.destroy = function(){\n\t\t\n\t\tg_objWrapper.off(\"dragstart\");\n\t\tg_objGallery.off(t.events.ITEM_IMAGE_UPDATED);\n\t\t\n\t\t//init custom event on strip moving\n\t\tif(g_objThumbs){\n\t\t\tswitch(g_temp.thumbsType){\n\t\t\t\tcase \"strip\":\n\t\t\t\t\tjQuery(g_objThumbs).off(g_objThumbs.events.STRIP_MOVE);\n\t\t\t\tbreak;\n\t\t\t\tcase \"grid\":\n\t\t\t\t\tjQuery(g_objThumbs).off(g_objThumbs.events.PANE_CHANGE);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t\n\t\t g_objWrapper.off(\"mousewheel\");\n\t\t\n\t\t jQuery(window).off(\"resize\");\n\t\t \n\t\t //fullscreen:\n\t\t g_functions.destroyFullScreenChangeEvent();\n\t\t \n\t\t //on slider item changed event\n\t\t if(g_objSlider){\n\t\t\t \n\t\t\t jQuery(g_objSlider).off(g_objSlider.events.ITEM_CHANGED);\n\t\t\t \n\t\t\t //add slider onmousemove event\n\t\t\t var sliderElement = g_objSlider.getElement();\n\t\t\t sliderElement.off(\"mouseenter\");\n\t\t\t sliderElement.off(\"mouseleave\");\n\t\t\t \n\t\t\t g_objGallery.off(t.events.ENTER_FULLSCREEN);\n\t\t\t jQuery(g_objSlider).off(g_objSlider.events.ACTION_START);\n\t\t\t jQuery(g_objSlider).off(g_objSlider.events.ACTION_END);\n\t\t\t jQuery(g_objSlider).off(g_objSlider.events.CURRENTSLIDE_LOAD_END);\n\t\t }\n\t\t \t\t \n\t\t //add keyboard events\n\t\t if(g_options.gallery_control_keyboard == true)\n\t\t\t jQuery(document).off(\"keydown\");\n\t\t\n\t\t //destroy theme\n\t\t if(g_objTheme && typeof g_objTheme.destroy == \"function\"){\n\t\t\t g_objTheme.destroy();\n\t\t }\n\n\t\t g_objWrapper.html(\"\");\n\t}\n\t\n\t\n\tfunction __________GENERAL_______(){};\n\t\n\t/**\n\t * get items array\n\t */\n\tthis.getArrItems = function(){\n\t\treturn g_arrItems;\n\t}\n\t\n\t/**\n\t * get gallery objects\n\t */\n\tthis.getObjects = function(){\n\t\t\t\n\t\tvar objects = {\n\t\t\tg_galleryID:g_galleryID,\n\t\t\tg_objWrapper:g_objWrapper,\n\t\t\tg_objThumbs:g_objThumbs,\n\t\t\tg_objSlider:g_objSlider,\n\t\t\tg_options:g_options,\n\t\t\tg_arrItems:g_arrItems,\n\t\t\tg_numItems:g_numItems\n\t\t};\n\t\t\n\t\treturn(objects);\n\t}\n\t\n\t/**\n\t * get slider object\n\t */\n\tthis.getObjSlider = function(){\n\t\t\n\t\treturn(g_objSlider);\n\t}\n\t\n\t\n\t/**\n\t * \n\t * get item by index, if the index don't fit, trace error\n\t */\n\tthis.getItem = function(index){\n\t\tif(index < 0){\n\t\t\tthrow new Error(\"item with index: \" + index + \" not found\");\n\t\t\treturn(null);\n\t\t}\n\t\tif(index >= g_numItems){\n\t\t\tthrow new Error(\"item with index: \" + index + \" not found\");\n\t\t\treturn(null);\t\t\t\n\t\t}\n\t\t\n\t\treturn(g_arrItems[index]);\n\t}\n\t\n\t\n\t/**\n\t * get gallery width\n\t */\n\tthis.getWidth = function(){\n\t\t\n\t\tvar objSize = t.getSize();\n\t\t\t\t\n\t\treturn(objSize.width);\n\t}\n\t\n\t/**\n\t * get gallery height\n\t */\n\tthis.getHeight = function(){\n\t\t\n\t\tvar objSize = t.getSize();\n\t\t\n\t\treturn(objSize.height);\n\t}\n\t\n\t\n\t/**\n\t * get gallery size\n\t */\n\tthis.getSize = function(){\n\t\t\n\t\tvar objSize = g_functions.getElementSize(g_objWrapper);\n\t\t\n\t\tobjSize.orig_width = g_options.gallery_width;\n\t\tobjSize.orig_height = g_options.gallery_height;\n\t\tobjSize.orig_ratio = objSize.orig_width / objSize.orig_height;\n\t\t\n\t\treturn(objSize);\n\t}\n\t\n\t/**\n\t * get gallery ID\n\t */\n\tthis.getGalleryID = function(){\n\t\t\n\t\tvar id = g_galleryID.replace(\"#\",\"\");\n\t\t\t\n\t\treturn(id);\n\t}\n\t\n\t/**\n\t * get next item by current index (or current object)\n\t */\n\tthis.getNextItem = function(index, forceCarousel){\n\t\t\n\t\tif(typeof index == \"object\")\n\t\t\tindex = index.index;\n\t\t\n\t\tvar nextIndex = index + 1;\n\t\t\n\t\tif(forceCarousel !== true && g_numItems == 1)\n\t\t\treturn(null);\n\t\t\n\t\tif(nextIndex >= g_numItems){\n\t\t\t\n\t\t\tif(g_options.gallery_carousel == true || forceCarousel === true)\n\t\t\t\tnextIndex = 0;\n\t\t\telse\n\t\t\t\treturn(null);\n\t\t}\n\t\t\n\t\tvar objItem = g_arrItems[nextIndex];\n\t\t\n\t\treturn(objItem);\t\t\t\n\t}\n\t\n\t\n\t/**\n\t * get previous item by index (or item object)\n\t */\n\tthis.getPrevItem = function(index){\n\t\t\n\t\tif(typeof index == \"object\")\n\t\t\tindex = index.index;\n\t\t\n\t\tvar prevIndex = index - 1;\n\t\t\n\t\tif(prevIndex < 0){\n\t\t\tif(g_options.gallery_carousel == true || forceCarousel === true)\n\t\t\t\tprevIndex = g_numItems - 1;\n\t\t\telse\n\t\t\t\treturn(null);\n\t\t}\n\t\t\n\t\tvar objItem = g_arrItems[prevIndex];\n\t\t\n\t\treturn(objItem);\n\t}\n\t\n\t\n\t\n\t/**\n\t * get selected item\n\t */\n\tthis.getSelectedItem = function(){\n\t\t\n\t\treturn(g_selectedItem);\n\t}\n\t\n\t/**\n\t * get selected item index\n\t */\n\tthis.getSelectedItemIndex = function(){\n\t\t\n\t\treturn(g_selectedItemIndex);\n\t}\n\t\n\t\n\t/**\n\t * get number of items\n\t */\n\tthis.getNumItems = function(){\n\t\treturn g_numItems;\n\t}\n\t\n\t/**\n\t * get true if the current item is last\n\t */\n\tthis.isLastItem = function(){\n\t\tif(g_selectedItemIndex == g_numItems - 1)\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\t\n\t\n\t/**\n\t * get true if the current item is first\n\t */\n\tthis.isFirstItem = function(){\n\t\tif(g_selectedItemIndex == 0)\n\t\t\treturn(true);\n\t\treturn(false);\n\t}\n\t\n\t\n\t/**\n\t * get gallery options\n\t */\n\tthis.getOptions = function(){\n\t\treturn g_options;\n\t}\n\t\n\t\n\t/**\n\t * get the gallery wrapper element\n\t */\n\tthis.getElement = function(){\n\t\treturn(g_objWrapper);\n\t}\n\t\n\t\n\tthis.___________SET_CONTROLS___________ = function(){}\n\t\n\t/**\n\t * set next button element\n\t * set onclick event\n\t */\n\tthis.setNextButton = function(objButton){\n\t\t\n\t\t//register button as a unite gallery belong\n\t\tobjButton.data(\"ug-button\", true);\n\t\t\n\t\tg_functions.setButtonOnClick(objButton, t.nextItem);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * set prev button element\n\t * set onclick event\n\t */\n\tthis.setPrevButton = function(objButton){\n\t\t\n\t\t//register button as a unite gallery belong\n\t\tobjButton.data(\"ug-button\", true);\n\t\t\n\t\tg_functions.setButtonOnClick(objButton, t.prevItem);\n\t\t\t\t\n\t}\n\t\n\t\n\t/**\n\t * set fullscreen button to enter / exit fullscreen.\n\t * on fullscreen mode ug-fullscreenmode class wil be added\n\t */\n\tthis.setFullScreenToggleButton = function(objButton){\n\t\t\n\t\t//register button as a unite gallery belong\n\t\tobjButton.data(\"ug-button\", true);\n\n\t\tg_functions.setButtonOnClick(objButton, t.toggleFullscreen);\n\t\t\n\t\tg_objGallery.on(t.events.ENTER_FULLSCREEN,function(){\n\t\t\tobjButton.addClass(\"ug-fullscreenmode\");\n\t\t});\n\t\t\n\t\tg_objGallery.on(t.events.EXIT_FULLSCREEN,function(){\n\t\t\tobjButton.removeClass(\"ug-fullscreenmode\");\n\t\t});\n\t\t\t\t\n\t}\n\t\n\t\n\t/**\n\t * destroy full screen button\n\t */\n\tthis.destroyFullscreenButton = function(objButton){\n\t\t\n\t\tg_functions.destroyButton(objButton);\n\t\t\n\t\tg_objGallery.off(t.events.ENTER_FULLSCREEN);\n\t\tg_objGallery.off(t.events.EXIT_FULLSCREEN);\n\t}\n\t\n\t\n\t/**\n\t * set play button event\n\t */\n\tthis.setPlayButton = function(objButton){\n\t\t\n\t\t//register button as a unite gallery belong\n\t\tobjButton.data(\"ug-button\", true);\n\t\t\n\t\tg_functions.setButtonOnClick(objButton, t.togglePlayMode);\n\t\t\n\t\tg_objGallery.on(t.events.START_PLAY,function(){\n\t\t\tobjButton.addClass(\"ug-stop-mode\");\n\t\t});\n\t\t\n\t\tg_objGallery.on(t.events.STOP_PLAY, function(){\n\t\t\tobjButton.removeClass(\"ug-stop-mode\");\n\t\t});\n\t\t\n\t}\n\t\n\t/**\n\t * destroy the play button\n\t */\n\tthis.destroyPlayButton = function(objButton){\n\t\tg_functions.destroyButton(objButton);\n\t\tg_objGallery.off(t.events.START_PLAY);\n\t\tg_objGallery.off(t.events.STOP_PLAY);\n\t}\n\t\n\t/**\n\t * set playing progress indicator\n\t */\n\tthis.setProgressIndicator = function(objProgress){\n\t\t\n\t\tg_temp.objProgress = objProgress;\t\t\n\t}\n\t\n\t\n\t/**\n\t * set title and descreiption containers\n\t */\n\tthis.setTextContainers = function(objTitle, objDescription){\n\t\t\n\t\tg_objGallery.on(t.events.ITEM_CHANGE, function(){\n\t\t\t\n\t\t\tvar objItem = t.getSelectedItem();\t\t\t\n\t\t\tobjTitle.html(objItem.title);\n\t\t\tobjDescription.html(objItem.description);\n\t\t\t\n\t\t});\n\t\t\n\t}\n\t\n\t/**\n\t * show overlay disabled\n\t */\n\tthis.showDisabledOverlay = function(){\n\t\tg_objWrapper.children(\".ug-overlay-disabled\").show();\n\t}\n\n\t/**\n\t * show overlay disabled\n\t */\n\tthis.hideDisabledOverlay = function(){\n\t\tg_objWrapper.children(\".ug-overlay-disabled\").hide();\n\t}\n\t\n\tthis.___________END_SET_CONTROLS___________ = function(){}\n\n\t\n\t/**\n\t * cache items, put to cache array by id\n\t * the items must be unprocessed yet\n\t */\n\tfunction cacheItems(cacheID, htmlItemsArg){\n\t\t\t\n\t\tif(htmlItemsArg){\n\t\t\tvar htmlItems = htmlItemsArg;\n\t\t\tif(htmlItems != \"noitems\")\n\t\t\t\thtmlItems = jQuery(htmlItemsArg).clone();\n\t\t}else{\n\t\t\tvar htmlItems = g_objWrapper.children().clone();\n\t\t}\n\t\t\n\t\tg_objCache[cacheID] = htmlItems;\n\t}\n\t\n\t\n\t/**\n\t * remove all size classes\n\t */\n\tfunction removeAllSizeClasses(objWrapper){\n\t\t\n\t\tif(!objWrapper)\n\t\t\tobjWrapper = g_objWrapper;\n\t\t\n\t\tobjWrapper.removeClass(\"ug-under-480\");\n\t\tobjWrapper.removeClass(\"ug-under-780\");\n\t\tobjWrapper.removeClass(\"ug-under-960\");\n\t}\n\t\n\t\n\t\n\t\n\t/**\n\t * retrigger event from another objects\n\t * the second parameter will be the second object\n\t */\n\tfunction retriggerEvent(object, originalEvent, newEvent){\n\t\t\n\t\tjQuery(object).on(originalEvent, function(event){\n\t\t\tg_objGallery.trigger(newEvent, [this]);\n\t\t});\n\t\n\t}\n\t\n\t\n\t/**\n\t * advance next play step\n\t */\n\tfunction advanceNextStep(){\n\t\t\t\t\n\t\tvar timeNow = jQuery.now();\n\t\tvar timeDiff = timeNow - g_temp.playTimeLastStep;\n\t\tg_temp.playTimePassed += timeDiff;\n\t\tg_temp.playTimeLastStep = timeNow;\n\t\t\n\t\t//set the progress\n\t\tif(g_temp.objProgress){\n\t\t\tvar percent = g_temp.playTimePassed / g_options.gallery_play_interval;\n\t\t\tg_temp.objProgress.setProgress(percent);\n\t\t}\n\t\t\n\t\t//if interval passed - proceed to next item\n\t\tif(g_temp.playTimePassed >= g_options.gallery_play_interval){\n\t\t\t\n\t\t\tt.nextItem();\n\t\t\tg_temp.playTimePassed = 0;\t\t\t\n\t\t}\n\t\t\n\t\t\n\t}\n\t\n\tthis.___________PLAY_MODE___________ = function(){}\n\t\n\t\n\t/**\n\t * start play mode\n\t */\n\tthis.startPlayMode = function(){\n\t\t\n\t\tg_temp.isPlayMode = true;\n\t\tg_temp.isPlayModePaused = false;\n\t\t\n\t\tg_temp.playTimePassed = 0;\n\t\tg_temp.playTimeLastStep = jQuery.now();\n\t\t\n\t\tg_temp.playHandle = setInterval(advanceNextStep, g_temp.playStepInterval);\n\t\t\n\t\t//show and reset progress indicator\n\t\tif(g_temp.objProgress){\n\t\t\tvar objElement = g_temp.objProgress.getElement();\n\t\t\tg_temp.objProgress.setProgress(0);\n\t\t\tobjElement.show();\n\t\t}\n\t\t\n\t\tg_objGallery.trigger(t.events.START_PLAY);\n\t\t\n\t\t//check if there is a need to pause\n\t\tif(g_objSlider && g_objSlider.isCurrentSlideLoadingImage() == true){\n\t\t\tt.pausePlaying();\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * reset playing - set the timer to 0\n\t */\n\tthis.resetPlaying = function(){\n\t\t\n\t\tif(g_temp.isPlayMode == false)\n\t\t\treturn(true);\n\t\t\n\t\tg_temp.playTimePassed = 0;\n\t\tg_temp.playTimeLastStep = jQuery.now();\n\t}\n\t\n\t\n\t/**\n\t * pause playing slideshow\n\t */\n\tthis.pausePlaying = function(){\n\t\t\n\t\tif(g_temp.isPlayModePaused == true)\n\t\t\treturn(true);\n\t\t\n\t\tg_temp.isPlayModePaused = true;\n\t\tclearInterval(g_temp.playHandle);\n\t\t\n\t\tg_objGallery.trigger(t.events.PAUSE_PLAYING);\n\t}\n\t\n\t\n\t/**\n\t * continue playing slideshow\n\t */\n\tthis.continuePlaying = function(){\n\t\t\n\t\tif(g_temp.isPlayModePaused == false)\n\t\t\treturn(true);\n\t\t\n\t\tg_temp.isPlayModePaused = false;\n\t\tg_temp.playTimeLastStep = jQuery.now();\n\t\tg_temp.playHandle = setInterval(advanceNextStep, g_temp.playStepInterval);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * stop play mode\n\t */\n\tthis.stopPlayMode = function(){\n\t\tg_temp.isPlayMode = false;\n\t\tclearInterval(g_temp.playHandle);\n\t\t\t\n\t\tg_temp.playTimePassed = 0;\n\t\t\n\t\t//hide progress indicator\n\t\tif(g_temp.objProgress){\n\t\t\tvar objElement = g_temp.objProgress.getElement();\n\t\t\tobjElement.hide();\n\t\t}\n\t\t\n\t\tg_objGallery.trigger(t.events.STOP_PLAY);\n\t}\n\t\n\t\n\t/**\n\t * tells if the play mode are active\n\t */\n\tthis.isPlayMode = function(){\n\t\t\n\t\treturn(g_temp.isPlayMode);\n\t}\n\t\n\t\n\t/**\n\t * start / stop play mode\n\t */\n\tthis.togglePlayMode = function(){\n\t\t\n\t\tif(t.isPlayMode() == false)\n\t\t\tt.startPlayMode();\n\t\telse\n\t\t\tt.stopPlayMode();\n\t}\n\n\t\n\t/**\n\t * unselect all items\n\t */\n\tfunction unselectSeletedItem(){\n\t\t\n\t\tif(g_selectedItem == null)\n\t\t\treturn(true);\n\t\t\n\t\tif(g_objThumbs)\n\t\t\tg_objThumbs.setThumbUnselected(g_selectedItem.objThumbWrapper);\n\t\t\n\t\tg_selectedItem = null;\n\t\tg_selectedItemIndex = -1;\n\t}\t\n\t\n\t\n\tthis.___________GENERAL_EXTERNAL___________ = function(){}\n\t\n\t/**\n\t * shuffle items - usually before theme start\n\t */\n\tthis.shuffleItems = function(){\n\n\t\tg_arrItems = g_functions.arrayShuffle(g_arrItems);\n\t\t\n\t\tfor(var index in g_arrItems)\t\t//fix index\n\t\t\tg_arrItems[index].index = parseInt(index);\n\t\t\n\t}\n\t\n\t/**\n\t * set main gallery params, extend current params\n\t */\n\tthis.setOptions = function(customOptions){\n\t\t\t\t\n\t\tg_options = jQuery.extend(g_options, customOptions);\t\t\n\t}\n\t\n\t\n\t/**\n\t * select some item\n\t * the input can be index or object\n\t * role - the role of the object who selected the item\n\t */\n\tthis.selectItem = function(objItem, role){\n\t\t\n\t\tif(typeof objItem == \"number\")\n\t\t\tobjItem = t.getItem(objItem);\n\t\t\n\t\tvar itemIndex = objItem.index;\n\t\tif(itemIndex == g_selectedItemIndex)\n\t\t\treturn(true);\n\t\t\t\t\n\t\tunselectSeletedItem();\n\t\t\t\t\n\t\t//set selected item\n\t\tg_selectedItem = objItem;\t\t\n\t\tg_selectedItemIndex = itemIndex;\n\t\t\n\t\tg_objGallery.trigger(t.events.ITEM_CHANGE, [objItem,role]);\n\t\t\n\t\t//reset playback, if playing\n\t\tif(g_temp.isPlayMode == true){\n\t\t\t\tt.resetPlaying();\n\t\t\t\n\t\t\tvar stillLoading = g_objSlider.isCurrentSlideLoadingImage();\n\t\t\tif(stillLoading == true)\n\t\t\t\tt.pausePlaying();\n\t\t}\n\t\t\t\t\n\t}\n\t\n\t\n\t/**\n\t * go to next item\n\t */\n\tthis.nextItem = function(){\n\t\t\n\t\tvar newItemIndex = g_selectedItemIndex + 1;\n\t\t\n\t\tif(g_numItems == 0)\n\t\t\treturn(true);\t\t\n\t\t\n\t\tif(g_options.gallery_carousel == false && newItemIndex >= g_numItems)\n\t\t\treturn(true);\n\t\t\n\t\tif(newItemIndex >= g_numItems)\n\t\t\tnewItemIndex = 0;\n\t\t\n\t\t//debugLine(newItemIndex,true);\n\t\t\n\t\tt.selectItem(newItemIndex, \"next\");\n\t}\n\t\n\t\n\t/**\n\t * go to previous item\n\t */\n\tthis.prevItem = function(){\n\t\t\n\t\tvar newItemIndex = g_selectedItemIndex - 1;\n\t\t\n\t\tif(g_selectedItemIndex == -1)\n\t\t\tnewItemIndex = 0;\n\t\t\n\t\tif(g_numItems == 0)\n\t\t\treturn(true);\n\t\t\n\t\tif(g_options.gallery_carousel == false && newItemIndex < 0)\n\t\t\treturn(true);\n\t\t\n\t\tif(newItemIndex < 0)\n\t\t\tnewItemIndex = g_numItems - 1;\n\t\t\n\t\tt.selectItem(newItemIndex, \"prev\");\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * expand gallery to body size\n\t */\n\tfunction toFakeFullScreen(){\n\t\t\n\t\tjQuery(\"body\").addClass(\"ug-body-fullscreen\");\n\t\tg_objWrapper.addClass(\"ug-fake-fullscreen\");\n\t\t\n\t\tg_temp.isFakeFullscreen = true;\n\t\t\n\t\tg_objGallery.trigger(t.events.ENTER_FULLSCREEN);\n\t\tg_objGallery.trigger(t.events.SIZE_CHANGE);\n\t}\n\t\n\t\n\t/**\n\t * exit fake fullscreen\n\t */\n\tfunction exitFakeFullscreen(){\n\t\t\n\t\tjQuery(\"body\").removeClass(\"ug-body-fullscreen\");\n\t\tg_objWrapper.removeClass(\"ug-fake-fullscreen\");\n\t\t\n\t\tg_temp.isFakeFullscreen = false;\n\t\t\n\t\tg_objGallery.trigger(t.events.EXIT_FULLSCREEN);\n\t\tg_objGallery.trigger(t.events.SIZE_CHANGE);\n\t\t\n\t}\n\t\n\t/**\n\t * return if the fullscreen mode is available\n\t */\n\tthis.isFullScreen = function(){\n\t\t\n\t\tif(g_temp.isFakeFullscreen == true)\n\t\t\treturn(true);\n\t\t\n\t\tif(g_functions.isFullScreen() == true)\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\t\t\n\t}\n\t\n\t\n\t/**\n\t * tells if it's fake fullscreen\n\t */\n\tthis.isFakeFullscreen = function(){\n\t\t\n\t\treturn(g_temp.isFakeFullscreen);\n\t}\n\t\n\t\n\t/**\n\t * go to fullscreen mode\n\t */\n\tthis.toFullScreen = function(){\n\t\t\n\t\tg_functions.setGlobalData(\"fullscreenID\", g_galleryID);\n\t\t\n\t\tvar divGallery = g_objWrapper.get(0);\n\t\t\n\t\tvar isSupported = g_functions.toFullscreen(divGallery);\n\t\t\t\t\n\t\tif(isSupported == false)\n\t\t\ttoFakeFullScreen();\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * exit full screen\n\t */\n\tthis.exitFullScreen = function(){\n\t\t\n\t\tif(g_temp.isFakeFullscreen == true)\n\t\t\texitFakeFullscreen();\n\t\telse\n\t\t\tg_functions.exitFullscreen();\n\t\t\t\t\t\t\n\t}\n\t\n\t/**\n\t * toggle fullscreen\n\t */\n\tthis.toggleFullscreen = function(){\n\t\t\n\t\tif(t.isFullScreen() == false){\n\t\t\tt.toFullScreen();\n\t\t}else{\n\t\t\tt.exitFullScreen();\n\t\t}\n\t\t\n\t}\n\t\n\t/**\n\t * resize the gallery\n\t * noevent - initally false\n\t */\n\tthis.resize = function(newWidth, newHeight, noevent){\n\t\t\n\t\tg_objWrapper.css(\"width\", \"auto\");\n\t\tg_objWrapper.css(\"max-width\",newWidth+\"px\");\n\t\t\n\t\tif(newHeight)\n\t\t\tg_objWrapper.height(newHeight);\n\t\t\n\t\tif(!noevent && noevent !== true)\n\t\t\tonGalleryResized();\n\t\t\n\t}\n\n\t\n\t/**\n\t * set size class to the wrapper\n\t * this can work to any other wrapper too\n\t */\n\tthis.setSizeClass = function(objWrapper, width){\n\t\t\n\t\tif(!objWrapper)\n\t\t\tvar objWrapper = g_objWrapper;\n\t\t\n\t\tif(!width){\n\t\t\tvar objSize = t.getSize();\n\t\t\tvar width = objSize.width;\t\t\t\n\t\t}\n\t\t\n\t\tif(width == 0)\n\t\t\tvar width = jQuery(window).width();\n\t\t\n\t\tvar addClass = \"\";\n\t\t\n\t\tif(width <= 480){\n\t\t\taddClass = \"ug-under-480\";\t\t\t\n\t\t}else\n\t\tif(width <= 780){\n\t\t\taddClass = \"ug-under-780\";\t\t\t\n\t\t}else\n\t\tif(width < 960){\n\t\t\taddClass = \"ug-under-960\";\n\t\t}\n\t\t\n\t\tif(objWrapper.hasClass(addClass) == true)\n\t\t\treturn(true);\n\t\t\n\t\tremoveAllSizeClasses(objWrapper);\n\t\tif(addClass != \"\")\n\t\t\tobjWrapper.addClass(addClass);\n\t}\n\t\n\t\n\t/**\n\t * return if the size is suited for mobile\n\t */\n\tthis.isMobileMode = function(){\n\t\t\n\t\tif(g_objWrapper.hasClass(\"ug-under-480\"))\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\t\n\t\n\t/**\n\t * get if small screen\n\t */\n\tthis.isSmallWindow = function(){\n\t\t\n\t\tvar windowWidth = jQuery(window).width();\n\t\t\n\t\t\n\t\tif(!windowWidth)\n\t\t\treturn(true);\n\t\t\n\t\tif(windowWidth <= 480)\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\t\n\t\n\t/**\n\t * change gallery items\n\t */\n\tthis.changeItems = function(itemsContent, cacheID){\n\t\t\n\t\tif(!itemsContent)\n\t\t\tvar itemsContent = \"noitems\";\n\t\t\n\t\trunGallery(g_galleryID, \"nochange\", itemsContent, cacheID);\n\t}\n\t\n\t/**\n\t * show error message, replace whole gallery div\n\t */\n\tthis.showErrorMessageReplaceGallery = function(message){\n\t\tshowErrorMessage(message);\n\t}\n\t\n\t/**\n\t * set custom height function by width\n\t */\n\tthis.setFuncCustomHeight = function(func){\n\t\tg_temp.funcCustomHeight = func;\n\t}\n\t\n\tthis.__________AJAX_REQUEST_______ = function(){};\n\t\n\t\n\t/**\n\t * ajax request\n\t */\n\tthis.ajaxRequest = function(action, data, isJSON, successFunction){\n\t\t\n\t\tvar dataType = \"html\";\n\t\tif(isJSON == true)\n\t\t\tdataType = \"json\";\n\t\t\t\t\n\t\tif(!successFunction || typeof successFunction != \"function\")\n\t\t\tthrow new Error(\"ajaxRequest error: success function should be passed\");\n\n\t\tvar urlAjax = g_options.gallery_urlajax;\n\t\tif(urlAjax == \"\")\n\t\t\tthrow new Error(\"ajaxRequest error: Ajax url don't passed\");\n\t\t\n\t\tif(typeof data == \"undefined\")\n\t\t\tvar data = {};\n\n\t\t//add galleryID to data\n\t\tvar objData = {\n\t\t\t\taction:\"unitegallery_ajax_action\",\n\t\t\t\tclient_action:action,\n\t\t\t\tgalleryID: g_galleryID,\n\t\t\t\tdata:data\n\t\t};\n\t\t\n\t\tjQuery.ajax({\n\t\t\ttype:\"post\",\n\t\t\turl:g_options.gallery_urlajax,\n\t\t\tdataType: 'json',\n\t\t\tdata:objData,\n\t\t\tsuccess:function(response){\n\t\t\t\t\n\t\t\t\tif(!response){\n\t\t\t\t\tshowErrorMessage(\"Empty ajax response!\", \"Ajax Error\");\n\t\t\t\t\treturn(false);\t\t\t\t\t\n\t\t\t\t}\n\n\t\t\t\tif(response == -1 || response === 0){\n\t\t\t\t\tshowErrorMessage(\"ajax error!!!\");\n\t\t\t\t\treturn(false);\n\t\t\t\t}\n\n\t\t\t\tif(typeof response.success == \"undefined\"){\n\t\t\t\t\tshowErrorMessage(\"The 'success' param is a must!\");\n\t\t\t\t\treturn(false);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(response.success == false){\n\t\t\t\t\tshowErrorMessage(response.message);\n\t\t\t\t\treturn(false);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tsuccessFunction(response);\n\t\t\t},\t\t \t\n\t\t\terror:function(jqXHR, textStatus, errorThrown){\n\t\t\t\tconsole.log(\"Ajax Error!!! \" + textStatus);\n\t\t\t}\n\t\t});\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * request new items\n\t * isForce - don't take from cache\n\t */\n\tthis.requestNewItems = function(catID, isForce, cacheID){\n\t\t\n\t\tvar checkCache = g_options.gallery_enable_cache;\n\t\t\n\t\tif(!cacheID)\n\t\t\tcacheID = catID;\n\t\t\n\t\tif(isForce == true)\n\t\t\tcheckCache = false;\n\t\t\n\t\t//get items from cache\n\t\tif(checkCache == true && g_objCache.hasOwnProperty(cacheID)){\n\t\t\t\n\t\t\tvar htmlItems = g_objCache[cacheID];\n\t\t\t\n\t\t\tt.changeItems(htmlItems, cacheID);\n\t\t\t\n\t\t}else{\n\t\t\t\n\t\t\tg_objGallery.trigger(t.events.GALLERY_BEFORE_REQUEST_ITEMS);\n\t\t\t\n\t\t\tt.ajaxRequest(\"front_get_cat_items\",{catid:catID}, true, function(response){\n\t\t\t\t\n\t\t\t\tvar htmlItems = response.html;\n\t\t\t\t\t\t\t\t\n\t\t\t\tt.changeItems(htmlItems, cacheID);\n\t\t\t\t\n\t\t\t});\n\t\t\t\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * run the gallery\n\t */\n\t this.run = function(galleryID, objParams){\n\t\t \n\t\t \n\t\t var debug_errors = g_options.gallery_debug_errors;\n\t\t if(objParams && objParams.hasOwnProperty(\"gallery_debug_errors\"))\n\t\t\t g_options.gallery_debug_errors = objParams.gallery_debug_errors;\n\n\t\t \n\t\t if(g_options.gallery_debug_errors == true){\n\t\t\t \n\t\t\t try{\n\t\t\t\t \n\t\t\t\t runGallery(galleryID, objParams);\n\t\t\t\t \n\t\t\t\t \n\t\t\t }catch(objError){\n\t\t\t\t if(typeof objError == \"object\"){\n\t\t\t\t\t \n\t\t\t\t\t var message = objError.message;\n\t\t\t\t\t var lineNumber = objError.lineNumber;\n\t\t\t\t\t var fileName = objError.fileName;\n\t\t\t\t\t var stack = objError.stack;\n\t\t\t\t\t \n\t\t\t\t\t message += \" <br><br> in file: \"+fileName;\n\t\t\t\t\t message += \" <b> line \" + lineNumber + \"</b>\";\n\t\t\t\t\t \n\t\t\t\t\t trace(objError);\n\t\t\t\t\t \n\t\t\t\t }else{\n\t\t\t\t\t var message = objError;\n\t\t\t\t }\n\t\t\t\t \n\t\t\t\t //remove double \"error:\" text\n\t\t\t\t message = message.replace(\"Error:\",\"\");\n\t\t\t\t \n\t\t\t\t showErrorMessage(message);\n\t\t\t }\n\t\t\t \n\t\t }else{\n\t\t\t runGallery(galleryID, objParams);\n\t\t }\n\t\t \n\t\t \t\t \n\t\t \n\t }\n\t \t \t \n}\t//unitegallery object end\n\n\n/**\n * tiles class\n */\nfunction UGLightbox(){\n\n\tvar t = this, g_objThis = jQuery(this);\n\tvar g_gallery = new UniteGalleryMain(), g_objGallery, g_objWrapper;\n\tvar g_objSlider = new UGSlider(), g_objOverlay, g_objArrowLeft, g_objArrowRight, g_objButtonClose;\n\tvar g_functions = new UGFunctions(), g_objTextPanel = new UGTextPanel(), g_objNumbers;\n\tvar g_objTopPanel;\n\t\n\tvar g_options = {\n\t\t\tlightbox_type: \"wide\",\t\t\t\t\t\t\t//compact / wide - lightbox type\n\t\t\t\n\t\t\tlightbox_show_textpanel: true,\t\t\t\t\t//show the text panel\n\t\t\tlightbox_textpanel_width: 550,\t\t\t\t\t//the width of the text panel.\n\t\t\t\n\t\t\tlightbox_hide_arrows_onvideoplay: true,\t\t\t//hide the arrows when video start playing and show when stop\n\t\t\tlightbox_arrows_position: \"sides\",\t\t\t\t//sides, inside: position of the arrows, used on compact type\t\t\t\n\t\t\tlightbox_arrows_offset: 10,\t\t\t\t\t\t//The horizontal offset of the arrows\n\t\t\tlightbox_arrows_inside_offset: 10,\t\t\t\t//The offset from the image border if the arrows placed inside\n\t\t\tlightbox_arrows_inside_alwayson: false,\t\t\t//Show the arrows on mouseover, or always on.\n\t\t\t\n\t\t\tlightbox_overlay_color:null,\t\t\t\t\t//the color of the overlay. if null - will take from css\n\t\t\tlightbox_overlay_opacity:1,\t\t\t\t\t\t//the opacity of the overlay. if null - will take from css\n\t\t\tlightbox_top_panel_opacity: null,\t\t\t\t//the opacity of the top panel\n\t\t\t\n\t\t\tlightbox_show_numbers: true,\t\t\t\t\t//show numbers on the right side\n\t\t\tlightbox_numbers_size: null,\t\t\t\t\t//the size of the numbers string\n\t\t\tlightbox_numbers_color: null,\t\t\t\t\t//the color of the numbers\n\t\t\tlightbox_numbers_padding_top:null,\t\t\t\t//the top padding of the numbers (used in compact mode)\n\t\t\tlightbox_numbers_padding_right:null,\t\t\t//the right padding of the numbers (used in compact mode)\n\t\t\t\n\t\t\tlightbox_compact_closebutton_offsetx: 1,\t\t//the offsetx of the close button. Valid only for compact mode\n\t\t\tlightbox_compact_closebutton_offsety: 1,\t\t//the offsetx of the close button. Valid only for compact mode\n\t\t\t\n\t\t\tlightbox_close_on_emptyspace:true\t\t\t\t//close the lightbox on empty space\n\t};\n\t\n\tthis.events = {\n\t\t\tLIGHTBOX_INIT: \"lightbox_init\"\n\t};\n\t\n\tvar g_temp = {\n\t\t\ttopPanelHeight: 44,\n\t\t\tinitTextPanelHeight: 26,\t\t//init height for compact mode\n\t\t\tisOpened: false, \n\t\t\tisRightNowOpened:false,\n\t\t\tputSlider: true,\n\t\t\tisCompact: false,\n\t\t\tfadeDuration: 300,\n\t\t\tpositionFrom: null,\n\t\t\ttextPanelTop: null,\n\t\t\ttextPanelLeft: null,\n\t\t\tisArrowsInside: false,\n\t\t\tisArrowsOnHoverMode: false,\n\t\t\tlastMouseX: null,\n\t\t\tlastMouseY: null,\n\t\t\toriginalOptions: null,\n\t\t\tisSliderChangedOnce:false,\n\t\t\tisTopPanelEnabled:true\n\t};\n\t\n\tvar g_defaults = {\n\t\t\tlightbox_slider_controls_always_on: true,\n\t\t\tlightbox_slider_enable_bullets: false,\n\t\t\tlightbox_slider_enable_arrows: false,\n\t\t\tlightbox_slider_enable_progress_indicator: false,\n\t\t\tlightbox_slider_enable_play_button: false,\n\t\t\tlightbox_slider_enable_fullscreen_button: false,\n\t\t\tlightbox_slider_enable_zoom_panel: false,\n\t\t\tlightbox_slider_enable_text_panel: false,\n\t\t\tlightbox_slider_scale_mode_media: \"down\",\n\t\t\tlightbox_slider_scale_mode: \"down\",\n\t\t\tlightbox_slider_loader_type: 3,\n\t\t\tlightbox_slider_loader_color: \"black\",\n\t\t\tlightbox_slider_transition: \"fade\",\n\t\t\t\n\t\t\tlightbox_slider_image_padding_top: g_temp.topPanelHeight,\n\t\t\tlightbox_slider_image_padding_bottom: 0,\n\t\t\t\n\t\t\tlightbox_slider_video_padding_top: 0,\n\t\t\tlightbox_slider_video_padding_bottom: 0,\n\t\t\t\n\t\t\tlightbox_textpanel_align: \"middle\",\n\t\t\tlightbox_textpanel_padding_top: 5,\n\t\t\tlightbox_textpanel_padding_bottom: 5,\n\t\t\t\n\t\t\tslider_video_constantsize: false,\n\t\t\tlightbox_slider_image_border: false,\n\t\t\t\n\t\t\tlightbox_textpanel_enable_title: true,\n\t\t\tlightbox_textpanel_enable_description: false,\n\t\t\tlightbox_textpanel_desc_style_as_title: true,\n\t\t\t\n\t\t\tlightbox_textpanel_enable_bg:false,\n\t\t\t\n\t\t\tvideo_enable_closebutton: false,\n\t\t\tlightbox_slider_video_enable_closebutton: false,\n\t\t\tvideo_youtube_showinfo: false,\n\t\t\tlightbox_slider_enable_links:false\n\t};\n\t\n\tvar g_defaultsCompact = {\n\t\t\tlightbox_overlay_opacity:0.6,\n\t\t\t\n\t\t\tlightbox_slider_image_border: true,\n\t\t\tlightbox_slider_image_shadow:true,\n\t\t\tlightbox_slider_image_padding_top: 30,\n\t\t\tlightbox_slider_image_padding_bottom: 30,\n\t\t\t\n\t\t\tslider_video_constantsize: true,\n\t\t\t\t\t\t\n\t\t\tlightbox_textpanel_align: \"bottom\",\n\t\t\tlightbox_textpanel_title_text_align: \"left\",\n\t\t\tlightbox_textpanel_desc_text_align: \"left\",\n\t\t\tlightbox_textpanel_padding_left: 10,\t\t\t//the padding left of the textpanel\n\t\t\tlightbox_textpanel_padding_right: 10\n\t};\n\t\n\t\n\tfunction __________GENERAL_________(){};\n\t\n\t\n\t/**\n\t * init the gallery\n\t */\n\tfunction initLightbox(gallery, customOptions){\n\t\t\n\t\tg_gallery = gallery;\n\t\tg_objGallery = jQuery(gallery);\n\t\t\n\t\tg_options = jQuery.extend(g_options, g_defaults);\n\t\tg_options = jQuery.extend(g_options, customOptions);\n\t\t\n\t\tg_temp.originalOptions = jQuery.extend({}, g_options);\n\t\t\n\t\tif(g_options.lightbox_type == \"compact\"){\n\t\t\tg_temp.isCompact = true;\n\t\t\tg_options = jQuery.extend(g_options, g_defaultsCompact);\n\t\t\tg_options = jQuery.extend(g_options, customOptions);\n\t\t}\n\t\t\n\t\t//modify some options\n\t\tmodifyOptions();\n\t\t\n\t\tif(g_temp.putSlider == true){\n\t\t\t\n\t\t\tg_gallery.initSlider(g_options, \"lightbox\");\n\t\t\tg_objects = gallery.getObjects();\n\t\t\tg_objSlider = g_objects.g_objSlider;\t\t\t\n\t\t\t\n\t\t}else{\n\t\t\tg_objSlider = null;\n\t\t}\n\t\t\n\t\tif(g_options.lightbox_show_textpanel == true){\n\t\t\tg_objTextPanel.init(g_gallery, g_options, \"lightbox\");\n\t\t}\n\t\telse\n\t\t\tg_objTextPanel = null;\n\t\t\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * modify some options according user options\n\t */\n\tfunction modifyOptions(){\n\t\t\n\t\tif(g_temp.isCompact == true && g_options.lightbox_show_textpanel == true){\n\t\t\tg_options.lightbox_slider_image_padding_bottom = g_temp.initTextPanelHeight;\n\t\t}\n\t\t\n\t\tif(g_temp.isCompact == true && g_options.lightbox_arrows_position == \"inside\"){\n\t\t\tg_temp.isArrowsInside = true;\n\t\t}\n\n\t\tif(g_temp.isArrowsInside == true && g_options.lightbox_arrows_inside_alwayson == false)\n\t\t\tg_temp.isArrowsOnHoverMode = true;\n\t\t\n\t\t//disable top panel if no text panel enabled\n\t\tif(g_options.lightbox_show_textpanel == false){\n\t\t\tg_temp.isTopPanelEnabled = false;\n\t\t\tg_temp.topPanelHeight = 0;\n\t\t\tg_options.lightbox_slider_image_padding_top = 0;\n\t\t}\n\t\t\n\t\t//modify slider image border width\n\t\t\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * put the lightbox html\n\t */\n\tfunction putLightboxHtml(){\n\t\t\n\t\tvar html = \"\";\n\t\tvar classAddition = \"\";\n\t\tif(g_temp.isCompact == true){\n\t\t\tclassAddition = \" ug-lightbox-compact\";\n\t\t}\n\t\t\n\t\thtml += \"<div class='ug-gallery-wrapper ug-lightbox\"+classAddition+\"'>\";\n\t\thtml += \"<div class='ug-lightbox-overlay'></div>\";\n\t\t\n\t\t//set top panel only on wide mode\n\t\tif(g_temp.isCompact == false && g_temp.isTopPanelEnabled){\n\t\t\thtml += \"<div class='ug-lightbox-top-panel'>\";\n\t\t\thtml += \t\"<div class='ug-lightbox-top-panel-overlay'></div>\";\n\t\t\t\n\t\t\tif(g_options.lightbox_show_numbers)\n\t\t\t\thtml += \t\"<div class='ug-lightbox-numbers'></div>\";\n\t\t\t\n\t\t\thtml += \"</div>\";\t//top panel\n\t\t}else{\n\t\t\t\n\t\t\t//put numbers without top panel\n\t\t\tif(g_options.lightbox_show_numbers)\n\t\t\t\thtml += \t\"<div class='ug-lightbox-numbers'></div>\";\n\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\thtml += \t\"<div class='ug-lightbox-button-close'></div>\";\n\t\t\n\t\thtml += \"<div class='ug-lightbox-arrow-left'></div>\";\t\t\n\t\thtml += \"<div class='ug-lightbox-arrow-right'></div>\";\n\t\t\n\t\thtml += \"</div>\";\n\t\t\n\t\tg_objWrapper = jQuery(html);\n\t\t\n\t\tjQuery(\"body\").append(g_objWrapper);\n\t\t\n\t\tif(g_objSlider)\n\t\t\tg_objSlider.setHtml(g_objWrapper);\n\t\t\n\t\tg_objOverlay = g_objWrapper.children(\".ug-lightbox-overlay\");\n\t\t\n\t\tif(g_temp.isCompact == false && g_temp.isTopPanelEnabled == true){\n\t\t\tg_objTopPanel = g_objWrapper.children(\".ug-lightbox-top-panel\");\n\t\t\tif(g_objTopPanel.length == 0)\n\t\t\t\tg_objTopPanel = null;\n\t\t}\n\t\t\n\t\tg_objButtonClose = g_objWrapper.find(\".ug-lightbox-button-close\");\n\t\t\n\t\tif(g_options.lightbox_show_numbers)\n\t\t\tg_objNumbers = g_objWrapper.find(\".ug-lightbox-numbers\");\n\t\t\n\t\tg_objArrowLeft = g_objWrapper.children(\".ug-lightbox-arrow-left\");\n\t\tg_objArrowRight = g_objWrapper.children(\".ug-lightbox-arrow-right\");\n\t\t\t\t\n\t\tif(g_objTextPanel){\n\t\t\tif(g_objTopPanel)\n\t\t\t\tg_objTextPanel.appendHTML(g_objTopPanel);\n\t\t\telse\n\t\t\t\tg_objTextPanel.appendHTML(g_objWrapper);\n\t\t}\n\n\t}\n\t\n\t\n\t/**\n\t * set lightbox properties\n\t */\n\tfunction setProperties(){\n\t\t\n\t\tif(g_options.lightbox_overlay_color !== null)\n\t\t\tg_objOverlay.css(\"background-color\", g_options.lightbox_overlay_color);\n\t\t\n\t\tif(g_options.lightbox_overlay_opacity !== null)\n\t\t\tg_objOverlay.fadeTo(0, g_options.lightbox_overlay_opacity);\n\t\t\n\t\tif(g_objTopPanel && g_options.lightbox_top_panel_opacity !== null){\n\t\t\tg_objTopPanel.children(\".ug-lightbox-top-panel-overlay\").fadeTo(0, g_options.lightbox_top_panel_opacity);\n\t\t}\n\t\t\t\n\t\t//set numbers properties\n\t\tif(g_objNumbers){\n\t\t\tvar cssNumbers = {};\n\t\t\t\n\t\t\tif(g_options.lightbox_numbers_size !== null)\n\t\t\t\tcssNumbers[\"font-size\"] = g_options.lightbox_numbers_size+\"px\";\n\t\t\t\n\t\t\tif(g_options.lightbox_numbers_color)\n\t\t\t\tcssNumbers[\"color\"] = g_options.lightbox_numbers_color;\n\t\t\t\n\t\t\tif(g_options.lightbox_numbers_padding_right !== null)\n\t\t\t\tcssNumbers[\"padding-right\"] = g_options.lightbox_numbers_padding_right + \"px\";\n\t\t\t\n\t\t\tif(g_options.lightbox_numbers_padding_top !== null)\n\t\t\t\tcssNumbers[\"padding-top\"] = g_options.lightbox_numbers_padding_top + \"px\";\n\t\t\t\n\t\t\t\n\t\t\tg_objNumbers.css(cssNumbers);\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * refresh slider item with new height\n\t */\n\tfunction refreshSliderItem(newHeight){\n\t\t\n\t\tif(!g_objSlider)\n\t\t\treturn(true);\n\t\t\t\t\n\t\t//set slider new image position\n\t\tvar objOptions = {\n\t\t\t\tslider_image_padding_top: newHeight\n\t\t};\n\t\t\n\t\tg_objSlider.setOptions(objOptions);\n\t\tg_objSlider.refreshSlideItems();\n\t\n\t}\n\t\n\tfunction __________WIDE_ONLY_________(){};\n\t\n\t\n\t/**\n\t * handle panel height according text height\n\t */\n\tfunction handlePanelHeight(fromWhere){\n\t\t\n\t\tif(!g_objTopPanel)\n\t\t\treturn(false);\n\t\t\t\n\t\tif(!g_objTextPanel)\n\t\t\treturn(false);\n\t\t\n\t\t//check text panel size, get the panel bigger then\n\t\tvar panelHeight = g_objTopPanel.height();\n\t\tif(panelHeight == 0)\n\t\t\treturn(false);\n\t\t\n\t\tif(g_objTopPanel.is(\":visible\") == false)\n\t\t\treturn(false);\n\t\t\n\t\tvar newPanelHeight = panelHeight;\n\t\t\n\t\tvar objTextPanelSize = g_objTextPanel.getSize();\n\t\t\n\t\tvar textPanelHeight = objTextPanelSize.height;\n\t\t\n\t\tif(panelHeight != g_temp.topPanelHeight)\n\t\t\tnewPanelHeight = g_temp.topPanelHeight;\n\t\t\t\t\n\t\tif(textPanelHeight > newPanelHeight)\n\t\t\tnewPanelHeight = textPanelHeight;\n\t\t\t\t\n\t\tif(panelHeight != newPanelHeight){\n\t\t\tg_objTopPanel.height(newPanelHeight);\n\t\t\t\n\t\t\tif(g_objSlider && g_objSlider.isAnimating() == false)\n\t\t\t\trefreshSliderItem(newPanelHeight);\n\t\t}\n\t\t\t\t\n\t}\n\n\n\t/**\n\t * position text panel for wide\n\t * size - wrapper size\n\t */\n\tfunction positionTextPanelWide(size){\n\n\t\tvar objOptions = {};\n\t\t\n\t\tvar textWidth = g_options.lightbox_textpanel_width;\n\t\tvar minPaddingLeft = 47;\n\t\tvar minPaddingRight = 40;\n\t\tvar maxTextPanelWidth = size.width - minPaddingLeft - minPaddingRight;\n\t\t\n\t\tif(textWidth > maxTextPanelWidth){\t\t//mobile mode\n\t\t\t\n\t\t\tobjOptions.textpanel_padding_left = minPaddingLeft;\n\t\t\tobjOptions.textpanel_padding_right = minPaddingRight;\n\t\t\t\n\t\t\tobjOptions.textpanel_title_text_align = \"center\";\n\t\t\tobjOptions.textpanel_desc_text_align = \"center\";\t\t\t\n\t\t}else{\n\t\t\tobjOptions.textpanel_padding_left = Math.floor((size.width - textWidth) / 2);\n\t\t\tobjOptions.textpanel_padding_right = objOptions.textpanel_padding_left;\n\t\t\tobjOptions.textpanel_title_text_align = \"left\";\n\t\t\tobjOptions.textpanel_desc_text_align = \"left\";\n\t\t\t\n\t\t\tif(g_options.lightbox_textpanel_title_text_align)\n\t\t\t\t\tobjOptions.textpanel_title_text_align = g_options.lightbox_textpanel_desc_text_align;\n\t\t\t\n\t\t\tif(g_options.lightbox_textpanel_desc_text_align)\n\t\t\t\tobjOptions.textpanel_desc_text_align = g_options.lightbox_textpanel_desc_text_align;\n\t\t\t\n\t\t}\n\t\t\t\t\n\t\tg_objTextPanel.setOptions(objOptions);\n\t\t\n\t\tg_objTextPanel.refresh(true, true);\n\t\t\n\t\thandlePanelHeight(\"positionTextPanelWide\");\n\t\tg_objTextPanel.positionPanel();\n\t}\n\t\n\t/**\n\t * hide top panel\n\t */\n\tfunction hideTopPanel(){\n\t\t\t\t\n\t\tif(!g_objTopPanel)\n\t\t\treturn(false);\n\t\t\n\t\tg_objTopPanel.hide();\n\t}\n\t\n\t\n\t/**\n\t * show top panel\n\t */\n\tfunction showTopPanel(){\n\t\t\n\t\tif(!g_objTopPanel)\n\t\t\treturn(false);\n\t\t\n\t\tg_objTopPanel.show();\n\t}\n\t\n\t\n\tfunction __________COMPACT_ONLY_________(){};\n\n\t/**\n\t * handle slider image height according the textpanel height\n\t * refresh the slider if the height is not in place\n\t */\n\tfunction handleCompactHeight(objImageSize){\n\t\t\t\t\n\t\tif(g_temp.isOpened == false)\n\t\t\treturn(false);\n\t\t\n\t\tif(!g_objTextPanel)\n\t\t\treturn(false);\n\t\t\n\t\tif(!g_objSlider)\n\t\t\treturn(false);\n\t\t\n\t\tvar wrapperSize = g_functions.getElementSize(g_objWrapper);\n\t\tvar textPanelSize = g_objTextPanel.getSize();\n\t\t\n\t\tif(textPanelSize.width == 0 || textPanelSize.height > 120)\n\t\t\treturn(false);\n\t\t\n\t\tif(!objImageSize){\n\t\t\tvar objImage = g_objSlider.getSlideImage();\n\t\t\tvar objImageSize = g_functions.getElementSize(objImage);\n\t\t}\n\t\t\n\t\tif(objImageSize.height == 0 || objImageSize.width == 0)\n\t\t\treturn(false);\n\t\t\n\t\t//check elements end size\n\t\tvar totalBottom = objImageSize.bottom + textPanelSize.height;\n\t\t\n\t\tif(totalBottom < wrapperSize.height)\n\t\t\treturn(false);\n\t\t\n\t\tvar sliderOptions = g_objSlider.getOptions();\n\t\t\n\t\tvar imagePaddingBottom = textPanelSize.height;\n\t\t\n\t\tif(imagePaddingBottom != sliderOptions.slider_image_padding_bottom){\n\t\t\t\n\t\t\tvar objOptions = {\n\t\t\t\t\tslider_image_padding_bottom: imagePaddingBottom\n\t\t\t};\n\t\t\t\n\t\t\tif(g_objSlider.isAnimating() == false){\n\t\t\t\tg_objSlider.setOptions(objOptions);\n\t\t\t\tg_objSlider.refreshSlideItems();\n\t\t\t\treturn(true);\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\treturn(false);\n\t}\n\t\n\t/**\n\t * set text panel top of compact mode\n\t */\n\tfunction setCompactTextpanelTop(objImageSize, positionPanel){\n\t\t\n\t\tif(!objImageSize){\n\t\t\tvar objImage = g_objSlider.getSlideImage();\n\t\t\tvar objImageSize = g_functions.getElementSize(objImage);\n\t\t}\n\t\t\n\t\tg_temp.textPanelTop = objImageSize.bottom;\n\t\t\n\t\tif(positionPanel === true)\n\t\t\tg_objTextPanel.positionPanel(g_temp.textPanelTop, g_temp.textPanelLeft);\n\t}\n\t\n\t\n\t/**\n\t * handle text panel width on compact mode, \n\t * run when the image is ready. \n\t * Set top position of the panel as well\n\t * position numbers as well\n\t */\n\tfunction handleCompactTextpanelSizes(showTextpanel){\n\t\t\t\n\t\tvar wrapperSize = g_functions.getElementSize(g_objWrapper);\n\t\tvar objImage = g_objSlider.getSlideImage();\n\t\tvar objImageSize = g_functions.getElementSize(objImage);\n\t\t\n\t\tif(objImageSize.width == 0)\n\t\t\treturn(false);\n\t\t\n\t\t\n\t\tg_temp.textPanelLeft = objImageSize.left;\n\t\tg_temp.textPanelTop = objImageSize.bottom;\n\n\t\tvar textPanelWidth = objImageSize.width;\n\t\t\n\t\tif(g_objNumbers){\n\t\t\t\n\t\t\tvar objNumbersSize = g_functions.getElementSize(g_objNumbers);\n\t\t\ttextPanelWidth -= objNumbersSize.width;\n\t\t\t\n\t\t\t//place numbers object\n\t\t\tvar numbersLeft = objImageSize.right - objNumbersSize.width;\n\t\t\tg_functions.placeElement(g_objNumbers, numbersLeft, g_temp.textPanelTop);\n\t\t}\n\t\t\t\n\t\t\t\n\t\tif(g_objTextPanel){\n\t\t\tg_objTextPanel.show();\n\t\t\tg_objTextPanel.refresh(true, true, textPanelWidth);\n\t\t\tsetCompactTextpanelTop(objImageSize);\n\t\t}\n\t\t\n\t\tvar isChanged = handleCompactHeight(objImageSize);\n\t\t\n\t\tif(isChanged == false){\n\t\t\t\n\t\t\tg_temp.positionFrom = \"handleCompactTextpanelSizes\";\n\t\t\t\n\t\t\tif(g_objTextPanel){\n\t\t\t\tg_objTextPanel.positionPanel(g_temp.textPanelTop, g_temp.textPanelLeft);\n\t\t\t\tif(showTextpanel === true){\n\t\t\t\t\tshowTextpanel();\n\t\t\t\t\tshowNumbers();\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t\n\t/**\n\t * return that current slider image is in place\n\t */\n\tfunction isSliderImageInPlace(){\n\n\t\tif(g_objSlider.isCurrentSlideType(\"image\") == false)\n\t\t\treturn(true);\n\t\t\n\t\tvar isImageInPlace = (g_objSlider.isCurrentImageInPlace() == true);\n\t\t\t\t\n\t\treturn(isImageInPlace);\n\t}\n\t\n\t\n\t/**\n\t * position the arrows inside mode\n\t */\n\tfunction positionArrowsInside(toShow, isAnimation){\n\t\t\t\t\n\t\tif(g_temp.isArrowsInside == false)\n\t\t\treturn(false);\n\t\t\n\t\tif(!g_objArrowLeft)\n\t\t\treturn(false);\n\t\t\n\t\tvar isImageInPlace = isSliderImageInPlace();\n\t\t\n\t\tg_objArrowLeft.show();\n\t\tg_objArrowRight.show();\n\t\t\n\t\tg_temp.positionFrom = \"positionArrowsInside\";\n\t\t\n\t\tif(g_temp.isArrowsOnHoverMode == true && isImageInPlace == true && isMouseInsideImage() == false)\n\t\t\thideArrows(true);\n\t\t\n\t\tif(isImageInPlace == false){\n\t\t\tvar leftArrowLeft = g_functions.getElementRelativePos(g_objArrowLeft, \"left\", g_options.lightbox_arrows_offset);\n\t\t\tvar leftArrowTop = g_functions.getElementRelativePos(g_objArrowLeft, \"middle\");\n\t\t\t\t\t\t\n\t\t\tvar rightArrowLeft = g_functions.getElementRelativePos(g_objArrowRight, \"right\", g_options.lightbox_arrows_offset);\n\t\t\tvar rightArrowTop = leftArrowTop;\n\n\t\t}else{\n\t\t\t\n\t\t\tvar objImage = g_objSlider.getSlideImage();\n\t\t\tvar objImageSize = g_functions.getElementSize(objImage);\n\t\t\tvar objSliderSize = g_functions.getElementSize(g_objSlider.getElement());\n\t\t\t\t\t\t\n\t\t\tvar leftArrowLeft = g_functions.getElementRelativePos(g_objArrowLeft, \"left\", 0, objImage) + objImageSize.left + g_options.lightbox_arrows_inside_offset;\n\t\t\tvar leftArrowTop = g_functions.getElementRelativePos(g_objArrowLeft, \"middle\", 0, objImage) + objImageSize.top;\n\t\t\tvar rightArrowLeft = g_functions.getElementRelativePos(g_objArrowLeft, \"right\", 0, objImage) + objImageSize.left - g_options.lightbox_arrows_inside_offset;\n\t\t\tvar rightArrowTop = leftArrowTop;\n\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\t//place the image with animation or not\n\t\tif(isAnimation === true){\n\n\t\t\tvar objCssLeft = {\n\t\t\t\t\tleft: leftArrowLeft,\n\t\t\t\t\ttop: leftArrowTop\n\t\t\t};\n\t\t\t\n\t\t\tvar objCssRight = {\n\t\t\t\t\tleft: rightArrowLeft,\n\t\t\t\t\ttop: rightArrowTop\n\t\t\t};\n\t\t\t\n\t\t\tg_objArrowLeft.stop().animate(objCssLeft,{\n\t\t\t\tduration: g_temp.fadeDuration\n\t\t\t});\n\t\t\t\n\t\t\tg_objArrowRight.stop().animate(objCssRight,{\n\t\t\t\tduration: g_temp.fadeDuration\n\t\t\t});\n\t\t\t\n\t\t\t\n\t\t}else{\n\t\t\tg_objArrowLeft.stop();\n\t\t\tg_objArrowRight.stop();\n\t\t\t\n\t\t\tg_functions.placeElement(g_objArrowLeft, leftArrowLeft, leftArrowTop);\n\t\t\tg_functions.placeElement(g_objArrowRight, rightArrowLeft, rightArrowTop);\n\t\t}\n\t\t\n\t\t\n\t\tif(toShow == true)\n\t\t\tshowArrows(isAnimation);\n\t\t\n\t}\n\t\n\t\n\t\n\t/**\n\t * position close button for compact type\n\t */\n\tfunction positionCloseButton(toShow, isAnimation){\n\t\t\n\t\tg_temp.positionFrom = null;\n\t\t\n\t\tvar isImageInPlace = isSliderImageInPlace();\n\t\t\n\t\tvar minButtonTop = 2;\n\t\tvar maxButtonLeft = g_functions.getElementRelativePos(g_objButtonClose, \"right\", 2, g_objWrapper);\n\t\t\n\t\tif(isImageInPlace == false){\t//put image to corner\n\t\t\t\n\t\t\tvar closeButtonTop = minButtonTop;\n\t\t\tvar closeButtonLeft = maxButtonLeft;\n\t\t\t\n\t\t}else{\n\t\t\tvar objImage = g_objSlider.getSlideImage();\n\t\t\tvar objImageSize = g_functions.getElementSize(objImage);\n\t\t\tvar objSliderSize = g_functions.getElementSize(g_objSlider.getElement());\n\t\t\tvar objButtonSize = g_functions.getElementSize(g_objButtonClose);\n\t\t\t\n\t\t\t//some strange bug\n\t\t\tif(objSliderSize.top == objSliderSize.height)\t\n\t\t\t\tobjSliderSize.top = 0;\n\t\t\t\n\t\t\tvar closeButtonLeft = objSliderSize.left + objImageSize.right - objButtonSize.width / 2 + g_options.lightbox_compact_closebutton_offsetx;\n\t\t\tvar closeButtonTop = objSliderSize.top + objImageSize.top - objButtonSize.height / 2 - g_options.lightbox_compact_closebutton_offsety;\n\t\t\t\n\t\t\tif(closeButtonTop < minButtonTop)\n\t\t\t\tcloseButtonTop = minButtonTop;\n\t\t\t\n\t\t\tif(closeButtonLeft > maxButtonLeft)\n\t\t\t\tcloseButtonLeft = maxButtonLeft;\n\t\t\t\n\t\t}\n\t\t\n\t\t//place the image with animation or not\n\t\tif(isAnimation === true){\n\t\t\tvar objCss = {\n\t\t\t\t\tleft: closeButtonLeft,\n\t\t\t\t\ttop: closeButtonTop\n\t\t\t};\n\t\t\t\n\t\t\tg_objButtonClose.stop().animate(objCss,{\n\t\t\t\tduration: g_temp.fadeDuration\n\t\t\t});\n\t\t\t\n\t\t}else{\n\t\t\tg_objButtonClose.stop();\n\t\t\tg_functions.placeElement(g_objButtonClose, closeButtonLeft, closeButtonTop);\n\t\t}\n\t\t\n\t\tif(toShow === true)\n\t\t\tshowCloseButton(isAnimation);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * hide close button\n\t */\n\tfunction hideCompactElements(){\n\t\t\n\t\tif(g_objButtonClose)\n\t\t\tg_objButtonClose.stop().fadeTo(g_temp.fadeDuration, 0);\n\t\t\n\t\thideTextPanel();\n\t\t\n\t\thideNumbers();\n\t\t\n\t\tg_temp.positionFrom = \"hideCompactElements\";\n\t\tif(g_temp.isArrowsInside == true)\n\t\t\thideArrows();\n\t}\n\n\t\n\t/**\n\t * actual hide all compact type elements\n\t */\n\tfunction actualHideCompactElements(){\n\t\t\n\t\tif(g_objButtonClose)\n\t\t\tg_objButtonClose.hide();\n\t\t\n\t\tif(g_objArrowLeft && g_temp.isArrowsInside == true){\n\t\t\tg_objArrowLeft.hide();\n\t\t\tg_objArrowRight.hide();\n\t\t}\n\t\t\n\t\tif(g_objNumbers)\n\t\t\tg_objNumbers.hide();\n\t\t\n\t\tif(g_objTextPanel)\n\t\t\tg_objTextPanel.hide();\n\t\t\n\t}\n\t\n\t\n\tfunction __________COMMON_________(){};\n\t\n\t\n\t/**\n\t * position the elements\n\t */\n\tfunction positionElements(){\n\t\t\t\t\t\t\n\t\tvar size = g_functions.getElementSize(g_objWrapper);\n\t\t\n\t\t//position top panel:\n\t\tif(g_objTopPanel)\n\t\t\tg_functions.setElementSizeAndPosition(g_objTopPanel, 0, 0, size.width, g_temp.topPanelHeight);\n\t\t\n\t\t//position arrows\n\t\tif(g_objArrowLeft && g_temp.isArrowsInside == false){\n\t\t\t\n\t\t\tif(g_options.lightbox_hide_arrows_onvideoplay == true){\n\t\t\t\tg_objArrowLeft.show();\n\t\t\t\tg_objArrowRight.show();\n\t\t\t}\n\t\t\t\n\t\t\tg_functions.placeElement(g_objArrowLeft, \"left\", \"middle\", g_options.lightbox_arrows_offset);\n\t\t\tg_functions.placeElement(g_objArrowRight, \"right\", \"middle\", g_options.lightbox_arrows_offset);\n\t\t}\t\t\n\t\t\n\t\tif(g_temp.isCompact == false)\n\t\t\tg_functions.placeElement(g_objButtonClose, \"right\", \"top\", 2, 2);\n\t\t\n\t\t//place text panel\n\t\tif(g_objTextPanel){\n\t\t\t\n\t\t\tg_temp.positionFrom = \"positionElements\";\n\t\t\t\n\t\t\tif(g_temp.isCompact == false)\n\t\t\t\tpositionTextPanelWide(size);\n\t\t\telse{\n\t\t\t\tshowTextPanel();\n\t\t\t\tshowNumbers();\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\tvar sliderWidth = size.width;\n\t\tvar sliderHeight = size.height;\t\n\t\tvar sliderTop = 0;\n\t\tvar sliderLeft = 0;\n\t\t\n\t\tif(g_objSlider){\n\t\t\t\n\t\t\tif(g_objTopPanel){\n\t\t\t\tvar topPanelHeight = g_objTopPanel.height();\n\t\t\t\tvar objOptions = {\n\t\t\t\t\t\tslider_image_padding_top: topPanelHeight\n\t\t\t\t};\n\t\t\t\tg_objSlider.setOptions(objOptions);\n\t\t\t}\n\t\t\t\n\t\t\tg_objSlider.setSize(sliderWidth, sliderHeight);\n\t\t\tg_objSlider.setPosition(sliderLeft, sliderTop);\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * hide the text panel\n\t */\n\tfunction hideTextPanel(){\n\t\t\n\t\tif(g_objTextPanel)\n\t\t\tg_objTextPanel.getElement().stop().fadeTo(g_temp.fadeDuration, 0);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * hide the numbers text\n\t */\n\tfunction hideNumbers(){\n\t\t\n\t\tif(g_objNumbers)\n\t\t\tg_objNumbers.stop().fadeTo(g_temp.fadeDuration, 0);\n\t}\n\t\n\t\n\t/**\n\t * is mouse inside image\n\t */\n\tfunction isMouseInsideImage(){\n\t\tif(!g_temp.lastMouseX)\n\t\t\treturn(true);\n\t\tvar obj = {\n\t\t\t\tpageX: g_temp.lastMouseX, \n\t\t\t\tpageY: g_temp.lastMouseY\n\t\t\t};\n\t\n\t\tvar isMouseInside = g_objSlider.isMouseInsideSlideImage(obj);\n\t\t\n\t\treturn(isMouseInside);\n\t}\n\t\n\t\n\t/**\n\t * hide the arrows\n\t */\n\tfunction hideArrows(noAnimation, isForce){\n\t\t\n\t\tif(!g_objArrowLeft)\n\t\t\treturn(false);\n\t\t\t\t\n\t\t//don't hide the arrows if mouse inside image\n\t\tif(g_temp.isArrowsOnHoverMode == true && isForce === false){\n\t\t\tif(isMouseInsideImage() == true);\n\t\t\t\treturn(true);\n\t\t}\n\t\t\n\t\tif(noAnimation === true){\n\t\t\tg_objArrowLeft.stop().fadeTo(0, 0);\n\t\t\tg_objArrowRight.stop().fadeTo(0, 0);\n\t\t}else{\n\t\t\tg_objArrowLeft.stop().fadeTo(g_temp.fadeDuration, 0);\n\t\t\tg_objArrowRight.stop().fadeTo(g_temp.fadeDuration, 0);\n\t\t}\n\t\t\t\t\n\t}\n\t\n\t/**\n\t * get if the arrows are hidden\n\t */\n\tfunction isArrowsHidden(){\n\t\t\n\t\tif(!g_objArrowLeft)\n\t\t\treturn(true);\n\t\tif(g_objArrowLeft.is(\":visible\") == false)\n\t\t\treturn(true);\n\t\t\n\t\tvar opacity = g_objArrowLeft.css(\"opacity\");\n\t\tif(opacity != 1)\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\t\n\t/**\n\t * show the arrows\n\t */\n\tfunction showArrows(noStop, fromHover){\n\t\t\n\t\tif(!g_objArrowLeft)\n\t\t\treturn(false);\n\t\t\n\t\t//don't show every time on arrowsonhover mode\n\t\tif(g_temp.isArrowsOnHoverMode == true && fromHover !== true && isSliderImageInPlace() == true)\n\t\t\treturn(true);\n\t\t\n\t\t//don't show if swiping\n\t\tif(g_objSlider.isSwiping() == true)\n\t\t\treturn(true);\n\t\t\t\n\t\tif(noStop !== true){\n\t\t\tg_objArrowLeft.stop();\n\t\t\tg_objArrowRight.stop();\n\t\t}\n\t\t\n\t\tg_objArrowLeft.fadeTo(g_temp.fadeDuration, 1);\n\t\tg_objArrowRight.fadeTo(g_temp.fadeDuration, 1);\n\t\t\n\t}\n\n\t\n\t\n\t\n\t\n\t/**\n\t * show close button\n\t */\n\tfunction showCloseButton(noStop){\n\t\t\n\t\tif(noStop !== true)\n\t\t\tg_objButtonClose.stop();\n\t\t\n\t\tg_objButtonClose.fadeTo(g_temp.fadeDuration, 1);\n\t}\n\t\n\t\n\t/**\n\t * update text panel text of the curren item\n\t */\n\tfunction updateTextPanelText(currentItem){\n\t\t\n\t\tif(!g_objTextPanel)\n\t\t\treturn(false);\n\t\t\n\t\tif(!currentItem)\n\t\t\tvar currentItem = g_objSlider.getCurrentItem();\n\t\t\n\t\tg_objTextPanel.setTextPlain(currentItem.title, currentItem.description);\n\t}\n\n\t\n\t/**\n\t * update numbers text\n\t */\n\tfunction updateNumbersText(currentItem){\n\t\t\n\t\tif(!g_objNumbers)\n\t\t\treturn(false);\n\t\t\n\t\tif(!currentItem)\n\t\t\tvar currentItem = g_objSlider.getCurrentItem();\n\t\t\n\t\tvar numItems = g_gallery.getNumItems();\n\t\tvar numCurrentItem = currentItem.index + 1;\n\t\tg_objNumbers.html(numCurrentItem + \" / \" + numItems);\n\t}\n\t\n\t\n\t/**\n\t * show the text panel\n\t */\n\tfunction showTextPanel(){\n\t\t\n\t\tif(!g_objTextPanel)\n\t\t\treturn(false);\n\t\t\n\t\tg_objTextPanel.getElement().show().stop().fadeTo(g_temp.fadeDuration, 1);\n\t\t\n\t}\n\n\t\n\t/**\n\t * Show the numbers object\n\t */\n\tfunction showNumbers(){\n\t\t\n\t\tif(g_objNumbers)\n\t\t\tg_objNumbers.stop().fadeTo(g_temp.fadeDuration, 1);\n\t}\n\t\n\t\n\tfunction __________EVENTS_________(){};\n\t\n\t\n\t/**\n\t * on start dragging slider item event. hide the elements\n\t */\n\tfunction onSliderDragStart(){\n\t\tif(g_temp.isCompact == false)\n\t\t\treturn(true);\n\t\t\n\t\thideCompactElements();\n\t}\n\n\t\n\t/**\n\t * on zoom change\n\t * move the assets of compact to their places\n\t */\n\tfunction onZoomChange(){\n\t\tif(g_temp.isCompact == false)\n\t\t\treturn(true);\n\t\t\n\t\tg_temp.positionFrom = \"onZoomChange\";\n\t\n\t\tpositionCloseButton(false, true);\n\t\tpositionArrowsInside(false, true);\n\t\t\n\t\t//handle compact text panel mode\n\t\tif(g_temp.isCompact == true){\n\t\t\tvar isImageInPlace = (g_objSlider.isCurrentSlideType(\"image\") && g_objSlider.isCurrentImageInPlace() == true);\n\t\t\tif(isImageInPlace == false){\n\t\t\t\thideTextPanel();\n\t\t\t\thideNumbers();\n\t\t\t}\n\t\t\telse{\n\t\t\t\tg_temp.positionFrom = \"onZoomChange\";\n\t\t\t\tshowTextPanel();\n\t\t\t\tshowNumbers();\n\t\t\t}\n\t\t}\n\t\t\n\t}\n\t\n\n\t/**\n\t * after return slider to it's place\n\t * show close button\n\t */\n\tfunction onSliderAfterReturn(){\n\t\t\n\t\tif(g_temp.isCompact == false)\n\t\t\treturn(true);\n\t\t\n\t\tg_temp.positionFrom = \"onSliderAfterReturn\";\n\t\t\n\t\tpositionCloseButton(true);\n\t\tpositionArrowsInside(true);\n\t\t\n\t\tvar isChanged = handleCompactHeight();\n\t\tif(isChanged == false)\n\t\t\thandleCompactTextpanelSizes();\n\t\t\n\t\tshowTextPanel();\n\t\tshowNumbers();\n\t}\n\t\n\t\n\t/**\n\t * after put image to the slide\n\t * position compact elements\n\t */\n\tfunction onSliderAfterPutImage(data, objSlide){\n\t\t\t\t\n\t\tobjSlide = jQuery(objSlide);\n\t\t\t\t\n\t\tif(g_temp.isCompact == false)\n\t\t\treturn(true);\n\n\t\tif(g_objSlider.isSlideCurrent(objSlide) == false)\n\t\t\treturn(true);\n\t\t\t\t\n\t\tg_temp.positionFrom = \"onSliderAfterPutImage\";\n\t\t\n\t\tpositionCloseButton(true);\n\t\t\n\t\tpositionArrowsInside(true);\n\t\t\n\t\thandleCompactTextpanelSizes();\n\t}\n\t\n\t\n\t/**\n\t * on slider transition end, handle panel height\n\t */\n\tfunction onSliderTransitionEnd(){\n\t\t\n\t\tvar sliderOptions = g_objSlider.getOptions();\n\t\tvar imagePaddingTop = sliderOptions.slider_image_padding_top;\n\t\t\n\t\t//handle wide\n\t\tif(g_objTopPanel){\n\t\t\tvar panelHeight = g_objTopPanel.height();\n\t\t\t\n\t\t\tif(panelHeight != imagePaddingTop)\n\t\t\t\trefreshSliderItem(panelHeight);\n\t\t}\n\t\t\n\t\t//handle compact\n\t\tif(g_temp.isCompact == true){\n\t\t\t\n\t\t\tupdateTextPanelText();\n\t\t\tupdateNumbersText();\n\t\t\t\n\t\t\tg_temp.positionFrom = \"onSliderTransitionEnd\";\n\t\t\t\n\t\t\tpositionCloseButton(true);\n\t\t\tpositionArrowsInside(true);\n\n\t\t\tif(g_objSlider.isSlideActionActive() == false){\n\t\t\t\tvar isChanged = handleCompactHeight();\n\t\t\t\tif(isChanged == false)\n\t\t\t\t\thandleCompactTextpanelSizes();\n\t\t\t}\n\t\t\t\n\t\t\tshowTextPanel();\n\t\t\tshowNumbers();\n\t\t\t\n\t\t}\n\t\t\n\t}\n\t\n\t\t\n\t/**\n\t * on item change\n\t * update numbers text and text panel text/position\n\t */\n\tfunction onItemChange(data, currentItem){\n\t\t\n\t\tif(g_temp.isCompact == false){\t//wide mode\n\t\t\t\n\t\t\tif(g_objNumbers)\n\t\t\t\tupdateNumbersText(currentItem);\n\t\t\t\n\t\t\tif(g_objTextPanel){\n\t\t\t\tupdateTextPanelText(currentItem);\n\t\t\t\t\n\t\t\t\t//update panel height only if the lightbox is already opened, and the items changed within it.\n\t\t\t\tif(g_temp.isRightNowOpened == false){\n\t\t\t\t\tg_objTextPanel.positionElements(false);\n\t\t\t\t\thandlePanelHeight(\"onchange\");\n\t\t\t\t\tg_objTextPanel.positionPanel();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t}else{\n\t\t\t\n\t\t\tif(g_objSlider.isAnimating() == false){\n\t\t\t\t\n\t\t\t\tif(g_objTextPanel)\n\t\t\t\t\tupdateTextPanelText(currentItem);\n\t\t\t\t\n\t\t\t\tif(g_objNumbers)\n\t\t\t\t\tupdateNumbersText(currentItem);\n\t\t\t}\n\t\t\n\t\t}\n\t\t\n\t\t\n\t\t//trigger lightbox init event\n\t\tif(g_temp.isSliderChangedOnce == false){\n\t\t\tg_temp.isSliderChangedOnce = true;\n\t\t\tg_objThis.trigger(t.events.LIGHTBOX_INIT);\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * on slider click\n\t */\n\tfunction onSliderClick(data, event){\n\t\t\n\t\tvar slideType = g_objSlider.getSlideType();\n\t\tif(slideType != \"image\" && g_temp.isCompact == false && g_objSlider.isSlideActionActive() )\n\t\t\treturn(true);\n\t\t\n\t\tvar isPreloading = g_objSlider.isPreloading();\n\t\tif(isPreloading == true){\n\t\t\tt.close(\"slider\");\n\t\t\treturn(true);\n\t\t}\n\t\t\n\t\t//close the lightbox on empty space click\n\t\tif(g_options.lightbox_close_on_emptyspace == true){\n\t\t\t\n\t\t\tvar isInside = g_objSlider.isMouseInsideSlideImage(event);\n\t\t\t\n\t\t\tif(isInside == false)\n\t\t\t\tt.close(\"slider_inside\");\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * on lightbox resize\n\t */\n\tfunction onResize(){\n\t\t\n\t\tpositionElements();\n\t}\n\t\n\t\n\t\n\t/**\n\t * on start play - hide the side buttons\n\t */\n\tfunction onPlayVideo(){\n\t\t\n\t\tif(g_objTopPanel){\n\t\t\thideTopPanel();\n\t\t}else{\n\t\t\tif(g_objNumbers)\n\t\t\t\tg_objNumbers.hide();\n\t\t}\n\t\t\n\t\tif(g_objArrowLeft && g_options.lightbox_hide_arrows_onvideoplay == true){\n\t\t\tg_objArrowLeft.hide();\t\t\t\n\t\t\tg_objArrowRight.hide();\t\t\t\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * on stop video - show the side buttons\n\t */\n\tfunction onStopVideo(){\n\n\t\tif(g_objTopPanel){\n\t\t\tshowTopPanel();\n\t\t\thandlePanelHeight(\"onStopVideo\");\n\t\t}else{\n\t\t\t\n\t\t\tif(g_objNumbers)\n\t\t\t\tg_objNumbers.show();\n\t\t}\n\t\t\n\t\tif(g_objArrowLeft && g_options.lightbox_hide_arrows_onvideoplay == true){\n\t\t\tg_objArrowLeft.show();\n\t\t\tg_objArrowRight.show();\t\t\t\n\t\t}\n\t\t\n\t}\n\t\n\t/**\n\t * on gallery keypres, do operations\n\t */\n\tfunction onKeyPress(data, key, event){\n\t\t\n\t\tvar isScrollKey = false;\n\t\t\n\t\tswitch(key){\n\t\t\tcase 27:\t\t//escape - close lightbox\n\t\t\t\tif(g_temp.isOpened == true)\n\t\t\t\t\tt.close(\"keypress\");\n\t\t\tbreak;\n\t\t\tcase 38:\t//up and down arrows\n\t\t\tcase 40:\n\t\t\tcase 33:\t//page up and down\n\t\t\tcase 34:\n\t\t\t\tisScrollKey = true;\n\t\t\tbreak;\n\t\t}\n\t\t\n\t\tif(g_temp.isOpened == true && isScrollKey == true)\n\t\t\tevent.preventDefault();\n\t\t\n\t\t\n\t}\n\t\n\t/**\n\t * on image mouse enter event\n\t */\n\tfunction onImageMouseEnter(){\n\t\t\n\t\tif(g_temp.isArrowsOnHoverMode == true)\n\t\t\tshowArrows(false, true);\n\t\t\n\t}\n\t\n\t/**\n\t * on image mouse leave\n\t */\n\tfunction onImageMouseLeave(event){\n\t\t\n\t\tg_temp.positionFrom = \"hideCompactElements\";\n\t\t\n\t\tif(g_temp.isArrowsOnHoverMode == true && isSliderImageInPlace() == true)\n\t\t\thideArrows(false, true);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * on mouse move event\n\t * show arrows if inside image\n\t */\n\tfunction onMouseMove(event){\n\t\t g_temp.lastMouseX = event.pageX;\n\t\t g_temp.lastMouseY = event.pageY;\n\t\t\n\t\t var isHidden = isArrowsHidden()\n\t\t \n\t\t \n\t\t if(isHidden == true && isMouseInsideImage() && g_objSlider.isAnimating() == false){\n\t\t\t g_temp.positionFrom = \"onMouseMove\";\n\t\t\t if(g_objArrowLeft && g_objArrowLeft.is(\":animated\") == false)\n\t\t\t\t showArrows(false, true);\n\t\t }\n\t\t \n\t}\n\n\t\n\t/**\n\t * on mouse wheel\n\t */\n\tfunction onMouseWheel(event, delta, deltaX, deltaY){\n\t\t\n\t\tif(g_temp.isOpened == false)\n\t\t\treturn(true);\n\t\t\n\t\tswitch(g_options.gallery_mousewheel_role){\n\t\t\tdefault:\n\t\t\tcase \"zoom\":\n\t\t\t\tvar slideType = g_objSlider.getSlideType();\n\t\t\t\tif(slideType != \"image\")\n\t\t\t\t\tevent.preventDefault();\n\t\t\tbreak;\n\t\t\tcase \"none\":\n\t\t\t\tevent.preventDefault();\n\t\t\tbreak;\n\t\t\tcase \"advance\":\n\t\t\t\tg_gallery.onGalleryMouseWheel(event, delta, deltaX, deltaY);\n\t\t\tbreak;\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * init events\n\t */\n\tfunction initEvents(){\n\t\t\n\t\tg_objOverlay.on(\"touchstart\", function(event){\n\t\t\tevent.preventDefault();\n\t\t});\n\t\t\n\t\tg_objOverlay.on(\"touchend\", function(event){\n\t\t\tt.close(\"overlay\");\n\t\t});\n\t\t\n\t\t\n\t\tg_functions.addClassOnHover(g_objArrowRight, \"ug-arrow-hover\");\n\t\tg_functions.addClassOnHover(g_objArrowLeft, \"ug-arrow-hover\");\n\t\t\n\t\tg_functions.addClassOnHover(g_objButtonClose);\n\t\t\n\t\tg_gallery.setNextButton(g_objArrowRight);\n\t\tg_gallery.setPrevButton(g_objArrowLeft);\n\t\t\n\t\tg_objButtonClose.click(function(){\n\t\t\tt.close(\"button\");\n\t\t});\n\t\t\n\t\tg_objGallery.on(g_gallery.events.ITEM_CHANGE, onItemChange);\n\t\t\n\t\tif(g_objSlider){\n\t\t\tjQuery(g_objSlider).on(g_objSlider.events.TRANSITION_END, onSliderTransitionEnd);\n\t\t\t\n\t\t\t//on slider click event\n\t\t\tjQuery(g_objSlider).on(g_objSlider.events.CLICK, onSliderClick);\n\t\t\t\n\t\t\t//on slider video \n\t\t\tvar objVideo = g_objSlider.getVideoObject();\n\t\t\t\t\t\n\t\t\tjQuery(objVideo).on(objVideo.events.PLAY_START, onPlayVideo);\n\t\t\tjQuery(objVideo).on(objVideo.events.PLAY_STOP, onStopVideo);\n\t\t\t\n\t\t\t//handle close button hide / appear\n\t\t\tjQuery(g_objSlider).on(g_objSlider.events.START_DRAG, onSliderDragStart);\n\t\t\tjQuery(g_objSlider).on(g_objSlider.events.TRANSITION_START, onSliderDragStart);\n\t\t\t\n\t\t\tjQuery(g_objSlider).on(g_objSlider.events.AFTER_DRAG_CHANGE, onSliderAfterReturn);\n\t\t\tjQuery(g_objSlider).on(g_objSlider.events.AFTER_RETURN, onSliderAfterReturn);\n\t\t\tjQuery(g_objSlider).on(g_objSlider.events.AFTER_PUT_IMAGE, onSliderAfterPutImage);\n\t\t\t\n\t\t\tjQuery(g_objSlider).on(g_objSlider.events.ZOOM_CHANGE, onZoomChange);\n\t\t\t\n\t\t\tjQuery(g_objSlider).on(g_objSlider.events.IMAGE_MOUSEENTER, onImageMouseEnter);\n\t\t\tjQuery(g_objSlider).on(g_objSlider.events.IMAGE_MOUSELEAVE, onImageMouseLeave);\n\n\t\t}\n\t\t\n\t\t//on resize\n\t\t jQuery(window).resize(function(){\n\t\t\t \n\t\t\t if(g_temp.isOpened == false)\n\t\t\t\t return(true);\n\t\t\t \n\t\t\t g_functions.whenContiniousEventOver(\"lightbox_resize\", onResize, 100);\n\t\t });\n\t\t \n\t\t g_objGallery.on(g_gallery.events.GALLERY_KEYPRESS, onKeyPress);\n\t\t \n\t\t //store last mouse x and y\n\t\t if(g_temp.isArrowsOnHoverMode == true){\n\t\t\t \n\t\t\t jQuery(document).bind('mousemove', onMouseMove);\n\t\t \n\t\t }\n\t\t\n\t\t//on mouse wheel - disable functionality if video\n\t\tg_objWrapper.on(\"mousewheel\", onMouseWheel);\n\n\t}\n\n\t\n\t/**\n\t * destroy the lightbox events and the html it created\n\t */\n\tthis.destroy = function(){\n\t\t\n\t\tjQuery(document).unbind(\"mousemove\");\n\t\t\n\t\tg_objOverlay.off(\"touchstart\");\n\t\tg_objOverlay.off(\"touchend\");\n\t\tg_objButtonClose.off(\"click\");\n\t\tg_objGallery.off(g_gallery.events.ITEM_CHANGE);\n\t\t\n\t\tif(g_objSlider){\n\t\t\tjQuery(g_objSlider).off(g_objSlider.events.TRANSITION_END);\n\t\t\tjQuery(g_objSlider).off(g_objSlider.events.CLICK);\n\t\t\tjQuery(g_objSlider).off(g_objSlider.events.START_DRAG);\n\t\t\tjQuery(g_objSlider).off(g_objSlider.events.TRANSITION_START);\n\t\t\tjQuery(g_objSlider).off(g_objSlider.events.AFTER_DRAG_CHANGE);\n\t\t\tjQuery(g_objSlider).off(g_objSlider.events.AFTER_RETURN);\n\t\t\t\n\t\t\tvar objVideo = g_objSlider.getVideoObject();\n\t\t\tjQuery(objVideo).off(objVideo.events.PLAY_START);\n\t\t\tjQuery(objVideo).off(objVideo.events.PLAY_STOP);\n\n\t\t\tjQuery(g_objSlider).on(g_objSlider.events.IMAGE_MOUSEENTER, onImageMouseEnter);\n\t\t\tjQuery(g_objSlider).on(g_objSlider.events.IMAGE_MOUSELEAVE, onImageMouseLeave);\n\t\t\t\n\t\t\tg_objSlider.destroy();\n\t\t}\n\t\t\n\t\tjQuery(window).unbind(\"resize\");\n\t\tg_objGallery.off(g_gallery.events.GALLERY_KEYPRESS, onKeyPress);\n\t\t\n\t\tg_objWrapper.off(\"mousewheel\");\n\t\t\n\t\t//remove the html\n\t\tg_objWrapper.remove();\n\t}\n\t\n\t\n\t/**\n\t * open the lightbox with some item index\n\t */\n\tthis.open = function(index){\n\t\t\n\t\tvar objItem = g_gallery.getItem(index);\n\t\t\n\t\tg_temp.isOpened = true;\n\t\t\n\t\t//set if the panel right now opened\n\t\tg_temp.isRightNowOpened = true;\n\t\tsetTimeout(function(){g_temp.isRightNowOpened = false},100);\n\t\t\n\t\tif(g_objSlider){\n\t\t\tg_objSlider.setItem(objItem, \"lightbox_open\");\n\t\t}\n\t\t\n\t\tif(g_objTextPanel){\n\t\t\tg_objTextPanel.setTextPlain(objItem.title, objItem.description);\n\t\t}\n\t\t\n\t\tg_objOverlay.stop().fadeTo(0,0);\n\t\tg_objWrapper.show();\n\t\tg_objWrapper.fadeTo(0,1);\n\t\t\n\t\t//show the overlay\n\t\tg_objOverlay.stop().fadeTo(g_temp.fadeDuration, g_options.lightbox_overlay_opacity);\n\t\t\n\t\tpositionElements();\n\t\t\n\t\tif(g_temp.isCompact == true){\n\t\t\t\n\t\t\tvar isPreloading = g_objSlider.isPreloading();\n\t\t\tif(isPreloading == true){\n\t\t\t\t\n\t\t\t\tactualHideCompactElements();\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\t\n\t\t\t\t//hide only arrows if they are inside\n\t\t\t\tif(g_temp.isArrowsInside == true){\n\t\t\t\t\tg_objArrowLeft.hide();\n\t\t\t\t\tg_objArrowRight.hide();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t\t\t\n\t\t}\n\t\t\n\t\tif(g_objSlider)\n\t\t\tg_objSlider.startSlideAction();\n\t\t\n\t\t//trigger gallery event\n\t\tg_objGallery.trigger(g_gallery.events.OPEN_LIGHTBOX, objItem);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * close the lightbox\n\t */\n\tthis.close = function(fromWhere){\n\t\t\t\t\n\t\tg_temp.isOpened = false;\n\t\t\n\t\tif(g_temp.isCompact == true)\n\t\t\thideCompactElements();\n\t\t\n\t\tif(g_objSlider)\n\t\t\tg_objSlider.stopSlideAction();\n\t\t\n\t\tvar slideType = g_objSlider.getSlideType();\n\t\t\t\t\n\t\tif(slideType != \"image\")\n\t\t\tg_objWrapper.hide();\n\t\telse{\n\t\t\tg_objWrapper.fadeTo(g_temp.fadeDuration,0,function(){\n\t\t\t\tg_objWrapper.hide();\n\t\t\t});\n\t\t}\n\n\t\tg_objGallery.trigger(g_gallery.events.CLOSE_LIGHTBOX);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * external init function\n\t */\n\tthis.init = function(gallery, customOptions){\n\t\t\n\t\tinitLightbox(gallery, customOptions);\n\t}\n\t\n\t\n\t/**\n\t * switch to wide mode from compact mode\n\t */\n\tfunction switchToWide(){\n\t\tg_temp.isCompact = false;\n\t\tmodifyOptions();\n\t\t\n\t\tg_temp.isArrowsInside = false;\n\t\tg_temp.isArrowsOnHoverMode = false;\n\t\n\t\tg_options = jQuery.extend({}, g_temp.originalOptions);\n\t\t\n\t\tg_options.lightbox_arrows_position = \"sides\";\n\t\t\n\t\tg_objSlider.setOptions(g_options);\n\t}\n\t\n\t\n\t/**\n\t * external put html function\n\t */\n\tthis.putHtml = function(){\n\t\t\n\t\t//check if switch to wide mode\n\t\tvar isSmallWindow = g_gallery.isSmallWindow();\n\t\t\n\t\tif(isSmallWindow && g_temp.isCompact == true)\n\t\t\tswitchToWide();\n\t\t\n\t\tputLightboxHtml();\n\t}\n\t\n\t\n\t/**\n\t * run lightbox elements\n\t */\n\tthis.run = function(){\n\t\t\n\t\tsetProperties();\n\t\t\n\t\tif(g_objSlider)\n\t\t\tg_objSlider.run();\n\t\t\n\t\tinitEvents();\n\t}\n\t\n\t\n\t\n}\n\n\n\n/**\n * carousel class\n */\nfunction UGCarousel(){\n\n\tvar t = this, g_objThis = jQuery(this);\n\tvar g_gallery = new UniteGalleryMain(), g_objGallery, g_objWrapper;\t\n\tvar g_functions = new UGFunctions(), g_arrItems, g_objTileDesign = new UGTileDesign();\n\tvar g_thumbs = new UGThumbsGeneral(), g_objCarouselWrapper, g_objInner, arrOrigTiles = [];\n\t\n\tvar g_options = {\n\t\t\tcarousel_padding: 8,\t\t\t\t\t\t\t//padding at the sides of the carousel\n\t\t\tcarousel_space_between_tiles: 20,\t\t\t\t//space between tiles\n\t\t\tcarousel_navigation_numtiles:3,\t\t\t\t\t//number of tiles to scroll when user clicks on next/prev button\n\t\t\tcarousel_scroll_duration:500,\t\t\t\t\t//duration of scrolling to tile\n\t\t\tcarousel_scroll_easing:\"easeOutCubic\",\t\t\t//easing of scrolling to tile animation\n\t\t\t\n\t\t\tcarousel_autoplay: true,\t\t\t\t\t\t//true,false - autoplay of the carousel on start\n\t\t\tcarousel_autoplay_timeout: 3000,\t\t\t\t//autoplay timeout\n\t\t\tcarousel_autoplay_direction: \"right\",\t\t\t//left,right - autoplay direction\n\t\t\tcarousel_autoplay_pause_onhover: true,\t\t\t//pause the autoplay on mouse over\n\t\t\tcarousel_vertical_scroll_ondrag: false\t\t\t//vertical screen scroll on carousel drag\n\t};\n\t\n\tthis.events = {\n\t\t\tSTART_PLAY: \"carousel_start_play\",\n\t\t\tPAUSE_PLAY: \"carousel_pause_play\",\n\t\t\tSTOP_PLAY: \"carousel_stop_play\"\n\t};\n\t\n\tvar g_temp = {\n\t\t\teventSizeChange: \"thumb_size_change\",\n\t\t\tisFirstTimeRun:true,  //if run once\n\t\t\tcarouselMaxWidth: null,\n\t\t\ttileWidth:0,\n\t\t\tinitTileWidth:0,\n\t\t\tinitTileHeight:0,\n\t\t\tsideSpace:1500,\t\t\t\t//the space that must be filled with items\n\t\t\tspaceActionSize:500,\n\t\t\tnumCurrent:0,\n\t\t\ttouchActive: false,\n\t\t\tstartInnerPos: 0,\n\t\t\tlastTime:0,\n\t\t\tstartTime:0,\n\t\t\tstartMousePos:0,\n\t\t\tlastMousePos:0,\n\t\t\tscrollShortDuration: 200,\n\t\t\tscrollShortEasing: \"easeOutQuad\",\n\t\t\thandle:null,\n\t\t\tisPlayMode: false,\n\t\t\tisPaused: false,\n\t\t\tstoredEventID: \"carousel\"\n\t};\n\n\t\n\tfunction __________GENERAL_________(){};\n\t\n\t/**\n\t * init the gallery\n\t */\n\tfunction init(gallery, customOptions){\n\t\t\n\t\tg_objects = gallery.getObjects();\n\t\tg_gallery = gallery;\n\t\tg_objGallery = jQuery(gallery);\n\t\tg_objWrapper = g_objects.g_objWrapper;\n\t\tg_arrItems = g_objects.g_arrItems;\n\t\t\n\t\tg_options = jQuery.extend(g_options, customOptions);\n\t\t\n\t\tg_objTileDesign.setFixedMode();\t\t\n\t\tg_objTileDesign.setApproveClickFunction(isApproveTileClick);\n\t\tg_objTileDesign.init(gallery, g_options);\n\t\t\n\t\tg_thumbs = g_objTileDesign.getObjThumbs();\n\t\tg_options = g_objTileDesign.getOptions();\n\t\t\n\t\tg_temp.initTileWidth = g_options.tile_width;\n\t\tg_temp.initTileHeight = g_options.tile_height;\n\t\t\n\t\tg_temp.tileWidth = g_options.tile_width;\n\t}\n\t\n\t\n\t/**\n\t * set the grid panel html\n\t */\n\tfunction setHtml(objParent){\n\t\t\n\t\tif(!objParent)\n\t\t\tvar objParent = g_objWrapper;\n\t\t\n\t\tvar html = \"<div class='ug-carousel-wrapper'><div class='ug-carousel-inner'></div></div>\";\n\t\tg_objWrapper.append(html);\n\t\t\n\t\tg_objCarouselWrapper = g_objWrapper.children(\".ug-carousel-wrapper\");\n\t\tg_objInner = g_objCarouselWrapper.children(\".ug-carousel-inner\");\n\t\t\n\t\tg_objTileDesign.setHtml(g_objInner);\n\t\t\n\t\tg_thumbs.getThumbs().fadeTo(0,1);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * resize tiles to new width / height\n\t */\n\tfunction resizeTiles(newTileWidth, newTileHeight){\n\t\t\n\t\tif(!newTileHeight){\n\t\t\t\n\t\t\tvar newTileHeight = g_temp.initTileHeight / g_temp.initTileWidth * newTileWidth;\n\t\t\t\n\t\t}\n\t\t\n\t\tg_temp.tileWidth = newTileWidth;\n\t\t\n\t\t//update all options\n\t\tvar optUpdate = {\n\t\t\t\ttile_width: newTileWidth, \n\t\t\t\ttile_height: newTileHeight\n\t\t};\n\t\t\n\t\tg_objTileDesign.setOptions(optUpdate);\n\t\t\n\t\tg_options.tile_width = newTileWidth;\n\t\tg_options.tile_height = newTileHeight;\n\t\t\n\t\t//resize all tiles\n\t\tg_objTileDesign.resizeAllTiles(newTileWidth);\n\t\t\n\t\t//reposition tiles\n\t\tpositionTiles(true);\t\t//must to position tiles right after size change, for inner size change\n\t}\n\t\n\t/**\n\t * run the gallery after init and set html\n\t */\n\tfunction run(){\n\t\t\n\t\t//validation\n\t\tif(g_temp.carouselMaxWidth === null){\n\t\t\tthrow new Error(\"The carousel width not set\");\n\t\t\treturn(false);\n\t\t}\n\t\t\n\t\t//if the size changed, change it anyway\n\t\tif(g_temp.tileWidth < g_temp.initTileWidth){\n\t\t\t\t\t\t\n\t\t\tvar newTileWidth = g_temp.carouselMaxWidth - g_options.carousel_padding * 2;\n\t\t\tif(newTileWidth > g_temp.initTileWidth)\n\t\t\t\tnewTileWidth = g_temp.initTileWidth;\n\t\t\t\n\t\t\tresizeTiles(newTileWidth);\n\t\t\t\n\t\t\tvar numTiles = g_functions.getNumItemsInSpace(g_temp.carouselMaxWidth, newTileWidth, g_options.carousel_space_between_tiles);\n\t\t\t\n\t\t}else{\n\t\t\t\n\t\t\t//check if need to lower tiles size\n\t\t\tvar numTiles = g_functions.getNumItemsInSpace(g_temp.carouselMaxWidth, g_temp.tileWidth, g_options.carousel_space_between_tiles);\n\t\t\t\n\t\t\t//if no tiles fit, resize the tiles\n\t\t\tif(numTiles <= 0){\n\t\t\t\tnumTiles = 1;\n\t\t\t\t\n\t\t\t\tvar newTileWidth = g_temp.carouselMaxWidth - g_options.carousel_padding * 2;\n\t\t\t\t\n\t\t\t\tresizeTiles(newTileWidth);\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\t\t\n\t\t//set wrapper width\n\t\tvar realWidth = g_functions.getSpaceByNumItems(numTiles, g_temp.tileWidth, g_options.carousel_space_between_tiles);\n\t\trealWidth += g_options.carousel_padding * 2;\n\t\t\n\t\tg_objCarouselWrapper.width(realWidth);\n\t\t\n\t\tif(g_temp.isFirstTimeRun == true){\n\t\t\t\n\t\t\tinitEvents();\n\t\t\t\n\t\t\tg_objTileDesign.run();\n\t\t\t\n\t\t\t//set data indexes to tiles\n\t\t\tjQuery.each(g_arrItems, function(index, item){\n\t\t\t\titem.objThumbWrapper.data(\"index\", index);\n\n\t\t\t\tg_objWrapper.trigger(g_temp.eventSizeChange, [item.objThumbWrapper,true]);\n\t\t\t\titem.objTileOriginal = item.objThumbWrapper.clone(true, true);\n\t\t\t});\n\t\t\t\t\t\t\n\t\t\tpositionTiles(true);\t\t//set heights at first time\n\t\t\t\n\t\t\tif(g_options.carousel_autoplay == true)\n\t\t\t\tt.startAutoplay();\n\t\t}else{\n\t\t\t\n\t\t\tif(g_options.carousel_autoplay == true)\n\t\t\t\tt.pauseAutoplay();\n\t\t\t\n\t\t\tscrollToTile(0, false);\n\t\t\t\n\t\t\tif(g_options.carousel_autoplay == true)\n\t\t\t\tt.startAutoplay();\n\t\t}\n\t\t\n\t\tpositionElements();\n\t\t\n\t\tg_temp.isFirstTimeRun = false;\n\t}\n\t\n\t\n\t\n\tfunction __________GETTERS_______(){};\n\t\n\t/**\n\t * get inner position\n\t */\n\tfunction getInnerPos(){\n\t\treturn g_functions.getElementSize(g_objInner).left;\n\t}\n\t\n\t/**\n\t * get mouse position\n\t */\n\tfunction getMousePos(event){\n\t\treturn g_functions.getMousePosition(event).pageX;\n\t}\n\t\n\t\n\t/**\n\t * get all tiles\n\t */\n\tfunction getTiles(){\n\t\t\n\t\tvar objTiles = g_objInner.children(\".ug-thumb-wrapper\");\n\t\t\n\t\treturn(objTiles);\n\t}\n\t\n\t\n\t/**\n\t * get num tiles in some space\n\t */\n\tfunction getNumTilesInSpace(space){\n\t\t\n\t\tvar numItems = g_functions.getNumItemsInSpace(space, g_temp.tileWidth, g_options.carousel_space_between_tiles)\n\t\t\t\t\n\t\treturn(numItems);\n\t}\n\t\n\t\n\t/**\n\t * get num tiles\n\t */\n\tfunction getNumTiles(){\n\t\treturn getTiles().length;\n\t}\n\t\n\t\n\t/**\n\t * get tile\n\t */\n\tfunction getTile(numTile){\n\t\tvalidateTileNum(numTile);\n\t\tvar objTiles = getTiles();\n\t\tvar objTile = jQuery(objTiles[numTile]);\n\t\t\n\t\treturn(objTile);\n\t}\n\t\n\t\n\t/**\n\t * get first tile in the inner object\n\t */\n\tfunction getFirstTile(){\n\t\t\t\t\n\t\treturn g_objInner.children(\".ug-thumb-wrapper\").first();\n\t}\n\t\n\t/**\n\t * get last tile in the inner object\n\t */\n\tfunction getLastTile(){\n\t\t\n\t\treturn g_objInner.children(\".ug-thumb-wrapper\").last();\t\t\n\t}\n\t\n\t\n\t\n\t/**\n\t * get clone of the time next or prev the given\n\t */\n\tfunction getTileClones(objTile, numClones, dir){\n\t\t\n\t\tvar index = objTile.data(\"index\");\n\t\tif(index == undefined){\n\t\t\tthrow new Error(\"every tile should have index!\");\t\t\t\n\t\t}\n\t\t\n\t\tvar arrClonedItems = [];\n\t\t\n\t\tfor(var i=0;i<numClones;i++){\t\t\t\n\t\t\t\n\t\t\tif(dir == \"prev\")\n\t\t\t\tvar itemToAdd = g_gallery.getPrevItem(index, true);\n\t\t\telse\n\t\t\t\tvar itemToAdd = g_gallery.getNextItem(index, true);\n\t\t\t\n\t\t\tif(!itemToAdd){\n\t\t\t\tthrow new Error(\"the item to add is empty\");\n\t\t\t}\n\t\t\t\n\t\t\tvar clonedTile = itemToAdd.objTileOriginal.clone(true, true);\n\t\t\t\n\t\t\t\n\t\t\tindex = itemToAdd.index;\t\n\t\t\t\n\t\t\tclonedTile.addClass(\"cloned\");\n\t\t\tarrClonedItems.push(clonedTile);\n\t\t}\n\t\t\n\t\treturn(arrClonedItems);\n\t}\n\t\n\t\n\t/**\n\t * get space left from the right\n\t */\n\tfunction getRemainSpaceRight(){\n\t\tvar wrapperSize = g_functions.getElementSize(g_objCarouselWrapper);\n\t\tvar innerSize = g_functions.getElementSize(g_objInner);\n\t\t\n\t\tvar spaceTaken = innerSize.width - wrapperSize.width + innerSize.left;\n\t\tvar spaceRemain = g_temp.sideSpace - spaceTaken;\n\t\t\t\t\n\t\treturn(spaceRemain);\n\t}\n\t\n\t\n\t/**\n\t * get remain space on the left\n\t */\n\tfunction getRemainSpaceLeft(){\n\t\tvar spaceTaken = -getInnerPos();\n\t\tvar spaceRemain = g_temp.sideSpace - spaceTaken;\n\t\treturn(spaceRemain);\n\t}\n\t\n\t/**\n\t * get carousel width\n\t */\n\tfunction getCarouselWidth(){\n\t\t\n\t\tvar objSize = g_functions.getElementSize(g_objCarouselWrapper);\n\t\treturn(objSize.width);\n\t}\n\t\n\t/**\n\t * get num tiles in the carousel\n\t */\n\tfunction getNumTilesInCarousel(){\n\t\t\n\t\tvar width = getCarouselWidth();\n\t\t\n\t\tvar numTiles = getNumTilesInSpace(width);\n\t\t\n\t\treturn(numTiles);\n\t}\n\t\n\t\n\tfunction __________OTHER_METHODS_______(){};\n\t\n\t\n\t/**\n\t * position existing tiles\n\t */\n\tfunction positionTiles(setHeight){\n\t\t\n\t\tif(!setHeight)\n\t\t\tvar setHeight = false;\n\t\t\n\t\tvar objTiles = getTiles();\n\t\t\t\t\n\t\tvar posx = 0;\n\t\tvar maxHeight = 0, totalWidth;\n\t\t\n\t\tjQuery.each(objTiles, function(index, objTile){\n\t\t\tobjTile = jQuery(objTile);\n\t\t\tg_functions.placeElement(objTile, posx, 0);\n\t\t\tvar tileSize = g_functions.getElementSize(objTile);\n\t\t\tposx += tileSize.width + g_options.carousel_space_between_tiles;\n\t\t\tmaxHeight = Math.max(maxHeight, tileSize.height);\n\t\t\tif(index == (objTiles.length-1))\n\t\t\t\ttotalWidth = tileSize.right;\n\t\t});\n\t\t\n\t\t//set heights and widths\n\t\tg_objInner.width(totalWidth);\n\t\t\t\t\n\t\tmaxHeight += g_options.carousel_padding * 2;\n\t\t\n\t\tif(setHeight === true){\n\t\t\tg_objInner.height(maxHeight);\n\t\t\tg_objCarouselWrapper.height(maxHeight);\n\t\t}\n\t\t\t\t\n\t\tscrollToTile(g_temp.numCurrent, false);\n\n\t\treturn(totalWidth);\n\t}\n\t\n\t\n\t/**\n\t * validate that the num not more then num tiles\n\t */\n\tfunction validateTileNum(numTile){\n\n\t\tif(numTile > (getTiles().length-1))\n\t\t\tthrow new Error(\"Wrogn tile number: \" + numTile);\n\t}\n\t\n\t\n\t/**\n\t * add tile to left\n\t */\n\tfunction addTiles(numTiles, dir){\n\t\t\n\t\tif(dir == \"left\")\n\t\t\tvar anchorTile = getFirstTile();\n\t\telse\n\t\t\tvar anchorTile = getLastTile();\n\t\t\n\t\tvar clonesType = (dir == \"left\")?\"prev\":\"next\";\n\t\t\n\t\tvar arrNewTiles = getTileClones(anchorTile, numTiles, clonesType);\n\t\t\t\t\n\t\tjQuery.each(arrNewTiles, function(index, objTile){\t\t\n\t\t\t\n\t\t\tif(dir == \"left\")\n\t\t\t\tg_objInner.prepend(objTile);\n\t\t\telse\n\t\t\t\tg_objInner.append(objTile);\n\t\t\t\n\t\t\tg_objWrapper.trigger(g_temp.eventSizeChange, objTile);\n\t\t\tg_objTileDesign.loadTileImage(objTile);\n\t\t\t\n\t\t});\n\t\t\n\t\t\n\t}\n\t\n\t/**\n\t * remove some tiles\n\t */\n\tfunction removeTiles(numTilesToRemove, direction){\n\t\t\n\t\tvalidateTileNum(numTiles);\n\t\t\n\t\tvar arrTiles = getTiles();\n\t\tvar numTiles = arrTiles.length;\n\t\t\n\t\tfor(var i=0; i<numTilesToRemove; i++){\n\t\t\t\n\t\t\tif(direction == \"left\")\n\t\t\t\tjQuery(arrTiles[i]).remove();\n\t\t\telse{\n\t\t\t\tjQuery(arrTiles[numTiles-1-i]).remove();\n\t\t\t}\n\t\t}\n\t}\n\n\t\n\t/**\n\t * set inner strip position\n\t */\n\tfunction setInnerPos(pos){\n\t\tvar objCss = {\n\t\t\t\t\"left\":pos+\"px\"\n\t\t};\n\t\t\n\t\tg_objInner.css(objCss);\n\t}\n\t\n\t\n\t/**\n\t * scroll to tile by number\n\t */\n\tfunction scrollToTile(numTile, isAnimation, isShort){\n\t\t\n\t\tif(isAnimation === undefined){\n\t\t\tvar isAnimation = true;\n\t\t\tif(g_objInner.is(\":animated\"))\n\t\t\t\treturn(true);\n\t\t}\n\t\t\t\t\n\t\tvar objTile = getTile(numTile);\n\t\tvar objSize = g_functions.getElementSize(objTile);\n\t\tvar posScroll = -objSize.left + g_options.carousel_padding;\n\t\t\n\t\tvar objCss = {\n\t\t\t\t\"left\":posScroll+\"px\"\n\t\t};\n\t\t\t\t\t\t\n\t\tif(isAnimation === true){\n\t\t\t\n\t\t\tvar duration = g_options.carousel_scroll_duration;\n\t\t\tvar easing = g_options.carousel_scroll_easing;\n\t\t\t\n\t\t\tif(isShort === true){\n\t\t\t\tduration = g_temp.scrollShortDuration;\n\t\t\t\teasing = g_temp.scrollShortEasing;\n\t\t\t}\n\t\t\t\n\t\t\tg_objInner.stop(true).animate(objCss ,{\n\t\t\t\tduration: duration,\n\t\t\t\teasing: easing,\n\t\t\t\tqueue: false,\n\t\t\t\t//progress:function(){t.triggerStripMoveEvent()},\n\t\t\t\tcomplete: function(){\n\t\t\t\t\tg_temp.numCurrent = numTile;\n\t\t\t\t\t\n\t\t\t\t\tfillSidesWithTiles(true);\n\t\t\t\t}\n\t\t\t});\t\t\t\t\t\n\t\t\t\n\t\t}else{\n\t\t\tg_temp.numCurrent = numTile;\n\t\t\t\t\t\t\n\t\t\tg_objInner.css(objCss);\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * get number of neerest tile\n\t */\n\tfunction getNeerestTileNum(){\n\t\tvar innerPos = -getInnerPos();\n\t\tvar numTiles = getNumTilesInSpace(innerPos);\n\t\tvar tile1Pos = g_functions.getElementSize(getTile(numTiles)).left;\n\t\tvar tile2Pos = g_functions.getElementSize(getTile(numTiles+1)).left;\n\t\t\t\t\n\t\tif(Math.abs(tile1Pos - innerPos) < Math.abs(tile2Pos - innerPos))\n\t\t\treturn(numTiles);\n\t\telse\t\t\t\n\t\t\treturn(numTiles+1);\n\t}\n\t\n\t\n\t/**\n\t * get neerest tile to inner position\n\t */\n\tfunction scrollToNeerestTile(){\n\t\t\n\t\tvar tileNum = getNeerestTileNum();\n\t\tscrollToTile(tileNum, true, true);\n\t}\n\t\n\t\n\t/**\n\t * fill the sides with tiles till it fil the sideSpace\n\t */\n\tfunction fillSidesWithTiles(){\n\t\t\t\t\n\t\tvar spaceLeft = getRemainSpaceLeft();\n\t\tvar spaceRight = getRemainSpaceRight();\n\t\t\n\t\tvar numItemsLeft = 0, numItemsRight = 0, numItemsRemoveLeft = 0, numItemsRemoveRight = 0;\n\t\t\n\t\t//trace(\"left: \" + spaceLeft+ \" right: \" + spaceRight);\n\t\t\n\t\tvar numTiles = getNumTiles();\n\t\t\n\t\t//add tiles to left\n\t\tif(spaceLeft > g_temp.spaceActionSize){\n\t\t\tnumItemsLeft = getNumTilesInSpace(spaceLeft);\t\t\n\t\t\taddTiles(numItemsLeft, \"left\");\n\t\t\t\n\t\t\tg_temp.numCurrent += numItemsLeft;\n\t\t\t\n\t\t}else if(spaceLeft < -g_temp.spaceActionSize){\n\t\t\tvar numItemsRemoveLeft = getNumTilesInSpace(Math.abs(spaceLeft));\n\t\t\tremoveTiles(numItemsRemoveLeft, \"left\");\n\t\t\tg_temp.numCurrent -= numItemsRemoveLeft;\n\t\t}\n\t\t\n\t\t//add tiles to right\n\t\tif(spaceRight > g_temp.spaceActionSize){\n\t\t\tnumItemsRight = getNumTilesInSpace(spaceRight);\n\t\t\taddTiles(numItemsRight, \"right\");\t\t\t\n\t\t}else if(spaceRight < -g_temp.spaceActionSize){\n\t\t\tnumItemsRemoveRight = getNumTilesInSpace(Math.abs(spaceRight));\n\t\t\tremoveTiles(numItemsRemoveRight, \"right\");\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\t//small validation\n\t\tif(numItemsRemoveRight > numTiles){\n\t\t\t\n\t\t\tthrow new Error(\"Can't remove more then num tiles\");\n\t\t}\n\t\t\t\n\t\t//trace(numItemsRemoveRight);\n\t\t//trace(\"numItems: \" + getNumTiles());\n\t\t\n\t\t//scroll to tile and position inner object\n\t\tvar isPositioned = false;\n\t\tif(numItemsLeft || numItemsRight || numItemsRemoveLeft || numItemsRemoveRight){\n\t\t\t\n\t\t\t/*\n\t\t\tdebugLine({\n\t\t\t\tnumItemsLeft:numItemsLeft,\n\t\t\t\tnumItemsRight:numItemsRight,\n\t\t\t\tnumItemsRemoveLeft:numItemsRemoveLeft,\n\t\t\t\tnumItemsRemoveRight: numItemsRemoveRight\n\t\t\t});\n\t\t\t*/\n\t\t\t//trace(\"do something\");\n\t\t\t\n\t\t\tpositionTiles();\t\t\t\n\t\t\tisPositioned = true\n\t\t}\n\t\t\n\t\treturn(isPositioned);\n\t}\n\t\n\t\n\t/**\n\t * position tiles\n\t */\n\tfunction positionElements(isFirstTime){\n\t\t\t\t\n\t\t//position inner strip\n\t\tg_functions.placeElement(g_objInner, 0, g_options.carousel_padding);\n\t\t\n\t\t//position sides\n\t\tfillSidesWithTiles();\n\t\t\n\t}\n\t\n\t\n\t\n\tfunction __________AUTOPLAY_______(){};\n\n\t/**\n\t * start autoplay\n\t */\n\tthis.startAutoplay = function(){\n\t\t\n\t\tg_temp.isPlayMode = true;\n\t\tg_temp.isPaused = false;\n\t\t\n\t\tg_objThis.trigger(t.events.START_PLAY);\n\t\t\n\t\tif(g_temp.handle)\n\t\t\tclearInterval(g_temp.handle);\n\t\t\n\t\tg_temp.handle = setInterval(autoplayStep, g_options.carousel_autoplay_timeout);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * unpause autoplay after pause\n\t */\n\tthis.unpauseAutoplay = function(){\n\t\t\n\t\tif(g_temp.isPlayMode == false)\n\t\t\treturn(true);\n\t\t\n\t\tif(g_temp.isPaused == false)\n\t\t\treturn(true);\n\t\t\n\t\tt.startAutoplay();\n\t}\n\t\n\t\n\t/**\n\t * pause the autoplay\n\t */\n\tthis.pauseAutoplay = function(){\n\n\t\tif(g_temp.isPlayMode == false)\n\t\t\treturn(true);\n\t\t\n\t\tg_temp.isPaused = true;\n\t\t\n\t\tif(g_temp.handle)\n\t\t\tclearInterval(g_temp.handle);\n\t\t\n\t\tg_objThis.trigger(t.events.PAUSE_PLAY);\n\t\t\n\t}\n\n\t\n\t/**\n\t * stop autoplay\n\t */\n\tthis.stopAutoplay = function(){\n\t\t\n\t\tif(g_temp.isPlayMode == false)\n\t\t\treturn(true);\n\t\t\n\t\tg_temp.isPaused = false;\n\t\tg_temp.isPlayMode = false;\n\t\t\n\t\tif(g_temp.handle)\n\t\t\tclearInterval(g_temp.handle);\n\t\t\n\t\tg_objThis.trigger(t.events.STOP_PLAY);\n\t}\n\t\n\t\n\t/**\n\t * autoplay step, advance the carousel by 1\n\t */\n\tfunction autoplayStep(){\n\t\t\n\t\tif(g_options.carousel_autoplay_direction == \"left\"){\n\t\t\tt.scrollRight(1);\n\t\t}else{\n\t\t\tt.scrollLeft(1);\n\t\t}\n\t\t\n\t}\n\t\n\tfunction __________EVENTS_______(){};\n\t\t\n\t\n\t/**\n\t * on touch start\n\t */\n\tfunction onTouchStart(event){\n\t\t\n\t\tif(g_temp.touchActive == true)\n\t\t\treturn(true);\n\t\t\n\t\tg_temp.touchActive = true;\n\t\t\n\t\tt.pauseAutoplay();\n\t\t\n\t\tg_temp.startTime = jQuery.now();\t\n\t\tg_temp.startMousePos = getMousePos(event);\n\t\tg_temp.startInnerPos = getInnerPos();\n\t\tg_temp.lastTime = g_temp.startTime;\n\t\tg_temp.lastMousePos = g_temp.startMousePos;\n\t\t\n\t\tg_functions.storeEventData(event, g_temp.storedEventID);\n\t}\n\n\t\n\t/**\n\t * on touch move\n\t */\n\tfunction onTouchMove(event){\n\t\t\t\t\n\t\tif(g_temp.touchActive == false)\n\t\t\treturn(true);\n\t\t\n\t\tg_functions.updateStoredEventData(event, g_temp.storedEventID);\n\t\t\n\t\tevent.preventDefault();\n\t\t\n\t\tvar scrollDir = null;\n\t\t\n\t\tif(g_options.carousel_vertical_scroll_ondrag == true)\n\t\t\tscrollDir = g_functions.handleScrollTop(g_temp.storedEventID);\n\t\t\n\t\tif(scrollDir === \"vert\")\n\t\t\treturn(true);\n\t\t\n\t\tg_temp.lastMousePos = getMousePos(event);\n\t\t\n\t\tvar diff = g_temp.lastMousePos - g_temp.startMousePos;\n\t\tvar innerPos = g_temp.startInnerPos + diff;\n\t\tvar direction = (diff > 0) ? \"prev\":\"next\";\n\t\tvar innerSize = g_functions.getElementSize(g_objInner).width;\n\t\t\n\t\t//slow down when off limits\n\t\tif(innerPos > 0 && direction == \"prev\"){\n\t\t\tinnerPos = innerPos / 3;\n\t\t}\n\t\t\n\t\tif(innerPos < -innerSize && direction == \"next\"){\n\t\t\tinnerPos = g_temp.startInnerPos + diff / 3;\n\t\t}\n\t\t\n\t\tsetInnerPos(innerPos);\n\t}\n\t\n\t\n\t/**\n\t * on touch end\n\t * change panes or return to current pane\n\t */\n\tfunction onTouchEnd(event){\n\t\t\n\t\tif(g_temp.touchActive == false)\n\t\t\treturn(true);\n\t\t\n\t\t//event.preventDefault();\n\t\tg_temp.touchActive = false;\n\t\t\n\t\tscrollToNeerestTile();\n\t\t\n\t\tt.unpauseAutoplay();\n\t}\n\t\n\t/**\n\t * pause the playing\n\t */\n\tfunction onMouseEnter(event){\n\t\t\n\t\tif(g_options.carousel_autoplay_pause_onhover == false)\n\t\t\treturn(true);\n\t\t\n\t\tif(g_temp.isPlayMode == true && g_temp.isPaused == false)\n\t\t\tt.pauseAutoplay();\n\t}\n\t\n\t/**\n\t * start the playing again\n\t */\n\tfunction onMouseLeave(event){\n\t\t\n\t\tif(g_options.carousel_autoplay_pause_onhover == false)\n\t\t\treturn(true);\n\t\t\n\t\tt.unpauseAutoplay();\n\t}\n\t\n\t\n\t/**\n\t * init panel events\n\t */\n\tfunction initEvents(){\n\t\t\t\t\n\t\tg_objTileDesign.initEvents();\n\t\t\n\t\t//touch drag events\n\t\t//slider mouse down - drag start\n\t\tg_objCarouselWrapper.bind(\"mousedown touchstart\",onTouchStart);\n\t\t\n\t\t//on body move\n\t\tjQuery(\"body\").bind(\"mousemove touchmove\",onTouchMove);\n\t\t\n\t\t//on body mouse up - drag end\n\t\tjQuery(window).add(\"body\").bind(\"mouseup touchend\", onTouchEnd);\n\t\t\n\t\tg_objCarouselWrapper.hover(onMouseEnter, onMouseLeave);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * destroy the carousel events\n\t */\n\tthis.destroy = function(){\n\t\t\n\t\tif(g_temp.handle)\n\t\t\tclearInterval(g_temp.handle);\n\t\t\n\t\tg_objThis.off(t.events.START_PLAY);\t\t\n\t\tg_objThis.off(t.events.STOP_PLAY);\t\t\n\t\t\n\t\t//touch drag events\n\t\t//slider mouse down - drag start\n\t\tg_objCarouselWrapper.unbind(\"mousedown\");\n\t\tg_objCarouselWrapper.unbind(\"touchstart\");\n\t\t\n\t\t//on body move\n\t\tjQuery(\"body\").unbind(\"mousemove\");\n\t\tjQuery(\"body\").unbind(\"touchmove\");\n\t\t\n\t\t//on body mouse up - drag end\n\t\tjQuery(window).add(\"body\").unbind(\"mouseup\").unbind(\"touchend\");\n\t\t\n\t\tg_objCarouselWrapper.off(\"mouseenter\").off(\"mouseleave\");\n\t\t\n\t\tg_objTileDesign.destroy();\n\t}\n\n\t\n\t/**\n\t * init function for avia controls\n\t */\n\tthis.init = function(gallery, customOptions, width){\n\t\tif(width)\n\t\t\tthis.setMaxWidth(width);\n\t\t\n\t\tinit(gallery, customOptions);\n\t}\n\n\t\n\t/**\n\t * set the width\n\t */\n\tthis.setMaxWidth = function(width){\n\t\t\n\t\tg_temp.carouselMaxWidth = width;\n\t}\n\t\n\t\n\t/**\n\t * set html\n\t */\n\tthis.setHtml = function(objParent){\n\t\tsetHtml(objParent);\n\t}\n\t\n\t/**\n\t * get the carousel element\n\t */\n\tthis.getElement = function(){\n\t\treturn g_objCarouselWrapper;\n\t}\n\t\n\t/**\n\t * get tile design object\n\t */\n\tthis.getObjTileDesign = function(){\n\t\treturn(g_objTileDesign);\n\t}\n\t\n\t\n\t/**\n\t * get estimated height\n\t */\n\tthis.getEstimatedHeight = function(){\n\t\tvar height = g_options.tile_height + g_options.carousel_padding * 2;\n\t\treturn(height);\n\t}\n\t\n\t\n\t/**\n\t * set html and properties\n\t */\t\n\tthis.run = function(){\n\t\trun();\n\t}\n\t\n\t\n\t/**\n\t * scroll to right\n\t */\n\tthis.scrollRight = function(tilesToScroll){\n\t\t\n\t\tif(!tilesToScroll || typeof tilesToScroll == \"object\")\n\t\t\tvar tilesToScroll = g_options.carousel_navigation_numtiles;\n\n\t\tvar numTilesInCarousel = getNumTilesInCarousel();\n\t\tif(tilesToScroll > numTilesInCarousel)\n\t\t\ttilesToScroll = numTilesInCarousel;\n\t\t\n\t\tvar numPrev = g_temp.numCurrent - tilesToScroll;\n\t\tif(numPrev <=0)\n\t\t\tnumPrev = 0;\n\t\t\n\t\tscrollToTile(numPrev);\n\t}\n\t\n\t\n\t/**\n\t * scroll to left\n\t */\n\tthis.scrollLeft = function(tilesToScroll){\n\t\t\t\t\n\t\tif(!tilesToScroll || typeof tilesToScroll == \"object\")\n\t\t\tvar tilesToScroll = g_options.carousel_navigation_numtiles;\n\t\t\n\t\tvar numTilesInCarousel = getNumTilesInCarousel();\n\t\tif(tilesToScroll > numTilesInCarousel)\n\t\t\ttilesToScroll = numTilesInCarousel;\n\t\t\n\t\tvar numTiles = getNumTiles();\n\t\t\n\t\tvar numNext = g_temp.numCurrent + tilesToScroll;\n\t\tif(numNext >= numTiles)\n\t\t\tnumNext = numTiles-1;\n\t\n\t\tscrollToTile(numNext);\n\t}\n\t\n\t/**\n\t * set scroll left button\n\t */\n\tthis.setScrollLeftButton = function(objButton){\n\t\tg_functions.setButtonMobileReady(objButton);\n\t\tg_functions.setButtonOnClick(objButton, t.scrollLeft);\n\t}\n\t\n\t\n\t/**\n\t * set scroll right button\n\t */\n\tthis.setScrollRightButton = function(objButton){\n\t\tg_functions.setButtonMobileReady(objButton);\n\t\tg_functions.setButtonOnClick(objButton, t.scrollRight);\n\t}\n\t\n\t\n\t/**\n\t * set scroll right button\n\t */\n\tthis.setPlayPauseButton = function(objButton){\n\t\tg_functions.setButtonMobileReady(objButton);\n\t\t\n\t\tif(g_temp.isPlayMode == true && g_temp.isPaused == false){\n\t\t\tobjButton.addClass(\"ug-pause-icon\");\t\t\t\n\t\t}\n\t\t\n\t\tg_objThis.on(t.events.START_PLAY, function(){\n\t\t\tobjButton.addClass(\"ug-pause-icon\");\n\t\t});\n\t\t\n\t\tg_objThis.on(t.events.STOP_PLAY, function(){\n\t\t\tobjButton.removeClass(\"ug-pause-icon\");\n\t\t});\n\t\t\n\t\tg_functions.setButtonOnClick(objButton, function(){\n\t\t\t\t\n\t\t\t\tif(g_temp.isPlayMode == false || g_temp.isPaused == true)\t\t\t\t\t\n\t\t\t\t\tt.startAutoplay();\n\t\t\t\telse\n\t\t\t\t\tt.stopAutoplay();\n\t\t\t\t\n\t\t});\n\t}\n\t\n\t\n\t/**\n\t * return if passed some significant movement\n\t */\n\tfunction isApproveTileClick(){\n\t\t\n\t\tvar passedTime = g_temp.lastTime - g_temp.startTime;\t\t\n\t\tvar passedDistanceAbs = Math.abs(g_temp.lastMousePos - g_temp.startMousePos);\n\t\t\n\t\tif(passedTime > 300)\n\t\t\treturn(false);\n\t\t\n\t\tif(passedDistanceAbs > 30)\n\t\t\treturn(false);\n\t\t\n\t\treturn(true);\n\t}\n\t\n\t\n}\n\n\n\n/**\n tabs panel class addon to unite gallery\n */\nfunction UGTabs(){\n\t\n\tvar t = this, g_objThis = jQuery(this),g_objGallery;\n\tvar g_gallery = new UniteGalleryMain(), g_functions = new UGFunctions();\n\tvar g_objTabs, g_objSelect;\n\t\n\n\tvar g_options = {\n\t\ttabs_type:\"tabs\",\t\t\t\t\t//tabs type: tabs, select\n\t\ttabs_container: \"#ug_tabs\",\t\t\t//tabs container\n\t\ttabs_class_selected: \"ug-tab-selected\"\n\t};\n\t\n\tthis.events = {\n\t\t\n\t};\n\t\n\t\n\t/**\n\t * init tabs function\n\t */\n\tfunction initTabs(gallery, customOptions){\n\t\tg_gallery = gallery;\n\t\t\n\t\tg_objGallery = jQuery(g_gallery);\n\t\t\n\t\tg_options = jQuery.extend(g_options, customOptions);\n\t\t\n\t\tif(g_options.tabs_type == \"select\")\n\t\t\tg_objSelect = jQuery(g_options.tabs_container);\n\t\telse\n\t\t\tg_objTabs = jQuery(g_options.tabs_container + \" .ug-tab\");\n\t\t\n\t}\n\t\n\t\n\t\n\t/**\n\t * run the tabs\n\t */\n\tfunction runTabs(){\n\t\t\t\t\n\t\tinitEvents();\n\t}\n\t\n\t\n\t/**\n\t * request new gallery items\n\t */\n\tfunction requestGalleryItems(catid){\n\t\t\n\t\tg_gallery.requestNewItems(catid);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * on tab click\n\t */\n\tfunction onTabClick(){\n\t\t\n\t\tvar classSelected = g_options.tabs_class_selected;\n\t\t\n\t\tvar objTab = jQuery(this);\n\t\tif(objTab.hasClass(classSelected))\n\t\t\treturn(true);\n\t\t\n\t\tg_objTabs.not(objTab).removeClass(classSelected);\n\t\tobjTab.addClass(classSelected);\n\t\t\n\t\tvar catID = objTab.data(\"catid\");\n\t\tif(!catID)\n\t\t\treturn(true);\n\t\t\n\t\trequestGalleryItems(catID);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * on select change\n\t */\n\tfunction onSelectChange(){\n\t\tvar objSelect = jQuery(this);\n\t\tvar catID = objSelect.val();\n\t\t\n\t\tif(!catID)\n\t\t\treturn(true);\n\t\t\n\t\trequestGalleryItems(catID);\n\t}\n\t\n\t\n\t/**\n\t * init tabs events\n\t */\n\tfunction initEvents(){\n\t\t\n\t\tif(g_options.tabs_type == \"select\")\n\t\t\tg_objSelect.change(onSelectChange);\n\t\telse\n\t\t\tg_objTabs.click(onTabClick);\n\t}\n\t\n\t/**\n\t * destroy\n\t */\n\tthis.destroy = function(){\n\t\t\n\t\tif(g_objSelect)\n\t\t\tg_objSelect.off(\"change\");\n\t\t\n\t\tif(g_objTabs)\n\t\t\tg_objTabs.off(\"click\");\n\t}\n\t\n\t\n\t/**\n\t * outer init function, move to inner init\n\t */\n\tthis.init = function(gallery, customOptions){\n\t\tinitTabs(gallery, customOptions);\n\t}\n\t\n\t\n\t/**\n\t * run the tabs\n\t */\n\tthis.run = function(){\n\t\t\n\t\trunTabs();\n\t}\n\t\n\t\n}\n\n\n/**\n * API Class\n * addon to Unite gallery\n */\nfunction UG_API(gallery){\n\t\n\tvar t = this, g_objThis = jQuery(t);\n\tvar g_gallery = new UniteGalleryMain(), g_objGallery;\n\tvar g_arrEvents = [];\n\t\n\tg_gallery = gallery;\n\tg_objGallery = jQuery(gallery);\n\t\n\t\n\tthis.events = {\n\t\t\tAPI_INIT_FUNCTIONS:\"api_init\",\n\t\t\tAPI_ON_EVENT:\"api_on_event\"\n\t}\n\t\n\t\n\t/**\n\t * get item data for output\n\t */\n\tfunction convertItemDataForOutput(item){\n\t\t\n\t\tvar output = {\n\t\t\t\tindex: item.index,\n\t\t\t\ttitle: item.title,\n\t\t\t\tdescription: item.description,\n\t\t\t\turlImage: item.urlImage,\n\t\t\t\turlThumb: item.urlThumb\n\t\t\t};\n\t\t\t\n\t\t\t//add aditional variables to the output\n\t\t\tvar addData = item.objThumbImage.data();\n\t\t\t\n\t\t\tfor(var key in addData){\n\t\t\t\tswitch(key){\n\t\t\t\t\tcase \"image\":\n\t\t\t\t\tcase \"description\":\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\toutput[key] = addData[key];\n\t\t\t}\n\t\t\t\n\t\t\treturn(output);\n\t}\n\t\n\t\n\t/**\n\t * event handling function\n\t */\n\tthis.on = function(event, handlerFunction, notCache){\n\t\t\n\t\t//remember cache\n\t\tif(notCache !== true){\n\t\t\tg_arrEvents.push({event:event,func:handlerFunction});\n\t\t}\n\t\t\n\t\tswitch(event){\n\t\t\tcase \"item_change\":\n\t\t\t\t\n\t\t\t\tg_objGallery.on(g_gallery.events.ITEM_CHANGE, function(){\n\t\t\t\t\t\tvar currentItem = g_gallery.getSelectedItem();\n\t\t\t\t\t\tvar output = convertItemDataForOutput(currentItem);\n\t\t\t\t\t\thandlerFunction(output.index, output);\n\t\t\t\t});\n\t\t\t\t\n\t\t\tbreak;\n\t\t\tcase \"resize\":\n\t\t\t\tg_objGallery.on(g_gallery.events.SIZE_CHANGE, handlerFunction);\n\t\t\tbreak;\n\t\t\tcase \"enter_fullscreen\":\n\t\t\t\tg_objGallery.on(g_gallery.events.ENTER_FULLSCREEN, handlerFunction);\t\t\t\t\n\t\t\tbreak;\n\t\t\tcase \"exit_fullscreen\":\n\t\t\t\tg_objGallery.on(g_gallery.events.EXIT_FULLSCREEN, handlerFunction);\t\t\t\t\n\t\t\tbreak;\n\t\t\tcase \"play\":\n\t\t\t\tg_objGallery.on(g_gallery.events.START_PLAY, handlerFunction);\t\t\t\t\n\t\t\tbreak;\n\t\t\tcase \"stop\":\n\t\t\t\tg_objGallery.on(g_gallery.events.STOP_PLAY, handlerFunction);\t\t\t\t\n\t\t\tbreak;\n\t\t\tcase \"pause\":\n\t\t\t\tg_objGallery.on(g_gallery.events.PAUSE_PLAYING, handlerFunction);\t\t\t\t\n\t\t\tbreak;\n\t\t\tcase \"continue\":\n\t\t\t\tg_objGallery.on(g_gallery.events.CONTINUE_PLAYING, handlerFunction);\n\t\t\tbreak;\n\t\t\tcase \"open_lightbox\":\n\t\t\t\tg_objGallery.on(g_gallery.events.OPEN_LIGHTBOX, handlerFunction);\n\t\t\tbreak;\n\t\t\tcase \"close_lightbox\":\n\t\t\t\tg_objGallery.on(g_gallery.events.CLOSE_LIGHTBOX, handlerFunction);\n\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tif(console)\n\t\t\t\t\tconsole.log(\"wrong api event: \" + event);\n\t\t\tbreak;\n\t\t}\n\t\t\n\t\tg_objGallery.trigger(t.events.API_ON_EVENT, [event, handlerFunction]);\n\t}\n\t\n\t\n\t/**\n\t * start playing \n\t */\n\tthis.play = function(){\t\t\n\t\tg_gallery.startPlayMode();\t\t\n\t}\n\t\n\t\n\t/**\n\t * stop playing\n\t */\n\tthis.stop = function(){\n\t\tg_gallery.stopPlayMode();\n\t}\n\t\n\t\n\t/**\n\t * toggle playing\n\t */\n\tthis.togglePlay = function(){\n\t\tg_gallery.togglePlayMode();\n\t}\n\t\n\t\n\t/**\n\t * enter fullscreen\n\t */\n\tthis.enterFullscreen = function(){\n\t\tg_gallery.toFullScreen();\n\t}\n\t\n\t/**\n\t * exit fullscreen\n\t */\n\tthis.exitFullscreen = function(){\n\t\tg_gallery.exitFullScreen();\n\t}\n\t\n\t/**\n\t * toggle fullscreen\n\t */\n\tthis.toggleFullscreen = function(){\n\t\t\n\t\tg_gallery.toggleFullscreen();\t\t\n\t}\n\t\n\t\n\t/**\n\t * reset zoom\n\t */\n\tthis.resetZoom = function(){\n\t\tvar objSlider = g_gallery.getObjSlider();\n\t\tif(!objSlider)\n\t\t\treturn(false);\n\t\t\n\t\tobjSlider.zoomBack();\n\t}\n\t\n\t\n\t/**\n\t * zoom in\n\t */\n\tthis.zoomIn = function(){\n\t\t\n\t\tvar objSlider = g_gallery.getObjSlider();\n\t\tif(!objSlider)\n\t\t\treturn(false);\n\t\t\n\t\tobjSlider.zoomIn();\t\t\n\t}\n\n\t/**\n\t * zoom in\n\t */\n\tthis.zoomOut = function(){\n\t\t\n\t\tvar objSlider = g_gallery.getObjSlider();\n\t\tif(!objSlider)\n\t\t\treturn(false);\n\t\t\n\t\tobjSlider.zoomOut();\t\t\n\t}\n\t\n\t/**\n\t * next item\n\t */\n\tthis.nextItem = function(){\n\t\tg_gallery.nextItem();\n\t}\n\t\n\t\n\t/**\n\t * prev item\n\t */\n\tthis.prevItem = function(){\n\t\tg_gallery.prevItem();\n\t}\n\t\n\t/**\n\t * go to some item by index (0-numItems)\n\t */\n\tthis.selectItem = function(numItem){\n\t\t\n\t\tg_gallery.selectItem(numItem);\n\t\n\t}\n\t\n\t\n\t/**\n\t * resize the gallery to some width (height).\n\t */\n\tthis.resize = function(width, height){\n\t\t\n\t\tif(height)\n\t\t\tg_gallery.resize(width, height);\n\t\telse\n\t\t\tg_gallery.resize(width);\n\t}\n\t\n\t\n\t/**\n\t * get some item by index\n\t */\n\tthis.getItem = function(numItem){\n\t\t\n\t\tvar data = g_gallery.getItem(numItem);\n\t\tvar output = convertItemDataForOutput(data);\n\t\t\n\t\treturn(output);\n\t}\n\t\n\t\n\t/**\n\t * get number of items in the gallery\n\t */\n\tthis.getNumItems = function(){\n\t\tvar numItems = g_gallery.getNumItems();\n\t\treturn(numItems);\n\t}\n\t\n\t/**\n\t * refresh gallery with another options\n\t */\n\tthis.reloadGallery = function(customOptions){\n\t\tif(!customOptions)\n\t\t\tvar customOptions = {};\n\t\t\n\t\tg_gallery.run(null, customOptions);\n\t\t\n\t\t//restore events:\n\t\tg_arrEvents.map(function(obj){\n\t\t\tt.on(obj.event,obj.func,true);\n\t\t});\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * destroy the gallery\n\t */\n\tthis.destroy = function(){\n\t\tg_gallery.destroy();\n\t}\n\t\n\t//trigger api on init event\n\tg_objGallery.trigger(t.events.API_INIT_FUNCTIONS, t);\n\t\n}\n\n"],"sourceRoot":"scripts/"}